  Mon Sep 27 2021  9:39                                                Page 1


                     ***************************************
                     **      WDC 65C816 Macro Assembler   **
                     **                                   **
                     **     Version 1.00- Aug 10 2021    **
                     ***************************************

     1                        ;:ts=8
     2             00000001   R0	equ	1
     3             00000005   R1	equ	5
     4             00000009   R2	equ	9
     5             0000000D   R3	equ	13
     6                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\drivers\DRIVER_FMXSDCard.c",0
     7                        ;#include "fxos.h"
     8                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",0
     9                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",0
    10                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stddef.h",0
    11                        	.line	88
    12                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",43
    13                        	.stag	fake1_,32,1
    14                        	.member	quot,0,5,8,16
    15                        	.member	rem,16,5,8,16
    16                        	.eos
    17                        	.stag	fake2_,64,2
    18                        	.member	quot,0,7,8,32
    19                        	.member	rem,32,7,8,32
    20                        	.eos
    21                        	.stag	int_sqrt,32,3
    22                        	.member	sqrt,0,16,8,16
    23                        	.member	frac,16,16,8,16
    24                        	.eos
    25                        	.line	205
    26                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",4
    27                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    string.h",0
    28                        	.line	134
    29                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",5
    30                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    ctype.h",0
    31                        	.line	103
    32                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",6
    33                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
    34                        	.stag	_fx_bytebits,8,4
    35                        	.member	b7,0,14,17,1
    36                        	.member	b6,1,14,17,1
    37                        	.member	b5,2,14,17,1
    38                        	.member	b4,3,14,17,1
    39                        	.member	b3,4,14,17,1
    40                        	.member	b2,5,14,17,1
    41                        	.member	b1,6,14,17,1
  Mon Sep 27 2021  9:39                                                Page 2


    42                        	.member	b0,7,14,17,1
    43                        	.eos
    44                        	.stag	_fx_node,384,5
    45                        	.member	type,0,14,8,8
    46                        	.member	Reserved0,8,14,8,8
    47                        	.member	data,16,129,8,32
    48                        	.member	last,48,138,8,32,5
    49                        	.member	next,80,138,8,32,5
    50                        	.member	name,112,110,8,0,32
    51                        	.member	Reserved1,368,16,8,16
    52                        	.eos
    53                        	.stag	_fx_nodelist,96,6
    54                        	.member	listhead,0,138,8,32,5
    55                        	.member	listData,32,129,8,32
    56                        	.member	deallocator,64,641,8,32
    57                        	.eos
    58                        	.stag	_fx_queue,80,7
    59                        	.member	count,0,5,8,16
    60                        	.member	front,16,138,8,32,5
    61                        	.member	rear,48,138,8,32,5
    62                        	.eos
    63                        	.stag	fake8_,32,8
    64                        	.member	subsystem,0,14,8,8
    65                        	.member	level,8,14,8,8
    66                        	.member	error,16,16,8,16
    67                        	.eos
    68                        	.stag	_fx_process_signal,16,9
    69                        	.member	cbSize,0,16,8,16
    70                        	.eos
    71                        	.stag	_fx_semaphore,16,10
    72                        	.member	reserved,0,5,8,16
    73                        	.eos
    74                        	.stag	_fx_fileBlock,552,11
    75                        	.member	openCount,0,16,8,16
    76                        	.member	lockCount,16,16,8,16
    77                        	.member	dirty,32,14,8,8
    78                        	.member	fileBuffer,40,110,8,0,64
    79                        	.eos
    80                        	.stag	_fx_irq_data,48,12
    81                        	.member	line,0,5,8,16
    82                        	.member	keycode,16,142,8,32
    83                        	.eos
    84                        	.stag	_task,48,13
    85                        	.member	SPL,0,14,8,8
    86                        	.member	SPH,8,14,8,8
    87                        	.member	pstack,16,142,8,32
    88                        	.eos
    89                        	.stag	_task_stack,32,14
    90                        	.member	SS,0,142,8,32
    91                        	.eos
    92                        	.stag	int_regs,104,15
    93                        	.member	PB,0,14,8,8
    94                        	.member	PH,8,14,8,8
    95                        	.member	PL,16,14,8,8
    96                        	.member	PP,24,14,8,8
    97                        	.member	DB,32,14,8,8
    98                        	.member	DH,40,14,8,8
    99                        	.member	DL,48,14,8,8
  Mon Sep 27 2021  9:39                                                Page 3


   100                        	.member	AH,56,14,8,8
   101                        	.member	AL,64,14,8,8
   102                        	.member	XH,72,14,8,8
   103                        	.member	XL,80,14,8,8
   104                        	.member	YH,88,14,8,8
   105                        	.member	YL,96,14,8,8
   106                        	.eos
   107                        	.stag	_fx_eventMessage,312,16
   108                        	.member	src,0,18,8,32
   109                        	.member	dest,32,18,8,32
   110                        	.member	type,64,16,8,16
   111                        	.member	hwnd,80,129,8,32
   112                        	.member	pheap,112,129,8,32
   113                        	.member	msgTime,144,18,8,32
   114                        	.member	data,176,110,8,0,16
   115                        	.member	attr,304,14,8,8
   116                        	.eos
   117                        	.stag	_fx_cmdMessage,312,17
   118                        	.member	src,0,18,8,32
   119                        	.member	dest,32,18,8,32
   120                        	.member	type,64,16,8,16
   121                        	.member	hwnd,80,129,8,32
   122                        	.member	pheap,112,129,8,32
   123                        	.member	msgTime,144,18,8,32
   124                        	.member	cmdCId,176,16,8,16
   125                        	.member	cmdMId,192,16,8,16
   126                        	.member	parameter1,208,18,8,32
   127                        	.member	parameter2,240,18,8,32
   128                        	.member	parameter3,272,18,8,32
   129                        	.member	attr,304,14,8,8
   130                        	.eos
   131                        	.stag	_fx_console_ctl,448,18
   132                        	.member	maxCols,0,5,8,16
   133                        	.member	maxRows,16,5,8,16
   134                        	.member	curX,32,5,8,16
   135                        	.member	curY,48,5,8,16
   136                        	.member	fgColor,64,5,8,16
   137                        	.member	bgColor,80,5,8,16
   138                        	.member	mode,96,14,8,8
   139                        	.member	kbBuffer,104,101,8,0,16
   140                        	.member	screenBuffer,360,142,8,32
   141                        	.member	desktopMode,392,14,8,8
   142                        	.member	lastMouseButton,400,5,8,16
   143                        	.member	lastMouseX,416,5,8,16
   144                        	.member	lastMouseY,432,5,8,16
   145                        	.eos
   146                        	.stag	_fx_desktop_ctl,392,19
   147                        	.member	desktopMode,0,14,8,8
   148                        	.member	cursorCtl,8,5,8,16
   149                        	.member	cursorState,24,5,8,16
   150                        	.member	backgroundColor,40,5,8,16
   151                        	.member	foregroundColor,56,5,8,16
   152                        	.member	menuMode,72,5,8,16
   153                        	.member	lastMouseButton,88,5,8,16
   154                        	.member	lastMouseX,104,5,8,16
   155                        	.member	lastMouseY,120,5,8,16
   156                        	.member	currentDiskName,136,142,8,32
   157                        	.member	diskNodes,168,129,8,32
  Mon Sep 27 2021  9:39                                                Page 4


   158                        	.member	titleNodes,200,129,8,32
   159                        	.member	menuNodes,232,129,8,32
   160                        	.member	iconNodes,264,129,8,32
   161                        	.member	windowNodes,296,129,8,32
   162                        	.member	fontNodes,328,129,8,32
   163                        	.member	wndProc,360,138,8,32,6
   164                        	.eos
   165                        	.stag	_fx_process,800,20
   166                        	.member	cbSize,0,5,8,16
   167                        	.member	procId,16,18,8,32
   168                        	.member	parentId,48,18,8,32
   169                        	.member	ctx,80,129,8,32
   170                        	.member	userId,112,16,8,16
   171                        	.member	status,128,16,8,16
   172                        	.member	foregroundActive,144,14,8,8
   173                        	.member	tls,152,1121,8,32,8
   174                        	.member	commandLine,408,142,8,32
   175                        	.member	semaphores,440,138,8,32,6
   176                        	.member	fileHandles,472,138,8,32,6
   177                        	.member	pathList,504,138,8,32,6
   178                        	.member	resources,536,138,8,32,6
   179                        	.member	timerAware,568,14,8,8
   180                        	.member	timerTicks,576,112,8,0,2
   181                        	.member	timerTickCount,608,112,8,0,2
   182                        	.member	kernelError,640,10,8,32,8
   183                        	.member	consoleCtl,672,138,8,32,18
   184                        	.member	desktopCtl,704,138,8,32,19
   185                        	.member	execProc,736,641,8,32
   186                        	.member	startupArgs,768,129,8,32
   187                        	.eos
   188                        	.stag	_fxProcessMessage,112,21
   189                        	.member	src,0,18,8,32
   190                        	.member	dest,32,18,8,32
   191                        	.member	type,64,16,8,16
   192                        	.member	processInfo,80,138,8,32,20
   193                        	.eos
   194                        	.stag	_k_key_state,112,22
   195                        	.member	scanCode,0,14,8,8
   196                        	.member	isShifted,8,14,8,8
   197                        	.member	isAlt,16,14,8,8
   198                        	.member	isExtended,24,14,8,8
   199                        	.member	isCapsLock,32,14,8,8
   200                        	.member	isNumLock,40,14,8,8
   201                        	.member	isScrollLock,48,14,8,8
   202                        	.member	keyChar,56,16,8,16
   203                        	.member	scanTime,72,18,8,32
   204                        	.member	ledStatus,104,14,8,8
   205                        	.eos
   206                        	.stag	_fx_property,384,23
   207                        	.member	name,0,110,8,0,16
   208                        	.member	value,128,110,8,0,32
   209                        	.eos
   210                        	.utag	_24bitPointer,32,24
   211                        	.member	address,0,142,11,32
   212                        	.member	bytes,0,110,11,0,4
   213                        	.eos
   214                        	.stag	_PointStruct,32,25
   215                        	.member	x,0,5,8,16
  Mon Sep 27 2021  9:39                                                Page 5


   216                        	.member	y,16,5,8,16
   217                        	.eos
   218                        	.stag	_RectStruct,112,26
   219                        	.member	x,0,5,8,16
   220                        	.member	y,16,5,8,16
   221                        	.member	z,32,18,8,32
   222                        	.member	width,64,5,8,16
   223                        	.member	height,80,5,8,16
   224                        	.member	attr,96,5,8,16
   225                        	.eos
   226                        	.stag	fake27_,96,27
   227                        	.member	name,0,142,8,32
   228                        	.member	topLeft,32,10,8,32,25
   229                        	.member	bottomRight,64,10,8,32,25
   230                        	.eos
   231                        	.stag	fake28_,112,28
   232                        	.member	x,0,5,8,16
   233                        	.member	y,16,5,8,16
   234                        	.member	z,32,5,8,16
   235                        	.member	width,48,5,8,16
   236                        	.member	height,64,5,8,16
   237                        	.member	data,80,18,8,32
   238                        	.eos
   239                        	.stag	_k_WindowClass,272,29
   240                        	.member	cbSize,0,16,8,16
   241                        	.member	style,16,16,8,16
   242                        	.member	styleEx,32,16,8,16
   243                        	.member	pWndProc,48,654,8,32
   244                        	.member	hInstance,80,129,8,32
   245                        	.member	hIcon,112,129,8,32
   246                        	.member	hCursor,144,129,8,32
   247                        	.member	hbrBackground,176,129,8,32
   248                        	.member	lpszMenuName,208,142,8,32
   249                        	.member	lpszClassName,240,142,8,32
   250                        	.eos
   251                        	.stag	_ClickableRect,152,30
   252                        	.member	area,0,10,8,112,26
   253                        	.member	z,112,18,8,32
   254                        	.member	enabled,144,14,8,8
   255                        	.eos
   256                        	.stag	_NCClickableRect,136,31
   257                        	.member	area,0,10,8,112,26
   258                        	.member	msgType,112,16,8,16
   259                        	.member	enabled,128,14,8,8
   260                        	.eos
   261                        	.stag	_DragData,216,32
   262                        	.member	area,0,10,8,112,26
   263                        	.member	xoffset,112,5,8,16
   264                        	.member	yoffset,128,5,8,16
   265                        	.member	msgType,144,16,8,16
   266                        	.member	ncAction,160,16,8,16
   267                        	.member	isDrag,176,14,8,8
   268                        	.member	isResize,184,14,8,8
   269                        	.member	canDrag,192,14,8,8
   270                        	.member	canDrop,200,14,8,8
   271                        	.member	didDrag,208,14,8,8
   272                        	.eos
   273                        	.stag	_k_WindowStruct,3904,33
  Mon Sep 27 2021  9:39                                                Page 6


   274                        	.member	cbSize,0,16,8,16
   275                        	.member	style,16,18,8,32
   276                        	.member	styleEx,48,18,8,32
   277                        	.member	win_id,80,5,8,16
   278                        	.member	win_x,96,5,8,16
   279                        	.member	win_y,112,5,8,16
   280                        	.member	win_width,128,5,8,16
   281                        	.member	win_height,144,5,8,16
   282                        	.member	win_xoffset,160,5,8,16
   283                        	.member	win_yoffset,176,5,8,16
   284                        	.member	win_cxoffset,192,5,8,16
   285                        	.member	win_cyoffset,208,5,8,16
   286                        	.member	wndRect,224,10,8,112,26
   287                        	.member	clientRect,336,10,8,112,26
   288                        	.member	nonclientGadgets,448,106,8,0,31,16
   289                        	.member	clickable,2624,129,8,32
   290                        	.member	win_title,2656,110,8,0,32
   291                        	.member	Reserved0,2912,16,8,16
   292                        	.member	win_class,2928,110,8,0,16
   293                        	.member	win_class_name,3056,110,8,0,32
   294                        	.member	nBitmapLayer,3312,16,8,16
   295                        	.member	bgRegion,3328,129,8,32
   296                        	.member	procid,3360,18,8,32
   297                        	.member	pWndClass,3392,138,8,32,29
   298                        	.member	pParentWindow,3424,129,8,32
   299                        	.member	hMenu,3456,129,8,32
   300                        	.member	hPointer,3488,129,8,32
   301                        	.member	hBackground,3520,129,8,32
   302                        	.member	pChildWindows,3552,138,8,32,6
   303                        	.member	pChildHitList,3584,138,8,32,6
   304                        	.member	isVisible,3616,14,8,8
   305                        	.member	windowData,3624,129,8,32
   306                        	.member	clientData,3656,1121,8,32,6
   307                        	.member	isClosed,3848,14,8,8
   308                        	.member	isClosing,3856,14,8,8
   309                        	.member	isDesktop,3864,14,8,8
   310                        	.member	clickableNode,3872,138,8,32,5
   311                        	.eos
   312                        	.stag	_k_WindowStructEx,3880,34
   313                        	.member	cbSize,0,16,8,16
   314                        	.member	style,16,18,8,32
   315                        	.member	styleEx,48,18,8,32
   316                        	.member	win_id,80,5,8,16
   317                        	.member	win_x,96,5,8,16
   318                        	.member	win_y,112,5,8,16
   319                        	.member	win_width,128,5,8,16
   320                        	.member	win_height,144,5,8,16
   321                        	.member	win_xoffset,160,5,8,16
   322                        	.member	win_yoffset,176,5,8,16
   323                        	.member	win_cxoffset,192,5,8,16
   324                        	.member	win_cyoffset,208,5,8,16
   325                        	.member	wndRect,224,10,8,112,26
   326                        	.member	clientRect,336,10,8,112,26
   327                        	.member	nonclientGadgets,448,106,8,0,31,16
   328                        	.member	clickable,2624,129,8,32
   329                        	.member	win_title,2656,110,8,0,32
   330                        	.member	Reserved0,2912,16,8,16
   331                        	.member	win_class,2928,110,8,0,16
  Mon Sep 27 2021  9:39                                                Page 7


   332                        	.member	nBitmapLayer,3056,16,8,16
   333                        	.member	procid,3072,18,8,32
   334                        	.member	pWndClass,3104,138,8,32,29
   335                        	.member	pParentWindow,3136,129,8,32
   336                        	.member	hMenu,3168,129,8,32
   337                        	.member	hPointer,3200,129,8,32
   338                        	.member	hBackground,3232,129,8,32
   339                        	.member	pChildWindows,3264,138,8,32,6
   340                        	.member	pChildHitList,3296,138,8,32,6
   341                        	.member	isVisible,3328,14,8,8
   342                        	.member	windowData,3336,129,8,32
   343                        	.member	clientData,3368,1121,8,32,4
   344                        	.member	isClosed,3496,14,8,8
   345                        	.member	hWnd,3504,129,8,32
   346                        	.member	localRect,3536,10,8,112,26
   347                        	.member	globalRect,3648,10,8,112,26
   348                        	.member	clientOffsetRect,3760,10,8,112,26
   349                        	.member	isDesktop,3872,14,8,8
   350                        	.eos
   351                        	.stag	_FontMetric,32,35
   352                        	.member	width,0,5,8,16
   353                        	.member	height,16,5,8,16
   354                        	.eos
   355                        	.stag	_MenuStruct,280,36
   356                        	.member	cx,0,5,8,16
   357                        	.member	cy,16,5,8,16
   358                        	.member	width,32,5,8,16
   359                        	.member	height,48,5,8,16
   360                        	.member	fcolor,64,14,8,8
   361                        	.member	bcolor,72,14,8,8
   362                        	.member	chromeLeft,80,14,8,8
   363                        	.member	chromeRight1,88,14,8,8
   364                        	.member	chromeRight2,96,14,8,8
   365                        	.member	hFont,104,129,8,32
   366                        	.member	itemId,136,16,8,16
   367                        	.member	pCaption,152,142,8,32
   368                        	.member	subMenus,184,138,8,32,6
   369                        	.member	pBackground,216,129,8,32
   370                        	.member	hWndOwner,248,129,8,32
   371                        	.eos
   372                        	.stag	fake37_,160,37
   373                        	.member	menuId,0,16,8,16
   374                        	.member	caption,16,142,8,32
   375                        	.member	rect,48,10,8,112,26
   376                        	.eos
   377                        	.stag	fake38_,5152,38
   378                        	.member	pParent,0,138,8,32,33
   379                        	.member	rect,32,10,8,112,26
   380                        	.member	captions,144,1134,8,32,24
   381                        	.member	chrome,912,110,8,0,24
   382                        	.member	ids,1104,112,8,0,24
   383                        	.member	clickable,1488,106,8,0,30,24
   384                        	.member	selected,5136,16,8,16
   385                        	.eos
   386                        	.stag	_fx_button_t,96,39
   387                        	.member	pCaption,0,142,8,32
   388                        	.member	cCaption,32,16,8,16
   389                        	.member	data,48,129,8,32
  Mon Sep 27 2021  9:39                                                Page 8


   390                        	.member	captionPixelWidth,80,16,8,16
   391                        	.eos
   392                        	.stag	_fx_scrollbar_t,240,40
   393                        	.member	min,0,16,8,16
   394                        	.member	max,16,16,8,16
   395                        	.member	increment,32,16,8,16
   396                        	.member	stopsize,48,16,8,16
   397                        	.member	location,64,5,8,16
   398                        	.member	state,80,5,8,16
   399                        	.member	rectThumb,96,10,8,112,26
   400                        	.member	data,208,129,8,32
   401                        	.eos
   402                        	.stag	_fx_listbox_t,240,41
   403                        	.member	pos,0,5,8,16
   404                        	.member	selected,16,16,8,16
   405                        	.member	offsetX,32,5,8,16
   406                        	.member	offsetY,48,5,8,16
   407                        	.member	inc,64,5,8,16
   408                        	.member	direction,80,5,8,16
   409                        	.member	top,96,5,8,16
   410                        	.member	bottom,112,5,8,16
   411                        	.member	indexTop,128,5,8,16
   412                        	.member	indexBottom,144,5,8,16
   413                        	.member	maxItems,160,16,8,16
   414                        	.member	fontSet,176,142,8,32
   415                        	.member	data,208,129,8,32
   416                        	.eos
   417                        	.stag	_fx_textbox_t,144,42
   418                        	.member	pos,0,5,8,16
   419                        	.member	selected,16,16,8,16
   420                        	.member	offsetX,32,5,8,16
   421                        	.member	offsetY,48,5,8,16
   422                        	.member	isShifted,64,14,8,8
   423                        	.member	cursorState,72,14,8,8
   424                        	.member	fontSet,80,142,8,32
   425                        	.member	data,112,129,8,32
   426                        	.eos
   427                        	.stag	_fx_msgbox_t,144,43
   428                        	.member	pos,0,5,8,16
   429                        	.member	selected,16,16,8,16
   430                        	.member	offsetX,32,5,8,16
   431                        	.member	offsetY,48,5,8,16
   432                        	.member	isShifted,64,14,8,8
   433                        	.member	cursorState,72,14,8,8
   434                        	.member	fontSet,80,142,8,32
   435                        	.member	data,112,129,8,32
   436                        	.eos
   437                        	.stag	_fx_menuAnchor_t,272,44
   438                        	.member	pCaption,0,142,8,32
   439                        	.member	renderLayoutX,32,16,8,16
   440                        	.member	renderLayoutY,48,16,8,16
   441                        	.member	captionPixelWidth,64,16,8,16
   442                        	.member	data,80,129,8,32
   443                        	.member	droppedWindow,112,138,8,32,33
   444                        	.member	bytes,144,110,8,0,16
   445                        	.eos
   446                        	.stag	_SubMenuStruct,64,45
   447                        	.member	caption,0,142,8,32
  Mon Sep 27 2021  9:39                                                Page 9


   448                        	.member	action,32,641,8,32
   449                        	.eos
   450                        	.stag	_SubMenuListStruct,40,46
   451                        	.member	cMenus,0,14,8,8
   452                        	.member	psubmenus,8,9354,8,32,45
   453                        	.eos
   454                        	.stag	_fx_ComBuffer,2080,47
   455                        	.member	cbSize,0,16,8,16
   456                        	.member	cbBuffer,16,16,8,16
   457                        	.member	buffer,32,110,8,0,256
   458                        	.eos
   459                        	.stag	_fx_resource_header,72,48
   460                        	.member	magic,0,110,8,0,4
   461                        	.member	major,32,14,8,8
   462                        	.member	minor,40,14,8,8
   463                        	.member	type,48,14,8,8
   464                        	.member	reserved,56,14,8,8
   465                        	.member	resheaderSize,64,14,8,8
   466                        	.eos
   467                        	.stag	_fx_resource_header_font,144,49
   468                        	.member	title,0,110,8,0,16
   469                        	.member	height,128,14,8,8
   470                        	.member	width,136,14,8,8
   471                        	.eos
   472                        	.stag	_fx_resource_string,32,50
   473                        	.member	locale,0,110,8,0,2
   474                        	.member	entries,16,16,8,16
   475                        	.eos
   476                        	.stag	_fx_resource_string_entry,40,51
   477                        	.member	index,0,16,8,16
   478                        	.member	length,16,16,8,16
   479                        	.member	data,32,14,8,8
   480                        	.eos
   481                        	.line	1064
   482                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",8
   483                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxstringtable.h",0
   484                        	.line	90
   485                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",9
   486                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxc256u.h",0
   487                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   488                        	.line	1064
   489                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxc256u.h",5
   490                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fmx_vicky.h",0
   491                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   492                        	.line	1064
   493                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fmx_vicky.h",11
   494                        	.line	72
   495                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxc256u.h",6
  Mon Sep 27 2021  9:39                                                Page 10


   496                        	.line	1963
   497                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",16
   498                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxkernel.h",0
   499                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",0
   500                        	.line	30
   501                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxkernel.h",5
   502                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxnode.h",0
   503                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   504                        	.line	1064
   505                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxnode.h",11
   506                        	.line	118
   507                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxkernel.h",6
   508                        	.stag	_fx_api_call_table,8192,52
   509                        	.member	call_table,0,1121,8,32,256
   510                        	.eos
   511                        	.stag	_fx_zero_page_irq_data,32,53
   512                        	.member	data,0,110,8,0,4
   513                        	.eos
   514                        	.stag	_fx_zero_page,720,54
   515                        	.member	fxos_mouse_byte_0,0,14,8,8
   516                        	.member	fxos_mouse_byte_1,8,14,8,8
   517                        	.member	fxos_mouse_byte_2,16,14,8,8
   518                        	.member	fxos_mouse_byte_t,24,14,8,8
   519                        	.member	fxos_mouse_byte_x_l,32,14,8,8
   520                        	.member	fxos_mouse_byte_x_h,40,14,8,8
   521                        	.member	fxos_mouse_byte_y_l,48,14,8,8
   522                        	.member	fxos_mouse_byte_y_h,56,14,8,8
   523                        	.member	fxos_key_byte_0,64,14,8,8
   524                        	.member	fxos_key_byte_1,72,14,8,8
   525                        	.member	fxos_key_byte_2,80,14,8,8
   526                        	.member	fxos_mouse_ctl,88,14,8,8
   527                        	.member	fxos_mouse_index,96,14,8,8
   528                        	.member	fxos_mouse_status,104,14,8,8
   529                        	.member	Endianness,112,16,8,16
   530                        	.member	VersionMajor,128,16,8,16
   531                        	.member	VersionMinor,144,16,8,16
   532                        	.member	VersionRelease,160,16,8,16
   533                        	.member	topMemory,176,18,8,32
   534                        	.member	bottomMemory,208,18,8,32
   535                        	.member	availableMemory,240,18,8,32
   536                        	.member	availableMemoryK,272,18,8,32
   537                        	.member	availableHeapMemory,304,18,8,32
   538                        	.member	availableHeapMemoryK,336,18,8,32
   539                        	.member	fxos_console_row,368,16,8,16
   540                        	.member	fxos_console_col,384,16,8,16
   541                        	.member	executive,400,129,8,32
   542                        	.member	eventmanager,432,129,8,32
   543                        	.member	devicemanager,464,129,8,32
   544                        	.member	windowmanager,496,129,8,32
   545                        	.member	fxos_kernel_api,528,138,8,32,52
  Mon Sep 27 2021  9:39                                                Page 11


   546                        	.member	fxos_dos_api,560,138,8,32,52
   547                        	.member	fxos_gfx_api,592,138,8,32,52
   548                        	.member	fxos_gui_api,624,138,8,32,52
   549                        	.member	fxos_con_api,656,138,8,32,52
   550                        	.member	fxos_reserved_2_api,688,138,8,32,52
   551                        	.eos
   552                        	.stag	_fx_environment,96,55
   553                        	.member	variables,0,142,8,32
   554                        	.member	reserved1,32,5,8,16
   555                        	.member	reserved2,48,5,8,16
   556                        	.member	reserved3,64,5,8,16
   557                        	.member	reserved4,80,5,8,16
   558                        	.eos
   559                        	.stag	_debug_byte_bits,8,56
   560                        	.member	bit7,0,14,17,1
   561                        	.member	bit6,1,14,17,1
   562                        	.member	bit5,2,14,17,1
   563                        	.member	bit4,3,14,17,1
   564                        	.member	bit3,4,14,17,1
   565                        	.member	bit2,5,14,17,1
   566                        	.member	bit1,6,14,17,1
   567                        	.member	bit0,7,14,17,1
   568                        	.eos
   569                        	.stag	_k_segmentheader,160,57
   570                        	.member	version_major,0,14,8,8
   571                        	.member	version_minor,8,14,8,8
   572                        	.member	length,16,5,8,16
   573                        	.member	segment_start_addr,32,7,8,32
   574                        	.member	segment_end_addr,64,7,8,32
   575                        	.member	segment_size,96,7,8,32
   576                        	.member	main_entry_addr,128,7,8,32
   577                        	.eos
   578                        	.stag	_fx_device_driver,776,58
   579                        	.member	name,0,110,8,0,32
   580                        	.member	version,256,110,8,0,16
   581                        	.member	hmajor,384,110,8,0,8
   582                        	.member	hminor,448,110,8,0,8
   583                        	.member	type,512,14,8,8
   584                        	.member	designation,520,110,8,0,6
   585                        	.member	irq_ctl,568,16,8,16
   586                        	.member	f_driver_irq,584,129,8,32
   587                        	.member	driver_context,616,129,8,32
   588                        	.member	f_driver_load,648,129,8,32
   589                        	.member	f_driver_read,680,129,8,32
   590                        	.member	f_driver_write,712,129,8,32
   591                        	.member	f_driver_unload,744,129,8,32
   592                        	.eos
   593                        	.stag	_fx_block_device_driver,808,59
   594                        	.member	name,0,110,8,0,32
   595                        	.member	version,256,110,8,0,16
   596                        	.member	hmajor,384,110,8,0,8
   597                        	.member	hminor,448,110,8,0,8
   598                        	.member	type,512,14,8,8
   599                        	.member	designation,520,110,8,0,6
   600                        	.member	irq_ctl,568,16,8,16
   601                        	.member	f_driver_irq,584,129,8,32
   602                        	.member	driver_context,616,129,8,32
   603                        	.member	f_driver_load,648,129,8,32
  Mon Sep 27 2021  9:39                                                Page 12


   604                        	.member	f_driver_read,680,129,8,32
   605                        	.member	f_driver_write,712,129,8,32
   606                        	.member	f_driver_unload,744,129,8,32
   607                        	.member	f_driver_command,776,129,8,32
   608                        	.eos
   609                        	.stag	_k_irq_chain,128,60
   610                        	.member	handlers,0,5217,8,32,4
   611                        	.eos
   612                        	.line	475
   613                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",22
   614                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.h",0
   615                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    string.h",0
   616                        	.line	134
   617                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.h",5
   618                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",0
   619                        	.line	205
   620                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.h",6
   621                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   622                        	.line	1064
   623                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.h",7
   624                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxc256u.h",0
   625                        	.line	1963
   626                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.h",12
   627                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxstring.h",0
   628                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",0
   629                        	.line	205
   630                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxstring.h",5
   631                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    string.h",0
   632                        	.line	134
   633                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxstring.h",6
   634                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   635                        	.line	1064
   636                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxstring.h",7
   637                        	.stag	_fx_string,64,61
   638                        	.member	size,0,16,8,16
   639                        	.member	pos,16,5,8,16
   640                        	.member	buffer,32,142,8,32
   641                        	.eos
   642                        	.line	141
   643                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.h",17
  Mon Sep 27 2021  9:39                                                Page 13


   644                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxeventmanager.h",0
   645                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",0
   646                        	.line	30
   647                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxeventmanager.h",5
   648                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxexec.h",0
   649                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   650                        	.line	1064
   651                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxexec.h",5
   652                        	.stag	_fxos_executive_vtable,128,62
   653                        	.member	Init,0,8833,8,32
   654                        	.member	Configure,32,656,8,32
   655                        	.member	Query,64,656,8,32
   656                        	.member	Uninit,96,641,8,32
   657                        	.eos
   658                        	.line	86
   659                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxeventmanager.h",6
   660                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxnode.h",0
   661                        	.line	118
   662                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxeventmanager.h",7
   663                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.h",0
   664                        	.line	208
   665                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxeventmanager.h",8
   666                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxwindowmanager.h",0
   667                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",0
   668                        	.line	30
   669                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxwindowmanager.h",5
   670                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxmemorymanager.h",0
   671                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",0
   672                        	.line	30
   673                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxmemorymanager.h",5
   674                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\umm_malloc_cfg.h",0
   675                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos_build_parameters.h",0
   676                        	.line	35
   677                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\umm_malloc_cfg.h",8
   678                        	.stag	UMM_HEAP_INFO_t,256,63
   679                        	.member	totalEntries,0,18,8,32
   680                        	.member	usedEntries,32,18,8,32
   681                        	.member	freeEntries,64,18,8,32
  Mon Sep 27 2021  9:39                                                Page 14


   682                        	.member	totalBlocks,96,18,8,32
   683                        	.member	usedBlocks,128,18,8,32
   684                        	.member	freeBlocks,160,18,8,32
   685                        	.member	maxFreeContiguousBlocks,192,18,8,32
   686                        	.member	blockSize,224,18,8,32
   687                        	.eos
   688                        	.line	199
   689                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxmemorymanager.h",6
   690                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\umm_malloc.h",0
   691                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   692                        	.line	1064
   693                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\umm_malloc.h",11
   694                        	.line	24
   695                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxmemorymanager.h",7
   696                        	.stag	_fx_memory_map,2072,64
   697                        	.member	availableMemory,0,18,8,32
   698                        	.member	valid_segments,32,110,8,0,255
   699                        	.eos
   700                        	.stag	_fx_ipc_port,144,65
   701                        	.member	id,0,18,8,32
   702                        	.member	type,32,14,8,8
   703                        	.member	name,40,138,8,32,61
   704                        	.member	time,72,18,8,32
   705                        	.member	queue,104,138,8,32,7
   706                        	.member	reserved_1,136,14,8,8
   707                        	.eos
   708                        	.stag	_k_mem_alloc_header,80,66
   709                        	.member	user,0,14,8,8
   710                        	.member	attr,8,14,8,8
   711                        	.member	size,16,18,8,32
   712                        	.member	virtual,48,129,8,32
   713                        	.eos
   714                        	.line	129
   715                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxwindowmanager.h",6
   716                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxeventmanager.h",0
   717                        	.line	572
   718                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxwindowmanager.h",7
   719                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxgfx.h",0
   720                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxfont.h",0
   721                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   722                        	.line	1064
   723                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxfont.h",6
   724                        	.line	74
   725                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxgfx.h",5
   726                        	.stag	_click_detected,64,67
  Mon Sep 27 2021  9:39                                                Page 15


   727                        	.member	window,0,138,8,32,33
   728                        	.member	handler,32,641,8,32
   729                        	.eos
   730                        	.stag	_current_palette_map,400,68
   731                        	.member	CUR_DESKTOP,0,5,8,16
   732                        	.member	CUR_BACKGROUND,16,5,8,16
   733                        	.member	CUR_FONT,32,5,8,16
   734                        	.member	CUR_SELECTED_FONT,48,5,8,16
   735                        	.member	CUR_HIGHLIGHT_COLOR,64,5,8,16
   736                        	.member	CUR_WINDOWFRAME,80,5,8,16
   737                        	.member	CUR_WINDOWBORDER,96,5,8,16
   738                        	.member	CUR_WINDOWSHADOW,112,5,8,16
   739                        	.member	CUR_MENU,128,5,8,16
   740                        	.member	CUR_GADGET,144,5,8,16
   741                        	.member	CUR_COLOR,160,101,8,0,15
   742                        	.eos
   743                        	.line	370
   744                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxwindowmanager.h",8
   745                        	.stag	_fxos_winman_vtable,160,69
   746                        	.member	Events,0,641,8,32
   747                        	.member	ConfigureWindowManager,32,656,8,32
   748                        	.member	ProcessWindowEvent,64,8833,8,32
   749                        	.member	QueryWindowManager,96,656,8,32
   750                        	.member	DoWndProcs,128,641,8,32
   751                        	.eos
   752                        	.stag	fake70_,64,70
   753                        	.member	type,0,16,8,16
   754                        	.member	size,16,16,8,16
   755                        	.member	desktopAction,32,129,8,32
   756                        	.eos
   757                        	.stag	fake71_,96,71
   758                        	.member	type,0,16,8,16
   759                        	.member	caption,16,138,8,32,61
   760                        	.member	buttonType,48,16,8,16
   761                        	.member	x,64,5,8,16
   762                        	.member	y,80,5,8,16
   763                        	.eos
   764                        	.stag	_childMessage_t,64,72
   765                        	.member	msgType,0,16,8,16
   766                        	.member	msgData,16,129,8,32
   767                        	.member	dataSize,48,16,8,16
   768                        	.eos
   769                        	.line	594
   770                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxeventmanager.h",9
   771                        	.stag	_fx_main_loopvars,16,73
   772                        	.member	dummy,0,5,8,16
   773                        	.eos
   774                        	.stag	_fxMouseMessageData,64,74
   775                        	.member	button1,0,14,8,8
   776                        	.member	button2,8,14,8,8
   777                        	.member	button3,16,14,8,8
   778                        	.member	button4,24,14,8,8
   779                        	.member	x,32,16,8,16
   780                        	.member	y,48,16,8,16
   781                        	.eos
   782                        	.utag	marshalled_data,32,75
  Mon Sep 27 2021  9:39                                                Page 16


   783                        	.member	byteValue,0,14,11,8
   784                        	.member	verbValue,0,110,11,0,2
   785                        	.member	intValue,0,16,11,16
   786                        	.member	longValue,0,18,11,32
   787                        	.member	pointerValue,0,129,11,32
   788                        	.eos
   789                        	.stag	_fx_eventProcess,64,76
   790                        	.member	process,0,138,8,32,20
   791                        	.member	eventProc,32,641,8,32
   792                        	.eos
   793                        	.stag	_mouse_msg_state,184,77
   794                        	.member	lastEvent,0,18,8,32
   795                        	.member	buttonLeftDown,32,14,8,8
   796                        	.member	lastLeftDown,40,18,8,32
   797                        	.member	buttonRightDown,72,14,8,8
   798                        	.member	lastRightDown,80,18,8,32
   799                        	.member	buttonMiddleDown,112,14,8,8
   800                        	.member	lastMiddleDown,120,18,8,32
   801                        	.member	lastX,152,16,8,16
   802                        	.member	lastY,168,16,8,16
   803                        	.eos
   804                        	.stag	_fxos_eventmanager_vtable,192,78
   805                        	.member	EventQueue,0,138,8,32,7
   806                        	.member	Init,32,8833,8,32
   807                        	.member	Run,64,656,8,32
   808                        	.member	Configure,96,656,8,32
   809                        	.member	Query,128,656,8,32
   810                        	.member	Uninit,160,641,8,32
   811                        	.eos
   812                        	.stag	_k_clipboard_data,168,79
   813                        	.member	type,0,14,8,8
   814                        	.member	readable,8,110,8,0,16
   815                        	.member	data,136,129,8,32
   816                        	.eos
   817                        	.line	572
   818                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.h",18
   819                        	.stag	_fx_spinner_ctx,48,80
   820                        	.member	index,0,5,8,16
   821                        	.member	spinner,16,142,8,32
   822                        	.eos
   823                        	.stag	_fx_console_ctx,1144,81
   824                        	.member	lineBufferIndex,0,5,8,16
   825                        	.member	lineBuffer,16,110,8,0,128
   826                        	.member	isShifted,1040,14,8,8
   827                        	.member	userData,1048,129,8,32
   828                        	.member	screenBuffer,1080,129,8,32
   829                        	.member	Reserved1,1112,129,8,32
   830                        	.eos
   831                        	.stag	_token,64,82
   832                        	.member	type,0,5,8,16
   833                        	.member	depth,16,16,8,16
   834                        	.member	text,32,142,8,32
   835                        	.eos
   836                        	.stag	_command_args,64,83
   837                        	.member	proc,0,656,8,32
   838                        	.member	tokens,32,138,8,32,5
   839                        	.eos
  Mon Sep 27 2021  9:39                                                Page 17


   840                        	.line	208
   841                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",23
   842                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxstring.h",0
   843                        	.line	141
   844                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",24
   845                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxnode.h",0
   846                        	.line	118
   847                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",25
   848                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\ff/ff.h",0
   849                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\ff/ffconf.h",0
   850                        	.line	298
   851                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\ff/ff.h",29
   852                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   853                        	.line	1064
   854                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\ff/ff.h",30
   855                        	.stag	fake84_,4504,84
   856                        	.member	fs_type,0,14,8,8
   857                        	.member	pdrv,8,14,8,8
   858                        	.member	n_fats,16,14,8,8
   859                        	.member	wflag,24,14,8,8
   860                        	.member	fsi_flag,32,14,8,8
   861                        	.member	id,40,5,8,16
   862                        	.member	n_rootdir,56,5,8,16
   863                        	.member	csize,72,5,8,16
   864                        	.member	lfnbuf,88,144,8,32
   865                        	.member	last_clst,120,18,8,32
   866                        	.member	free_clst,152,18,8,32
   867                        	.member	n_fatent,184,18,8,32
   868                        	.member	fsize,216,18,8,32
   869                        	.member	volbase,248,18,8,32
   870                        	.member	fatbase,280,18,8,32
   871                        	.member	dirbase,312,18,8,32
   872                        	.member	database,344,18,8,32
   873                        	.member	winsect,376,18,8,32
   874                        	.member	win,408,110,8,0,512
   875                        	.eos
   876                        	.stag	fake85_,128,85
   877                        	.member	fs,0,138,8,32,84
   878                        	.member	id,32,5,8,16
   879                        	.member	attr,48,14,8,8
   880                        	.member	stat,56,14,8,8
   881                        	.member	sclust,64,18,8,32
   882                        	.member	objsize,96,18,8,32
   883                        	.eos
   884                        	.stag	fake86_,4400,86
   885                        	.member	obj,0,10,8,128,85
   886                        	.member	flag,128,14,8,8
   887                        	.member	err,136,14,8,8
  Mon Sep 27 2021  9:39                                                Page 18


   888                        	.member	fptr,144,18,8,32
   889                        	.member	clust,176,18,8,32
   890                        	.member	sect,208,18,8,32
   891                        	.member	dir_sect,240,18,8,32
   892                        	.member	dir_ptr,272,142,8,32
   893                        	.member	buf,304,110,8,0,512
   894                        	.eos
   895                        	.stag	fake87_,416,87
   896                        	.member	obj,0,10,8,128,85
   897                        	.member	dptr,128,18,8,32
   898                        	.member	clust,160,18,8,32
   899                        	.member	sect,192,18,8,32
   900                        	.member	dir,224,142,8,32
   901                        	.member	fn,256,110,8,0,12
   902                        	.member	blk_ofs,352,18,8,32
   903                        	.member	pat,384,142,8,32
   904                        	.eos
   905                        	.stag	fake88_,2224,88
   906                        	.member	fsize,0,18,8,32
   907                        	.member	fdate,32,5,8,16
   908                        	.member	ftime,48,5,8,16
   909                        	.member	fattrib,64,14,8,8
   910                        	.member	altname,72,110,8,0,13
   911                        	.member	fname,176,110,8,0,256
   912                        	.eos
   913                        	.stag	fake89_,80,89
   914                        	.member	fmt,0,14,8,8
   915                        	.member	n_fat,8,14,8,8
   916                        	.member	align,16,16,8,16
   917                        	.member	n_root,32,16,8,16
   918                        	.member	au_size,48,18,8,32
   919                        	.eos
   920                        	.line	429
   921                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",26
   922                        	.line	30
   923                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\drivers\DRIVER_FMXSDCard.c",1
   924                        ;#include "fxdos.h"
   925                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxdos.h",0
   926                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   927                        	.line	1064
   928                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxdos.h",5
   929                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\ff/ff.h",0
   930                        	.line	429
   931                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxdos.h",6
   932                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\diskio.h",0
   933                        	.line	85
   934                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxdos.h",7
   935                        	.stag	_fx_sd_direntry,256,90
   936                        	.member	filename,0,110,8,0,11
  Mon Sep 27 2021  9:39                                                Page 19


   937                        	.member	type,88,14,8,8
   938                        	.member	attrs,96,110,8,0,20
   939                        	.eos
   940                        	.stag	_fx_info,416,91
   941                        	.member	stgName,0,110,8,0,32
   942                        	.member	Reserved1,256,14,8,8
   943                        	.member	stgType,264,16,8,16
   944                        	.member	Reserved2,280,14,8,8
   945                        	.member	stgReserved,288,110,8,0,16
   946                        	.eos
   947                        	.stag	_fx_fileinfo,136,92
   948                        	.member	type,0,14,8,8
   949                        	.member	pFilename,8,142,8,32
   950                        	.member	lSize,40,18,8,32
   951                        	.member	lcreateDate,72,18,8,32
   952                        	.member	lchangeDate,104,18,8,32
   953                        	.eos
   954                        	.stag	_FX_FAT_DIR_INFO,256,93
   955                        	.member	DIR_Name,0,110,8,0,11
   956                        	.member	DIR_Attr,88,14,8,8
   957                        	.member	DIR_NTRes,96,14,8,8
   958                        	.member	DIR_CrtTimeTenth,104,14,8,8
   959                        	.member	DIR_CrtTime,112,16,8,16
   960                        	.member	DIR_CrtDate,128,16,8,16
   961                        	.member	DIR_LstAccDate,144,16,8,16
   962                        	.member	DIR_FstClusHI,160,16,8,16
   963                        	.member	DIR_WrtTime,176,16,8,16
   964                        	.member	DIR_WrtDate,192,16,8,16
   965                        	.member	DIR_FstClusLO,208,16,8,16
   966                        	.member	DIR_FileSize,224,18,8,32
   967                        	.eos
   968                        	.stag	fat_extBS_32,416,94
   969                        	.member	table_size_32,0,18,8,32
   970                        	.member	extended_flags,32,16,8,16
   971                        	.member	fat_version,48,16,8,16
   972                        	.member	root_cluster,64,18,8,32
   973                        	.member	fat_info,96,16,8,16
   974                        	.member	backup_BS_sector,112,16,8,16
   975                        	.member	reserved_0,128,110,8,0,12
   976                        	.member	drive_number,224,14,8,8
   977                        	.member	reserved_1,232,14,8,8
   978                        	.member	boot_signature,240,14,8,8
   979                        	.member	volume_id,248,16,8,16
   980                        	.member	volume_label,264,110,8,0,11
   981                        	.member	fat_type_label,352,110,8,0,8
   982                        	.eos
   983                        	.stag	fat_extBS_16,192,95
   984                        	.member	bios_drive_num,0,14,8,8
   985                        	.member	reserved1,8,14,8,8
   986                        	.member	boot_signature,16,14,8,8
   987                        	.member	volume_id,24,16,8,16
   988                        	.member	volume_label,40,110,8,0,11
   989                        	.member	fat_type_label,128,110,8,0,8
   990                        	.eos
   991                        	.stag	fat_BS,688,96
   992                        	.member	bootjmp,0,110,8,0,3
   993                        	.member	oem_name,24,110,8,0,8
   994                        	.member	bytes_per_sector,88,16,8,16
  Mon Sep 27 2021  9:39                                                Page 20


   995                        	.member	sectors_per_cluster,104,14,8,8
   996                        	.member	reserved_sector_count,112,16,8,16
   997                        	.member	table_count,128,14,8,8
   998                        	.member	root_entry_count,136,16,8,16
   999                        	.member	total_sectors_16,152,16,8,16
  1000                        	.member	media_type,168,14,8,8
  1001                        	.member	table_size_16,176,16,8,16
  1002                        	.member	sectors_per_track,192,16,8,16
  1003                        	.member	head_side_count,208,16,8,16
  1004                        	.member	hidden_sector_count,224,16,8,16
  1005                        	.member	total_sectors_32,240,16,8,16
  1006                        	.member	extended_section,256,110,8,0,54
  1007                        	.eos
  1008                        	.stag	__FATBootSector,928,97
  1009                        	.member	bootjmp,0,110,8,0,3
  1010                        	.member	oem_name,24,110,8,0,8
  1011                        	.member	bytes_per_sector,88,16,8,16
  1012                        	.member	sectors_per_cluster,104,14,8,8
  1013                        	.member	reserved_sector_count,112,16,8,16
  1014                        	.member	fat_table_count,128,14,8,8
  1015                        	.member	root_entry_count,136,16,8,16
  1016                        	.member	total_sectors_16,152,16,8,16
  1017                        	.member	media_type,168,14,8,8
  1018                        	.member	sectors_per_fat,176,16,8,16
  1019                        	.member	sectors_per_track,192,16,8,16
  1020                        	.member	head_side_count,208,16,8,16
  1021                        	.member	hidden_sector_count,224,18,8,32
  1022                        	.member	total_sectors_32,256,18,8,32
  1023                        	.member	drive_number,288,14,8,8
  1024                        	.member	reserved1,296,14,8,8
  1025                        	.member	boot_sig,304,14,8,8
  1026                        	.member	vol_id,312,18,8,32
  1027                        	.member	vol_name,344,110,8,0,11
  1028                        	.member	file_system_type,432,110,8,0,8
  1029                        	.member	extended_section,496,110,8,0,54
  1030                        	.eos
  1031                        	.stag	__PARTITIONTABLE,128,98
  1032                        	.member	first_byte,0,14,8,8
  1033                        	.member	start_chs,8,110,8,0,3
  1034                        	.member	partition_type,32,14,8,8
  1035                        	.member	end_chs,40,110,8,0,3
  1036                        	.member	start_sector,64,18,8,32
  1037                        	.member	length_sectors,96,18,8,32
  1038                        	.eos
  1039                        	.stag	fake99_,4096,99
  1040                        	.member	jmp,0,110,8,0,3
  1041                        	.member	oem,24,110,8,0,8
  1042                        	.member	sector_size,88,15,8,16
  1043                        	.member	sectors_per_cluster,104,14,8,8
  1044                        	.member	reserved_sectors,112,15,8,16
  1045                        	.member	number_ok_dos_fats,128,14,8,8
  1046                        	.member	root_dir_entries,136,15,8,16
  1047                        	.member	total_sectors_short,152,15,8,16
  1048                        	.member	media_descriptor,168,14,8,8
  1049                        	.member	fat_size_sectors,176,15,8,16
  1050                        	.member	sectors_per_track,192,15,8,16
  1051                        	.member	number_ok_dos_heads,208,15,8,16
  1052                        	.member	hidden_sectors,224,18,8,32
  Mon Sep 27 2021  9:39                                                Page 21


  1053                        	.member	total_sectors_long,256,18,8,32
  1054                        	.member	drive_number,288,14,8,8
  1055                        	.member	current_head,296,14,8,8
  1056                        	.member	boot_signature,304,14,8,8
  1057                        	.member	volume_id,312,18,8,32
  1058                        	.member	volume_label,344,110,8,0,11
  1059                        	.member	fs_type,432,110,8,0,8
  1060                        	.member	boot_code,496,110,8,0,448
  1061                        	.member	boot_sector_signature,4080,15,8,16
  1062                        	.eos
  1063                        	.stag	__FAT16ENTRY,256,100
  1064                        	.member	filename,0,110,8,0,8
  1065                        	.member	ext,64,110,8,0,3
  1066                        	.member	attributes,88,14,8,8
  1067                        	.member	reserved,96,110,8,0,10
  1068                        	.member	modify_time,176,16,8,16
  1069                        	.member	modify_date,192,16,8,16
  1070                        	.member	starting_cluster,208,16,8,16
  1071                        	.member	file_size,224,18,8,32
  1072                        	.eos
  1073                        	.stag	__FAT16ENTRYLONG,288,101
  1074                        	.member	filename,0,110,8,0,8
  1075                        	.member	ext,64,110,8,0,3
  1076                        	.member	attributes,88,14,8,8
  1077                        	.member	reserved,96,110,8,0,10
  1078                        	.member	modify_time,176,16,8,16
  1079                        	.member	modify_date,192,16,8,16
  1080                        	.member	starting_cluster,208,16,8,16
  1081                        	.member	file_size,224,18,8,32
  1082                        	.member	plongfileName,256,142,8,32
  1083                        	.eos
  1084                        	.stag	_LongFileName,256,102
  1085                        	.member	sequenceNo,0,14,8,8
  1086                        	.member	fileName_Part1,8,110,8,0,10
  1087                        	.member	fileattribute,88,14,8,8
  1088                        	.member	type,96,14,8,8
  1089                        	.member	checksum,104,14,8,8
  1090                        	.member	fileName_Part2,112,110,8,0,12
  1091                        	.member	fstclusLO,208,5,8,16
  1092                        	.member	fileName_Part3,224,110,8,0,4
  1093                        	.eos
  1094                        	.stag	_IDSECTOR,2048,103
  1095                        	.member	wGenConfig,0,16,8,16
  1096                        	.member	wNumCyls,16,16,8,16
  1097                        	.member	wReserved,32,16,8,16
  1098                        	.member	wNumHeads,48,16,8,16
  1099                        	.member	wBytesPerTrack,64,16,8,16
  1100                        	.member	wBytesPerSector,80,16,8,16
  1101                        	.member	wSectorsPerTrack,96,16,8,16
  1102                        	.member	wVendorUnique,112,112,8,0,3
  1103                        	.member	sSerialNumber,160,110,8,0,20
  1104                        	.member	wBufferType,320,16,8,16
  1105                        	.member	wBufferSize,336,16,8,16
  1106                        	.member	wECCSize,352,16,8,16
  1107                        	.member	sFirmwareRev,368,110,8,0,8
  1108                        	.member	sModelNumber,432,110,8,0,40
  1109                        	.member	wMoreVendorUnique,752,16,8,16
  1110                        	.member	wDoubleWordIO,768,16,8,16
  Mon Sep 27 2021  9:39                                                Page 22


  1111                        	.member	wCapabilities,784,16,8,16
  1112                        	.member	wReserved1,800,16,8,16
  1113                        	.member	wPIOTiming,816,16,8,16
  1114                        	.member	wDMATiming,832,16,8,16
  1115                        	.member	wBS,848,16,8,16
  1116                        	.member	wNumCurrentCyls,864,16,8,16
  1117                        	.member	wNumCurrentHeads,880,16,8,16
  1118                        	.member	wNumCurrentSectorsPerTrack,896,16,8,16
  1119                        	.member	ulCurrentSectorCapacity,912,18,8,32
  1120                        	.member	wMultSectorStuff,944,16,8,16
  1121                        	.member	ulTotalAddressableSectors,960,18,8,32
  1122                        	.member	wSingleWordDMA,992,16,8,16
  1123                        	.member	wMultiWordDMA,1008,16,8,16
  1124                        	.member	bReserved,1024,110,8,0,128
  1125                        	.eos
  1126                        	.stag	fake104_,16,104
  1127                        	.member	Reserved1,0,16,17,1
  1128                        	.member	Retired3,1,16,17,1
  1129                        	.member	ResponseIncomplete,2,16,17,1
  1130                        	.member	Retired2,3,16,17,3
  1131                        	.member	FixedDevice,6,16,17,1
  1132                        	.member	RemovableMedia,7,16,17,1
  1133                        	.member	Retired1,8,16,17,7
  1134                        	.member	DeviceType,15,16,17,1
  1135                        	.eos
  1136                        	.stag	fake105_,16,105
  1137                        	.member	FeatureSupported,0,16,17,1
  1138                        	.member	Reserved,1,16,17,15
  1139                        	.eos
  1140                        	.stag	fake106_,32,106
  1141                        	.member	CurrentLongPhysicalSectorAlignment,0,14,
                    17,2
  1142                        	.member	ReservedByte49,2,14,17,6
  1143                        	.member	DmaSupported,8,14,17,1
  1144                        	.member	LbaSupported,9,14,17,1
  1145                        	.member	IordyDisable,10,14,17,1
  1146                        	.member	IordySupported,11,14,17,1
  1147                        	.member	Reserved1,12,14,17,1
  1148                        	.member	StandybyTimerSupport,13,14,17,1
  1149                        	.member	Reserved2,14,14,17,2
  1150                        	.member	ReservedWord50,16,16,8,16
  1151                        	.eos
  1152                        	.stag	fake107_,16,107
  1153                        	.member	ZonedCapabilities,0,16,17,2
  1154                        	.member	NonVolatileWriteCache,2,16,17,1
  1155                        	.member	ExtendedUserAddressableSectorsSupported,
                    3,16,17,1
  1156                        	.member	DeviceEncryptsAllUserData,4,16,17,1
  1157                        	.member	ReadZeroAfterTrimSupported,5,16,17,1
  1158                        	.member	Optional28BitCommandsSupported,6,16,17,1
  1159                        	.member	IEEE1667,7,16,17,1
  1160                        	.member	DownloadMicrocodeDmaSupported,8,16,17,1
  1161                        	.member	SetMaxSetPasswordUnlockDmaSupported,9,16
                    ,17,1
  1162                        	.member	WriteBufferDmaSupported,10,16,17,1
  1163                        	.member	ReadBufferDmaSupported,11,16,17,1
  1164                        	.member	DeviceConfigIdentifySetDmaSupported,12,1
                    6,17,1
  Mon Sep 27 2021  9:39                                                Page 23


  1165                        	.member	LPSAERCSupported,13,16,17,1
  1166                        	.member	DeterministicReadAfterTrimSupported,14,1
                    6,17,1
  1167                        	.member	CFastSpecSupported,15,16,17,1
  1168                        	.eos
  1169                        	.stag	fake108_,32,108
  1170                        	.member	Reserved0,0,16,17,1
  1171                        	.member	SataGen1,1,16,17,1
  1172                        	.member	SataGen2,2,16,17,1
  1173                        	.member	SataGen3,3,16,17,1
  1174                        	.member	Reserved1,4,16,17,4
  1175                        	.member	NCQ,8,16,17,1
  1176                        	.member	HIPM,9,16,17,1
  1177                        	.member	PhyEvents,10,16,17,1
  1178                        	.member	NcqUnload,11,16,17,1
  1179                        	.member	NcqPriority,12,16,17,1
  1180                        	.member	HostAutoPS,13,16,17,1
  1181                        	.member	DeviceAutoPS,14,16,17,1
  1182                        	.member	ReadLogDMA,15,16,17,1
  1183                        	.member	Reserved2,16,16,17,1
  1184                        	.member	CurrentSpeed,17,16,17,3
  1185                        	.member	NcqStreaming,20,16,17,1
  1186                        	.member	NcqQueueMgmt,21,16,17,1
  1187                        	.member	NcqReceiveSend,22,16,17,1
  1188                        	.member	DEVSLPtoReducedPwrState,23,16,17,1
  1189                        	.member	Reserved3,24,16,17,8
  1190                        	.eos
  1191                        	.stag	fake109_,16,109
  1192                        	.member	Reserved0,0,16,17,1
  1193                        	.member	NonZeroOffsets,1,16,17,1
  1194                        	.member	DmaSetupAutoActivate,2,16,17,1
  1195                        	.member	DIPM,3,16,17,1
  1196                        	.member	InOrderData,4,16,17,1
  1197                        	.member	HardwareFeatureControl,5,16,17,1
  1198                        	.member	SoftwareSettingsPreservation,6,16,17,1
  1199                        	.member	NCQAutosense,7,16,17,1
  1200                        	.member	DEVSLP,8,16,17,1
  1201                        	.member	HybridInformation,9,16,17,1
  1202                        	.member	Reserved1,10,16,17,6
  1203                        	.eos
  1204                        	.stag	fake110_,16,110
  1205                        	.member	Reserved0,0,16,17,1
  1206                        	.member	NonZeroOffsets,1,16,17,1
  1207                        	.member	DmaSetupAutoActivate,2,16,17,1
  1208                        	.member	DIPM,3,16,17,1
  1209                        	.member	InOrderData,4,16,17,1
  1210                        	.member	HardwareFeatureControl,5,16,17,1
  1211                        	.member	SoftwareSettingsPreservation,6,16,17,1
  1212                        	.member	DeviceAutoPS,7,16,17,1
  1213                        	.member	DEVSLP,8,16,17,1
  1214                        	.member	HybridInformation,9,16,17,1
  1215                        	.member	Reserved1,10,16,17,6
  1216                        	.eos
  1217                        	.stag	fake111_,48,111
  1218                        	.member	SmartCommands,0,16,17,1
  1219                        	.member	SecurityMode,1,16,17,1
  1220                        	.member	RemovableMediaFeature,2,16,17,1
  1221                        	.member	PowerManagement,3,16,17,1
  Mon Sep 27 2021  9:39                                                Page 24


  1222                        	.member	Reserved1,4,16,17,1
  1223                        	.member	WriteCache,5,16,17,1
  1224                        	.member	LookAhead,6,16,17,1
  1225                        	.member	ReleaseInterrupt,7,16,17,1
  1226                        	.member	ServiceInterrupt,8,16,17,1
  1227                        	.member	DeviceReset,9,16,17,1
  1228                        	.member	HostProtectedArea,10,16,17,1
  1229                        	.member	Obsolete1,11,16,17,1
  1230                        	.member	WriteBuffer,12,16,17,1
  1231                        	.member	ReadBuffer,13,16,17,1
  1232                        	.member	Nop,14,16,17,1
  1233                        	.member	Obsolete2,15,16,17,1
  1234                        	.member	DownloadMicrocode,16,16,17,1
  1235                        	.member	DmaQueued,17,16,17,1
  1236                        	.member	Cfa,18,16,17,1
  1237                        	.member	AdvancedPm,19,16,17,1
  1238                        	.member	Msn,20,16,17,1
  1239                        	.member	PowerUpInStandby,21,16,17,1
  1240                        	.member	ManualPowerUp,22,16,17,1
  1241                        	.member	Reserved2,23,16,17,1
  1242                        	.member	SetMax,24,16,17,1
  1243                        	.member	Acoustics,25,16,17,1
  1244                        	.member	BigLba,26,16,17,1
  1245                        	.member	DeviceConfigOverlay,27,16,17,1
  1246                        	.member	FlushCache,28,16,17,1
  1247                        	.member	FlushCacheExt,29,16,17,1
  1248                        	.member	WordValid83,30,16,17,2
  1249                        	.member	SmartErrorLog,32,16,17,1
  1250                        	.member	SmartSelfTest,33,16,17,1
  1251                        	.member	MediaSerialNumber,34,16,17,1
  1252                        	.member	MediaCardPassThrough,35,16,17,1
  1253                        	.member	StreamingFeature,36,16,17,1
  1254                        	.member	GpLogging,37,16,17,1
  1255                        	.member	WriteFua,38,16,17,1
  1256                        	.member	WriteQueuedFua,39,16,17,1
  1257                        	.member	WWN64Bit,40,16,17,1
  1258                        	.member	URGReadStream,41,16,17,1
  1259                        	.member	URGWriteStream,42,16,17,1
  1260                        	.member	ReservedForTechReport,43,16,17,2
  1261                        	.member	IdleWithUnloadFeature,45,16,17,1
  1262                        	.member	WordValid,46,16,17,2
  1263                        	.eos
  1264                        	.stag	fake112_,48,112
  1265                        	.member	SmartCommands,0,16,17,1
  1266                        	.member	SecurityMode,1,16,17,1
  1267                        	.member	RemovableMediaFeature,2,16,17,1
  1268                        	.member	PowerManagement,3,16,17,1
  1269                        	.member	Reserved1,4,16,17,1
  1270                        	.member	WriteCache,5,16,17,1
  1271                        	.member	LookAhead,6,16,17,1
  1272                        	.member	ReleaseInterrupt,7,16,17,1
  1273                        	.member	ServiceInterrupt,8,16,17,1
  1274                        	.member	DeviceReset,9,16,17,1
  1275                        	.member	HostProtectedArea,10,16,17,1
  1276                        	.member	Obsolete1,11,16,17,1
  1277                        	.member	WriteBuffer,12,16,17,1
  1278                        	.member	ReadBuffer,13,16,17,1
  1279                        	.member	Nop,14,16,17,1
  Mon Sep 27 2021  9:39                                                Page 25


  1280                        	.member	Obsolete2,15,16,17,1
  1281                        	.member	DownloadMicrocode,16,16,17,1
  1282                        	.member	DmaQueued,17,16,17,1
  1283                        	.member	Cfa,18,16,17,1
  1284                        	.member	AdvancedPm,19,16,17,1
  1285                        	.member	Msn,20,16,17,1
  1286                        	.member	PowerUpInStandby,21,16,17,1
  1287                        	.member	ManualPowerUp,22,16,17,1
  1288                        	.member	Reserved2,23,16,17,1
  1289                        	.member	SetMax,24,16,17,1
  1290                        	.member	Acoustics,25,16,17,1
  1291                        	.member	BigLba,26,16,17,1
  1292                        	.member	DeviceConfigOverlay,27,16,17,1
  1293                        	.member	FlushCache,28,16,17,1
  1294                        	.member	FlushCacheExt,29,16,17,1
  1295                        	.member	Resrved3,30,16,17,1
  1296                        	.member	Words119_120Valid,31,16,17,1
  1297                        	.member	SmartErrorLog,32,16,17,1
  1298                        	.member	SmartSelfTest,33,16,17,1
  1299                        	.member	MediaSerialNumber,34,16,17,1
  1300                        	.member	MediaCardPassThrough,35,16,17,1
  1301                        	.member	StreamingFeature,36,16,17,1
  1302                        	.member	GpLogging,37,16,17,1
  1303                        	.member	WriteFua,38,16,17,1
  1304                        	.member	WriteQueuedFua,39,16,17,1
  1305                        	.member	WWN64Bit,40,16,17,1
  1306                        	.member	URGReadStream,41,16,17,1
  1307                        	.member	URGWriteStream,42,16,17,1
  1308                        	.member	ReservedForTechReport,43,16,17,2
  1309                        	.member	IdleWithUnloadFeature,45,16,17,1
  1310                        	.member	Reserved4,46,16,17,2
  1311                        	.eos
  1312                        	.stag	fake113_,16,113
  1313                        	.member	TimeRequired,0,16,17,15
  1314                        	.member	ExtendedTimeReported,15,16,17,1
  1315                        	.eos
  1316                        	.stag	fake114_,16,114
  1317                        	.member	TimeRequired,0,16,17,15
  1318                        	.member	ExtendedTimeReported,15,16,17,1
  1319                        	.eos
  1320                        	.stag	fake115_,16,115
  1321                        	.member	LogicalSectorsPerPhysicalSector,0,16,17,
                    4
  1322                        	.member	Reserved0,4,16,17,8
  1323                        	.member	LogicalSectorLongerThan256Words,12,16,17
                    ,1
  1324                        	.member	MultipleLogicalSectorsPerPhysicalSector,
                    13,16,17,1
  1325                        	.member	Reserved1,14,16,17,2
  1326                        	.eos
  1327                        	.stag	fake116_,16,116
  1328                        	.member	ReservedForDrqTechnicalReport,0,16,17,1
  1329                        	.member	WriteReadVerify,1,16,17,1
  1330                        	.member	WriteUncorrectableExt,2,16,17,1
  1331                        	.member	ReadWriteLogDmaExt,3,16,17,1
  1332                        	.member	DownloadMicrocodeMode3,4,16,17,1
  1333                        	.member	FreefallControl,5,16,17,1
  1334                        	.member	SenseDataReporting,6,16,17,1
  Mon Sep 27 2021  9:39                                                Page 26


  1335                        	.member	ExtendedPowerConditions,7,16,17,1
  1336                        	.member	Reserved0,8,16,17,6
  1337                        	.member	WordValid,14,16,17,2
  1338                        	.eos
  1339                        	.stag	fake117_,16,117
  1340                        	.member	ReservedForDrqTechnicalReport,0,16,17,1
  1341                        	.member	WriteReadVerify,1,16,17,1
  1342                        	.member	WriteUncorrectableExt,2,16,17,1
  1343                        	.member	ReadWriteLogDmaExt,3,16,17,1
  1344                        	.member	DownloadMicrocodeMode3,4,16,17,1
  1345                        	.member	FreefallControl,5,16,17,1
  1346                        	.member	SenseDataReporting,6,16,17,1
  1347                        	.member	ExtendedPowerConditions,7,16,17,1
  1348                        	.member	Reserved0,8,16,17,6
  1349                        	.member	Reserved1,14,16,17,2
  1350                        	.eos
  1351                        	.stag	fake118_,16,118
  1352                        	.member	SecuritySupported,0,16,17,1
  1353                        	.member	SecurityEnabled,1,16,17,1
  1354                        	.member	SecurityLocked,2,16,17,1
  1355                        	.member	SecurityFrozen,3,16,17,1
  1356                        	.member	SecurityCountExpired,4,16,17,1
  1357                        	.member	EnhancedSecurityEraseSupported,5,16,17,1
  1358                        	.member	Reserved0,6,16,17,2
  1359                        	.member	SecurityLevel,8,16,17,1
  1360                        	.member	Reserved1,9,16,17,7
  1361                        	.eos
  1362                        	.stag	fake119_,16,119
  1363                        	.member	MaximumCurrentInMA,0,16,17,12
  1364                        	.member	CfaPowerMode1Disabled,12,16,17,1
  1365                        	.member	CfaPowerMode1Required,13,16,17,1
  1366                        	.member	Reserved0,14,16,17,1
  1367                        	.member	Word160Supported,15,16,17,1
  1368                        	.eos
  1369                        	.stag	fake120_,16,120
  1370                        	.member	SupportsTrim,0,16,17,1
  1371                        	.member	Reserved0,1,16,17,15
  1372                        	.eos
  1373                        	.stag	fake121_,16,121
  1374                        	.member	Supported,0,16,17,1
  1375                        	.member	Reserved0,1,16,17,1
  1376                        	.member	WriteSameSuported,2,16,17,1
  1377                        	.member	ErrorRecoveryControlSupported,3,16,17,1
  1378                        	.member	FeatureControlSuported,4,16,17,1
  1379                        	.member	DataTablesSuported,5,16,17,1
  1380                        	.member	Reserved1,6,16,17,6
  1381                        	.member	VendorSpecific,12,16,17,4
  1382                        	.eos
  1383                        	.stag	fake122_,16,122
  1384                        	.member	AlignmentOfLogicalWithinPhysical,0,16,17
                    ,14
  1385                        	.member	Word209Supported,14,16,17,1
  1386                        	.member	Reserved0,15,16,17,1
  1387                        	.eos
  1388                        	.stag	fake123_,16,123
  1389                        	.member	NVCachePowerModeEnabled,0,16,17,1
  1390                        	.member	Reserved0,1,16,17,3
  1391                        	.member	NVCacheFeatureSetEnabled,4,16,17,1
  Mon Sep 27 2021  9:39                                                Page 27


  1392                        	.member	Reserved1,5,16,17,3
  1393                        	.member	NVCachePowerModeVersion,8,16,17,4
  1394                        	.member	NVCacheFeatureSetVersion,12,16,17,4
  1395                        	.eos
  1396                        	.stag	fake124_,16,124
  1397                        	.member	NVCacheEstimatedTimeToSpinUpInSeconds,0,
                    14,8,8
  1398                        	.member	Reserved,8,14,8,8
  1399                        	.eos
  1400                        	.stag	fake125_,16,125
  1401                        	.member	MajorVersion,0,16,17,12
  1402                        	.member	TransportType,12,16,17,4
  1403                        	.eos
  1404                        	.stag	_IDENTIFY_DEVICE_DATA,4096,126
  1405                        	.member	GeneralConfiguration,0,10,8,16,104
  1406                        	.member	NumCylinders,16,16,8,16
  1407                        	.member	SpecificConfiguration,32,16,8,16
  1408                        	.member	NumHeads,48,16,8,16
  1409                        	.member	Retired1Bytes,64,110,8,0,4
  1410                        	.member	NumSectorsPerTrack,96,16,8,16
  1411                        	.member	VendorUnique1Bytes,112,110,8,0,6
  1412                        	.member	SerialNumber,160,110,8,0,20
  1413                        	.member	Retired2,320,112,8,0,2
  1414                        	.member	Obsolete1,352,16,8,16
  1415                        	.member	FirmwareRevision,368,110,8,0,8
  1416                        	.member	ModelNumber,432,110,8,0,40
  1417                        	.member	MaximumBlockTransfer,752,14,8,8
  1418                        	.member	VendorUnique2,760,14,8,8
  1419                        	.member	TrustedComputing,768,10,8,16,105
  1420                        	.member	Capabilities,784,10,8,32,106
  1421                        	.member	ObsoleteWords51,816,112,8,0,2
  1422                        	.member	TranslationFieldsValid,848,16,17,3
  1423                        	.member	Reserved3,851,16,17,5
  1424                        	.member	FreeFallControlSensitivity,856,16,17,8
  1425                        	.member	NumberOfCurrentCylinders,864,16,8,16
  1426                        	.member	NumberOfCurrentHeads,880,16,8,16
  1427                        	.member	CurrentSectorsPerTrack,896,16,8,16
  1428                        	.member	CurrentSectorCapacity,912,18,8,32
  1429                        	.member	CurrentMultiSectorSetting,944,14,8,8
  1430                        	.member	MultiSectorSettingValid,952,14,17,1
  1431                        	.member	ReservedByte59,953,14,17,3
  1432                        	.member	SanitizeFeatureSupported,956,14,17,1
  1433                        	.member	CryptoScrambleExtCommandSupported,957,14
                    ,17,1
  1434                        	.member	OverwriteExtCommandSupported,958,14,17,1
  1435                        	.member	BlockEraseExtCommandSupported,959,14,17,
                    1
  1436                        	.member	UserAddressableSectors,960,18,8,32
  1437                        	.member	ObsoleteWord62,992,16,8,16
  1438                        	.member	MultiWordDMASupport,1008,16,17,8
  1439                        	.member	MultiWordDMAActive,1016,16,17,8
  1440                        	.member	AdvancedPIOModes,1024,16,17,8
  1441                        	.member	ReservedByte64,1032,16,17,8
  1442                        	.member	MinimumMWXferCycleTime,1040,16,8,16
  1443                        	.member	RecommendedMWXferCycleTime,1056,16,8,16
  1444                        	.member	MinimumPIOCycleTime,1072,16,8,16
  1445                        	.member	MinimumPIOCycleTimeIORDY,1088,16,8,16
  1446                        	.member	AdditionalSupported,1104,10,8,16,107
  Mon Sep 27 2021  9:39                                                Page 28


  1447                        	.member	ReservedWords70,1120,112,8,0,5
  1448                        	.member	QueueDepth,1200,16,17,5
  1449                        	.member	ReservedWord75,1205,16,17,11
  1450                        	.member	SerialAtaCapabilities,1216,10,8,32,108
  1451                        	.member	SerialAtaFeaturesSupported,1248,10,8,16,
                    109
  1452                        	.member	SerialAtaFeaturesEnabled,1264,10,8,16,11
                    0
  1453                        	.member	MajorRevision,1280,16,8,16
  1454                        	.member	MinorRevision,1296,16,8,16
  1455                        	.member	CommandSetSupport,1312,10,8,48,111
  1456                        	.member	CommandSetActive,1360,10,8,48,112
  1457                        	.member	UltraDMASupport,1408,16,17,8
  1458                        	.member	UltraDMAActive,1416,16,17,8
  1459                        	.member	NormalSecurityEraseUnit,1424,10,8,16,113
  1460                        	.member	EnhancedSecurityEraseUnit,1440,10,8,16,1
                    14
  1461                        	.member	CurrentAPMLevel,1456,16,17,8
  1462                        	.member	ReservedWord91,1464,16,17,8
  1463                        	.member	MasterPasswordID,1472,16,8,16
  1464                        	.member	HardwareResetResult,1488,16,8,16
  1465                        	.member	CurrentAcousticValue,1504,16,17,8
  1466                        	.member	RecommendedAcousticValue,1512,16,17,8
  1467                        	.member	StreamMinRequestSize,1520,16,8,16
  1468                        	.member	StreamingTransferTimeDMA,1536,16,8,16
  1469                        	.member	StreamingAccessLatencyDMAPIO,1552,16,8,1
                    6
  1470                        	.member	StreamingPerfGranularity,1568,18,8,32
  1471                        	.member	Max48BitLBA,1600,114,8,0,2
  1472                        	.member	StreamingTransferTime,1664,16,8,16
  1473                        	.member	DsmCap,1680,16,8,16
  1474                        	.member	PhysicalLogicalSectorSize,1696,10,8,16,1
                    15
  1475                        	.member	InterSeekDelay,1712,16,8,16
  1476                        	.member	WorldWideName,1728,112,8,0,4
  1477                        	.member	ReservedForWorldWideName128,1792,112,8,0
                    ,4
  1478                        	.member	ReservedForTlcTechnicalReport,1856,16,8,
                    16
  1479                        	.member	WordsPerLogicalSector,1872,112,8,0,2
  1480                        	.member	CommandSetSupportExt,1904,10,8,16,116
  1481                        	.member	CommandSetActiveExt,1920,10,8,16,117
  1482                        	.member	ReservedForExpandedSupportandActive,1936
                    ,112,8,0,6
  1483                        	.member	MsnSupport,2032,16,17,2
  1484                        	.member	ReservedWord127,2034,16,17,14
  1485                        	.member	SecurityStatus,2048,10,8,16,118
  1486                        	.member	ReservedWord129,2064,112,8,0,31
  1487                        	.member	CfaPowerMode1,2560,10,8,16,119
  1488                        	.member	ReservedForCfaWord161,2576,112,8,0,7
  1489                        	.member	NominalFormFactor,2688,16,17,4
  1490                        	.member	ReservedWord168,2692,16,17,12
  1491                        	.member	DataSetManagementFeature,2704,10,8,16,12
                    0
  1492                        	.member	AdditionalProductID,2720,112,8,0,4
  1493                        	.member	ReservedForCfaWord174,2784,112,8,0,2
  1494                        	.member	CurrentMediaSerialNumber,2816,112,8,0,30
  1495                        	.member	SCTCommandTransport,3296,10,8,16,121
  Mon Sep 27 2021  9:39                                                Page 29


  1496                        	.member	ReservedWord207,3312,112,8,0,2
  1497                        	.member	BlockAlignment,3344,10,8,16,122
  1498                        	.member	WriteReadVerifySectorCountMode3Only,3360
                    ,112,8,0,2
  1499                        	.member	WriteReadVerifySectorCountMode2Only,3392
                    ,112,8,0,2
  1500                        	.member	NVCacheCapabilities,3424,10,8,16,123
  1501                        	.member	NVCacheSizeLSW,3440,16,8,16
  1502                        	.member	NVCacheSizeMSW,3456,16,8,16
  1503                        	.member	NominalMediaRotationRate,3472,16,8,16
  1504                        	.member	ReservedWord218,3488,16,8,16
  1505                        	.member	NVCacheOptions,3504,10,8,16,124
  1506                        	.member	WriteReadVerifySectorCountMode,3520,16,1
                    7,8
  1507                        	.member	ReservedWord220,3528,16,17,8
  1508                        	.member	ReservedWord221,3536,16,8,16
  1509                        	.member	TransportMajorVersion,3552,10,8,16,125
  1510                        	.member	TransportMinorVersion,3568,16,8,16
  1511                        	.member	ReservedWord224,3584,112,8,0,6
  1512                        	.member	ExtendedNumberOfUserAddressableSectors,3
                    680,114,8,0,2
  1513                        	.member	MinBlocksPerDownloadMicrocodeMode03,3744
                    ,16,8,16
  1514                        	.member	MaxBlocksPerDownloadMicrocodeMode03,3760
                    ,16,8,16
  1515                        	.member	ReservedWord236,3776,112,8,0,19
  1516                        	.member	Signature,4080,16,17,8
  1517                        	.member	CheckSum,4088,16,17,8
  1518                        	.eos
  1519                        	.stag	_FXDosDevice,5744,127
  1520                        	.member	type,0,14,8,8
  1521                        	.member	initialized,8,14,8,8
  1522                        	.member	devdata,16,129,8,32
  1523                        	.member	devstatus,48,14,8,8
  1524                        	.member	bootSector,56,10,8,928,97
  1525                        	.member	partitionTable,984,10,8,128,98
  1526                        	.member	fileAllocationTable,1112,110,8,0,512
  1527                        	.member	bsOffset,5208,18,8,32
  1528                        	.member	rootDirSectors,5240,18,8,32
  1529                        	.member	root_entry_count,5272,5,8,16
  1530                        	.member	rootEntriesPerPage,5288,5,8,16
  1531                        	.member	sectors_per_cluster,5304,5,8,16
  1532                        	.member	firstDataSector,5320,18,8,32
  1533                        	.member	fatTableOffset,5352,18,8,32
  1534                        	.member	volume_name,5384,110,8,0,12
  1535                        	.member	root_volume_name,5480,110,8,0,12
  1536                        	.member	errorCode,5576,14,8,8
  1537                        	.member	pfInit,5584,641,8,32
  1538                        	.member	pfReset,5616,641,8,32
  1539                        	.member	pfUninit,5648,641,8,32
  1540                        	.member	pfReader,5680,654,8,32
  1541                        	.member	pfWriter,5712,654,8,32
  1542                        	.eos
  1543                        	.utag	item,32,128
  1544                        	.member	dir,0,138,11,32,87
  1545                        	.member	file,0,138,11,32,86
  1546                        	.member	fileInfo,0,138,11,32,88
  1547                        	.eos
  Mon Sep 27 2021  9:39                                                Page 30


  1548                        	.stag	_dos_handle,80,129
  1549                        	.member	fs,0,138,8,32,84
  1550                        	.member	fr,32,5,8,16
  1551                        	.member	path,48,142,8,32
  1552                        	.eos
  1553                        	.stag	fx_file,112,130
  1554                        	.member	fs,0,138,8,32,84
  1555                        	.member	fileInfo,32,138,8,32,88
  1556                        	.member	f,64,138,8,32,86
  1557                        	.member	fr,96,5,8,16
  1558                        	.eos
  1559                        	.line	812
  1560                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\drivers\DRIVER_FMXSDCard.c",2
  1561                        ;#include "fxmemorymanager.h"
  1562                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxmemorymanager.h",0
  1563                        	.line	129
  1564                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\drivers\DRIVER_FMXSDCard.c",3
  1565                        ;
  1566                        ;#include "drivers/DRIVER.h"
  1567                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\drivers/DRIVER.h",0
  1568                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",0
  1569                        	.line	30
  1570                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\drivers/DRIVER.h",5
  1571                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxmemorymanager.h",0
  1572                        	.line	129
  1573                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\drivers/DRIVER.h",6
  1574                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxc256u.h",0
  1575                        	.line	1963
  1576                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\drivers/DRIVER.h",106
  1577                        	.line	115
  1578                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\drivers\DRIVER_FMXSDCard.c",5
  1579                        ;#include "drivers/DRIVER_SDC.h"
  1580                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\drivers/DRIVER_SDC.h",0
  1581                        SDCS05	section	offset $04:1DB0
  1582 04:1DB0:              	ends
  1583                        	data
  1584                        ~~_k_driver_base:
  1585 00:0000: B0 1D 04 00  	dl	$41DB0
  1586 00:0004:              	ends
  1587                        	.line	7
  1588                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\drivers\DRIVER_FMXSDCard.c",6
  1589                        ;//#pragma section CODE=FMXSDCard,offset $08:A500
  1590                        ;
  1591                        ;extern ULONG _pseudo_timer;
  1592                        ;static ULONG default_arg = 0;
  Mon Sep 27 2021  9:39                                                Page 31


  1593                        	data
  1594                        ~~default_arg:
  1595 00:0004: 00 00 00 00  	dl	$0
  1596 00:0008:              	ends
  1597                        ;
  1598                        ;static VOID f_driver_irq(void);
  1599                        ;static UCHAR k_sd_initialize(void);
  1600                        ;static UCHAR k_read_sd_sector(unsigned long offse
                    t,LPCHAR receiveBuffer);
  1601                        ;static UCHAR k_write_sd_sector(unsigned long offs
                    et,LPCHAR receiveBuffer);
  1602                        ;static UCHAR k_read_sd_command(UINT command,LPVOI
                    D buffer);
  1603                        ;
  1604                        ;static FX_BLOCK_DEVICE_DRIVER DRIVER_FMXSDCard = 
                    {
  1605                        	data
  1606                        ~~DRIVER_FMXSDCard:
  1607                        ;							
                    				"DRIVER_FMXSDCard\0",
  1608 00:0008: 44 52 49 56  	db	$44,$52,$49,$56,$45,$52,$5F,$46,$4D,$58
       00:000C: 45 52 5F 46 
       00:0010: 4D 58 
  1609 00:0012: 53 44 43 61  	db	$53,$44,$43,$61,$72,$64,$0,$0
       00:0016: 72 64 00 00 
  1610 00:001A:              	ds	14
  1611                        ;							
                    				"v1.0.0\0",
  1612 00:0028: 76 31 2E 30  	db	$76,$31,$2E,$30,$2E,$30,$0,$0
       00:002C: 2E 30 00 00 
  1613 00:0030:              	ds	8
  1614                        ;							
                    				"A\0",//"C\0",
  1615 00:0038: 41 00 00     	db	$41,$0,$0
  1616 00:003B:              	ds	5
  1617                        ;							
                    				"1\0",//"4\0",
  1618 00:0040: 31 00 00     	db	$31,$0,$0
  1619 00:0043:              	ds	5
  1620                        ;							
                    				DRIVER_TYPE_SDCARD,
  1621 00:0048: 06           	db	$6
  1622                        ;							
                    				"SD:\0",
  1623 00:0049: 53 44 3A 00  	db	$53,$44,$3A,$0,$0
       00:004D: 00 
  1624 00:004E:              	ds	1
  1625                        ;							
                    				MAKEIRQ(2,7),
  1626 00:004F: 07 02        	dw	$207
  1627                        ;							
                    				f_driver_irq,
  1628 00:0051: D8 1D 04 00  	dl	~~f_driver_irq
  1629                        ;							
                    				NULL,
  1630 00:0055: 00 00 00 00  	dl	$0
  1631                        ;							
                    				k_sd_initialize,
  Mon Sep 27 2021  9:39                                                Page 32


  1632 00:0059: 35 21 04 00  	dl	~~k_sd_initialize
  1633                        ;							
                    				k_read_sd_sector,
  1634 00:005D: 64 1E 04 00  	dl	~~k_read_sd_sector
  1635                        ;							
                    				k_write_sd_sector,
  1636 00:0061: 3B 1F 04 00  	dl	~~k_write_sd_sector
  1637                        ;							
                    				NULL,
  1638 00:0065: 00 00 00 00  	dl	$0
  1639                        ;							
                    				k_read_sd_command
  1640                        ;							
                    	          };
  1641 00:0069: 47 1E 04 00  	dl	~~k_read_sd_command
  1642 00:006D:              	ends
  1643                        ;
  1644                        ;PFX_DEVICE_DRIVER DEVICE_SD = &DRIVER_FMXSDCard;
  1645                        	data
  1646                        	xdef	~~DEVICE_SD
  1647                        ~~DEVICE_SD:
  1648 00:006D: xx xx xx xx  	dl	~~DRIVER_FMXSDCard
  1649 00:0071:              	ends
  1650                        ;
  1651                        ;static PFX_DEVICE_DRIVER f_get_driver(LPCSTR majo
                    r,LPCSTR minor)
  1652                        ;{
  1653                        	.line	37
  1654                        	.line	38
  1655                        	SDCS05
  1656                        	func
  1657                        	.function	38
  1658                        ~~f_get_driver:
  1659                        	longa	on
  1660                        	longi	on
  1661 04:1DB0: 3B           	tsc
  1662 04:1DB1: 38           	sec
  1663 04:1DB2: E9 04 00     	sbc	#L2
  1664 04:1DB5: 1B           	tcs
  1665 04:1DB6: 0B           	phd
  1666 04:1DB7: 5B           	tcd
  1667             00000004   major_0	set	4
  1668             00000008   minor_0	set	8
  1669                        	.block	38
  1670                        ;	return &DRIVER_FMXSDCard;
  1671                        	.sym	major,4,142,6,32
  1672                        	.sym	minor,8,142,6,32
  1673                        	.line	39
  1674 04:1DB8: A9 xx xx     	lda	#<~~DRIVER_FMXSDCard
  1675 04:1DBB: 85 01        	sta	<R0
  1676                        	xref	_BEG_DATA
  1677 04:1DBD: A9 xx xx     	lda	#_BEG_DATA>>16
  1678 04:1DC0: 85 03        	sta	<R0+2
  1679 04:1DC2: A6 03        	ldx	<R0+2
  1680 04:1DC4: A5 01        	lda	<R0
  1681                        L5:
  1682 04:1DC6: A8           	tay
  1683 04:1DC7: A5 06        	lda	<L2+2
  Mon Sep 27 2021  9:39                                                Page 33


  1684 04:1DC9: 85 0E        	sta	<L2+2+8
  1685 04:1DCB: A5 05        	lda	<L2+1
  1686 04:1DCD: 85 0D        	sta	<L2+1+8
  1687 04:1DCF: 2B           	pld
  1688 04:1DD0: 3B           	tsc
  1689 04:1DD1: 18           	clc
  1690 04:1DD2: 69 0C 00     	adc	#L2+8
  1691 04:1DD5: 1B           	tcs
  1692 04:1DD6: 98           	tya
  1693 04:1DD7: 6B           	rtl
  1694                        ;}
  1695                        	.line	40
  1696                        	.endblock	40
  1697             00000004   L2	equ	4
  1698             00000005   L3	equ	5
  1699 04:1DD8:              	ends
  1700                        	efunc
  1701                        	.endfunc	40,5,4
  1702                        	.line	40
  1703                        ;
  1704                        ;
  1705                        ;static VOID f_driver_irq(void)
  1706                        ;{
  1707                        	.line	43
  1708                        	.line	44
  1709                        	SDCS05
  1710                        	func
  1711                        	.function	44
  1712                        ~~f_driver_irq:
  1713                        	longa	on
  1714                        	longi	on
  1715 04:1DD8: 3B           	tsc
  1716 04:1DD9: 38           	sec
  1717 04:1DDA: E9 04 00     	sbc	#L6
  1718 04:1DDD: 1B           	tcs
  1719 04:1DDE: 0B           	phd
  1720 04:1DDF: 5B           	tcd
  1721                        	.block	44
  1722                        ;	k_irq_device_event(IRQE_SDCARD_INS,_pseudo_timer
                    ,&default_arg);
  1723                        	.line	45
  1724 04:1DE0: A9 xx xx     	lda	#<~~default_arg
  1725 04:1DE3: 85 01        	sta	<R0
  1726                        	xref	_BEG_DATA
  1727 04:1DE5: A9 xx xx     	lda	#_BEG_DATA>>16
  1728 04:1DE8: 85 03        	sta	<R0+2
  1729 04:1DEA: D4 03        	pei	<R0+2
  1730 04:1DEC: D4 01        	pei	<R0
  1731 04:1DEE: AD xx xx     	lda	|~~_pseudo_timer+2
  1732 04:1DF1: 48           	pha
  1733 04:1DF2: AD xx xx     	lda	|~~_pseudo_timer
  1734 04:1DF5: 48           	pha
  1735 04:1DF6: F4 08 00     	pea	#<$8
  1736 04:1DF9: 22 xx xx xx  	jsl	~~k_irq_device_event
  1737                        ;	return;
  1738                        	.line	46
  1739                        L9:
  1740 04:1DFD: 2B           	pld
  Mon Sep 27 2021  9:39                                                Page 34


  1741 04:1DFE: 3B           	tsc
  1742 04:1DFF: 18           	clc
  1743 04:1E00: 69 04 00     	adc	#L6
  1744 04:1E03: 1B           	tcs
  1745 04:1E04: 6B           	rtl
  1746                        ;}
  1747                        	.line	47
  1748                        	.endblock	47
  1749             00000004   L6	equ	4
  1750             00000005   L7	equ	5
  1751 04:1E05:              	ends
  1752                        	efunc
  1753                        	.endfunc	47,5,4
  1754                        	.line	47
  1755                        ;
  1756                        ;
  1757                        ;#if defined(USE_FX256_FMX) || defined(USE_FX256_U
                    )
  1758                        ;
  1759                        ;VOID k_sd_reset(VOID)
  1760                        ;{
  1761                        	.line	52
  1762                        	.line	53
  1763                        	SDCS05
  1764                        	xdef	~~k_sd_reset
  1765                        	func
  1766                        	.function	53
  1767                        ~~k_sd_reset:
  1768                        	longa	on
  1769                        	longi	on
  1770 04:1E05: 3B           	tsc
  1771 04:1E06: 38           	sec
  1772 04:1E07: E9 01 00     	sbc	#L10
  1773 04:1E0A: 1B           	tcs
  1774 04:1E0B: 0B           	phd
  1775 04:1E0C: 5B           	tcd
  1776                        	.block	53
  1777                        ;	BYTE s = 0;
  1778                        ;
  1779                        ;	SDC_CONTROL_REG[0] = 1;
  1780             00000000   s_1	set	0
  1781                        	.sym	s,0,14,1,8
  1782 04:1E0D: E2 20        	sep	#$20
  1783                        	longa	off
  1784 04:1E0F: 64 01        	stz	<L11+s_1
  1785 04:1E11: C2 20        	rep	#$20
  1786                        	longa	on
  1787                        	.line	56
  1788 04:1E13: E2 20        	sep	#$20
  1789                        	longa	off
  1790 04:1E15: A9 01        	lda	#$1
  1791 04:1E17: 8F 01 EA AF  	sta	>11528705
  1792 04:1E1B: C2 20        	rep	#$20
  1793                        	longa	on
  1794                        ;
  1795                        ;	s = SDC_TRANS_BUSY;
  1796                        	.line	58
  1797 04:1E1D: E2 20        	sep	#$20
  Mon Sep 27 2021  9:39                                                Page 35


  1798                        	longa	off
  1799 04:1E1F: A9 01        	lda	#$1
  1800 04:1E21: 85 01        	sta	<L11+s_1
  1801 04:1E23: C2 20        	rep	#$20
  1802                        	longa	on
  1803                        ;	while(s & SDC_TRANS_BUSY)
  1804                        	.line	59
  1805                        L10001:
  1806 04:1E25: E2 20        	sep	#$20
  1807                        	longa	off
  1808 04:1E27: A5 01        	lda	<L11+s_1
  1809 04:1E29: 29 01        	and	#<$1
  1810 04:1E2B: C2 20        	rep	#$20
  1811                        	longa	on
  1812 04:1E2D: D0 03        	bne	L13
  1813 04:1E2F: 82 0D 00     	brl	L10002
  1814                        L13:
  1815                        ;	{
  1816                        	.line	60
  1817                        ;		s = SDC_TRANS_STATUS_REG[0];
  1818                        	.line	61
  1819 04:1E32: E2 20        	sep	#$20
  1820                        	longa	off
  1821 04:1E34: AF 04 EA AF  	lda	>11528708
  1822 04:1E38: 85 01        	sta	<L11+s_1
  1823 04:1E3A: C2 20        	rep	#$20
  1824                        	longa	on
  1825                        ;	}
  1826                        	.line	62
  1827 04:1E3C: 82 E6 FF     	brl	L10001
  1828                        L10002:
  1829                        ;}
  1830                        	.line	63
  1831                        L14:
  1832 04:1E3F: 2B           	pld
  1833 04:1E40: 3B           	tsc
  1834 04:1E41: 18           	clc
  1835 04:1E42: 69 01 00     	adc	#L10
  1836 04:1E45: 1B           	tcs
  1837 04:1E46: 6B           	rtl
  1838                        	.endblock	63
  1839             00000001   L10	equ	1
  1840             00000001   L11	equ	1
  1841 04:1E47:              	ends
  1842                        	efunc
  1843                        	.endfunc	63,1,1
  1844                        	.line	63
  1845                        ;
  1846                        ;UCHAR k_read_sd_command(UINT command,LPVOID buffe
                    r)
  1847                        ;{
  1848                        	.line	65
  1849                        	.line	66
  1850                        	SDCS05
  1851                        	xdef	~~k_read_sd_command
  1852                        	func
  1853                        	.function	66
  1854                        ~~k_read_sd_command:
  Mon Sep 27 2021  9:39                                                Page 36


  1855                        	longa	on
  1856                        	longi	on
  1857 04:1E47: 3B           	tsc
  1858 04:1E48: 38           	sec
  1859 04:1E49: E9 00 00     	sbc	#L15
  1860 04:1E4C: 1B           	tcs
  1861 04:1E4D: 0B           	phd
  1862 04:1E4E: 5B           	tcd
  1863             00000004   command_0	set	4
  1864             00000006   buffer_0	set	6
  1865                        	.block	66
  1866                        ;	return 0;
  1867                        	.sym	command,4,16,6,16
  1868                        	.sym	buffer,6,129,6,32
  1869                        	.line	67
  1870 04:1E4F: A9 00 00     	lda	#$0
  1871                        L18:
  1872 04:1E52: A8           	tay
  1873 04:1E53: A5 02        	lda	<L15+2
  1874 04:1E55: 85 08        	sta	<L15+2+6
  1875 04:1E57: A5 01        	lda	<L15+1
  1876 04:1E59: 85 07        	sta	<L15+1+6
  1877 04:1E5B: 2B           	pld
  1878 04:1E5C: 3B           	tsc
  1879 04:1E5D: 18           	clc
  1880 04:1E5E: 69 06 00     	adc	#L15+6
  1881 04:1E61: 1B           	tcs
  1882 04:1E62: 98           	tya
  1883 04:1E63: 6B           	rtl
  1884                        ;}
  1885                        	.line	68
  1886                        	.endblock	68
  1887             00000000   L15	equ	0
  1888             00000001   L16	equ	1
  1889 04:1E64:              	ends
  1890                        	efunc
  1891                        	.endfunc	68,1,0
  1892                        	.line	68
  1893                        ;
  1894                        ;UCHAR k_read_sd_sector(unsigned long offset,LPCHA
                    R receiveBuffer)
  1895                        ;{
  1896                        	.line	70
  1897                        	.line	71
  1898                        	SDCS05
  1899                        	xdef	~~k_read_sd_sector
  1900                        	func
  1901                        	.function	71
  1902                        ~~k_read_sd_sector:
  1903                        	longa	on
  1904                        	longi	on
  1905 04:1E64: 3B           	tsc
  1906 04:1E65: 38           	sec
  1907 04:1E66: E9 10 00     	sbc	#L19
  1908 04:1E69: 1B           	tcs
  1909 04:1E6A: 0B           	phd
  1910 04:1E6B: 5B           	tcd
  1911             00000004   offset_0	set	4
  Mon Sep 27 2021  9:39                                                Page 37


  1912             00000008   receiveBuffer_0	set	8
  1913                        	.block	71
  1914                        ;	UCHAR	errorCode = 0;
  1915                        ;	UCHAR	s;
  1916                        ;	UCHAR	fifoLO;
  1917                        ;	UCHAR	fifoHI;
  1918                        ;	UINT	size;
  1919                        ;	UINT	x;
  1920                        ;
  1921                        ;	//if(k_user_IsOSDebug())
  1922                        ;	//k_debug_long("k_read_sd_sector offset:",offset
                    );
  1923                        ;
  1924                        ;	*((unsigned long*)(&SDC_SD_ADDR_7_0_REG[0])) = o
                    ffset;
  1925             00000000   errorCode_1	set	0
  1926             00000001   s_1	set	1
  1927             00000002   fifoLO_1	set	2
  1928             00000003   fifoHI_1	set	3
  1929             00000004   size_1	set	4
  1930             00000006   x_1	set	6
  1931                        	.sym	errorCode,0,14,1,8
  1932                        	.sym	s,1,14,1,8
  1933                        	.sym	fifoLO,2,14,1,8
  1934                        	.sym	fifoHI,3,14,1,8
  1935                        	.sym	size,4,16,1,16
  1936                        	.sym	x,6,16,1,16
  1937                        	.sym	offset,4,18,6,32
  1938                        	.sym	receiveBuffer,8,142,6,32
  1939 04:1E6C: E2 20        	sep	#$20
  1940                        	longa	off
  1941 04:1E6E: 64 09        	stz	<L20+errorCode_1
  1942 04:1E70: C2 20        	rep	#$20
  1943                        	longa	on
  1944                        	.line	82
  1945 04:1E72: A5 14        	lda	<L19+offset_0
  1946 04:1E74: 8F 07 EA AF  	sta	>11528711
  1947 04:1E78: A5 16        	lda	<L19+offset_0+2
  1948 04:1E7A: 8F 09 EA AF  	sta	>11528711+2
  1949                        ;
  1950                        ;	SDC_TRANS_TYPE_REG[0]    = SDC_TRANS_READ_BLK;
  1951                        	.line	84
  1952 04:1E7E: E2 20        	sep	#$20
  1953                        	longa	off
  1954 04:1E80: A9 02        	lda	#$2
  1955 04:1E82: 8F 02 EA AF  	sta	>11528706
  1956 04:1E86: C2 20        	rep	#$20
  1957                        	longa	on
  1958                        ;	SDC_TRANS_CONTROL_REG[0] = SDC_TRANS_START;
  1959                        	.line	85
  1960 04:1E88: E2 20        	sep	#$20
  1961                        	longa	off
  1962 04:1E8A: A9 01        	lda	#$1
  1963 04:1E8C: 8F 03 EA AF  	sta	>11528707
  1964 04:1E90: C2 20        	rep	#$20
  1965                        	longa	on
  1966                        ;
  1967                        ;	s = SDC_TRANS_BUSY;
  Mon Sep 27 2021  9:39                                                Page 38


  1968                        	.line	87
  1969 04:1E92: E2 20        	sep	#$20
  1970                        	longa	off
  1971 04:1E94: A9 01        	lda	#$1
  1972 04:1E96: 85 0A        	sta	<L20+s_1
  1973 04:1E98: C2 20        	rep	#$20
  1974                        	longa	on
  1975                        ;	while(s & SDC_TRANS_BUSY)
  1976                        	.line	88
  1977                        L10003:
  1978 04:1E9A: E2 20        	sep	#$20
  1979                        	longa	off
  1980 04:1E9C: A5 0A        	lda	<L20+s_1
  1981 04:1E9E: 29 01        	and	#<$1
  1982 04:1EA0: C2 20        	rep	#$20
  1983                        	longa	on
  1984 04:1EA2: D0 03        	bne	L22
  1985 04:1EA4: 82 0D 00     	brl	L10004
  1986                        L22:
  1987                        ;	{
  1988                        	.line	89
  1989                        ;		s = SDC_TRANS_STATUS_REG[0];
  1990                        	.line	90
  1991 04:1EA7: E2 20        	sep	#$20
  1992                        	longa	off
  1993 04:1EA9: AF 04 EA AF  	lda	>11528708
  1994 04:1EAD: 85 0A        	sta	<L20+s_1
  1995 04:1EAF: C2 20        	rep	#$20
  1996                        	longa	on
  1997                        ;	}
  1998                        	.line	91
  1999 04:1EB1: 82 E6 FF     	brl	L10003
  2000                        L10004:
  2001                        ;
  2002                        ;	fifoLO = SDC_RX_FIFO_DATA_CNT_LO[0];
  2003                        	.line	93
  2004 04:1EB4: E2 20        	sep	#$20
  2005                        	longa	off
  2006 04:1EB6: AF 13 EA AF  	lda	>11528723
  2007 04:1EBA: 85 0B        	sta	<L20+fifoLO_1
  2008 04:1EBC: C2 20        	rep	#$20
  2009                        	longa	on
  2010                        ;	fifoHI = SDC_RX_FIFO_DATA_CNT_HI[0];
  2011                        	.line	94
  2012 04:1EBE: E2 20        	sep	#$20
  2013                        	longa	off
  2014 04:1EC0: AF 12 EA AF  	lda	>11528722
  2015 04:1EC4: 85 0C        	sta	<L20+fifoHI_1
  2016 04:1EC6: C2 20        	rep	#$20
  2017                        	longa	on
  2018                        ;
  2019                        ;	size = MAKEWORD(fifoLO,fifoHI);
  2020                        	.line	96
  2021 04:1EC8: A5 0C        	lda	<L20+fifoHI_1
  2022 04:1ECA: 29 FF 00     	and	#$ff
  2023 04:1ECD: 85 05        	sta	<R1
  2024 04:1ECF: A5 05        	lda	<R1
  2025 04:1ED1: EB           	xba
  Mon Sep 27 2021  9:39                                                Page 39


  2026 04:1ED2: 29 00 FF     	and	#$ff00
  2027 04:1ED5: 85 01        	sta	<R0
  2028 04:1ED7: A5 0B        	lda	<L20+fifoLO_1
  2029 04:1ED9: 29 FF 00     	and	#$ff
  2030 04:1EDC: 85 05        	sta	<R1
  2031 04:1EDE: A5 05        	lda	<R1
  2032 04:1EE0: 05 01        	ora	<R0
  2033 04:1EE2: 85 0D        	sta	<L20+size_1
  2034                        ;
  2035                        ;	//k_debug_integer("readSDSector size:",size);
  2036                        ;
  2037                        ;	for(x=0;x<SDC_BUFFER_SIZE;x++)
  2038                        	.line	100
  2039 04:1EE4: 64 0F        	stz	<L20+x_1
  2040                        L10007:
  2041                        ;	{
  2042                        	.line	101
  2043                        ;		receiveBuffer[x] = SDC_RX_FIFO_DATA_REG[
                    0];
  2044                        	.line	102
  2045 04:1EE6: E2 20        	sep	#$20
  2046                        	longa	off
  2047 04:1EE8: AF 10 EA AF  	lda	>11528720
  2048 04:1EEC: A4 0F        	ldy	<L20+x_1
  2049 04:1EEE: 97 18        	sta	[<L19+receiveBuffer_0],Y
  2050 04:1EF0: C2 20        	rep	#$20
  2051                        	longa	on
  2052                        ;	}
  2053                        	.line	103
  2054                        L10005:
  2055 04:1EF2: E6 0F        	inc	<L20+x_1
  2056 04:1EF4: A5 0F        	lda	<L20+x_1
  2057 04:1EF6: C9 00 02     	cmp	#<$200
  2058 04:1EF9: B0 03        	bcs	L23
  2059 04:1EFB: 82 E8 FF     	brl	L10007
  2060                        L23:
  2061                        L10006:
  2062                        ;	//k_debug_byte_array("k_read_sd_sector:",receive
                    Buffer,512);
  2063                        ;
  2064                        ;	errorCode = SDC_TRANS_ERROR_REG[0] & 0x0C;
  2065                        	.line	106
  2066 04:1EFE: E2 20        	sep	#$20
  2067                        	longa	off
  2068 04:1F00: AF 05 EA AF  	lda	>11528709
  2069 04:1F04: 29 0C        	and	#<$c
  2070 04:1F06: 85 09        	sta	<L20+errorCode_1
  2071 04:1F08: C2 20        	rep	#$20
  2072                        	longa	on
  2073                        ;
  2074                        ;	if(errorCode)
  2075                        	.line	108
  2076                        ;	{
  2077 04:1F0A: A5 09        	lda	<L20+errorCode_1
  2078 04:1F0C: 29 FF 00     	and	#$ff
  2079 04:1F0F: D0 03        	bne	L24
  2080 04:1F11: 82 10 00     	brl	L10008
  2081                        L24:
  Mon Sep 27 2021  9:39                                                Page 40


  2082                        	.line	109
  2083                        ;		k_debug_integer("k_read_sd_sector errorC
                    ode:",errorCode);
  2084                        	.line	110
  2085 04:1F14: A5 09        	lda	<L20+errorCode_1
  2086 04:1F16: 29 FF 00     	and	#$ff
  2087 04:1F19: 48           	pha
  2088 04:1F1A: F4 xx xx     	pea	#^L1
  2089 04:1F1D: F4 xx xx     	pea	#<L1
  2090 04:1F20: 22 xx xx xx  	jsl	~~k_debug_integer
  2091                        ;	}
  2092                        	.line	111
  2093                        ;	//if(k_user_IsOSDebug())
  2094                        ;	//k_debug_integer("k_read_sd_sector errorCode:",
                    errorCode);
  2095                        ;
  2096                        ;	//k_debug_byte_array("readSDSector::data:",recei
                    veBuffer,512);
  2097                        ;
  2098                        ;	return errorCode;
  2099                        L10008:
  2100                        	.line	117
  2101 04:1F24: A5 09        	lda	<L20+errorCode_1
  2102 04:1F26: 29 FF 00     	and	#$ff
  2103                        L25:
  2104 04:1F29: A8           	tay
  2105 04:1F2A: A5 12        	lda	<L19+2
  2106 04:1F2C: 85 1A        	sta	<L19+2+8
  2107 04:1F2E: A5 11        	lda	<L19+1
  2108 04:1F30: 85 19        	sta	<L19+1+8
  2109 04:1F32: 2B           	pld
  2110 04:1F33: 3B           	tsc
  2111 04:1F34: 18           	clc
  2112 04:1F35: 69 18 00     	adc	#L19+8
  2113 04:1F38: 1B           	tcs
  2114 04:1F39: 98           	tya
  2115 04:1F3A: 6B           	rtl
  2116                        ;}
  2117                        	.line	118
  2118                        	.endblock	118
  2119             00000010   L19	equ	16
  2120             00000009   L20	equ	9
  2121 04:1F3B:              	ends
  2122                        	efunc
  2123                        	.endfunc	118,9,16
  2124                        	.line	118
  2125                        	data
  2126                        L1:
  2127 00:0071: 6B 5F 72 65  	db	$6B,$5F,$72,$65,$61,$64,$5F,$73,$64,$5F,
                    $73,$65,$63,$74,$6F
       00:0075: 61 64 5F 73 
       00:0079: 64 5F 73 65 
       00:007D: 63 74 6F 
  2128 00:0080: 72 20 65 72  	db	$72,$20,$65,$72,$72,$6F,$72,$43,$6F,$64,
                    $65,$3A,$00
       00:0084: 72 6F 72 43 
       00:0088: 6F 64 65 3A 
       00:008C: 00 
  Mon Sep 27 2021  9:39                                                Page 41


  2129 00:008D:              	ends
  2130                        ;
  2131                        ;UCHAR k_write_sd_sector(unsigned long offset,LPCH
                    AR sendBuffer)
  2132                        ;{
  2133                        	.line	120
  2134                        	.line	121
  2135                        	SDCS05
  2136                        	xdef	~~k_write_sd_sector
  2137                        	func
  2138                        	.function	121
  2139                        ~~k_write_sd_sector:
  2140                        	longa	on
  2141                        	longi	on
  2142 04:1F3B: 3B           	tsc
  2143 04:1F3C: 38           	sec
  2144 04:1F3D: E9 04 00     	sbc	#L27
  2145 04:1F40: 1B           	tcs
  2146 04:1F41: 0B           	phd
  2147 04:1F42: 5B           	tcd
  2148             00000004   offset_0	set	4
  2149             00000008   sendBuffer_0	set	8
  2150                        	.block	121
  2151                        ;	UCHAR	errorCode;
  2152                        ;	UCHAR	s;
  2153                        ;	UINT	x;
  2154                        ;
  2155                        ;	//k_debug_long("k_write_sd_sector::offset:",offs
                    et);
  2156                        ;	//k_debug_byte_array("k_write_sd_sector::k_debug
                    _byte_array:",sendBuffer,512);
  2157                        ;
  2158                        ;	//SDC_TX_FIFO_CTRL_REG[0] = 1;
  2159                        ;
  2160                        ;	for(x=0;x<SDC_BUFFER_SIZE;x++)
  2161             00000000   errorCode_1	set	0
  2162             00000001   s_1	set	1
  2163             00000002   x_1	set	2
  2164                        	.sym	errorCode,0,14,1,8
  2165                        	.sym	s,1,14,1,8
  2166                        	.sym	x,2,16,1,16
  2167                        	.sym	offset,4,18,6,32
  2168                        	.sym	sendBuffer,8,142,6,32
  2169                        	.line	131
  2170 04:1F43: 64 03        	stz	<L28+x_1
  2171                        L10011:
  2172                        ;	{
  2173                        	.line	132
  2174                        ;		SDC_TX_FIFO_DATA_REG[0] = sendBuffer[x];
  2175                        	.line	133
  2176 04:1F45: E2 20        	sep	#$20
  2177                        	longa	off
  2178 04:1F47: A4 03        	ldy	<L28+x_1
  2179 04:1F49: B7 0C        	lda	[<L27+sendBuffer_0],Y
  2180 04:1F4B: 8F 20 EA AF  	sta	>11528736
  2181 04:1F4F: C2 20        	rep	#$20
  2182                        	longa	on
  2183                        ;	}
  Mon Sep 27 2021  9:39                                                Page 42


  2184                        	.line	134
  2185                        L10009:
  2186 04:1F51: E6 03        	inc	<L28+x_1
  2187 04:1F53: A5 03        	lda	<L28+x_1
  2188 04:1F55: C9 00 02     	cmp	#<$200
  2189 04:1F58: B0 03        	bcs	L30
  2190 04:1F5A: 82 E8 FF     	brl	L10011
  2191                        L30:
  2192                        L10010:
  2193                        ;
  2194                        ;	*((unsigned long*)(&SDC_SD_ADDR_7_0_REG[0])) = o
                    ffset;
  2195                        	.line	136
  2196 04:1F5D: A5 08        	lda	<L27+offset_0
  2197 04:1F5F: 8F 07 EA AF  	sta	>11528711
  2198 04:1F63: A5 0A        	lda	<L27+offset_0+2
  2199 04:1F65: 8F 09 EA AF  	sta	>11528711+2
  2200                        ;
  2201                        ;
  2202                        ;	SDC_TRANS_TYPE_REG[0]    = SDC_TRANS_WRITE_BLK;
  2203                        	.line	139
  2204 04:1F69: E2 20        	sep	#$20
  2205                        	longa	off
  2206 04:1F6B: A9 03        	lda	#$3
  2207 04:1F6D: 8F 02 EA AF  	sta	>11528706
  2208 04:1F71: C2 20        	rep	#$20
  2209                        	longa	on
  2210                        ;	SDC_TRANS_CONTROL_REG[0] = SDC_TRANS_START;
  2211                        	.line	140
  2212 04:1F73: E2 20        	sep	#$20
  2213                        	longa	off
  2214 04:1F75: A9 01        	lda	#$1
  2215 04:1F77: 8F 03 EA AF  	sta	>11528707
  2216 04:1F7B: C2 20        	rep	#$20
  2217                        	longa	on
  2218                        ;
  2219                        ;	s = SDC_TRANS_BUSY;
  2220                        	.line	142
  2221 04:1F7D: E2 20        	sep	#$20
  2222                        	longa	off
  2223 04:1F7F: A9 01        	lda	#$1
  2224 04:1F81: 85 02        	sta	<L28+s_1
  2225 04:1F83: C2 20        	rep	#$20
  2226                        	longa	on
  2227                        ;	while(s & SDC_TRANS_BUSY)
  2228                        	.line	143
  2229                        L10012:
  2230 04:1F85: E2 20        	sep	#$20
  2231                        	longa	off
  2232 04:1F87: A5 02        	lda	<L28+s_1
  2233 04:1F89: 29 01        	and	#<$1
  2234 04:1F8B: C2 20        	rep	#$20
  2235                        	longa	on
  2236 04:1F8D: D0 03        	bne	L31
  2237 04:1F8F: 82 0D 00     	brl	L10013
  2238                        L31:
  2239                        ;	{
  2240                        	.line	144
  Mon Sep 27 2021  9:39                                                Page 43


  2241                        ;		s = SDC_TRANS_STATUS_REG[0];
  2242                        	.line	145
  2243 04:1F92: E2 20        	sep	#$20
  2244                        	longa	off
  2245 04:1F94: AF 04 EA AF  	lda	>11528708
  2246 04:1F98: 85 02        	sta	<L28+s_1
  2247 04:1F9A: C2 20        	rep	#$20
  2248                        	longa	on
  2249                        ;	}
  2250                        	.line	146
  2251 04:1F9C: 82 E6 FF     	brl	L10012
  2252                        L10013:
  2253                        ;
  2254                        ;	errorCode = SDC_TRANS_ERROR_REG[0] & 0x33;
  2255                        	.line	148
  2256 04:1F9F: E2 20        	sep	#$20
  2257                        	longa	off
  2258 04:1FA1: AF 05 EA AF  	lda	>11528709
  2259 04:1FA5: 29 33        	and	#<$33
  2260 04:1FA7: 85 01        	sta	<L28+errorCode_1
  2261 04:1FA9: C2 20        	rep	#$20
  2262                        	longa	on
  2263                        ;
  2264                        ;	//k_debug_long("writeSDSector::errorCode:",error
                    Code);
  2265                        ;
  2266                        ;	return errorCode;
  2267                        	.line	152
  2268 04:1FAB: A5 01        	lda	<L28+errorCode_1
  2269 04:1FAD: 29 FF 00     	and	#$ff
  2270                        L32:
  2271 04:1FB0: A8           	tay
  2272 04:1FB1: A5 06        	lda	<L27+2
  2273 04:1FB3: 85 0E        	sta	<L27+2+8
  2274 04:1FB5: A5 05        	lda	<L27+1
  2275 04:1FB7: 85 0D        	sta	<L27+1+8
  2276 04:1FB9: 2B           	pld
  2277 04:1FBA: 3B           	tsc
  2278 04:1FBB: 18           	clc
  2279 04:1FBC: 69 0C 00     	adc	#L27+8
  2280 04:1FBF: 1B           	tcs
  2281 04:1FC0: 98           	tya
  2282 04:1FC1: 6B           	rtl
  2283                        ;}
  2284                        	.line	153
  2285                        	.endblock	153
  2286             00000004   L27	equ	4
  2287             00000001   L28	equ	1
  2288 04:1FC2:              	ends
  2289                        	efunc
  2290                        	.endfunc	153,1,4
  2291                        	.line	153
  2292                        ;
  2293                        ;
  2294                        ;UCHAR readCluster(unsigned long offset,UINT secto
                    rsPerCluster,LPCHAR receiveBuffer,ULONG file_size)
  2295                        ;{
  2296                        	.line	156
  Mon Sep 27 2021  9:39                                                Page 44


  2297                        	.line	157
  2298                        	SDCS05
  2299                        	xdef	~~readCluster
  2300                        	func
  2301                        	.function	157
  2302                        ~~readCluster:
  2303                        	longa	on
  2304                        	longi	on
  2305 04:1FC2: 3B           	tsc
  2306 04:1FC3: 38           	sec
  2307 04:1FC4: E9 0E 00     	sbc	#L33
  2308 04:1FC7: 1B           	tcs
  2309 04:1FC8: 0B           	phd
  2310 04:1FC9: 5B           	tcd
  2311             00000004   offset_0	set	4
  2312             00000008   sectorsPerCluster_0	set	8
  2313             0000000A   receiveBuffer_0	set	10
  2314             0000000E   file_size_0	set	14
  2315                        	.block	157
  2316                        ;	UINT c = 0;
  2317                        ;	ULONG read = 0;
  2318                        ;
  2319                        ;
  2320                        ;	k_debug_long("readCluster::offset:",offset);
  2321             00000000   c_1	set	0
  2322             00000002   read_1	set	2
  2323                        	.sym	c,0,16,1,16
  2324                        	.sym	read,2,18,1,32
  2325                        	.sym	offset,4,18,6,32
  2326                        	.sym	sectorsPerCluster,8,16,6,16
  2327                        	.sym	receiveBuffer,10,142,6,32
  2328                        	.sym	file_size,14,18,6,32
  2329 04:1FCA: 64 09        	stz	<L34+c_1
  2330 04:1FCC: 64 0B        	stz	<L34+read_1
  2331 04:1FCE: 64 0D        	stz	<L34+read_1+2
  2332                        	.line	162
  2333 04:1FD0: D4 14        	pei	<L33+offset_0+2
  2334 04:1FD2: D4 12        	pei	<L33+offset_0
  2335 04:1FD4: F4 xx xx     	pea	#^L26
  2336 04:1FD7: F4 xx xx     	pea	#<L26
  2337 04:1FDA: 22 xx xx xx  	jsl	~~k_debug_long
  2338                        ;	for(c=0;c<sectorsPerCluster;c++)
  2339                        	.line	163
  2340 04:1FDE: 64 09        	stz	<L34+c_1
  2341 04:1FE0: 82 7D 00     	brl	L10017
  2342                        L10016:
  2343                        ;	{
  2344                        	.line	164
  2345                        ;		k_read_sd_sector(offset + (sectorsPerClu
                    ster * c),receiveBuffer);
  2346                        	.line	165
  2347 04:1FE3: D4 1A        	pei	<L33+receiveBuffer_0+2
  2348 04:1FE5: D4 18        	pei	<L33+receiveBuffer_0
  2349 04:1FE7: A5 16        	lda	<L33+sectorsPerCluster_0
  2350 04:1FE9: A6 09        	ldx	<L34+c_1
  2351                        	xref	~~~mul
  2352 04:1FEB: 22 xx xx xx  	jsl	~~~mul
  2353 04:1FEF: 85 01        	sta	<R0
  Mon Sep 27 2021  9:39                                                Page 45


  2354 04:1FF1: A5 01        	lda	<R0
  2355 04:1FF3: 85 01        	sta	<R0
  2356 04:1FF5: 64 03        	stz	<R0+2
  2357 04:1FF7: 18           	clc
  2358 04:1FF8: A5 01        	lda	<R0
  2359 04:1FFA: 65 12        	adc	<L33+offset_0
  2360 04:1FFC: 85 05        	sta	<R1
  2361 04:1FFE: A5 03        	lda	<R0+2
  2362 04:2000: 65 14        	adc	<L33+offset_0+2
  2363 04:2002: 85 07        	sta	<R1+2
  2364 04:2004: D4 07        	pei	<R1+2
  2365 04:2006: D4 05        	pei	<R1
  2366 04:2008: 22 64 1E 04  	jsl	~~k_read_sd_sector
  2367                        ;		read+=512;
  2368                        	.line	166
  2369 04:200C: 18           	clc
  2370 04:200D: A9 00 02     	lda	#$200
  2371 04:2010: 65 0B        	adc	<L34+read_1
  2372 04:2012: 85 0B        	sta	<L34+read_1
  2373 04:2014: 90 02        	bcc	L36
  2374 04:2016: E6 0D        	inc	<L34+read_1+2
  2375                        L36:
  2376                        ;		//k_debug_long("file_size:",file_size);
  2377                        ;		//k_debug_long("read:",read);
  2378                        ;		if(read > file_size)
  2379                        	.line	169
  2380                        ;			k_debug_byte_array("SECTOR:",rec
                    eiveBuffer,file_size);
  2381 04:2018: A5 1C        	lda	<L33+file_size_0
  2382 04:201A: C5 0B        	cmp	<L34+read_1
  2383 04:201C: A5 1E        	lda	<L33+file_size_0+2
  2384 04:201E: E5 0D        	sbc	<L34+read_1+2
  2385 04:2020: 90 03        	bcc	L37
  2386 04:2022: 82 15 00     	brl	L10018
  2387                        L37:
  2388                        	.line	170
  2389 04:2025: D4 1E        	pei	<L33+file_size_0+2
  2390 04:2027: D4 1C        	pei	<L33+file_size_0
  2391 04:2029: D4 1A        	pei	<L33+receiveBuffer_0+2
  2392 04:202B: D4 18        	pei	<L33+receiveBuffer_0
  2393 04:202D: F4 xx xx     	pea	#^L26+21
  2394 04:2030: F4 xx xx     	pea	#<L26+21
  2395 04:2033: 22 xx xx xx  	jsl	~~k_debug_byte_array
  2396                        ;		else
  2397 04:2037: 82 14 00     	brl	L10019
  2398                        L10018:
  2399                        ;			k_debug_byte_array("SECTOR:",rec
                    eiveBuffer,512);
  2400                        	.line	172
  2401 04:203A: F4 00 00     	pea	#^$200
  2402 04:203D: F4 00 02     	pea	#<$200
  2403 04:2040: D4 1A        	pei	<L33+receiveBuffer_0+2
  2404 04:2042: D4 18        	pei	<L33+receiveBuffer_0
  2405 04:2044: F4 xx xx     	pea	#^L26+29
  2406 04:2047: F4 xx xx     	pea	#<L26+29
  2407 04:204A: 22 xx xx xx  	jsl	~~k_debug_byte_array
  2408                        L10019:
  2409                        ;
  Mon Sep 27 2021  9:39                                                Page 46


  2410                        ;		if(read > file_size)
  2411                        	.line	174
  2412                        ;		{
  2413 04:204E: A5 1C        	lda	<L33+file_size_0
  2414 04:2050: C5 0B        	cmp	<L34+read_1
  2415 04:2052: A5 1E        	lda	<L33+file_size_0+2
  2416 04:2054: E5 0D        	sbc	<L34+read_1+2
  2417 04:2056: 90 03        	bcc	L38
  2418 04:2058: 82 03 00     	brl	L10020
  2419                        L38:
  2420                        	.line	175
  2421                        ;			break;
  2422                        	.line	176
  2423 04:205B: 82 0B 00     	brl	L10015
  2424                        ;		}
  2425                        	.line	177
  2426                        ;	}
  2427                        L10020:
  2428                        	.line	178
  2429                        L10014:
  2430 04:205E: E6 09        	inc	<L34+c_1
  2431                        L10017:
  2432 04:2060: A5 09        	lda	<L34+c_1
  2433 04:2062: C5 16        	cmp	<L33+sectorsPerCluster_0
  2434 04:2064: B0 03        	bcs	L39
  2435 04:2066: 82 7A FF     	brl	L10016
  2436                        L39:
  2437                        L10015:
  2438                        ;
  2439                        ;	return 0;
  2440                        	.line	180
  2441 04:2069: A9 00 00     	lda	#$0
  2442                        L40:
  2443 04:206C: A8           	tay
  2444 04:206D: A5 10        	lda	<L33+2
  2445 04:206F: 85 1E        	sta	<L33+2+14
  2446 04:2071: A5 0F        	lda	<L33+1
  2447 04:2073: 85 1D        	sta	<L33+1+14
  2448 04:2075: 2B           	pld
  2449 04:2076: 3B           	tsc
  2450 04:2077: 18           	clc
  2451 04:2078: 69 1C 00     	adc	#L33+14
  2452 04:207B: 1B           	tcs
  2453 04:207C: 98           	tya
  2454 04:207D: 6B           	rtl
  2455                        ;}
  2456                        	.line	181
  2457                        	.endblock	181
  2458             0000000E   L33	equ	14
  2459             00000009   L34	equ	9
  2460 04:207E:              	ends
  2461                        	efunc
  2462                        	.endfunc	181,9,14
  2463                        	.line	181
  2464                        	data
  2465                        L26:
  2466 00:008D: 72 65 61 64  	db	$72,$65,$61,$64,$43,$6C,$75,$73,$74,$65,
                    $72,$3A,$3A,$6F,$66
  Mon Sep 27 2021  9:39                                                Page 47


       00:0091: 43 6C 75 73 
       00:0095: 74 65 72 3A 
       00:0099: 3A 6F 66 
  2467 00:009C: 66 73 65 74  	db	$66,$73,$65,$74,$3A,$00,$53,$45,$43,$54,
                    $4F,$52,$3A,$00,$53
       00:00A0: 3A 00 53 45 
       00:00A4: 43 54 4F 52 
       00:00A8: 3A 00 53 
  2468 00:00AB: 45 43 54 4F  	db	$45,$43,$54,$4F,$52,$3A,$00
       00:00AF: 52 3A 00 
  2469 00:00B2:              	ends
  2470                        ;
  2471                        ;/*
  2472                        ;LPCHAR readClusterToMemory(unsigned long offset,U
                    INT sectorsPerCluster,LPCHAR receiveBuffer,ULONG file_size)
  2473                        ;{
  2474                        ;	UINT c = 0;
  2475                        ;	ULONG read = 0;
  2476                        ;	PBITMAPFILEHEADER pheader = NULL;
  2477                        ;	PBITMAPINFOHEADER pinfo = NULL;
  2478                        ;	LPCHAR imageStart = NULL;
  2479                        ;
  2480                        ;	for(c=0;c<sectorsPerCluster;c++)
  2481                        ;	{
  2482                        ;		readSDSector(offset + (sectorsPerCluster
                     * c) + read,receiveBuffer);
  2483                        ;		read+=512;
  2484                        ;		//k_debug_long("file_size:",file_size);
  2485                        ;		//k_debug_long("read:",read);
  2486                        ;		if(receiveBuffer == SHADOW_BANK_0)
  2487                        ;		{
  2488                        ;			pheader = (PBITMAPFILEHEADER)rec
                    eiveBuffer;
  2489                        ;
  2490                        ;		    k_debug_integer("bfType:",pheader->b
                    fType);
  2491                        ;			k_debug_long("bfSize:",pheader->
                    bfSize);
  2492                        ;			k_debug_long("bfOffBits:",pheade
                    r->bfOffBits);
  2493                        ;
  2494                        ;
  2495                        ;			pinfo = (PBITMAPINFOHEADER)&rece
                    iveBuffer[sizeof(BITMAPFILEHEADER)];
  2496                        ;
  2497                        ;			k_debug_long("height:",pinfo->bi
                    Height);
  2498                        ;			k_debug_long("width:",pinfo->biW
                    idth);
  2499                        ;
  2500                        ;			k_debug_integer("biPlanes:",pinf
                    o->biPlanes); //specifies the number of color planes, must b
                    e 1
  2501                        ;			k_debug_integer("biBitCount:",pi
                    nfo->biBitCount); //specifies the number of bit per pixel
  2502                        ;			k_debug_long("biCompression:",pi
                    nfo->biCompression);//spcifies the type of compression
  2503                        ;			k_debug_long("biSizeImage:",pinf
  Mon Sep 27 2021  9:39                                                Page 48


                    o->biSizeImage);  //size of image in bytes
  2504                        ;			k_debug_long("biXPelsPerMeter:",
                    pinfo->biXPelsPerMeter);  //number of pixels per meter in x 
                    axis
  2505                        ;			k_debug_long("biYPelsPerMeter:",
                    pinfo->biYPelsPerMeter);  //number of pixels per meter in y 
                    axis
  2506                        ;
  2507                        ;			imageStart = &receiveBuffer[phea
                    der->bfOffBits];
  2508                        ;		}
  2509                        ;
  2510                        ;		//receiveBuffer = &(receiveBuffer[read])
                    ;
  2511                        ;		//k_debug_byte_array("SECTOR:",receiveBu
                    ffer,512);
  2512                        ;		receiveBuffer+=512L;
  2513                        ;		//k_debug_pointer("readClusterToMemory::
                    receiveBuffer:",receiveBuffer);
  2514                        ;
  2515                        ;		if(read > file_size)
  2516                        ;		{
  2517                        ;			break;
  2518                        ;		}
  2519                        ;	}
  2520                        ;
  2521                        ;	return receiveBuffer;
  2522                        ;}
  2523                        ;
  2524                        ;
  2525                        ;LPCHAR readBitmapData(LPCHAR bitmapBuffer)
  2526                        ;{
  2527                        ;	PBITMAPFILEHEADER pheader = NULL;
  2528                        ;	PBITMAPINFOHEADER pinfo = NULL;
  2529                        ;	LPCHAR imageStart = NULL;
  2530                        ;
  2531                        ;	if(bitmapBuffer)
  2532                        ;	{
  2533                        ;		pheader = (PBITMAPFILEHEADER)bitmapBuffe
                    r;
  2534                        ;
  2535                        ;		k_debug_integer("bfType:",pheader->bfTyp
                    e);
  2536                        ;		k_debug_long("bfSize:",pheader->bfSize);
  2537                        ;		k_debug_long("bfOffBits:",pheader->bfOff
                    Bits);
  2538                        ;
  2539                        ;		pinfo = (PBITMAPINFOHEADER)&bitmapBuffer
                    [sizeof(BITMAPFILEHEADER)];
  2540                        ;
  2541                        ;		k_debug_long("height:",pinfo->biHeight);
  2542                        ;		k_debug_long("width:",pinfo->biWidth);
  2543                        ;
  2544                        ;		k_debug_integer("biPlanes:",pinfo->biPla
                    nes); //specifies the number of color planes, must be 1
  2545                        ;		k_debug_integer("biBitCount:",pinfo->biB
                    itCount); //specifies the number of bit per pixel
  2546                        ;		k_debug_long("biCompression:",pinfo->biC
  Mon Sep 27 2021  9:39                                                Page 49


                    ompression);//spcifies the type of compression
  2547                        ;		k_debug_long("biSizeImage:",pinfo->biSiz
                    eImage);  //size of image in bytes
  2548                        ;		k_debug_long("biXPelsPerMeter:",pinfo->b
                    iXPelsPerMeter);  //number of pixels per meter in x axis
  2549                        ;		k_debug_long("biYPelsPerMeter:",pinfo->b
                    iYPelsPerMeter);  //number of pixels per meter in y axis
  2550                        ;
  2551                        ;		imageStart = &bitmapBuffer[pheader->bfOf
                    fBits];
  2552                        ;	}
  2553                        ;
  2554                        ;	return imageStart;
  2555                        ;}
  2556                        ;*/
  2557                        ;
  2558                        ;BOOL k_read_volume_name(PFAT16ENTRY entry,PFXDOSD
                    EVICE pdev)
  2559                        ;{
  2560                        	.line	270
  2561                        	.line	271
  2562                        	SDCS05
  2563                        	xdef	~~k_read_volume_name
  2564                        	func
  2565                        	.function	271
  2566                        ~~k_read_volume_name:
  2567                        	longa	on
  2568                        	longi	on
  2569 04:207E: 3B           	tsc
  2570 04:207F: 38           	sec
  2571 04:2080: E9 09 00     	sbc	#L42
  2572 04:2083: 1B           	tcs
  2573 04:2084: 0B           	phd
  2574 04:2085: 5B           	tcd
  2575             00000004   entry_0	set	4
  2576             00000008   pdev_0	set	8
  2577                        	.block	271
  2578                        ;	BOOL bRet = FALSE;
  2579                        ;
  2580                        ;	if(entry && pdev)
  2581             00000000   bRet_1	set	0
  2582                        	.sym	bRet,0,14,1,8
  2583                        	.sym	entry,4,138,6,32,100
  2584                        	.sym	pdev,8,138,6,32,127
  2585 04:2086: E2 20        	sep	#$20
  2586                        	longa	off
  2587 04:2088: 64 09        	stz	<L43+bRet_1
  2588 04:208A: C2 20        	rep	#$20
  2589                        	longa	on
  2590                        	.line	274
  2591                        ;	{
  2592 04:208C: A5 0D        	lda	<L42+entry_0
  2593 04:208E: 05 0F        	ora	<L42+entry_0+2
  2594 04:2090: D0 03        	bne	L45
  2595 04:2092: 82 89 00     	brl	L10021
  2596                        L45:
  2597 04:2095: A5 11        	lda	<L42+pdev_0
  2598 04:2097: 05 13        	ora	<L42+pdev_0+2
  Mon Sep 27 2021  9:39                                                Page 50


  2599 04:2099: D0 03        	bne	L46
  2600 04:209B: 82 80 00     	brl	L10021
  2601                        L46:
  2602                        	.line	275
  2603                        ;    	if(entry->attributes == 0x08)
  2604                        	.line	276
  2605                        ;		{
  2606 04:209E: E2 20        	sep	#$20
  2607                        	longa	off
  2608 04:20A0: A0 0B 00     	ldy	#$b
  2609 04:20A3: B7 0D        	lda	[<L42+entry_0],Y
  2610 04:20A5: C9 08        	cmp	#<$8
  2611 04:20A7: C2 20        	rep	#$20
  2612                        	longa	on
  2613 04:20A9: F0 03        	beq	L47
  2614 04:20AB: 82 70 00     	brl	L10022
  2615                        L47:
  2616                        	.line	277
  2617                        ;    		memset(pdev->root_volume_name,0,
                    12);
  2618                        	.line	278
  2619 04:20AE: F4 0C 00     	pea	#<$c
  2620 04:20B1: F4 00 00     	pea	#<$0
  2621 04:20B4: 18           	clc
  2622 04:20B5: A9 AD 02     	lda	#$2ad
  2623 04:20B8: 65 11        	adc	<L42+pdev_0
  2624 04:20BA: 85 01        	sta	<R0
  2625 04:20BC: A9 00 00     	lda	#$0
  2626 04:20BF: 65 13        	adc	<L42+pdev_0+2
  2627 04:20C1: 85 03        	sta	<R0+2
  2628 04:20C3: D4 03        	pei	<R0+2
  2629 04:20C5: D4 01        	pei	<R0
  2630 04:20C7: 22 xx xx xx  	jsl	~~memset
  2631                        ;
  2632                        ;    		strncpy(pdev->root_volume_name,e
                    ntry->filename,8);
  2633                        	.line	280
  2634 04:20CB: F4 08 00     	pea	#<$8
  2635 04:20CE: D4 0F        	pei	<L42+entry_0+2
  2636 04:20D0: D4 0D        	pei	<L42+entry_0
  2637 04:20D2: 18           	clc
  2638 04:20D3: A9 AD 02     	lda	#$2ad
  2639 04:20D6: 65 11        	adc	<L42+pdev_0
  2640 04:20D8: 85 01        	sta	<R0
  2641 04:20DA: A9 00 00     	lda	#$0
  2642 04:20DD: 65 13        	adc	<L42+pdev_0+2
  2643 04:20DF: 85 03        	sta	<R0+2
  2644 04:20E1: D4 03        	pei	<R0+2
  2645 04:20E3: D4 01        	pei	<R0
  2646 04:20E5: 22 xx xx xx  	jsl	~~strncpy
  2647                        ;    		strncpy(&pdev->root_volume_name[
                    8],entry->ext,3);
  2648                        	.line	281
  2649 04:20E9: F4 03 00     	pea	#<$3
  2650 04:20EC: 18           	clc
  2651 04:20ED: A9 08 00     	lda	#$8
  2652 04:20F0: 65 0D        	adc	<L42+entry_0
  2653 04:20F2: 85 01        	sta	<R0
  Mon Sep 27 2021  9:39                                                Page 51


  2654 04:20F4: A9 00 00     	lda	#$0
  2655 04:20F7: 65 0F        	adc	<L42+entry_0+2
  2656 04:20F9: 85 03        	sta	<R0+2
  2657 04:20FB: D4 03        	pei	<R0+2
  2658 04:20FD: D4 01        	pei	<R0
  2659 04:20FF: 18           	clc
  2660 04:2100: A9 B5 02     	lda	#$2b5
  2661 04:2103: 65 11        	adc	<L42+pdev_0
  2662 04:2105: 85 05        	sta	<R1
  2663 04:2107: A9 00 00     	lda	#$0
  2664 04:210A: 65 13        	adc	<L42+pdev_0+2
  2665 04:210C: 85 07        	sta	<R1+2
  2666 04:210E: D4 07        	pei	<R1+2
  2667 04:2110: D4 05        	pei	<R1
  2668 04:2112: 22 xx xx xx  	jsl	~~strncpy
  2669                        ;
  2670                        ;    		bRet = TRUE;
  2671                        	.line	283
  2672 04:2116: E2 20        	sep	#$20
  2673                        	longa	off
  2674 04:2118: A9 01        	lda	#$1
  2675 04:211A: 85 09        	sta	<L43+bRet_1
  2676 04:211C: C2 20        	rep	#$20
  2677                        	longa	on
  2678                        ;		}
  2679                        	.line	284
  2680                        ;	}
  2681                        L10022:
  2682                        	.line	285
  2683                        ;
  2684                        ;	return bRet;
  2685                        L10021:
  2686                        	.line	287
  2687 04:211E: A5 09        	lda	<L43+bRet_1
  2688 04:2120: 29 FF 00     	and	#$ff
  2689                        L48:
  2690 04:2123: A8           	tay
  2691 04:2124: A5 0B        	lda	<L42+2
  2692 04:2126: 85 13        	sta	<L42+2+8
  2693 04:2128: A5 0A        	lda	<L42+1
  2694 04:212A: 85 12        	sta	<L42+1+8
  2695 04:212C: 2B           	pld
  2696 04:212D: 3B           	tsc
  2697 04:212E: 18           	clc
  2698 04:212F: 69 11 00     	adc	#L42+8
  2699 04:2132: 1B           	tcs
  2700 04:2133: 98           	tya
  2701 04:2134: 6B           	rtl
  2702                        ;}
  2703                        	.line	288
  2704                        	.endblock	288
  2705             00000009   L42	equ	9
  2706             00000009   L43	equ	9
  2707 04:2135:              	ends
  2708                        	efunc
  2709                        	.endfunc	288,9,9
  2710                        	.line	288
  2711                        ;
  Mon Sep 27 2021  9:39                                                Page 52


  2712                        ;
  2713                        ;
  2714                        ;UCHAR k_sd_initialize(void)
  2715                        ;{
  2716                        	.line	292
  2717                        	.line	293
  2718                        	SDCS05
  2719                        	xdef	~~k_sd_initialize
  2720                        	func
  2721                        	.function	293
  2722                        ~~k_sd_initialize:
  2723                        	longa	on
  2724                        	longi	on
  2725 04:2135: 3B           	tsc
  2726 04:2136: 38           	sec
  2727 04:2137: E9 02 00     	sbc	#L49
  2728 04:213A: 1B           	tcs
  2729 04:213B: 0B           	phd
  2730 04:213C: 5B           	tcd
  2731                        	.block	293
  2732                        ;	UCHAR s;
  2733                        ;	UCHAR errorCode;
  2734                        ;
  2735                        ;	k_debug_string("***k_sd_initialize 1\r\n");
  2736             00000000   s_1	set	0
  2737             00000001   errorCode_1	set	1
  2738                        	.sym	s,0,14,1,8
  2739                        	.sym	errorCode,1,14,1,8
  2740                        	.line	297
  2741 04:213D: F4 xx xx     	pea	#^L41
  2742 04:2140: F4 xx xx     	pea	#<L41
  2743 04:2143: 22 xx xx xx  	jsl	~~k_debug_string
  2744                        ;
  2745                        ;	SDC_TRANS_TYPE_REG[0]    = SDC_TRANS_INIT_SD;
  2746                        	.line	299
  2747 04:2147: E2 20        	sep	#$20
  2748                        	longa	off
  2749 04:2149: A9 01        	lda	#$1
  2750 04:214B: 8F 02 EA AF  	sta	>11528706
  2751 04:214F: C2 20        	rep	#$20
  2752                        	longa	on
  2753                        ;    SDC_TRANS_CONTROL_REG[0] = SDC_TRANS_START;
  2754                        	.line	300
  2755 04:2151: E2 20        	sep	#$20
  2756                        	longa	off
  2757 04:2153: A9 01        	lda	#$1
  2758 04:2155: 8F 03 EA AF  	sta	>11528707
  2759 04:2159: C2 20        	rep	#$20
  2760                        	longa	on
  2761                        ;
  2762                        ;    s = SDC_TRANS_BUSY;
  2763                        	.line	302
  2764 04:215B: E2 20        	sep	#$20
  2765                        	longa	off
  2766 04:215D: A9 01        	lda	#$1
  2767 04:215F: 85 01        	sta	<L50+s_1
  2768 04:2161: C2 20        	rep	#$20
  2769                        	longa	on
  Mon Sep 27 2021  9:39                                                Page 53


  2770                        ;    while(s & SDC_TRANS_BUSY)
  2771                        	.line	303
  2772                        L10023:
  2773 04:2163: E2 20        	sep	#$20
  2774                        	longa	off
  2775 04:2165: A5 01        	lda	<L50+s_1
  2776 04:2167: 29 01        	and	#<$1
  2777 04:2169: C2 20        	rep	#$20
  2778                        	longa	on
  2779 04:216B: D0 03        	bne	L52
  2780 04:216D: 82 0D 00     	brl	L10024
  2781                        L52:
  2782                        ;    {
  2783                        	.line	304
  2784                        ;    	s = SDC_TRANS_STATUS_REG[0];
  2785                        	.line	305
  2786 04:2170: E2 20        	sep	#$20
  2787                        	longa	off
  2788 04:2172: AF 04 EA AF  	lda	>11528708
  2789 04:2176: 85 01        	sta	<L50+s_1
  2790 04:2178: C2 20        	rep	#$20
  2791                        	longa	on
  2792                        ;   	}
  2793                        	.line	306
  2794 04:217A: 82 E6 FF     	brl	L10023
  2795                        L10024:
  2796                        ;
  2797                        ;    k_debug_integer("***k_sd_initialize errorCode
                    :",errorCode);
  2798                        	.line	308
  2799 04:217D: A5 02        	lda	<L50+errorCode_1
  2800 04:217F: 29 FF 00     	and	#$ff
  2801 04:2182: 48           	pha
  2802 04:2183: F4 xx xx     	pea	#^L41+23
  2803 04:2186: F4 xx xx     	pea	#<L41+23
  2804 04:2189: 22 xx xx xx  	jsl	~~k_debug_integer
  2805                        ;
  2806                        ;    return TRUE;
  2807                        	.line	310
  2808 04:218D: A9 01 00     	lda	#$1
  2809                        L53:
  2810 04:2190: A8           	tay
  2811 04:2191: 2B           	pld
  2812 04:2192: 3B           	tsc
  2813 04:2193: 18           	clc
  2814 04:2194: 69 02 00     	adc	#L49
  2815 04:2197: 1B           	tcs
  2816 04:2198: 98           	tya
  2817 04:2199: 6B           	rtl
  2818                        ;}
  2819                        	.line	311
  2820                        	.endblock	311
  2821             00000002   L49	equ	2
  2822             00000001   L50	equ	1
  2823 04:219A:              	ends
  2824                        	efunc
  2825                        	.endfunc	311,1,2
  2826                        	.line	311
  Mon Sep 27 2021  9:39                                                Page 54


  2827                        	data
  2828                        L41:
  2829 00:00B2: 2A 2A 2A 6B  	db	$2A,$2A,$2A,$6B,$5F,$73,$64,$5F,$69,$6E,
                    $69,$74,$69,$61,$6C
       00:00B6: 5F 73 64 5F 
       00:00BA: 69 6E 69 74 
       00:00BE: 69 61 6C 
  2830 00:00C1: 69 7A 65 20  	db	$69,$7A,$65,$20,$31,$0D,$0A,$00,$2A,$2A,
                    $2A,$6B,$5F,$73,$64
       00:00C5: 31 0D 0A 00 
       00:00C9: 2A 2A 2A 6B 
       00:00CD: 5F 73 64 
  2831 00:00D0: 5F 69 6E 69  	db	$5F,$69,$6E,$69,$74,$69,$61,$6C,$69,$7A,
                    $65,$20,$65,$72,$72
       00:00D4: 74 69 61 6C 
       00:00D8: 69 7A 65 20 
       00:00DC: 65 72 72 
  2832 00:00DF: 6F 72 43 6F  	db	$6F,$72,$43,$6F,$64,$65,$3A,$00
       00:00E3: 64 65 3A 00 
  2833 00:00E7:              	ends
  2834                        ;
  2835                        ;#ifdef FALSE_DISABLED
  2836                        ;
  2837                        ;UCHAR k_sd_check_drive(VOID)
  2838                        ;{
  2839                        ;	INT x = 0;
  2840                        ;	INT i = 0;
  2841                        ;	INT size = 0;
  2842                        ;
  2843                        ;	UCHAR	errorCode;
  2844                        ;	CHAR	byte;
  2845                        ;
  2846                        ;	//UCHAR	fifoLO;
  2847                        ;	//UCHAR	fifoHI;
  2848                        ;	UCHAR	s;
  2849                        ;
  2850                        ;	ULONG next = -1;
  2851                        ;	INT root_entry_count     = 0;
  2852                        ;	INT rootEntriesPerPage	 = 0;
  2853                        ;	INT sectors_per_cluster  = 0;
  2854                        ;
  2855                        ;	PFATBOOTSECTOR pFATBS = NULL;
  2856                        ;	PPARTITIONTABLE pPartTable = NULL;
  2857                        ;	PFAT16ENTRY  pentry = NULL;
  2858                        ;	PUINT pFAT1 = NULL;
  2859                        ;
  2860                        ;	unsigned long offset = 0L;
  2861                        ;	unsigned long bsOffset = 0L;
  2862                        ;	unsigned long fatTable = 0L;
  2863                        ;	unsigned long rootDirSectors = 0L;// 0x010000D2;
  2864                        ;	unsigned long data = 0L;// 0x010000D2;
  2865                        ;
  2866                        ;	unsigned long firstDataSector = 0L;// 0x010000D2
                    ;
  2867                        ;
  2868                        ;	k_debug_string("***k_sd_full_test 1\r\n");
  2869                        ;
  2870                        ;	SDC_TRANS_TYPE_REG[0]    = SDC_TRANS_INIT_SD;
  Mon Sep 27 2021  9:39                                                Page 55


  2871                        ;    SDC_TRANS_CONTROL_REG[0] = SDC_TRANS_START;
  2872                        ;
  2873                        ;    s = SDC_TRANS_BUSY;
  2874                        ;    while(s & SDC_TRANS_BUSY)
  2875                        ;    {
  2876                        ;    	s = SDC_TRANS_STATUS_REG[0];
  2877                        ;   	}
  2878                        ;
  2879                        ;    errorCode = SDC_TRANS_ERROR_REG[0];
  2880                        ;
  2881                        ;    k_debug_integer("***k_sd_reset errorCode:",er
                    rorCode);
  2882                        ;
  2883                        ;    if(!errorCode)
  2884                        ;    {
  2885                        ;		GABE_MSTR_CTRL[0] |= GABE_CTRL_SDC_LED;
  2886                        ;
  2887                        ;		errorCode = readSDSector(0,sectorBuffer)
                    ;
  2888                        ;
  2889                        ;		for(x=0;x<4;x++)
  2890                        ;		{
  2891                        ;			pPartTable = (PPARTITIONTABLE)&s
                    ectorBuffer[FAT_PARTITION_TABLE_1 + (0x10 * x)];
  2892                        ;
  2893                        ;			k_debug_hex ("***k_sd_reset firs
                    t_byte:",pPartTable->first_byte);
  2894                        ;			k_debug_hex ("***k_sd_reset star
                    t_chs0:",pPartTable->start_chs[0]);
  2895                        ;			k_debug_hex ("***k_sd_reset star
                    t_chs1:",pPartTable->start_chs[1]);
  2896                        ;			k_debug_hex ("***k_sd_reset star
                    t_chs2:",pPartTable->start_chs[2]);
  2897                        ;			k_debug_hex ("***k_sd_reset part
                    ition_type:",(INT)pPartTable->partition_type);
  2898                        ;			k_debug_hex ("***k_sd_reset end_
                    chs0:",pPartTable->end_chs[0]);
  2899                        ;			k_debug_hex ("***k_sd_reset end_
                    chs1:",pPartTable->end_chs[1]);
  2900                        ;			k_debug_hex ("***k_sd_reset end_
                    chs2:",pPartTable->end_chs[2]);
  2901                        ;			k_debug_long("***k_sd_reset star
                    t_sector:",pPartTable->start_sector);
  2902                        ;			k_debug_long("***k_sd_reset leng
                    th_sectors:",pPartTable->length_sectors);
  2903                        ;
  2904                        ;			if(pPartTable->partition_type ==
                     FAT_PARTITION_TYPE_DOS30 ||
  2905                        ;			   pPartTable->partition_type ==
                     FAT_PARTITION_TYPE_DOS33 ||
  2906                        ;			   pPartTable->partition_type ==
                     FAT_PARTITION_TYPE_DOS70)
  2907                        ;			{
  2908                        ;				k_debug_hex("FAT16 files
                    ystem found from partition:", pPartTable->partition_type);
  2909                        ;				break;
  2910                        ;			}
  2911                        ;		}
  Mon Sep 27 2021  9:39                                                Page 56


  2912                        ;
  2913                        ;		memcpy(&fxdosDevice.partitionTable,&sect
                    orBuffer[FAT_PARTITION_TABLE_1 + (0x10 * x)],sizeof(PARTITIO
                    NTABLE));
  2914                        ;		k_debug_hex ("***fxdosDevice first_byte:
                    ",fxdosDevice.partitionTable.first_byte);
  2915                        ;		k_debug_hex ("***fxdosDevice start_chs0:
                    ",fxdosDevice.partitionTable.start_chs[0]);
  2916                        ;		k_debug_hex ("***fxdosDevice start_chs1:
                    ",fxdosDevice.partitionTable.start_chs[1]);
  2917                        ;		k_debug_hex ("***fxdosDevice start_chs2:
                    ",fxdosDevice.partitionTable.start_chs[2]);
  2918                        ;		k_debug_hex ("***fxdosDevice partition_t
                    ype:",(INT)fxdosDevice.partitionTable.partition_type);
  2919                        ;		k_debug_hex ("***fxdosDevice end_chs0:",
                    fxdosDevice.partitionTable.end_chs[0]);
  2920                        ;		k_debug_hex ("***fxdosDevice end_chs1:",
                    fxdosDevice.partitionTable.end_chs[1]);
  2921                        ;		k_debug_hex ("***fxdosDevice end_chs2:",
                    fxdosDevice.partitionTable.end_chs[2]);
  2922                        ;		k_debug_long("***fxdosDevice start_secto
                    r:",fxdosDevice.partitionTable.start_sector);
  2923                        ;		k_debug_long("***fxdosDevice length_sect
                    ors:",fxdosDevice.partitionTable.length_sectors);
  2924                        ;
  2925                        ;
  2926                        ;		bsOffset = (pPartTable->start_sector * F
                    AT_PAGE_SIZE);
  2927                        ;		fxdosDevice.bsOffset = (pPartTable->star
                    t_sector * FAT_PAGE_SIZE);
  2928                        ;
  2929                        ;		errorCode = readSDSector(bsOffset,sector
                    Buffer);
  2930                        ;		fxdosDevice.errorCode = errorCode;//read
                    SDSector(bsOffset,sectorBuffer);
  2931                        ;		if(!errorCode)
  2932                        ;		{
  2933                        ;			pFATBS = (PFATBOOTSECTOR)sectorB
                    uffer;
  2934                        ;
  2935                        ;
  2936                        ;
  2937                        ;			k_debug_integer("***k_sd_reset b
                    ytes_per_sector:",(INT)pFATBS->bytes_per_sector);
  2938                        ;			k_debug_integer("***k_sd_reset s
                    ectors_per_cluster:",(INT)pFATBS->sectors_per_cluster);
  2939                        ;			k_debug_integer("***k_sd_reset r
                    eserved_sector_count:",(INT)pFATBS->reserved_sector_count);
  2940                        ;			k_debug_integer("***k_sd_reset t
                    able_count:",(INT)pFATBS->fat_table_count);
  2941                        ;			k_debug_integer("***k_sd_reset r
                    oot_entry_count:",(INT)pFATBS->root_entry_count);
  2942                        ;			k_debug_integer("***k_sd_reset t
                    otal_sectors_16:",(INT)pFATBS->total_sectors_16);
  2943                        ;			k_debug_integer("***k_sd_reset m
                    edia_type:",(INT)pFATBS->media_type);
  2944                        ;			k_debug_integer("***k_sd_reset s
                    ectors_per_fat:",(INT)pFATBS->sectors_per_fat);
  Mon Sep 27 2021  9:39                                                Page 57


  2945                        ;			k_debug_integer("***k_sd_reset s
                    ectors_per_track:",(INT)pFATBS->sectors_per_track);
  2946                        ;			k_debug_integer("***k_sd_reset h
                    ead_side_count:",(INT)pFATBS->head_side_count);
  2947                        ;			k_debug_integer("***k_sd_reset h
                    idden_sector_count:",(INT)pFATBS->hidden_sector_count);
  2948                        ;			k_debug_integer("***k_sd_reset t
                    otal_sectors_32:",(INT)pFATBS->total_sectors_32);
  2949                        ;
  2950                        ;
  2951                        ;			memcpy(&fxdosDevice.bootSector,s
                    ectorBuffer,sizeof(FATBOOTSECTOR));
  2952                        ;
  2953                        ;			k_debug_integer("***fxdosDevice 
                    bytes_per_sector:",(INT)fxdosDevice.bootSector.bytes_per_sec
                    tor);
  2954                        ;			k_debug_integer("***fxdosDevice 
                    sectors_per_cluster:",(INT)fxdosDevice.bootSector.sectors_pe
                    r_cluster);
  2955                        ;			k_debug_integer("***fxdosDevice 
                    reserved_sector_count:",(INT)fxdosDevice.bootSector.reserved
                    _sector_count);
  2956                        ;			k_debug_integer("***fxdosDevice 
                    table_count:",(INT)fxdosDevice.bootSector.fat_table_count);
  2957                        ;			k_debug_integer("***fxdosDevice 
                    root_entry_count:",(INT)fxdosDevice.bootSector.root_entry_co
                    unt);
  2958                        ;			k_debug_integer("***fxdosDevice 
                    total_sectors_16:",(INT)fxdosDevice.bootSector.total_sectors
                    _16);
  2959                        ;			k_debug_integer("***fxdosDevice 
                    media_type:",(INT)fxdosDevice.bootSector.media_type);
  2960                        ;			k_debug_integer("***fxdosDevice 
                    sectors_per_fat:",(INT)fxdosDevice.bootSector.sectors_per_fa
                    t);
  2961                        ;			k_debug_integer("***fxdosDevice 
                    sectors_per_track:",(INT)fxdosDevice.bootSector.sectors_per_
                    track);
  2962                        ;			k_debug_integer("***fxdosDevice 
                    head_side_count:",(INT)fxdosDevice.bootSector.head_side_coun
                    t);
  2963                        ;			k_debug_integer("***fxdosDevice 
                    hidden_sector_count:",(INT)fxdosDevice.bootSector.hidden_sec
                    tor_count);
  2964                        ;			k_debug_integer("***fxdosDevice 
                    total_sectors_32:",(INT)fxdosDevice.bootSector.total_sectors
                    _32);
  2965                        ;
  2966                        ;
  2967                        ;			k_debug_nstring(pFATBS->vol_name
                    ,11);
  2968                        ;			k_debug_string("\r\n");
  2969                        ;			k_debug_nstring(pFATBS->file_sys
                    tem_type,8);
  2970                        ;			k_debug_string("\r\n");
  2971                        ;
  2972                        ;			strncpy(fxdosDevice.volume_name,
                    pFATBS->vol_name,11);
  Mon Sep 27 2021  9:39                                                Page 58


  2973                        ;			fxdosDevice.volume_name[11] = 0;
  2974                        ;			k_debug_strings("***fxdosDevice 
                    Volume Name:",fxdosDevice.volume_name);
  2975                        ;
  2976                        ;			root_entry_count = pFATBS->root_
                    entry_count;
  2977                        ;			fxdosDevice.root_entry_count = p
                    FATBS->root_entry_count;
  2978                        ;
  2979                        ;			fatTable       = bsOffset + (pFA
                    TBS->bytes_per_sector * pFATBS->reserved_sector_count);
  2980                        ;			rootDirSectors = bsOffset + (((U
                    LONG)pFATBS->reserved_sector_count + ((ULONG)pFATBS->sectors
                    _per_fat * (ULONG)pFATBS->fat_table_count)) * (ULONG)pFATBS-
                    >bytes_per_sector);
  2981                        ;			sectors_per_cluster = (INT)pFATB
                    S->sectors_per_cluster;
  2982                        ;
  2983                        ;			k_debug_long("***k_sd_reset fatT
                    able:",fatTable);
  2984                        ;
  2985                        ;			fxdosDevice.fatTableOffset = bsO
                    ffset + (pFATBS->bytes_per_sector * pFATBS->reserved_sector_
                    count);
  2986                        ;			fxdosDevice.rootDirSectors = bsO
                    ffset + (((ULONG)pFATBS->reserved_sector_count + ((ULONG)pFA
                    TBS->sectors_per_fat * (ULONG)pFATBS->fat_table_count)) * (U
                    LONG)pFATBS->bytes_per_sector);
  2987                        ;			fxdosDevice.sectors_per_cluster 
                    = (INT)pFATBS->sectors_per_cluster;
  2988                        ;
  2989                        ;			k_debug_long("***fxdosDevice fat
                    Table:",fxdosDevice.fatTableOffset);
  2990                        ;
  2991                        ;
  2992                        ;
  2993                        ;			if(readSDSector(fatTable,sectorB
                    uffer) == 0)
  2994                        ;			{
  2995                        ;				pFAT1 = (PUINT)sectorBuf
                    fer;
  2996                        ;				memcpy(&fxdosDevice.file
                    AllocationTable,sectorBuffer,FAT_PAGE_SIZE);
  2997                        ;				//k_debug_byte_array("FA
                    T ENTRIES:",sectorBuffer,512);
  2998                        ;				/*
  2999                        ;				i = 0;
  3000                        ;				x = 0xFFFF;
  3001                        ;				while(x)
  3002                        ;				{
  3003                        ;					x = ((INT*)fileA
                    llocationTable1)[i++];
  3004                        ;					k_debug_integer(
                    "FAT ENTRY:",x);
  3005                        ;				}
  3006                        ;				*/
  3007                        ;			}
  3008                        ;
  Mon Sep 27 2021  9:39                                                Page 59


  3009                        ;
  3010                        ;			//rootDirSectors = bsOffset + ((
                    (ULONG)pFATBS->reserved_sector_count + ((ULONG)pFATBS->secto
                    rs_per_fat * (ULONG)pFATBS->fat_table_count)) * (ULONG)pFATB
                    S->bytes_per_sector);
  3011                        ;
  3012                        ;			k_debug_long("***k_sd_reset root
                     offset:",rootDirSectors);
  3013                        ;			k_debug_long("***k_sd_reset root
                     sizeof(FAT16ENTRY):",sizeof(FAT16ENTRY));
  3014                        ;			k_debug_long("***k_sd_reset root
                     root_entry_count:",root_entry_count);
  3015                        ;			k_debug_long("***k_sd_reset root
                     root_entry_count/sizeof(FAT16ENTRY):",root_entry_count/size
                    of(FAT16ENTRY));
  3016                        ;
  3017                        ;			k_debug_long("***fxdosDevice roo
                    t offset:",fxdosDevice.rootDirSectors);
  3018                        ;			k_debug_long("***fxdosDevice roo
                    t sizeof(FAT16ENTRY):",sizeof(FAT16ENTRY));
  3019                        ;			k_debug_long("***fxdosDevice roo
                    t root_entry_count:",fxdosDevice.root_entry_count);
  3020                        ;			k_debug_long("***fxdosDevice roo
                    t root_entry_count/sizeof(FAT16ENTRY):",fxdosDevice.root_ent
                    ry_count/sizeof(FAT16ENTRY));
  3021                        ;
  3022                        ;			/*
  3023                        ;			if(readSDSector(rootDirSectors,s
                    ectorBuffer) == 0)
  3024                        ;			{
  3025                        ;				//k_debug_byte_array("FA
                    T ENTRIES:",sectorBuffer,size);
  3026                        ;				k_debug_integer("FAT roo
                    t_entry_count:",root_entry_count);
  3027                        ;				for(i=0; i<root_entry_co
                    unt; i++)
  3028                        ;				{
  3029                        ;					if(i * sizeof(FA
                    T16ENTRY) > (512 - sizeof(FAT16ENTRY)))
  3030                        ;					{
  3031                        ;
  3032                        ;					}
  3033                        ;
  3034                        ;					pentry = (PFAT16
                    ENTRY)&sectorBuffer[i * sizeof(FAT16ENTRY)];
  3035                        ;					data = print_fil
                    e_info(pentry);
  3036                        ;					if(data > 0)
  3037                        ;					{
  3038                        ;						k_debug_
                    long("bsOffset:",bsOffset);
  3039                        ;						k_debug_
                    long("Cluster Offset + bsOffset:",data + bsOffset);
  3040                        ;
  3041                        ;						//((N  
                    2) * BPB_SecPerClus) + FirstDataSector;
  3042                        ;
  3043                        ;						firstDat
  Mon Sep 27 2021  9:39                                                Page 60


                    aSector = (INT)fxdosDevice.bootSector.reserved_sector_count 
                    + ((INT)pFATBS->fat_table_count * 512) + fxdosDevice.rootDir
                    Sectors;
  3044                        ;
  3045                        ;
  3046                        ;						k_debug_
                    long("Cluster Offset Calculated:",((data - 2) * fxdosDevice.
                    sectors_per_cluster) + firstDataSector);
  3047                        ;
  3048                        ;						k_debug_
                    long("FAT Entry:",((UINT*)(&fxdosDevice.fileAllocationTable)
                    )[data]);
  3049                        ;
  3050                        ;
  3051                        ;						if(readS
                    DSector(data + bsOffset,fatfileBuffer) == 0)
  3052                        ;						{
  3053                        ;							
                    k_debug_byte_array("CONTENT:\r\n",fatfileBuffer,512);
  3054                        ;						}
  3055                        ;
  3056                        ;						if( memc
                    mp(pentry->filename,"TEST1",5) == 0 )
  3057                        ;						{
  3058                        ;							
                    //k_debug_string("** Found TEST1\r\n");
  3059                        ;							
                    //k_debug_long("** Found TEST1 size:",pentry->file_size);
  3060                        ;
  3061                        ;							
                    //memset(fatfileBuffer,0,512);
  3062                        ;							
                    memcpy(fatfileBuffer,"AUTOMATION!      ",pentry->file_size);
  3063                        ;
  3064                        ;							
                    writeSDSector(data + bsOffset,fatfileBuffer);
  3065                        ;						}
  3066                        ;					}
  3067                        ;				}
  3068                        ;			}
  3069                        ;			*/
  3070                        ;
  3071                        ;
  3072                        ;			rootEntriesPerPage = root_entry_
                    count/sizeof(FAT16ENTRY);
  3073                        ;			fxdosDevice.rootEntriesPerPage =
                     root_entry_count/sizeof(FAT16ENTRY);
  3074                        ;
  3075                        ;			for(i=0; i<rootEntriesPerPage; i
                    ++)
  3076                        ;			{
  3077                        ;				if(readSDSector(rootDirS
                    ectors,sectorBuffer) == 0)
  3078                        ;				{
  3079                        ;					for(x=0; x<rootE
                    ntriesPerPage; x++)
  3080                        ;					{
  3081                        ;						pentry =
  Mon Sep 27 2021  9:39                                                Page 61


                     (PFAT16ENTRY)&sectorBuffer[x * sizeof(FAT16ENTRY)];
  3082                        ;						//data =
                     print_file_info(pentry);
  3083                        ;
  3084                        ;						/*
  3085                        ;						if(data 
                    && pFAT1)
  3086                        ;						{
  3087                        ;							
                    LPCHAR videoMem = SHADOW_BANK_0;
  3088                        ;
  3089                        ;							
                    k_debug_integer("FILE FIRST CLUSTER 1:",pentry->starting_clu
                    ster);
  3090                        ;
  3091                        ;							
                    next = pentry->starting_cluster;
  3092                        ;							
                    while(next!=65528L && next!=0L && next!=65535L)
  3093                        ;							
                    {
  3094                        ;							
                    	k_debug_integer("FILE FAT CLUSTER 2:",next);
  3095                        ;
  3096                        ;							
                    	if(next!=65528L && next!=0L && next!=65535L)
  3097                        ;							
                    	{
  3098                        ;							
                    		k_debug_integer("FILE FAT CLUSTER 3:",next);
  3099                        ;							
                    		if( memcmp(pentry->filename,"LOGO1",5) == 0 )
  3100                        ;							
                    		{
  3101                        ;							
                    			videoMem = readClusterToMemory(getCluste
                    rLocationByIndex(next) + bsOffset,sectors_per_cluster,videoM
                    em,pentry->file_size);
  3102                        ;							
                    		}
  3103                        ;							
                    		else
  3104                        ;							
                    		{
  3105                        ;							
                    			 videoMem = NULL;
  3106                        ;							
                    		}
  3107                        ;							
                    		next = pFAT1[next];
  3108                        ;							
                    	}
  3109                        ;							
                    }
  3110                        ;
  3111                        ;							
                    if(videoMem)
  3112                        ;							
  Mon Sep 27 2021  9:39                                                Page 62


                    {
  3113                        ;							
                    	readBitmapData(SHADOW_BANK_0);
  3114                        ;							
                    }
  3115                        ;						}
  3116                        ;						*/
  3117                        ;						/*
  3118                        ;						if(data 
                    > 0)
  3119                        ;						{
  3120                        ;							
                    if(readSDSector(data + bsOffset,fatfileBuffer) == 0)
  3121                        ;							
                    {
  3122                        ;							
                    	k_debug_strings("\tCONTENT:\r\n\t\t",fatfileBuffer);
  3123                        ;							
                    }
  3124                        ;
  3125                        ;							
                    if( memcmp(pentry->filename,"TEST1",5) == 0 )
  3126                        ;							
                    {
  3127                        ;							
                    	//k_debug_string("** Found TEST1\r\n");
  3128                        ;							
                    	//k_debug_long("** Found TEST1 size:",pentry->file_size)
                    ;
  3129                        ;
  3130                        ;							
                    	//memset(fatfileBuffer,0,512);
  3131                        ;							
                    	memcpy(fatfileBuffer,"AUTOMATION!      ",pentry->file_si
                    ze);
  3132                        ;
  3133                        ;							
                    	writeSDSector(data + bsOffset,fatfileBuffer);
  3134                        ;							
                    }
  3135                        ;						}
  3136                        ;						*/
  3137                        ;					}
  3138                        ;				}
  3139                        ;
  3140                        ;				rootDirSectors+=512;
  3141                        ;
  3142                        ;			}
  3143                        ;
  3144                        ;
  3145                        ;
  3146                        ;		}
  3147                        ;
  3148                        ;    }
  3149                        ;
  3150                        ;    GABE_MSTR_CTRL[0] = GABE_MSTR_CTRL[0] & (~GAB
                    E_CTRL_SDC_LED);
  3151                        ;
  Mon Sep 27 2021  9:39                                                Page 63


  3152                        ;	return 0;
  3153                        ;}
  3154                        ;
  3155                        ;#endif
  3156                        ;
  3157                        ;#ifdef FALSE_DISABLED
  3158                        ;
  3159                        ;UCHAR k_sd_full_test(VOID)
  3160                        ;{
  3161                        ;	INT x = 0;
  3162                        ;	INT i = 0;
  3163                        ;	INT size = 0;
  3164                        ;
  3165                        ;	UCHAR	errorCode;
  3166                        ;	CHAR	byte;
  3167                        ;
  3168                        ;	//UCHAR	fifoLO;
  3169                        ;	//UCHAR	fifoHI;
  3170                        ;	UCHAR	s;
  3171                        ;
  3172                        ;	ULONG next = -1;
  3173                        ;	INT root_entry_count     = 0;
  3174                        ;	INT rootEntriesPerPage	 = 0;
  3175                        ;	INT sectors_per_cluster  = 0;
  3176                        ;
  3177                        ;	PFATBOOTSECTOR pFATBS = NULL;
  3178                        ;	PPARTITIONTABLE pPartTable = NULL;
  3179                        ;	PFAT16ENTRY  pentry = NULL;
  3180                        ;	PUINT pFAT1 = NULL;
  3181                        ;
  3182                        ;	unsigned long offset = 0L;
  3183                        ;	unsigned long bsOffset = 0L;
  3184                        ;	unsigned long fatTable = 0L;
  3185                        ;	unsigned long rootDirSectors = 0L;// 0x010000D2;
  3186                        ;	unsigned long data = 0L;// 0x010000D2;
  3187                        ;
  3188                        ;	unsigned long firstDataSector = 0L;// 0x010000D2
                    ;
  3189                        ;
  3190                        ;	k_debug_string("***k_sd_full_test 1\r\n");
  3191                        ;
  3192                        ;	SDC_TRANS_TYPE_REG[0]    = SDC_TRANS_INIT_SD;
  3193                        ;    SDC_TRANS_CONTROL_REG[0] = SDC_TRANS_START;
  3194                        ;
  3195                        ;    s = SDC_TRANS_BUSY;
  3196                        ;    while(s & SDC_TRANS_BUSY)
  3197                        ;    {
  3198                        ;    	s = SDC_TRANS_STATUS_REG[0];
  3199                        ;   	}
  3200                        ;
  3201                        ;    errorCode = SDC_TRANS_ERROR_REG[0];
  3202                        ;
  3203                        ;    k_debug_integer("***k_sd_reset errorCode:",er
                    rorCode);
  3204                        ;
  3205                        ;    if(!errorCode)
  3206                        ;    {
  3207                        ;		GABE_MSTR_CTRL[0] |= GABE_CTRL_SDC_LED;
  Mon Sep 27 2021  9:39                                                Page 64


  3208                        ;
  3209                        ;		errorCode = readSDSector(0,sectorBuffer)
                    ;
  3210                        ;
  3211                        ;		for(x=0;x<4;x++)
  3212                        ;		{
  3213                        ;			pPartTable = (PPARTITIONTABLE)&s
                    ectorBuffer[FAT_PARTITION_TABLE_1 + (0x10 * x)];
  3214                        ;
  3215                        ;			k_debug_hex ("***k_sd_reset firs
                    t_byte:",pPartTable->first_byte);
  3216                        ;			k_debug_hex ("***k_sd_reset star
                    t_chs0:",pPartTable->start_chs[0]);
  3217                        ;			k_debug_hex ("***k_sd_reset star
                    t_chs1:",pPartTable->start_chs[1]);
  3218                        ;			k_debug_hex ("***k_sd_reset star
                    t_chs2:",pPartTable->start_chs[2]);
  3219                        ;			k_debug_hex ("***k_sd_reset part
                    ition_type:",(INT)pPartTable->partition_type);
  3220                        ;			k_debug_hex ("***k_sd_reset end_
                    chs0:",pPartTable->end_chs[0]);
  3221                        ;			k_debug_hex ("***k_sd_reset end_
                    chs1:",pPartTable->end_chs[1]);
  3222                        ;			k_debug_hex ("***k_sd_reset end_
                    chs2:",pPartTable->end_chs[2]);
  3223                        ;			k_debug_long("***k_sd_reset star
                    t_sector:",pPartTable->start_sector);
  3224                        ;			k_debug_long("***k_sd_reset leng
                    th_sectors:",pPartTable->length_sectors);
  3225                        ;
  3226                        ;			if(pPartTable->partition_type ==
                     FAT_PARTITION_TYPE_DOS30 ||
  3227                        ;			   pPartTable->partition_type ==
                     FAT_PARTITION_TYPE_DOS33 ||
  3228                        ;			   pPartTable->partition_type ==
                     FAT_PARTITION_TYPE_DOS70)
  3229                        ;			{
  3230                        ;				k_debug_hex("FAT16 files
                    ystem found from partition:", pPartTable->partition_type);
  3231                        ;				break;
  3232                        ;			}
  3233                        ;		}
  3234                        ;
  3235                        ;		memcpy(&fxdosDevice.partitionTable,&sect
                    orBuffer[FAT_PARTITION_TABLE_1 + (0x10 * x)],sizeof(PARTITIO
                    NTABLE));
  3236                        ;		k_debug_hex ("***fxdosDevice first_byte:
                    ",fxdosDevice.partitionTable.first_byte);
  3237                        ;		k_debug_hex ("***fxdosDevice start_chs0:
                    ",fxdosDevice.partitionTable.start_chs[0]);
  3238                        ;		k_debug_hex ("***fxdosDevice start_chs1:
                    ",fxdosDevice.partitionTable.start_chs[1]);
  3239                        ;		k_debug_hex ("***fxdosDevice start_chs2:
                    ",fxdosDevice.partitionTable.start_chs[2]);
  3240                        ;		k_debug_hex ("***fxdosDevice partition_t
                    ype:",(INT)fxdosDevice.partitionTable.partition_type);
  3241                        ;		k_debug_hex ("***fxdosDevice end_chs0:",
                    fxdosDevice.partitionTable.end_chs[0]);
  Mon Sep 27 2021  9:39                                                Page 65


  3242                        ;		k_debug_hex ("***fxdosDevice end_chs1:",
                    fxdosDevice.partitionTable.end_chs[1]);
  3243                        ;		k_debug_hex ("***fxdosDevice end_chs2:",
                    fxdosDevice.partitionTable.end_chs[2]);
  3244                        ;		k_debug_long("***fxdosDevice start_secto
                    r:",fxdosDevice.partitionTable.start_sector);
  3245                        ;		k_debug_long("***fxdosDevice length_sect
                    ors:",fxdosDevice.partitionTable.length_sectors);
  3246                        ;
  3247                        ;
  3248                        ;		bsOffset = (pPartTable->start_sector * F
                    AT_PAGE_SIZE);
  3249                        ;		fxdosDevice.bsOffset = (pPartTable->star
                    t_sector * FAT_PAGE_SIZE);
  3250                        ;
  3251                        ;		errorCode = readSDSector(bsOffset,sector
                    Buffer);
  3252                        ;		fxdosDevice.errorCode = readSDSector(bsO
                    ffset,sectorBuffer);
  3253                        ;		if(!errorCode)
  3254                        ;		{
  3255                        ;			pFATBS = (PFATBOOTSECTOR)sectorB
                    uffer;
  3256                        ;
  3257                        ;
  3258                        ;
  3259                        ;			k_debug_integer("***k_sd_reset b
                    ytes_per_sector:",(INT)pFATBS->bytes_per_sector);
  3260                        ;			k_debug_integer("***k_sd_reset s
                    ectors_per_cluster:",(INT)pFATBS->sectors_per_cluster);
  3261                        ;			k_debug_integer("***k_sd_reset r
                    eserved_sector_count:",(INT)pFATBS->reserved_sector_count);
  3262                        ;			k_debug_integer("***k_sd_reset t
                    able_count:",(INT)pFATBS->fat_table_count);
  3263                        ;			k_debug_integer("***k_sd_reset r
                    oot_entry_count:",(INT)pFATBS->root_entry_count);
  3264                        ;			k_debug_integer("***k_sd_reset t
                    otal_sectors_16:",(INT)pFATBS->total_sectors_16);
  3265                        ;			k_debug_integer("***k_sd_reset m
                    edia_type:",(INT)pFATBS->media_type);
  3266                        ;			k_debug_integer("***k_sd_reset s
                    ectors_per_fat:",(INT)pFATBS->sectors_per_fat);
  3267                        ;			k_debug_integer("***k_sd_reset s
                    ectors_per_track:",(INT)pFATBS->sectors_per_track);
  3268                        ;			k_debug_integer("***k_sd_reset h
                    ead_side_count:",(INT)pFATBS->head_side_count);
  3269                        ;			k_debug_integer("***k_sd_reset h
                    idden_sector_count:",(INT)pFATBS->hidden_sector_count);
  3270                        ;			k_debug_integer("***k_sd_reset t
                    otal_sectors_32:",(INT)pFATBS->total_sectors_32);
  3271                        ;
  3272                        ;
  3273                        ;			memcpy(&fxdosDevice.bootSector,s
                    ectorBuffer,sizeof(FATBOOTSECTOR));
  3274                        ;
  3275                        ;			k_debug_integer("***fxdosDevice 
                    bytes_per_sector:",(INT)fxdosDevice.bootSector.bytes_per_sec
                    tor);
  Mon Sep 27 2021  9:39                                                Page 66


  3276                        ;			k_debug_integer("***fxdosDevice 
                    sectors_per_cluster:",(INT)fxdosDevice.bootSector.sectors_pe
                    r_cluster);
  3277                        ;			k_debug_integer("***fxdosDevice 
                    reserved_sector_count:",(INT)fxdosDevice.bootSector.reserved
                    _sector_count);
  3278                        ;			k_debug_integer("***fxdosDevice 
                    table_count:",(INT)fxdosDevice.bootSector.fat_table_count);
  3279                        ;			k_debug_integer("***fxdosDevice 
                    root_entry_count:",(INT)fxdosDevice.bootSector.root_entry_co
                    unt);
  3280                        ;			k_debug_integer("***fxdosDevice 
                    total_sectors_16:",(INT)fxdosDevice.bootSector.total_sectors
                    _16);
  3281                        ;			k_debug_integer("***fxdosDevice 
                    media_type:",(INT)fxdosDevice.bootSector.media_type);
  3282                        ;			k_debug_integer("***fxdosDevice 
                    sectors_per_fat:",(INT)fxdosDevice.bootSector.sectors_per_fa
                    t);
  3283                        ;			k_debug_integer("***fxdosDevice 
                    sectors_per_track:",(INT)fxdosDevice.bootSector.sectors_per_
                    track);
  3284                        ;			k_debug_integer("***fxdosDevice 
                    head_side_count:",(INT)fxdosDevice.bootSector.head_side_coun
                    t);
  3285                        ;			k_debug_integer("***fxdosDevice 
                    hidden_sector_count:",(INT)fxdosDevice.bootSector.hidden_sec
                    tor_count);
  3286                        ;			k_debug_integer("***fxdosDevice 
                    total_sectors_32:",(INT)fxdosDevice.bootSector.total_sectors
                    _32);
  3287                        ;
  3288                        ;
  3289                        ;			k_debug_nstring(pFATBS->vol_name
                    ,11);
  3290                        ;			k_debug_string("\r\n");
  3291                        ;			k_debug_nstring(pFATBS->file_sys
                    tem_type,8);
  3292                        ;			k_debug_string("\r\n");
  3293                        ;
  3294                        ;			strncpy(fxdosDevice.volume_name,
                    pFATBS->vol_name,11);
  3295                        ;			fxdosDevice.volume_name[11] = 0;
  3296                        ;			k_debug_strings("***fxdosDevice 
                    Volume Name:",fxdosDevice.volume_name);
  3297                        ;
  3298                        ;			root_entry_count = pFATBS->root_
                    entry_count;
  3299                        ;			fxdosDevice.root_entry_count = p
                    FATBS->root_entry_count;
  3300                        ;
  3301                        ;			fatTable       = bsOffset + (pFA
                    TBS->bytes_per_sector * pFATBS->reserved_sector_count);
  3302                        ;			rootDirSectors = bsOffset + (((U
                    LONG)pFATBS->reserved_sector_count + ((ULONG)pFATBS->sectors
                    _per_fat * (ULONG)pFATBS->fat_table_count)) * (ULONG)pFATBS-
                    >bytes_per_sector);
  3303                        ;			sectors_per_cluster = (INT)pFATB
  Mon Sep 27 2021  9:39                                                Page 67


                    S->sectors_per_cluster;
  3304                        ;
  3305                        ;			k_debug_long("***k_sd_reset fatT
                    able:",fatTable);
  3306                        ;
  3307                        ;			fxdosDevice.fatTableOffset = bsO
                    ffset + (pFATBS->bytes_per_sector * pFATBS->reserved_sector_
                    count);
  3308                        ;			fxdosDevice.rootDirSectors = bsO
                    ffset + (((ULONG)pFATBS->reserved_sector_count + ((ULONG)pFA
                    TBS->sectors_per_fat * (ULONG)pFATBS->fat_table_count)) * (U
                    LONG)pFATBS->bytes_per_sector);
  3309                        ;			fxdosDevice.sectors_per_cluster 
                    = (INT)pFATBS->sectors_per_cluster;
  3310                        ;
  3311                        ;			k_debug_long("***fxdosDevice fat
                    Table:",fxdosDevice.fatTableOffset);
  3312                        ;
  3313                        ;
  3314                        ;
  3315                        ;			if(readSDSector(fatTable,sectorB
                    uffer) == 0)
  3316                        ;			{
  3317                        ;				pFAT1 = (PUINT)sectorBuf
                    fer;
  3318                        ;				memcpy(&fxdosDevice.file
                    AllocationTable,sectorBuffer,FAT_PAGE_SIZE);
  3319                        ;				//k_debug_byte_array("FA
                    T ENTRIES:",sectorBuffer,512);
  3320                        ;				/*
  3321                        ;				i = 0;
  3322                        ;				x = 0xFFFF;
  3323                        ;				while(x)
  3324                        ;				{
  3325                        ;					x = ((INT*)fileA
                    llocationTable1)[i++];
  3326                        ;					k_debug_integer(
                    "FAT ENTRY:",x);
  3327                        ;				}
  3328                        ;				*/
  3329                        ;			}
  3330                        ;
  3331                        ;
  3332                        ;			//rootDirSectors = bsOffset + ((
                    (ULONG)pFATBS->reserved_sector_count + ((ULONG)pFATBS->secto
                    rs_per_fat * (ULONG)pFATBS->fat_table_count)) * (ULONG)pFATB
                    S->bytes_per_sector);
  3333                        ;
  3334                        ;			k_debug_long("***k_sd_reset root
                     offset:",rootDirSectors);
  3335                        ;			k_debug_long("***k_sd_reset root
                     sizeof(FAT16ENTRY):",sizeof(FAT16ENTRY));
  3336                        ;			k_debug_long("***k_sd_reset root
                     root_entry_count:",root_entry_count);
  3337                        ;			k_debug_long("***k_sd_reset root
                     root_entry_count/sizeof(FAT16ENTRY):",root_entry_count/size
                    of(FAT16ENTRY));
  3338                        ;
  Mon Sep 27 2021  9:39                                                Page 68


  3339                        ;			k_debug_long("***fxdosDevice roo
                    t offset:",fxdosDevice.rootDirSectors);
  3340                        ;			k_debug_long("***fxdosDevice roo
                    t sizeof(FAT16ENTRY):",sizeof(FAT16ENTRY));
  3341                        ;			k_debug_long("***fxdosDevice roo
                    t root_entry_count:",fxdosDevice.root_entry_count);
  3342                        ;			k_debug_long("***fxdosDevice roo
                    t root_entry_count/sizeof(FAT16ENTRY):",fxdosDevice.root_ent
                    ry_count/sizeof(FAT16ENTRY));
  3343                        ;
  3344                        ;
  3345                        ;			if(readSDSector(rootDirSectors,s
                    ectorBuffer) == 0)
  3346                        ;			{
  3347                        ;				//k_debug_byte_array("FA
                    T ENTRIES:",sectorBuffer,size);
  3348                        ;				k_debug_integer("FAT roo
                    t_entry_count:",root_entry_count);
  3349                        ;				for(i=0; i<root_entry_co
                    unt; i++)
  3350                        ;				{
  3351                        ;					if(i * sizeof(FA
                    T16ENTRY) > (512 - sizeof(FAT16ENTRY)))
  3352                        ;					{
  3353                        ;
  3354                        ;					}
  3355                        ;
  3356                        ;					pentry = (PFAT16
                    ENTRY)&sectorBuffer[i * sizeof(FAT16ENTRY)];
  3357                        ;					data = print_fil
                    e_info(pentry);
  3358                        ;					if(data > 0)
  3359                        ;					{
  3360                        ;						k_debug_
                    long("bsOffset:",bsOffset);
  3361                        ;						k_debug_
                    long("Cluster Offset + bsOffset:",data + bsOffset);
  3362                        ;
  3363                        ;						//((N  
                    2) * BPB_SecPerClus) + FirstDataSector;
  3364                        ;
  3365                        ;						firstDat
                    aSector = (INT)fxdosDevice.bootSector.reserved_sector_count 
                    + ((INT)pFATBS->fat_table_count * 512) + fxdosDevice.rootDir
                    Sectors;
  3366                        ;
  3367                        ;
  3368                        ;						k_debug_
                    long("Cluster Offset Calculated:",((data - 2) * fxdosDevice.
                    sectors_per_cluster) + firstDataSector);
  3369                        ;
  3370                        ;						k_debug_
                    long("FAT Entry:",((UINT*)(&fxdosDevice.fileAllocationTable)
                    )[data]);
  3371                        ;
  3372                        ;
  3373                        ;						if(readS
                    DSector(data + bsOffset,fatfileBuffer) == 0)
  Mon Sep 27 2021  9:39                                                Page 69


  3374                        ;						{
  3375                        ;							
                    k_debug_byte_array("CONTENT:\r\n",fatfileBuffer,512);
  3376                        ;						}
  3377                        ;
  3378                        ;						if( memc
                    mp(pentry->filename,"TEST1",5) == 0 )
  3379                        ;						{
  3380                        ;							
                    //k_debug_string("** Found TEST1\r\n");
  3381                        ;							
                    //k_debug_long("** Found TEST1 size:",pentry->file_size);
  3382                        ;
  3383                        ;							
                    //memset(fatfileBuffer,0,512);
  3384                        ;							
                    memcpy(fatfileBuffer,"AUTOMATION!      ",pentry->file_size);
  3385                        ;
  3386                        ;							
                    writeSDSector(data + bsOffset,fatfileBuffer);
  3387                        ;						}
  3388                        ;					}
  3389                        ;				}
  3390                        ;			}
  3391                        ;
  3392                        ;			/*
  3393                        ;			typedef struct _FXDosDevice
  3394                        ;			{
  3395                        ;				FATBOOTSECTOR  bootSecto
                    r;
  3396                        ;				PARTITIONTABLE partition
                    Table;
  3397                        ;				UCHAR 		   fileA
                    llocationTable[512];
  3398                        ;				ULONG		   bsOff
                    set;
  3399                        ;				ULONG 		   rootD
                    irSectors;
  3400                        ;				INT 		   root_
                    entry_count;
  3401                        ;				INT            rootEntri
                    esPerPage;
  3402                        ;				INT 		   secto
                    rs_per_cluster;
  3403                        ;				volume_name
  3404                        ;				UCHAR		   error
                    Code;
  3405                        ;			}FXDOSDEVICE;
  3406                        ;				*/
  3407                        ;			rootEntriesPerPage = root_entry_
                    count/sizeof(FAT16ENTRY);
  3408                        ;			fxdosDevice.rootEntriesPerPage =
                     root_entry_count/sizeof(FAT16ENTRY);
  3409                        ;
  3410                        ;			for(i=0; i<rootEntriesPerPage; i
                    ++)
  3411                        ;			{
  3412                        ;				if(readSDSector(rootDirS
  Mon Sep 27 2021  9:39                                                Page 70


                    ectors,sectorBuffer) == 0)
  3413                        ;				{
  3414                        ;					for(x=0; x<rootE
                    ntriesPerPage; x++)
  3415                        ;					{
  3416                        ;						pentry =
                     (PFAT16ENTRY)&sectorBuffer[x * sizeof(FAT16ENTRY)];
  3417                        ;						data = p
                    rint_file_info(pentry);
  3418                        ;
  3419                        ;						/*
  3420                        ;						if(data 
                    && pFAT1)
  3421                        ;						{
  3422                        ;							
                    LPCHAR videoMem = SHADOW_BANK_0;
  3423                        ;
  3424                        ;							
                    k_debug_integer("FILE FIRST CLUSTER 1:",pentry->starting_clu
                    ster);
  3425                        ;
  3426                        ;							
                    next = pentry->starting_cluster;
  3427                        ;							
                    while(next!=65528L && next!=0L && next!=65535L)
  3428                        ;							
                    {
  3429                        ;							
                    	k_debug_integer("FILE FAT CLUSTER 2:",next);
  3430                        ;
  3431                        ;							
                    	if(next!=65528L && next!=0L && next!=65535L)
  3432                        ;							
                    	{
  3433                        ;							
                    		k_debug_integer("FILE FAT CLUSTER 3:",next);
  3434                        ;							
                    		if( memcmp(pentry->filename,"LOGO1",5) == 0 )
  3435                        ;							
                    		{
  3436                        ;							
                    			videoMem = readClusterToMemory(getCluste
                    rLocationByIndex(next) + bsOffset,sectors_per_cluster,videoM
                    em,pentry->file_size);
  3437                        ;							
                    		}
  3438                        ;							
                    		else
  3439                        ;							
                    		{
  3440                        ;							
                    			 videoMem = NULL;
  3441                        ;							
                    		}
  3442                        ;							
                    		next = pFAT1[next];
  3443                        ;							
                    	}
  Mon Sep 27 2021  9:39                                                Page 71


  3444                        ;							
                    }
  3445                        ;
  3446                        ;							
                    if(videoMem)
  3447                        ;							
                    {
  3448                        ;							
                    	readBitmapData(SHADOW_BANK_0);
  3449                        ;							
                    }
  3450                        ;						}
  3451                        ;						*/
  3452                        ;						/*
  3453                        ;						if(data 
                    > 0)
  3454                        ;						{
  3455                        ;							
                    if(readSDSector(data + bsOffset,fatfileBuffer) == 0)
  3456                        ;							
                    {
  3457                        ;							
                    	k_debug_strings("\tCONTENT:\r\n\t\t",fatfileBuffer);
  3458                        ;							
                    }
  3459                        ;
  3460                        ;							
                    if( memcmp(pentry->filename,"TEST1",5) == 0 )
  3461                        ;							
                    {
  3462                        ;							
                    	//k_debug_string("** Found TEST1\r\n");
  3463                        ;							
                    	//k_debug_long("** Found TEST1 size:",pentry->file_size)
                    ;
  3464                        ;
  3465                        ;							
                    	//memset(fatfileBuffer,0,512);
  3466                        ;							
                    	memcpy(fatfileBuffer,"AUTOMATION!      ",pentry->file_si
                    ze);
  3467                        ;
  3468                        ;							
                    	writeSDSector(data + bsOffset,fatfileBuffer);
  3469                        ;							
                    }
  3470                        ;						}
  3471                        ;						*/
  3472                        ;					}
  3473                        ;				}
  3474                        ;
  3475                        ;				rootDirSectors+=512;
  3476                        ;
  3477                        ;			}
  3478                        ;
  3479                        ;
  3480                        ;
  3481                        ;		}
  Mon Sep 27 2021  9:39                                                Page 72


  3482                        ;
  3483                        ;    }
  3484                        ;
  3485                        ;    GABE_MSTR_CTRL[0] = GABE_MSTR_CTRL[0] & (~GAB
                    E_CTRL_SDC_LED);
  3486                        ;
  3487                        ;	return 0;
  3488                        ;}
  3489                        ;
  3490                        ;
  3491                        ;
  3492                        ;UCHAR k_sd_reset_safe(VOID)
  3493                        ;{
  3494                        ;
  3495                        ;
  3496                        ;	INT x = 0;
  3497                        ;	INT i = 0;
  3498                        ;	INT size = 0;
  3499                        ;
  3500                        ;	UCHAR	errorCode;
  3501                        ;	CHAR	byte;
  3502                        ;
  3503                        ;	//UCHAR	fifoLO;
  3504                        ;	//UCHAR	fifoHI;
  3505                        ;	UCHAR	s;
  3506                        ;
  3507                        ;	ULONG next = -1;
  3508                        ;	INT root_entry_count     = 0;
  3509                        ;	INT rootEntriesPerPage	 = 0;
  3510                        ;	INT sectors_per_cluster  = 0;
  3511                        ;
  3512                        ;	PFATBOOTSECTOR pFATBS = NULL;
  3513                        ;	PPARTITIONTABLE pPartTable = NULL;
  3514                        ;	PFAT16ENTRY  pentry = NULL;
  3515                        ;	PUINT pFAT1 = NULL;
  3516                        ;
  3517                        ;	unsigned long offset = 0L;
  3518                        ;	unsigned long bsOffset = 0L;
  3519                        ;	unsigned long fatTable = 0L;
  3520                        ;	unsigned long rootDirSectors = 0L;// 0x010000D2;
  3521                        ;	unsigned long data = 0L;// 0x010000D2;
  3522                        ;
  3523                        ;	k_debug_string("***k_sd_reset_safe 1\r\n");
  3524                        ;
  3525                        ;	SDC_TRANS_TYPE_REG[0]    = SDC_TRANS_INIT_SD;
  3526                        ;    SDC_TRANS_CONTROL_REG[0] = SDC_TRANS_START;
  3527                        ;
  3528                        ;    s = SDC_TRANS_BUSY;
  3529                        ;    while(s & SDC_TRANS_BUSY)
  3530                        ;    {
  3531                        ;    	s = SDC_TRANS_STATUS_REG[0];
  3532                        ;   	}
  3533                        ;
  3534                        ;    errorCode = SDC_TRANS_ERROR_REG[0];
  3535                        ;
  3536                        ;    k_debug_integer("***k_sd_reset errorCode:",er
                    rorCode);
  3537                        ;
  Mon Sep 27 2021  9:39                                                Page 73


  3538                        ;    if(!errorCode)
  3539                        ;    {
  3540                        ;		GABE_MSTR_CTRL[0] |= GABE_CTRL_SDC_LED;
  3541                        ;
  3542                        ;		errorCode = readSDSector(0,sectorBuffer)
                    ;
  3543                        ;
  3544                        ;		for(x=0;x<4;x++)
  3545                        ;		{
  3546                        ;			pPartTable = (PPARTITIONTABLE)&s
                    ectorBuffer[FAT_PARTITION_TABLE_1 + (0x10 * x)];
  3547                        ;
  3548                        ;			k_debug_hex ("***k_sd_reset firs
                    t_byte:",pPartTable->first_byte);
  3549                        ;			k_debug_hex ("***k_sd_reset star
                    t_chs0:",pPartTable->start_chs[0]);
  3550                        ;			k_debug_hex ( "***k_sd_reset sta
                    rt_chs1:",pPartTable->start_chs[1]);
  3551                        ;			k_debug_hex ("***k_sd_reset star
                    t_chs2:",pPartTable->start_chs[2]);
  3552                        ;			k_debug_hex ("***k_sd_reset part
                    ition_type:",(INT)pPartTable->partition_type);
  3553                        ;			k_debug_hex ("***k_sd_reset end_
                    chs0:",pPartTable->end_chs[0]);
  3554                        ;			k_debug_hex ("***k_sd_reset end_
                    chs1:",pPartTable->end_chs[1]);
  3555                        ;			k_debug_hex ("***k_sd_reset end_
                    chs2:",pPartTable->end_chs[2]);
  3556                        ;			k_debug_long("***k_sd_reset star
                    t_sector:",pPartTable->start_sector);
  3557                        ;			k_debug_long("***k_sd_reset leng
                    th_sectors:",pPartTable->length_sectors);
  3558                        ;
  3559                        ;			if(pPartTable->partition_type ==
                     FAT_PARTITION_TYPE_DOS30 ||
  3560                        ;			   pPartTable->partition_type ==
                     FAT_PARTITION_TYPE_DOS33 ||
  3561                        ;			   pPartTable->partition_type ==
                     FAT_PARTITION_TYPE_DOS70)
  3562                        ;			{
  3563                        ;				k_debug_hex("FAT16 files
                    ystem found from partition:", pPartTable->partition_type);
  3564                        ;				break;
  3565                        ;			}
  3566                        ;		}
  3567                        ;
  3568                        ;		bsOffset = (pPartTable->start_sector * F
                    AT_PAGE_SIZE);
  3569                        ;
  3570                        ;		errorCode = readSDSector(bsOffset,sector
                    Buffer);
  3571                        ;		if(!errorCode)
  3572                        ;		{
  3573                        ;			pFATBS = (PFATBOOTSECTOR)sectorB
                    uffer;
  3574                        ;
  3575                        ;			k_debug_integer("***k_sd_reset b
                    ytes_per_sector:",(INT)pFATBS->bytes_per_sector);
  Mon Sep 27 2021  9:39                                                Page 74


  3576                        ;			k_debug_integer("***k_sd_reset s
                    ectors_per_cluster:",(INT)pFATBS->sectors_per_cluster);
  3577                        ;			k_debug_integer("***k_sd_reset r
                    eserved_sector_count:",(INT)pFATBS->reserved_sector_count);
  3578                        ;			k_debug_integer("***k_sd_reset t
                    able_count:",(INT)pFATBS->fat_table_count);
  3579                        ;			k_debug_integer("***k_sd_reset r
                    oot_entry_count:",(INT)pFATBS->root_entry_count);
  3580                        ;			k_debug_integer("***k_sd_reset t
                    otal_sectors_16:",(INT)pFATBS->total_sectors_16);
  3581                        ;			k_debug_integer("***k_sd_reset m
                    edia_type:",(INT)pFATBS->media_type);
  3582                        ;			k_debug_integer("***k_sd_reset s
                    ectors_per_fat:",(INT)pFATBS->sectors_per_fat);
  3583                        ;			k_debug_integer("***k_sd_reset s
                    ectors_per_track:",(INT)pFATBS->sectors_per_track);
  3584                        ;			k_debug_integer("***k_sd_reset h
                    ead_side_count:",(INT)pFATBS->head_side_count);
  3585                        ;			k_debug_integer("***k_sd_reset h
                    idden_sector_count:",(INT)pFATBS->hidden_sector_count);
  3586                        ;			k_debug_integer("***k_sd_reset t
                    otal_sectors_32:",(INT)pFATBS->total_sectors_32);
  3587                        ;
  3588                        ;			k_debug_nstring(pFATBS->vol_name
                    ,11);
  3589                        ;			k_debug_string("\r\n");
  3590                        ;			k_debug_nstring(pFATBS->file_sys
                    tem_type,8);
  3591                        ;			k_debug_string("\r\n");
  3592                        ;
  3593                        ;			root_entry_count = pFATBS->root_
                    entry_count;
  3594                        ;
  3595                        ;			fatTable       = bsOffset + (pFA
                    TBS->bytes_per_sector * pFATBS->reserved_sector_count);
  3596                        ;			rootDirSectors = bsOffset + (((U
                    LONG)pFATBS->reserved_sector_count + ((ULONG)pFATBS->sectors
                    _per_fat * (ULONG)pFATBS->fat_table_count)) * (ULONG)pFATBS-
                    >bytes_per_sector);
  3597                        ;			sectors_per_cluster = (INT)pFATB
                    S->sectors_per_cluster;
  3598                        ;
  3599                        ;			k_debug_long("***k_sd_reset fatT
                    able:",fatTable);
  3600                        ;
  3601                        ;
  3602                        ;			if(readSDSector(fatTable,sectorB
                    uffer) == 0)
  3603                        ;			{
  3604                        ;				pFAT1 = (PUINT)sectorBuf
                    fer;
  3605                        ;				//k_debug_byte_array("FA
                    T ENTRIES:",sectorBuffer,512);
  3606                        ;				/*
  3607                        ;				i = 0;
  3608                        ;				x = 0xFFFF;
  3609                        ;				while(x)
  3610                        ;				{
  Mon Sep 27 2021  9:39                                                Page 75


  3611                        ;					x = ((INT*)fileA
                    llocationTable1)[i++];
  3612                        ;					k_debug_integer(
                    "FAT ENTRY:",x);
  3613                        ;				}
  3614                        ;				*/
  3615                        ;			}
  3616                        ;
  3617                        ;
  3618                        ;			//rootDirSectors = bsOffset + ((
                    (ULONG)pFATBS->reserved_sector_count + ((ULONG)pFATBS->secto
                    rs_per_fat * (ULONG)pFATBS->fat_table_count)) * (ULONG)pFATB
                    S->bytes_per_sector);
  3619                        ;
  3620                        ;			k_debug_long("***k_sd_reset root
                     offset:",rootDirSectors);
  3621                        ;
  3622                        ;			k_debug_long("***k_sd_reset root
                     sizeof(FAT16ENTRY):",sizeof(FAT16ENTRY));
  3623                        ;			k_debug_long("***k_sd_reset root
                     root_entry_count:",root_entry_count);
  3624                        ;			k_debug_long("***k_sd_reset root
                     root_entry_count/sizeof(FAT16ENTRY):",root_entry_count/size
                    of(FAT16ENTRY));
  3625                        ;
  3626                        ;			/*
  3627                        ;			if(readSDSector(rootDirSectors,s
                    ectorBuffer) == 0)
  3628                        ;			{
  3629                        ;				//k_debug_byte_array("FA
                    T ENTRIES:",sectorBuffer,size);
  3630                        ;				//k_debug_integer("FAT r
                    oot_entry_count:",root_entry_count);
  3631                        ;				for(i=0; i<root_entry_co
                    unt; i++)
  3632                        ;				{
  3633                        ;					if(i * sizeof(FA
                    T16ENTRY) > (512 - sizeof(FAT16ENTRY)))
  3634                        ;					{
  3635                        ;
  3636                        ;					}
  3637                        ;
  3638                        ;					pentry = (PFAT16
                    ENTRY)&sectorBuffer[i * sizeof(FAT16ENTRY)];
  3639                        ;					data = print_fil
                    e_info(pentry);
  3640                        ;					if(data > 0)
  3641                        ;					{
  3642                        ;						if(readS
                    DSector(data + bsOffset,fatfileBuffer) == 0)
  3643                        ;						{
  3644                        ;							
                    k_debug_strings("\tCONTENT:\r\n\t\t",fatfileBuffer);
  3645                        ;						}
  3646                        ;
  3647                        ;						if( memc
                    mp(pentry->filename,"TEST1",5) == 0 )
  3648                        ;						{
  Mon Sep 27 2021  9:39                                                Page 76


  3649                        ;							
                    //k_debug_string("** Found TEST1\r\n");
  3650                        ;							
                    //k_debug_long("** Found TEST1 size:",pentry->file_size);
  3651                        ;
  3652                        ;							
                    //memset(fatfileBuffer,0,512);
  3653                        ;							
                    memcpy(fatfileBuffer,"AUTOMATION!      ",pentry->file_size);
  3654                        ;
  3655                        ;							
                    writeSDSector(data + bsOffset,fatfileBuffer);
  3656                        ;						}
  3657                        ;					}
  3658                        ;				}
  3659                        ;			}
  3660                        ;			*/
  3661                        ;
  3662                        ;			rootEntriesPerPage = root_entry_
                    count/sizeof(FAT16ENTRY);
  3663                        ;
  3664                        ;			for(i=0; i<rootEntriesPerPage; i
                    ++)
  3665                        ;			{
  3666                        ;				if(readSDSector(rootDirS
                    ectors,sectorBuffer) == 0)
  3667                        ;				{
  3668                        ;					for(x=0; x<rootE
                    ntriesPerPage; x++)
  3669                        ;					{
  3670                        ;						pentry =
                     (PFAT16ENTRY)&sectorBuffer[x * sizeof(FAT16ENTRY)];
  3671                        ;						data = p
                    rint_file_info(pentry);
  3672                        ;
  3673                        ;						/*
  3674                        ;						if(data 
                    && pFAT1)
  3675                        ;						{
  3676                        ;							
                    LPCHAR videoMem = SHADOW_BANK_0;
  3677                        ;
  3678                        ;							
                    k_debug_integer("FILE FIRST CLUSTER 1:",pentry->starting_clu
                    ster);
  3679                        ;
  3680                        ;							
                    next = pentry->starting_cluster;
  3681                        ;							
                    while(next!=65528L && next!=0L && next!=65535L)
  3682                        ;							
                    {
  3683                        ;							
                    	k_debug_integer("FILE FAT CLUSTER 2:",next);
  3684                        ;
  3685                        ;							
                    	if(next!=65528L && next!=0L && next!=65535L)
  3686                        ;							
  Mon Sep 27 2021  9:39                                                Page 77


                    	{
  3687                        ;							
                    		k_debug_integer("FILE FAT CLUSTER 3:",next);
  3688                        ;							
                    		if( memcmp(pentry->filename,"LOGO1",5) == 0 )
  3689                        ;							
                    		{
  3690                        ;							
                    			videoMem = readClusterToMemory(getCluste
                    rLocationByIndex(next) + bsOffset,sectors_per_cluster,videoM
                    em,pentry->file_size);
  3691                        ;							
                    		}
  3692                        ;							
                    		else
  3693                        ;							
                    		{
  3694                        ;							
                    			 videoMem = NULL;
  3695                        ;							
                    		}
  3696                        ;							
                    		next = pFAT1[next];
  3697                        ;							
                    	}
  3698                        ;							
                    }
  3699                        ;
  3700                        ;							
                    if(videoMem)
  3701                        ;							
                    {
  3702                        ;							
                    	readBitmapData(SHADOW_BANK_0);
  3703                        ;							
                    }
  3704                        ;						}
  3705                        ;						*/
  3706                        ;						/*
  3707                        ;						if(data 
                    > 0)
  3708                        ;						{
  3709                        ;							
                    if(readSDSector(data + bsOffset,fatfileBuffer) == 0)
  3710                        ;							
                    {
  3711                        ;							
                    	k_debug_strings("\tCONTENT:\r\n\t\t",fatfileBuffer);
  3712                        ;							
                    }
  3713                        ;
  3714                        ;							
                    if( memcmp(pentry->filename,"TEST1",5) == 0 )
  3715                        ;							
                    {
  3716                        ;							
                    	//k_debug_string("** Found TEST1\r\n");
  3717                        ;							
  Mon Sep 27 2021  9:39                                                Page 78


                    	//k_debug_long("** Found TEST1 size:",pentry->file_size)
                    ;
  3718                        ;
  3719                        ;							
                    	//memset(fatfileBuffer,0,512);
  3720                        ;							
                    	memcpy(fatfileBuffer,"AUTOMATION!      ",pentry->file_si
                    ze);
  3721                        ;
  3722                        ;							
                    	writeSDSector(data + bsOffset,fatfileBuffer);
  3723                        ;							
                    }
  3724                        ;						}
  3725                        ;						*/
  3726                        ;					}
  3727                        ;				}
  3728                        ;
  3729                        ;				rootDirSectors+=512;
  3730                        ;
  3731                        ;			}
  3732                        ;
  3733                        ;
  3734                        ;
  3735                        ;		}
  3736                        ;
  3737                        ;    }
  3738                        ;
  3739                        ;    GABE_MSTR_CTRL[0] = GABE_MSTR_CTRL[0] & (~GAB
                    E_CTRL_SDC_LED);
  3740                        ;
  3741                        ;	return 0;
  3742                        ;}
  3743                        ;
  3744                        ;#endif
  3745                        ;
  3746                        ;/*
  3747                        ;void k_sd_dos_init(PFXDOSDEVICE pfxdosDevice)
  3748                        ;{
  3749                        ;	UINT s = 0;
  3750                        ;
  3751                        ;	k_debug_string("k_sd_dos_init...\r\n");
  3752                        ;
  3753                        ;	SDC_TRANS_TYPE_REG[0]    = SDC_TRANS_INIT_SD;
  3754                        ;    SDC_TRANS_CONTROL_REG[0] = SDC_TRANS_START;
  3755                        ;
  3756                        ;    s = SDC_TRANS_BUSY;
  3757                        ;    while(s & SDC_TRANS_BUSY)
  3758                        ;    {
  3759                        ;    	s = SDC_TRANS_STATUS_REG[0];
  3760                        ;   	}
  3761                        ;
  3762                        ;
  3763                        ;    pfxdosDevice->devstatus = SDC_TRANS_ERROR_REG
                    [0];
  3764                        ;    if(!pfxdosDevice->devstatus)
  3765                        ;    	pfxdosDevice->initialized = TRUE;
  3766                        ;
  Mon Sep 27 2021  9:39                                                Page 79


  3767                        ;    k_debug_bits("k_sd_dos_init:",pfxdosDevice->d
                    evstatus);
  3768                        ;}
  3769                        ;
  3770                        ;void k_hd_dos_init(PFXDOSDEVICE pfxdosDevice)
  3771                        ;{
  3772                        ;	k_debug_string("k_hd_dos_init...\r\n");
  3773                        ;
  3774                        ;	k_ide_init();
  3775                        ;
  3776                        ;	pfxdosDevice->initialized = TRUE;
  3777                        ;	pfxdosDevice->devdata = (PIDENTIFY_DEVICE_DATA)k
                    _ide_get_info();
  3778                        ;	pfxdosDevice->devstatus = 0;
  3779                        ;}
  3780                        ;
  3781                        ;void k_fd_dos_init(PFXDOSDEVICE pfxdosDevice)
  3782                        ;{
  3783                        ;	k_debug_string("k_fd_dos_init...\r\n");
  3784                        ;
  3785                        ;
  3786                        ;	pfxdosDevice->initialized = TRUE;
  3787                        ;	//floppy_init();
  3788                        ;	k_fd_init();
  3789                        ;}
  3790                        ;
  3791                        ;UCHAR k_read_fd_sector(unsigned long offset,LPCHA
                    R receiveBuffer)
  3792                        ;{
  3793                        ;	int pres = 0;
  3794                        ;	k_debug_long("k_read_fd_sector:",offset);
  3795                        ;
  3796                        ;
  3797                        ;//offset = offset / 512;
  3798                        ;//
  3799                        ;//	if(offset == 0L)
  3800                        ;//		memcpy(receiveBuffer,FAT12BOOT,5
                    12);
  3801                        ;//	else if(offset == 19L)
  3802                        ;//		memcpy(receiveBuffer,FAT12ROOT,5
                    12);
  3803                        ;//
  3804                        ;//	return 0;
  3805                        ;
  3806                        ;	//pres = floppy_present();
  3807                        ;	k_debug_long("k_read_fd_sector():", pres);
  3808                        ;
  3809                        ;	//floppy_read(receiveBuffer, offset, 1);
  3810                        ;	k_fd_read_sector(receiveBuffer, offset);
  3811                        ;
  3812                        ;	return 0;
  3813                        ;}
  3814                        ;
  3815                        ;
  3816                        ;
  3817                        ;
  3818                        ;UCHAR k_sd_status(VOID)
  3819                        ;{
  Mon Sep 27 2021  9:39                                                Page 80


  3820                        ;	return 0;
  3821                        ;}
  3822                        ;
  3823                        ;BOOL k_sd_ispresent(void)
  3824                        ;{
  3825                        ;	UCHAR errorCode = 0;
  3826                        ;
  3827                        ;	errorCode = k_sd_initialize();
  3828                        ;	k_debug_integer("k_sd_ispresent:", errorCode);
  3829                        ;
  3830                        ;	if(errorCode)
  3831                        ;		return FALSE;
  3832                        ;	else
  3833                        ;		return TRUE;
  3834                        ;}
  3835                        ;
  3836                        ;UCHAR k_sd_waitforirq(void)
  3837                        ;{
  3838                        ;	return 0;
  3839                        ;}
  3840                        ;
  3841                        ;PFXDOSDEVICE k_sd_mount(void)
  3842                        ;{
  3843                        ;	PFXDOSDEVICE device = NULL;
  3844                        ;
  3845                        ;	if(k_sd_ispresent())
  3846                        ;	{
  3847                        ;		device = k_create_dos_device(FXDOS_SDC);
  3848                        ;	}
  3849                        ;
  3850                        ;	return device;
  3851                        ;}
  3852                        ;
  3853                        ;BOOL k_sd_openfile(LPCHAR filename)
  3854                        ;{
  3855                        ;	k_debug_string("k_sd_openfile::filename:");
  3856                        ;	k_debug_string(filename);
  3857                        ;	k_debug_string("\r\n");
  3858                        ;
  3859                        ;	return FALSE;
  3860                        ;}
  3861                        ;
  3862                        ;BOOL k_sd_setfilename(LPCHAR filename)
  3863                        ;{
  3864                        ;	k_debug_string("k_sd_setfilename::filename:");
  3865                        ;	k_debug_string(filename);
  3866                        ;	k_debug_string("\r\n");
  3867                        ;
  3868                        ;
  3869                        ;	return TRUE;
  3870                        ;}
  3871                        ;
  3872                        ;
  3873                        ;PFXNODE k_sd_read_dir(void)
  3874                        ;{
  3875                        ;	return NULL;
  3876                        ;}
  3877                        ;
  Mon Sep 27 2021  9:39                                                Page 81


  3878                        ;void k_sd_search_dir(LPCHAR searchString)
  3879                        ;{
  3880                        ;}
  3881                        ;
  3882                        ;
  3883                        ;UINT k_read_disk_sector(LPCHAR buf, ULONG iLbaSta
                    rt, UCHAR iSectorCount)
  3884                        ;{
  3885                        ;	return 0;
  3886                        ;}
  3887                        ;
  3888                        ;UCHAR k_sd_cmd_and_irq( UCHAR mCmd )
  3889                        ;{
  3890                        ;	return 0;
  3891                        ;}
  3892                        ;
  3893                        ;UCHAR k_sd_disk_req_sense( void )
  3894                        ;{
  3895                        ;	return 0;
  3896                        ;}
  3897                        ;
  3898                        ;BOOL k_sd_read_vol(PDISKINFO pdiskInfo)
  3899                        ;{
  3900                        ;	//k_sd_reset();
  3901                        ;
  3902                        ;	//k_sd_test();
  3903                        ;
  3904                        ;	return FALSE;
  3905                        ;}
  3906                        ;
  3907                        ;BOOL k_sd_write_file(LPCHAR fileName,LPVOID fileB
                    uffer,UINT fileSize)
  3908                        ;{
  3909                        ;	return FALSE;
  3910                        ;}
  3911                        ;
  3912                        ;BOOL k_sd_read_file(LPCHAR fileName,LPVOID fileBu
                    ffer,UINT fileSize)
  3913                        ;{
  3914                        ;	return FALSE;
  3915                        ;}
  3916                        ;
  3917                        ;BOOL k_sd_create_dir(LPCHAR dirName)
  3918                        ;{
  3919                        ;	return FALSE;
  3920                        ;}
  3921                        ;
  3922                        ;BOOL k_sd_getdirinfo(P_FAT_DIR_INFO pdirName)
  3923                        ;{
  3924                        ;	return FALSE;
  3925                        ;}
  3926                        ;
  3927                        ;BOOL k_sd_delete(LPCHAR dirOrFileName)
  3928                        ;{
  3929                        ;	return FALSE;
  3930                        ;}
  3931                        ;
  3932                        ;BOOL k_sd_close(UCHAR update)
  Mon Sep 27 2021  9:39                                                Page 82


  3933                        ;{
  3934                        ;	return FALSE;
  3935                        ;}
  3936                        ;
  3937                        ;void k_sd_sendcmd(UCHAR command)
  3938                        ;{
  3939                        ;}
  3940                        ;
  3941                        ;void k_sd_senddta(UCHAR data)
  3942                        ;{
  3943                        ;}
  3944                        ;
  3945                        ;void k_sd_cmd_delay(void)
  3946                        ;{
  3947                        ;
  3948                        ;}
  3949                        ;
  3950                        ;void k_sd_dta_delay(void)
  3951                        ;{
  3952                        ;
  3953                        ;}
  3954                        ;
  3955                        ;
  3956                        ;UCHAR k_sd_createfile( LPCHAR name )
  3957                        ;{
  3958                        ;	return 0;
  3959                        ;}
  3960                        ;
  3961                        ;UCHAR	k_sd_read_block( PUCHAR buf )
  3962                        ;{
  3963                        ;
  3964                        ;	return 0;
  3965                        ;}
  3966                        ;
  3967                        ;
  3968                        ;void k_sd_write_host_block( PUCHAR buf, UCHAR len
                     )
  3969                        ;{
  3970                        ;
  3971                        ;}
  3972                        ;
  3973                        ;void k_sd_write_ofs_blocks( PUCHAR buf, UCHAR ofs
                    , UCHAR len )
  3974                        ;{
  3975                        ;
  3976                        ;}
  3977                        ;
  3978                        ;UCHAR k_sd_byte_locate( ULONG offset )
  3979                        ;{
  3980                        ;	return 0;
  3981                        ;}
  3982                        ;
  3983                        ;UCHAR k_sd_byte_read( PUCHAR buf, UINT ReqCount, 
                    PUINT RealCount )
  3984                        ;{
  3985                        ;
  3986                        ;	return 0;
  3987                        ;}
  Mon Sep 27 2021  9:39                                                Page 83


  3988                        ;
  3989                        ;
  3990                        ;UCHAR k_sd_byte_write( LPCHAR buf, UINT ReqCount,
                     PUINT RealCount )
  3991                        ;{
  3992                        ;	return 0;
  3993                        ;}
  3994                        ;
  3995                        ;UCHAR k_sd_write_req_block( PUCHAR buf )
  3996                        ;{
  3997                        ;	return 0;
  3998                        ;}
  3999                        ;
  4000                        ;void k_sd_test(void)
  4001                        ;{
  4002                        ;
  4003                        ;	DISKINFO di;
  4004                        ;	FAT_DIR_INFO dirName;
  4005                        ;
  4006                        ;	if (k_sd_initialize())
  4007                        ;	{
  4008                        ;		k_debug_string("k_sd_test::initialized..
                    .\r\n");
  4009                        ;		if (k_sd_ispresent())
  4010                        ;		{
  4011                        ;			k_debug_string("k_sd_test::card 
                    present...\r\n");
  4012                        ;
  4013                        ;			if (k_sd_mount())
  4014                        ;			{
  4015                        ;				k_debug_string("k_sd_tes
                    t::card mounted...\r\n");
  4016                        ;
  4017                        ;				k_debug_string("k_sd_tes
                    t::k_sd_read_dir...\r\n");
  4018                        ;
  4019                        ;				//k_sd_read_vol(&di);
  4020                        ;				//k_sd_search_dir("*VOL"
                    );
  4021                        ;
  4022                        ;				//k_sd_read_dir();
  4023                        ;
  4024                        ;
  4025                        ;
  4026                        ;			}
  4027                        ;			else
  4028                        ;			{
  4029                        ;				k_debug_string("k_sd_tes
                    t::card NOT mounted...\r\n");
  4030                        ;			}
  4031                        ;		}
  4032                        ;		else
  4033                        ;		{
  4034                        ;			k_debug_string("k_sd_test::card 
                    NOT present...\r\n");
  4035                        ;		}
  4036                        ;	}
  4037                        ;	else
  Mon Sep 27 2021  9:39                                                Page 84


  4038                        ;	{
  4039                        ;		k_debug_string("k_sd_test::NOT initializ
                    ed...\r\n");
  4040                        ;	}
  4041                        ;}
  4042                        ;*/
  4043                        ;
  4044                        ;#endif
  4045                        ;
  4046                        ;
  4047                        	.line	1523
  4048                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\drivers\DRIVER_FMXSDCard.c",292
  4049                        	xref	~~k_irq_device_event
  4050                        	xref	~~k_debug_byte_array
  4051                        	xref	~~k_debug_long
  4052                        	xref	~~k_debug_integer
  4053                        	xref	~~k_debug_string
  4054                        	xref	~~strncpy
  4055                        	xref	~~memset
  4056                        	xref	~~_pseudo_timer
  4057                        	.sym	~~readCluster,~~readCluster,78,2,0
  4058                        	.sym	~~k_sd_reset,~~k_sd_reset,65,2,0
  4059                        	.sym	~~f_get_driver,~~f_get_driver,1098,3,32,
                    58
  4060                        	.sym	~~DEVICE_SD,~~DEVICE_SD,138,2,32,58
  4061                        	.sym	~~DRIVER_FMXSDCard,~~DRIVER_FMXSDCard,10
                    ,3,808,59
  4062                        	.sym	~~k_read_sd_command,~~k_read_sd_command,
                    78,2,0
  4063                        	.sym	~~k_write_sd_sector,~~k_write_sd_sector,
                    78,2,0
  4064                        	.sym	~~k_read_sd_sector,~~k_read_sd_sector,78
                    ,2,0
  4065                        	.sym	~~k_sd_initialize,~~k_sd_initialize,78,2
                    ,0
  4066                        	.sym	~~f_driver_irq,~~f_driver_irq,65,3,0
  4067                        	.sym	~~default_arg,~~default_arg,18,3,32
  4068                        	.sym	~~_pseudo_timer,~~_pseudo_timer,18,18,32
  4069                        	.sym	~~_k_driver_base,~~_k_driver_base,129,3,
                    32
  4070                        	.sym	FILE,0,138,14,32,130
  4071                        	.sym	FILE_POINTER,0,10,14,112,130
  4072                        	.sym	~~k_read_volume_name,~~k_read_volume_nam
                    e,78,2,0
  4073                        	.sym	PDOSHANDLE,0,138,14,32,129
  4074                        	.sym	DOSHANDLE,0,10,14,80,129
  4075                        	.sym	PFXDOSDEVICE,0,138,14,32,127
  4076                        	.sym	FXDOSDEVICE,0,10,14,5744,127
  4077                        	.sym	DOSINITDEVICE,0,641,14,32
  4078                        	.sym	DOSSECTORWRITER,0,654,14,32
  4079                        	.sym	DOSSECTORREADER,0,654,14,32
  4080                        	.sym	PIDENTIFY_DEVICE_DATA,0,138,14,32,126
  4081                        	.sym	IDENTIFY_DEVICE_DATA,0,10,14,4096,126
  4082                        	.sym	PIDSECTOR,0,138,14,32,103
  4083                        	.sym	IDSECTOR,0,10,14,2048,103
  4084                        	.sym	PLFN,0,138,14,32,102
  4085                        	.sym	LFN,0,10,14,256,102
  Mon Sep 27 2021  9:39                                                Page 85


  4086                        	.sym	PFAT16ENTRYLONG,0,138,14,32,101
  4087                        	.sym	FAT16ENTRYLONG,0,10,14,288,101
  4088                        	.sym	PFAT16ENTRY,0,138,14,32,100
  4089                        	.sym	FAT16ENTRY,0,10,14,256,100
  4090                        	.sym	Fat16BootSector,0,10,14,4096,99
  4091                        	.sym	PPARTITIONTABLE,0,138,14,32,98
  4092                        	.sym	PARTITIONTABLE,0,10,14,128,98
  4093                        	.sym	PFATBOOTSECTOR,0,138,14,32,97
  4094                        	.sym	FATBOOTSECTOR,0,10,14,928,97
  4095                        	.sym	fat_BS_t,0,10,14,688,96
  4096                        	.sym	fat_extBS_16_t,0,10,14,192,95
  4097                        	.sym	PFAT32EXT,0,138,14,32,94
  4098                        	.sym	fat_extBS_32_t,0,10,14,416,94
  4099                        	.sym	P_FX_FAT_DIR_INFO,0,138,14,32,93
  4100                        	.sym	FX_FAT_DIR_INFO,0,10,14,256,93
  4101                        	.sym	PFILEINFO,0,138,14,32,92
  4102                        	.sym	FILEINFO,0,10,14,136,92
  4103                        	.sym	PDISKINFO,0,138,14,32,91
  4104                        	.sym	DISKINFO,0,10,14,416,91
  4105                        	.sym	PDIRENTRY,0,138,14,32,90
  4106                        	.sym	DIRENTRY,0,10,14,256,90
  4107                        	.sym	DRESULT,0,5,14,16
  4108                        	.sym	DSTATUS,0,14,14,8
  4109                        	.sym	FRESULT,0,5,14,16
  4110                        	.sym	MKFS_PARM,0,10,14,80,89
  4111                        	.sym	FILINFO,0,10,14,2224,88
  4112                        	.sym	DIR,0,10,14,416,87
  4113                        	.sym	FIL,0,10,14,4400,86
  4114                        	.sym	FFOBJID,0,10,14,128,85
  4115                        	.sym	FATFS,0,10,14,4504,84
  4116                        	.sym	LBA_t,0,18,14,32
  4117                        	.sym	FSIZE_t,0,18,14,32
  4118                        	.sym	TCHAR,0,14,14,8
  4119                        	.sym	PCOMMANDARGS,0,138,14,32,83
  4120                        	.sym	COMMANDARGS,0,10,14,64,83
  4121                        	.sym	PTOKENIZESTATE,0,133,14,32
  4122                        	.sym	TOKENIZESTATE,0,5,14,16
  4123                        	.sym	PTOKEN,0,138,14,32,82
  4124                        	.sym	TOKEN,0,10,14,64,82
  4125                        	.sym	PTOKENTYPE,0,133,14,32
  4126                        	.sym	TOKENTYPE,0,5,14,16
  4127                        	.sym	FXCommandHandler,0,656,14,32
  4128                        	.sym	PCONSOLECTX,0,138,14,32,81
  4129                        	.sym	CONSOLECTX,0,10,14,1144,81
  4130                        	.sym	PSPINNERCTX,0,138,14,32,80
  4131                        	.sym	SPINNERCTX,0,10,14,48,80
  4132                        	.sym	HCLIP,0,138,14,32,79
  4133                        	.sym	PCLIPBOARD_DATA,0,138,14,32,79
  4134                        	.sym	CLIPBOARD_DATA,0,10,14,168,79
  4135                        	.sym	~~k_irq_device_event,~~k_irq_device_even
                    t,65,18,0
  4136                        	.sym	PEVENTMANAGER,0,138,14,32,78
  4137                        	.sym	EVENTMANAGER,0,10,14,192,78
  4138                        	.sym	EV_RUN,0,656,14,32
  4139                        	.sym	EV_QUERY_METRIC,0,656,14,32
  4140                        	.sym	EV_CONFIGURE,0,656,14,32
  4141                        	.sym	EV_UNINIT,0,641,14,32
  4142                        	.sym	EV_INIT,0,8833,14,32
  Mon Sep 27 2021  9:39                                                Page 86


  4143                        	.sym	PMOUSE_MSG_STATE,0,138,14,32,77
  4144                        	.sym	MOUSE_MSG_STATE,0,10,14,184,77
  4145                        	.sym	PFXEVENTPROCESS,0,138,14,32,76
  4146                        	.sym	FXEVENTPROCESS,0,10,14,64,76
  4147                        	.sym	FXASYNCPROCESS,0,641,14,32
  4148                        	.sym	PMARSHALDATA,0,139,14,32,75
  4149                        	.sym	MARSHALDATA,0,11,14,32,75
  4150                        	.sym	FXIDLEPROCESS,0,641,14,32
  4151                        	.sym	FXEventProc,0,641,14,32
  4152                        	.sym	PMOUSEMSGDATA,0,138,14,32,74
  4153                        	.sym	MOUSEMSGDATA,0,10,14,64,74
  4154                        	.sym	MSGIRQ,0,5,14,16
  4155                        	.sym	MAINLOOPARGS,0,10,14,16,73
  4156                        	.sym	PEACHCHILD_MSG,0,138,14,32,72
  4157                        	.sym	EACHCHILD_MSG,0,10,14,64,72
  4158                        	.sym	PMSGBOX_DATA,0,138,14,32,71
  4159                        	.sym	MSGBOX_DATA,0,10,14,96,71
  4160                        	.sym	PDESKTOP_DATA,0,138,14,32,70
  4161                        	.sym	DESKTOP_DATA,0,10,14,64,70
  4162                        	.sym	PWINDOWMANAGER,0,138,14,32,69
  4163                        	.sym	WINDOWMANAGER,0,10,14,160,69
  4164                        	.sym	WM_DOPROCS,0,641,14,32
  4165                        	.sym	WM_QUERY_METRIC,0,656,14,32
  4166                        	.sym	WM_CONFIGURE,0,656,14,32
  4167                        	.sym	WM_HANDLE_EVENT,0,8833,14,32
  4168                        	.sym	WM_EVENTS,0,641,14,32
  4169                        	.sym	PCUR_PALETTE_MAP,0,138,14,32,68
  4170                        	.sym	CUR_PALETTE_MAP,0,10,14,400,68
  4171                        	.sym	PCLICKDETECTED,0,138,14,32,67
  4172                        	.sym	CLICKDETECTED,0,10,14,64,67
  4173                        	.sym	OBJECTCLICKED,0,641,14,32
  4174                        	.sym	PALLOCATIONHEADER,0,138,14,32,66
  4175                        	.sym	ALLOCATIONHEADER,0,10,14,80,66
  4176                        	.sym	PIPCPORT,0,138,14,32,65
  4177                        	.sym	IPCPORT,0,10,14,144,65
  4178                        	.sym	MemoryCallback,0,641,14,32
  4179                        	.sym	PFXMEMORYMAP,0,138,14,32,64
  4180                        	.sym	FXMEMORYMAP,0,10,14,2072,64
  4181                        	.sym	UMM_HEAP_INFO,0,10,14,256,63
  4182                        	.sym	PEXECUTIVE,0,138,14,32,62
  4183                        	.sym	EXECUTIVE,0,10,14,128,62
  4184                        	.sym	EX_QUERY_METRIC,0,656,14,32
  4185                        	.sym	EX_CONFIGURE,0,656,14,32
  4186                        	.sym	EX_UNINIT,0,641,14,32
  4187                        	.sym	EX_INIT,0,8833,14,32
  4188                        	.sym	PFXSTRING,0,138,14,32,61
  4189                        	.sym	FXSTRING,0,10,14,64,61
  4190                        	.sym	PIRQCHAIN,0,138,14,32,60
  4191                        	.sym	IRQCHAIN,0,10,14,128,60
  4192                        	.sym	DEVICEDRIVER_COMMAND,0,654,14,32
  4193                        	.sym	DEVICEDRIVER_UNLOAD,0,654,14,32
  4194                        	.sym	DEVICEDRIVER_WRITE,0,654,14,32
  4195                        	.sym	DEVICEDRIVER_READ,0,654,14,32
  4196                        	.sym	DEVICEDRIVER_LOAD,0,654,14,32
  4197                        	.sym	DEVICEDRIVER_IRQ,0,641,14,32
  4198                        	.sym	PFX_BLOCK_DEVICE_DRIVER,0,138,14,32,59
  4199                        	.sym	FX_BLOCK_DEVICE_DRIVER,0,10,14,808,59
  4200                        	.sym	GETDRIVERDEF,0,8842,14,32,58
  Mon Sep 27 2021  9:39                                                Page 87


  4201                        	.sym	PFX_DEVICE_DRIVER,0,138,14,32,58
  4202                        	.sym	FX_DEVICE_DRIVER,0,10,14,776,58
  4203                        	.sym	~~k_debug_byte_array,~~k_debug_byte_arra
                    y,65,18,0
  4204                        	.sym	~~k_debug_long,~~k_debug_long,65,18,0
  4205                        	.sym	~~k_debug_integer,~~k_debug_integer,65,1
                    8,0
  4206                        	.sym	~~k_debug_string,~~k_debug_string,65,18,
                    0
  4207                        	.sym	PSEGMENTHEADER,0,138,14,32,57
  4208                        	.sym	SEGMENTHEADER,0,10,14,160,57
  4209                        	.sym	PDEBUGBYTEBITS,0,138,14,32,56
  4210                        	.sym	DEBUGBYTEBITS,0,10,14,8,56
  4211                        	.sym	PFXENVIRONMENT,0,138,14,32,55
  4212                        	.sym	FXENVIRONMENT,0,10,14,96,55
  4213                        	.sym	PFXZEROPAGE,0,138,14,32,54
  4214                        	.sym	FXZEROPAGE,0,10,14,720,54
  4215                        	.sym	IRQBUFFER,0,10,14,32,53
  4216                        	.sym	KERNELTRAPCALL,0,641,14,32
  4217                        	.sym	PFXKERNEL_API_CALLTABLE,0,138,14,32,52
  4218                        	.sym	FXKERNEL_API_CALLTABLE,0,10,14,8192,52
  4219                        	.sym	FOREACHNODEUNTIL,0,654,14,32
  4220                        	.sym	FOREACHNODE,0,641,14,32
  4221                        	.sym	PFXRFHEADER_STRING_ENTRY,0,138,14,32,51
  4222                        	.sym	FXRFHEADER_STRING_ENTRY,0,10,14,40,51
  4223                        	.sym	PFXRFHEADER_STRING,0,138,14,32,50
  4224                        	.sym	FXRFHEADER_STRING,0,10,14,32,50
  4225                        	.sym	PFXRFHEADER_FONT,0,138,14,32,49
  4226                        	.sym	FXRFHEADER_FONT,0,10,14,144,49
  4227                        	.sym	PFXRFHEADER,0,138,14,32,48
  4228                        	.sym	FXRFHEADER,0,10,14,72,48
  4229                        	.sym	PFXCOMBUFFER,0,138,14,32,47
  4230                        	.sym	FXCOMBUFFER,0,10,14,2080,47
  4231                        	.sym	PSUBMENULIST,0,138,14,32,46
  4232                        	.sym	SUBMENULIST,0,10,14,40,46
  4233                        	.sym	HSUBMENU,0,7,14,32
  4234                        	.sym	PSUBMENU,0,138,14,32,45
  4235                        	.sym	SUBMENU,0,10,14,64,45
  4236                        	.sym	MenuAction,0,641,14,32
  4237                        	.sym	PMENUANCHOR,0,138,14,32,44
  4238                        	.sym	MENUANCHOR,0,10,14,272,44
  4239                        	.sym	PMSGBOX,0,138,14,32,43
  4240                        	.sym	MSGBOX,0,10,14,144,43
  4241                        	.sym	PTEXTBOX,0,138,14,32,42
  4242                        	.sym	TEXTBOX,0,10,14,144,42
  4243                        	.sym	PLISTBOX,0,138,14,32,41
  4244                        	.sym	LISTBOX,0,10,14,240,41
  4245                        	.sym	PSCROLLBAR,0,138,14,32,40
  4246                        	.sym	SCROLLBAR,0,10,14,240,40
  4247                        	.sym	PBUTTON,0,138,14,32,39
  4248                        	.sym	BUTTON,0,10,14,96,39
  4249                        	.sym	PMENUDROPDOWNDATA,0,138,14,32,38
  4250                        	.sym	MENUDROPDOWNDATA,0,10,14,5152,38
  4251                        	.sym	PMENUTAG,0,138,14,32,37
  4252                        	.sym	MENUTAG,0,10,14,160,37
  4253                        	.sym	PMENU,0,138,14,32,36
  4254                        	.sym	MENU,0,10,14,280,36
  4255                        	.sym	HMENURESOURCE,0,129,14,32
  Mon Sep 27 2021  9:39                                                Page 88


  4256                        	.sym	FONTMETRIC,0,10,14,32,35
  4257                        	.sym	TITLE,0,142,14,32
  4258                        	.sym	PHANDLE,0,1153,14,32
  4259                        	.sym	HANDLE,0,129,14,32
  4260                        	.sym	PWINDOWEX,0,138,14,32,34
  4261                        	.sym	WINDOWEX,0,10,14,3880,34
  4262                        	.sym	PWINDOW,0,138,14,32,33
  4263                        	.sym	WINDOW,0,10,14,3904,33
  4264                        	.sym	PDRAGDATA,0,138,14,32,32
  4265                        	.sym	DRAGDATA,0,10,14,216,32
  4266                        	.sym	PNCCLICKABLE,0,138,14,32,31
  4267                        	.sym	NCCLICKABLE,0,10,14,136,31
  4268                        	.sym	HCLICKABLE,0,7,14,32
  4269                        	.sym	PCLICKABLE,0,138,14,32,30
  4270                        	.sym	CLICKABLE,0,10,14,152,30
  4271                        	.sym	PWNDCLASS,0,138,14,32,29
  4272                        	.sym	WNDCLASS,0,10,14,272,29
  4273                        	.sym	HBRUSH,0,129,14,32
  4274                        	.sym	HCURSOR,0,129,14,32
  4275                        	.sym	HICON,0,129,14,32
  4276                        	.sym	HINSTANCE,0,129,14,32
  4277                        	.sym	FXWndProc,0,654,14,32
  4278                        	.sym	PDRECT,0,138,14,32,28
  4279                        	.sym	DRECT,0,10,14,112,28
  4280                        	.sym	PRECTP,0,138,14,32,27
  4281                        	.sym	RECTP,0,10,14,96,27
  4282                        	.sym	PRECT,0,138,14,32,26
  4283                        	.sym	RECT,0,10,14,112,26
  4284                        	.sym	PPOINT,0,138,14,32,25
  4285                        	.sym	POINT,0,10,14,32,25
  4286                        	.sym	PFXPROPERTY,0,138,14,32,23
  4287                        	.sym	FXPROPERTY,0,10,14,384,23
  4288                        	.sym	PKEYSTATE,0,138,14,32,22
  4289                        	.sym	KEYSTATE,0,10,14,112,22
  4290                        	.sym	SCANCODE,0,14,14,8
  4291                        	.sym	KEYCODE,0,16,14,16
  4292                        	.sym	PFXPROCESSMESSAGE,0,138,14,32,21
  4293                        	.sym	FXPROCESSMESSAGE,0,10,14,112,21
  4294                        	.sym	PFXPROCESS,0,138,14,32,20
  4295                        	.sym	FXPROCESS,0,10,14,800,20
  4296                        	.sym	PDESKTOP_CONTROL,0,138,14,32,19
  4297                        	.sym	DESKTOP_CONTROL,0,10,14,392,19
  4298                        	.sym	PCONSOLE_CONTROL,0,138,14,32,18
  4299                        	.sym	CONSOLE_CONTROL,0,10,14,448,18
  4300                        	.sym	FXProcessProc,0,641,14,32
  4301                        	.sym	PFXCMDMESSAGE,0,138,14,32,17
  4302                        	.sym	FXCMDMESSAGE,0,10,14,312,17
  4303                        	.sym	PFXOSMESSAGE,0,138,14,32,16
  4304                        	.sym	FXOSMESSAGE,0,10,14,312,16
  4305                        	.sym	PINT_REGS,0,138,14,32,15
  4306                        	.sym	INT_REGS,0,10,14,104,15
  4307                        	.sym	TASK_STACK,0,10,14,32,14
  4308                        	.sym	TASK,0,10,14,48,13
  4309                        	.sym	PIRQDATA,0,138,14,32,12
  4310                        	.sym	IRQDATA,0,10,14,48,12
  4311                        	.sym	HMENU,0,129,14,32
  4312                        	.sym	HWND,0,129,14,32
  4313                        	.sym	MSGDATA,0,14,14,8
  Mon Sep 27 2021  9:39                                                Page 89


  4314                        	.sym	MSGDEST,0,18,14,32
  4315                        	.sym	MSGSRC,0,18,14,32
  4316                        	.sym	MSGTYPE,0,16,14,16
  4317                        	.sym	PROCESS_RESOURCE_LIST,0,138,14,32,6
  4318                        	.sym	PROCESS_TLS_LIST,0,138,14,32,6
  4319                        	.sym	SEMAPHORE_LIST,0,138,14,32,6
  4320                        	.sym	FILE_BLOCK_LIST,0,138,14,32,6
  4321                        	.sym	FILE_PATH_LIST,0,138,14,32,6
  4322                        	.sym	PROCEDURE_LIST,0,138,14,32,6
  4323                        	.sym	FILE_HANDLE,0,138,14,32,11
  4324                        	.sym	FILE_BLOCK,0,10,14,552,11
  4325                        	.sym	SEMAPHORE,0,10,14,16,10
  4326                        	.sym	PPROCESS_SIGNAL,0,138,14,32,9
  4327                        	.sym	PROCESS_SIGNAL,0,10,14,16,9
  4328                        	.sym	KRESULT,0,18,14,32
  4329                        	.sym	PKERNEL_ERROR,0,138,14,32,8
  4330                        	.sym	KERNEL_ERROR,0,10,14,32,8
  4331                        	.sym	PROCESS_STATUS,0,16,14,16
  4332                        	.sym	FILE_PATH_NAME,0,142,14,32
  4333                        	.sym	PROCESS_RESOURCE,0,129,14,32
  4334                        	.sym	PROCESS_TLS,0,129,14,32
  4335                        	.sym	PROCESS_CTX,0,129,14,32
  4336                        	.sym	USERID,0,16,14,16
  4337                        	.sym	PROCESS_ID,0,18,14,32
  4338                        	.sym	PROCESS_BANK,0,14,14,8
  4339                        	.sym	PFXQUEUE,0,138,14,32,7
  4340                        	.sym	FXQUEUE,0,10,14,80,7
  4341                        	.sym	PFXNODELIST,0,138,14,32,6
  4342                        	.sym	FXNODELIST,0,10,14,96,6
  4343                        	.sym	NodeListDeallocator,0,641,14,32
  4344                        	.sym	PFXNODE,0,138,14,32,5
  4345                        	.sym	FXNODE,0,10,14,384,5
  4346                        	.sym	PBYTEBITS,0,138,14,32,4
  4347                        	.sym	BYTEBITS,0,10,14,8,4
  4348                        	.sym	HRESULT,0,18,14,32
  4349                        	.sym	LPWCHAR,0,144,14,32
  4350                        	.sym	WCHAR,0,16,14,16
  4351                        	.sym	HSTRINGTABLE,0,129,14,32
  4352                        	.sym	HCOLOR,0,129,14,32
  4353                        	.sym	HFONT,0,129,14,32
  4354                        	.sym	HDC,0,129,14,32
  4355                        	.sym	HPOINTER,0,129,14,32
  4356                        	.sym	uint32_t,0,18,14,32
  4357                        	.sym	uint8_t,0,14,14,8
  4358                        	.sym	LPBOOL,0,142,14,32
  4359                        	.sym	BOOL,0,14,14,8
  4360                        	.sym	DWORD,0,18,14,32
  4361                        	.sym	ULONG,0,18,14,32
  4362                        	.sym	LPLONG,0,135,14,32
  4363                        	.sym	LONG,0,7,14,32
  4364                        	.sym	PUINT,0,144,14,32
  4365                        	.sym	USHORT,0,16,14,16
  4366                        	.sym	UINT,0,16,14,16
  4367                        	.sym	INT,0,5,14,16
  4368                        	.sym	WORD,0,5,14,16
  4369                        	.sym	PBYTE,0,142,14,32
  4370                        	.sym	BYTE,0,14,14,8
  4371                        	.sym	IOPORT,0,142,14,32
  Mon Sep 27 2021  9:39                                                Page 90


  4372                        	.sym	PUCHAR,0,142,14,32
  4373                        	.sym	UCHAR,0,14,14,8
  4374                        	.sym	LPWCSTR,0,142,14,32
  4375                        	.sym	LPCSTR,0,142,14,32
  4376                        	.sym	LPSTR,0,142,14,32
  4377                        	.sym	LPCHAR,0,142,14,32
  4378                        	.sym	CHAR,0,14,14,8
  4379                        	.sym	PUINT_32,0,146,14,32
  4380                        	.sym	UINT_32,0,18,14,32
  4381                        	.sym	PUINT_16,0,144,14,32
  4382                        	.sym	UINT_16,0,16,14,16
  4383                        	.sym	PUINT_8,0,142,14,32
  4384                        	.sym	UINT_8,0,14,14,8
  4385                        	.sym	LPVOID,0,129,14,32
  4386                        	.sym	VOID,0,1,14,32
  4387                        	.sym	~~strncpy,~~strncpy,1102,18,32
  4388                        	.sym	~~memset,~~memset,1089,18,32
  4389                        	.sym	Boolean_T,0,5,14,16
  4390                        	.sym	ldiv_t,0,10,14,64,2
  4391                        	.sym	div_t,0,10,14,32,1
  4392                        	.sym	wctype_t,0,16,14,16
  4393                        	.sym	wint_t,0,16,14,16
  4394                        	.sym	wchar_t,0,14,14,8
  4395                        	.sym	ptrdiff_t,0,7,14,32
  4396                        	.sym	size_t,0,16,14,16
  4397                        	end


      Lines assembled: 4397
      Errors: 0
