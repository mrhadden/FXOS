  Mon Sep 27 2021  9:39                                                Page 1


                     ***************************************
                     **      WDC 65C816 Macro Assembler   **
                     **                                   **
                     **     Version 1.00- Aug 10 2021    **
                     ***************************************

     1                        ;:ts=8
     2             00000001   R0	equ	1
     3             00000005   R1	equ	5
     4             00000009   R2	equ	9
     5             0000000D   R3	equ	13
     6                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.c",0
     7                        ;
     8                        ;#include "fxconsole.h"
     9                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.h",0
    10                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    string.h",0
    11                        	.line	134
    12                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.h",5
    13                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",0
    14                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stddef.h",0
    15                        	.line	88
    16                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",43
    17                        	.stag	fake1_,32,1
    18                        	.member	quot,0,5,8,16
    19                        	.member	rem,16,5,8,16
    20                        	.eos
    21                        	.stag	fake2_,64,2
    22                        	.member	quot,0,7,8,32
    23                        	.member	rem,32,7,8,32
    24                        	.eos
    25                        	.stag	int_sqrt,32,3
    26                        	.member	sqrt,0,16,8,16
    27                        	.member	frac,16,16,8,16
    28                        	.eos
    29                        	.line	205
    30                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.h",6
    31                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
    32                        	.stag	_fx_bytebits,8,4
    33                        	.member	b7,0,14,17,1
    34                        	.member	b6,1,14,17,1
    35                        	.member	b5,2,14,17,1
    36                        	.member	b4,3,14,17,1
    37                        	.member	b3,4,14,17,1
    38                        	.member	b2,5,14,17,1
    39                        	.member	b1,6,14,17,1
    40                        	.member	b0,7,14,17,1
    41                        	.eos
    42                        	.stag	_fx_node,384,5
    43                        	.member	type,0,14,8,8
  Mon Sep 27 2021  9:39                                                Page 2


    44                        	.member	Reserved0,8,14,8,8
    45                        	.member	data,16,129,8,32
    46                        	.member	last,48,138,8,32,5
    47                        	.member	next,80,138,8,32,5
    48                        	.member	name,112,110,8,0,32
    49                        	.member	Reserved1,368,16,8,16
    50                        	.eos
    51                        	.stag	_fx_nodelist,96,6
    52                        	.member	listhead,0,138,8,32,5
    53                        	.member	listData,32,129,8,32
    54                        	.member	deallocator,64,641,8,32
    55                        	.eos
    56                        	.stag	_fx_queue,80,7
    57                        	.member	count,0,5,8,16
    58                        	.member	front,16,138,8,32,5
    59                        	.member	rear,48,138,8,32,5
    60                        	.eos
    61                        	.stag	fake8_,32,8
    62                        	.member	subsystem,0,14,8,8
    63                        	.member	level,8,14,8,8
    64                        	.member	error,16,16,8,16
    65                        	.eos
    66                        	.stag	_fx_process_signal,16,9
    67                        	.member	cbSize,0,16,8,16
    68                        	.eos
    69                        	.stag	_fx_semaphore,16,10
    70                        	.member	reserved,0,5,8,16
    71                        	.eos
    72                        	.stag	_fx_fileBlock,552,11
    73                        	.member	openCount,0,16,8,16
    74                        	.member	lockCount,16,16,8,16
    75                        	.member	dirty,32,14,8,8
    76                        	.member	fileBuffer,40,110,8,0,64
    77                        	.eos
    78                        	.stag	_fx_irq_data,48,12
    79                        	.member	line,0,5,8,16
    80                        	.member	keycode,16,142,8,32
    81                        	.eos
    82                        	.stag	_task,48,13
    83                        	.member	SPL,0,14,8,8
    84                        	.member	SPH,8,14,8,8
    85                        	.member	pstack,16,142,8,32
    86                        	.eos
    87                        	.stag	_task_stack,32,14
    88                        	.member	SS,0,142,8,32
    89                        	.eos
    90                        	.stag	int_regs,104,15
    91                        	.member	PB,0,14,8,8
    92                        	.member	PH,8,14,8,8
    93                        	.member	PL,16,14,8,8
    94                        	.member	PP,24,14,8,8
    95                        	.member	DB,32,14,8,8
    96                        	.member	DH,40,14,8,8
    97                        	.member	DL,48,14,8,8
    98                        	.member	AH,56,14,8,8
    99                        	.member	AL,64,14,8,8
   100                        	.member	XH,72,14,8,8
   101                        	.member	XL,80,14,8,8
  Mon Sep 27 2021  9:39                                                Page 3


   102                        	.member	YH,88,14,8,8
   103                        	.member	YL,96,14,8,8
   104                        	.eos
   105                        	.stag	_fx_eventMessage,312,16
   106                        	.member	src,0,18,8,32
   107                        	.member	dest,32,18,8,32
   108                        	.member	type,64,16,8,16
   109                        	.member	hwnd,80,129,8,32
   110                        	.member	pheap,112,129,8,32
   111                        	.member	msgTime,144,18,8,32
   112                        	.member	data,176,110,8,0,16
   113                        	.member	attr,304,14,8,8
   114                        	.eos
   115                        	.stag	_fx_cmdMessage,312,17
   116                        	.member	src,0,18,8,32
   117                        	.member	dest,32,18,8,32
   118                        	.member	type,64,16,8,16
   119                        	.member	hwnd,80,129,8,32
   120                        	.member	pheap,112,129,8,32
   121                        	.member	msgTime,144,18,8,32
   122                        	.member	cmdCId,176,16,8,16
   123                        	.member	cmdMId,192,16,8,16
   124                        	.member	parameter1,208,18,8,32
   125                        	.member	parameter2,240,18,8,32
   126                        	.member	parameter3,272,18,8,32
   127                        	.member	attr,304,14,8,8
   128                        	.eos
   129                        	.stag	_fx_console_ctl,448,18
   130                        	.member	maxCols,0,5,8,16
   131                        	.member	maxRows,16,5,8,16
   132                        	.member	curX,32,5,8,16
   133                        	.member	curY,48,5,8,16
   134                        	.member	fgColor,64,5,8,16
   135                        	.member	bgColor,80,5,8,16
   136                        	.member	mode,96,14,8,8
   137                        	.member	kbBuffer,104,101,8,0,16
   138                        	.member	screenBuffer,360,142,8,32
   139                        	.member	desktopMode,392,14,8,8
   140                        	.member	lastMouseButton,400,5,8,16
   141                        	.member	lastMouseX,416,5,8,16
   142                        	.member	lastMouseY,432,5,8,16
   143                        	.eos
   144                        	.stag	_fx_desktop_ctl,392,19
   145                        	.member	desktopMode,0,14,8,8
   146                        	.member	cursorCtl,8,5,8,16
   147                        	.member	cursorState,24,5,8,16
   148                        	.member	backgroundColor,40,5,8,16
   149                        	.member	foregroundColor,56,5,8,16
   150                        	.member	menuMode,72,5,8,16
   151                        	.member	lastMouseButton,88,5,8,16
   152                        	.member	lastMouseX,104,5,8,16
   153                        	.member	lastMouseY,120,5,8,16
   154                        	.member	currentDiskName,136,142,8,32
   155                        	.member	diskNodes,168,129,8,32
   156                        	.member	titleNodes,200,129,8,32
   157                        	.member	menuNodes,232,129,8,32
   158                        	.member	iconNodes,264,129,8,32
   159                        	.member	windowNodes,296,129,8,32
  Mon Sep 27 2021  9:39                                                Page 4


   160                        	.member	fontNodes,328,129,8,32
   161                        	.member	wndProc,360,138,8,32,6
   162                        	.eos
   163                        	.stag	_fx_process,800,20
   164                        	.member	cbSize,0,5,8,16
   165                        	.member	procId,16,18,8,32
   166                        	.member	parentId,48,18,8,32
   167                        	.member	ctx,80,129,8,32
   168                        	.member	userId,112,16,8,16
   169                        	.member	status,128,16,8,16
   170                        	.member	foregroundActive,144,14,8,8
   171                        	.member	tls,152,1121,8,32,8
   172                        	.member	commandLine,408,142,8,32
   173                        	.member	semaphores,440,138,8,32,6
   174                        	.member	fileHandles,472,138,8,32,6
   175                        	.member	pathList,504,138,8,32,6
   176                        	.member	resources,536,138,8,32,6
   177                        	.member	timerAware,568,14,8,8
   178                        	.member	timerTicks,576,112,8,0,2
   179                        	.member	timerTickCount,608,112,8,0,2
   180                        	.member	kernelError,640,10,8,32,8
   181                        	.member	consoleCtl,672,138,8,32,18
   182                        	.member	desktopCtl,704,138,8,32,19
   183                        	.member	execProc,736,641,8,32
   184                        	.member	startupArgs,768,129,8,32
   185                        	.eos
   186                        	.stag	_fxProcessMessage,112,21
   187                        	.member	src,0,18,8,32
   188                        	.member	dest,32,18,8,32
   189                        	.member	type,64,16,8,16
   190                        	.member	processInfo,80,138,8,32,20
   191                        	.eos
   192                        	.stag	_k_key_state,112,22
   193                        	.member	scanCode,0,14,8,8
   194                        	.member	isShifted,8,14,8,8
   195                        	.member	isAlt,16,14,8,8
   196                        	.member	isExtended,24,14,8,8
   197                        	.member	isCapsLock,32,14,8,8
   198                        	.member	isNumLock,40,14,8,8
   199                        	.member	isScrollLock,48,14,8,8
   200                        	.member	keyChar,56,16,8,16
   201                        	.member	scanTime,72,18,8,32
   202                        	.member	ledStatus,104,14,8,8
   203                        	.eos
   204                        	.stag	_fx_property,384,23
   205                        	.member	name,0,110,8,0,16
   206                        	.member	value,128,110,8,0,32
   207                        	.eos
   208                        	.utag	_24bitPointer,32,24
   209                        	.member	address,0,142,11,32
   210                        	.member	bytes,0,110,11,0,4
   211                        	.eos
   212                        	.stag	_PointStruct,32,25
   213                        	.member	x,0,5,8,16
   214                        	.member	y,16,5,8,16
   215                        	.eos
   216                        	.stag	_RectStruct,112,26
   217                        	.member	x,0,5,8,16
  Mon Sep 27 2021  9:39                                                Page 5


   218                        	.member	y,16,5,8,16
   219                        	.member	z,32,18,8,32
   220                        	.member	width,64,5,8,16
   221                        	.member	height,80,5,8,16
   222                        	.member	attr,96,5,8,16
   223                        	.eos
   224                        	.stag	fake27_,96,27
   225                        	.member	name,0,142,8,32
   226                        	.member	topLeft,32,10,8,32,25
   227                        	.member	bottomRight,64,10,8,32,25
   228                        	.eos
   229                        	.stag	fake28_,112,28
   230                        	.member	x,0,5,8,16
   231                        	.member	y,16,5,8,16
   232                        	.member	z,32,5,8,16
   233                        	.member	width,48,5,8,16
   234                        	.member	height,64,5,8,16
   235                        	.member	data,80,18,8,32
   236                        	.eos
   237                        	.stag	_k_WindowClass,272,29
   238                        	.member	cbSize,0,16,8,16
   239                        	.member	style,16,16,8,16
   240                        	.member	styleEx,32,16,8,16
   241                        	.member	pWndProc,48,654,8,32
   242                        	.member	hInstance,80,129,8,32
   243                        	.member	hIcon,112,129,8,32
   244                        	.member	hCursor,144,129,8,32
   245                        	.member	hbrBackground,176,129,8,32
   246                        	.member	lpszMenuName,208,142,8,32
   247                        	.member	lpszClassName,240,142,8,32
   248                        	.eos
   249                        	.stag	_ClickableRect,152,30
   250                        	.member	area,0,10,8,112,26
   251                        	.member	z,112,18,8,32
   252                        	.member	enabled,144,14,8,8
   253                        	.eos
   254                        	.stag	_NCClickableRect,136,31
   255                        	.member	area,0,10,8,112,26
   256                        	.member	msgType,112,16,8,16
   257                        	.member	enabled,128,14,8,8
   258                        	.eos
   259                        	.stag	_DragData,216,32
   260                        	.member	area,0,10,8,112,26
   261                        	.member	xoffset,112,5,8,16
   262                        	.member	yoffset,128,5,8,16
   263                        	.member	msgType,144,16,8,16
   264                        	.member	ncAction,160,16,8,16
   265                        	.member	isDrag,176,14,8,8
   266                        	.member	isResize,184,14,8,8
   267                        	.member	canDrag,192,14,8,8
   268                        	.member	canDrop,200,14,8,8
   269                        	.member	didDrag,208,14,8,8
   270                        	.eos
   271                        	.stag	_k_WindowStruct,3904,33
   272                        	.member	cbSize,0,16,8,16
   273                        	.member	style,16,18,8,32
   274                        	.member	styleEx,48,18,8,32
   275                        	.member	win_id,80,5,8,16
  Mon Sep 27 2021  9:39                                                Page 6


   276                        	.member	win_x,96,5,8,16
   277                        	.member	win_y,112,5,8,16
   278                        	.member	win_width,128,5,8,16
   279                        	.member	win_height,144,5,8,16
   280                        	.member	win_xoffset,160,5,8,16
   281                        	.member	win_yoffset,176,5,8,16
   282                        	.member	win_cxoffset,192,5,8,16
   283                        	.member	win_cyoffset,208,5,8,16
   284                        	.member	wndRect,224,10,8,112,26
   285                        	.member	clientRect,336,10,8,112,26
   286                        	.member	nonclientGadgets,448,106,8,0,31,16
   287                        	.member	clickable,2624,129,8,32
   288                        	.member	win_title,2656,110,8,0,32
   289                        	.member	Reserved0,2912,16,8,16
   290                        	.member	win_class,2928,110,8,0,16
   291                        	.member	win_class_name,3056,110,8,0,32
   292                        	.member	nBitmapLayer,3312,16,8,16
   293                        	.member	bgRegion,3328,129,8,32
   294                        	.member	procid,3360,18,8,32
   295                        	.member	pWndClass,3392,138,8,32,29
   296                        	.member	pParentWindow,3424,129,8,32
   297                        	.member	hMenu,3456,129,8,32
   298                        	.member	hPointer,3488,129,8,32
   299                        	.member	hBackground,3520,129,8,32
   300                        	.member	pChildWindows,3552,138,8,32,6
   301                        	.member	pChildHitList,3584,138,8,32,6
   302                        	.member	isVisible,3616,14,8,8
   303                        	.member	windowData,3624,129,8,32
   304                        	.member	clientData,3656,1121,8,32,6
   305                        	.member	isClosed,3848,14,8,8
   306                        	.member	isClosing,3856,14,8,8
   307                        	.member	isDesktop,3864,14,8,8
   308                        	.member	clickableNode,3872,138,8,32,5
   309                        	.eos
   310                        	.stag	_k_WindowStructEx,3880,34
   311                        	.member	cbSize,0,16,8,16
   312                        	.member	style,16,18,8,32
   313                        	.member	styleEx,48,18,8,32
   314                        	.member	win_id,80,5,8,16
   315                        	.member	win_x,96,5,8,16
   316                        	.member	win_y,112,5,8,16
   317                        	.member	win_width,128,5,8,16
   318                        	.member	win_height,144,5,8,16
   319                        	.member	win_xoffset,160,5,8,16
   320                        	.member	win_yoffset,176,5,8,16
   321                        	.member	win_cxoffset,192,5,8,16
   322                        	.member	win_cyoffset,208,5,8,16
   323                        	.member	wndRect,224,10,8,112,26
   324                        	.member	clientRect,336,10,8,112,26
   325                        	.member	nonclientGadgets,448,106,8,0,31,16
   326                        	.member	clickable,2624,129,8,32
   327                        	.member	win_title,2656,110,8,0,32
   328                        	.member	Reserved0,2912,16,8,16
   329                        	.member	win_class,2928,110,8,0,16
   330                        	.member	nBitmapLayer,3056,16,8,16
   331                        	.member	procid,3072,18,8,32
   332                        	.member	pWndClass,3104,138,8,32,29
   333                        	.member	pParentWindow,3136,129,8,32
  Mon Sep 27 2021  9:39                                                Page 7


   334                        	.member	hMenu,3168,129,8,32
   335                        	.member	hPointer,3200,129,8,32
   336                        	.member	hBackground,3232,129,8,32
   337                        	.member	pChildWindows,3264,138,8,32,6
   338                        	.member	pChildHitList,3296,138,8,32,6
   339                        	.member	isVisible,3328,14,8,8
   340                        	.member	windowData,3336,129,8,32
   341                        	.member	clientData,3368,1121,8,32,4
   342                        	.member	isClosed,3496,14,8,8
   343                        	.member	hWnd,3504,129,8,32
   344                        	.member	localRect,3536,10,8,112,26
   345                        	.member	globalRect,3648,10,8,112,26
   346                        	.member	clientOffsetRect,3760,10,8,112,26
   347                        	.member	isDesktop,3872,14,8,8
   348                        	.eos
   349                        	.stag	_FontMetric,32,35
   350                        	.member	width,0,5,8,16
   351                        	.member	height,16,5,8,16
   352                        	.eos
   353                        	.stag	_MenuStruct,280,36
   354                        	.member	cx,0,5,8,16
   355                        	.member	cy,16,5,8,16
   356                        	.member	width,32,5,8,16
   357                        	.member	height,48,5,8,16
   358                        	.member	fcolor,64,14,8,8
   359                        	.member	bcolor,72,14,8,8
   360                        	.member	chromeLeft,80,14,8,8
   361                        	.member	chromeRight1,88,14,8,8
   362                        	.member	chromeRight2,96,14,8,8
   363                        	.member	hFont,104,129,8,32
   364                        	.member	itemId,136,16,8,16
   365                        	.member	pCaption,152,142,8,32
   366                        	.member	subMenus,184,138,8,32,6
   367                        	.member	pBackground,216,129,8,32
   368                        	.member	hWndOwner,248,129,8,32
   369                        	.eos
   370                        	.stag	fake37_,160,37
   371                        	.member	menuId,0,16,8,16
   372                        	.member	caption,16,142,8,32
   373                        	.member	rect,48,10,8,112,26
   374                        	.eos
   375                        	.stag	fake38_,5152,38
   376                        	.member	pParent,0,138,8,32,33
   377                        	.member	rect,32,10,8,112,26
   378                        	.member	captions,144,1134,8,32,24
   379                        	.member	chrome,912,110,8,0,24
   380                        	.member	ids,1104,112,8,0,24
   381                        	.member	clickable,1488,106,8,0,30,24
   382                        	.member	selected,5136,16,8,16
   383                        	.eos
   384                        	.stag	_fx_button_t,96,39
   385                        	.member	pCaption,0,142,8,32
   386                        	.member	cCaption,32,16,8,16
   387                        	.member	data,48,129,8,32
   388                        	.member	captionPixelWidth,80,16,8,16
   389                        	.eos
   390                        	.stag	_fx_scrollbar_t,240,40
   391                        	.member	min,0,16,8,16
  Mon Sep 27 2021  9:39                                                Page 8


   392                        	.member	max,16,16,8,16
   393                        	.member	increment,32,16,8,16
   394                        	.member	stopsize,48,16,8,16
   395                        	.member	location,64,5,8,16
   396                        	.member	state,80,5,8,16
   397                        	.member	rectThumb,96,10,8,112,26
   398                        	.member	data,208,129,8,32
   399                        	.eos
   400                        	.stag	_fx_listbox_t,240,41
   401                        	.member	pos,0,5,8,16
   402                        	.member	selected,16,16,8,16
   403                        	.member	offsetX,32,5,8,16
   404                        	.member	offsetY,48,5,8,16
   405                        	.member	inc,64,5,8,16
   406                        	.member	direction,80,5,8,16
   407                        	.member	top,96,5,8,16
   408                        	.member	bottom,112,5,8,16
   409                        	.member	indexTop,128,5,8,16
   410                        	.member	indexBottom,144,5,8,16
   411                        	.member	maxItems,160,16,8,16
   412                        	.member	fontSet,176,142,8,32
   413                        	.member	data,208,129,8,32
   414                        	.eos
   415                        	.stag	_fx_textbox_t,144,42
   416                        	.member	pos,0,5,8,16
   417                        	.member	selected,16,16,8,16
   418                        	.member	offsetX,32,5,8,16
   419                        	.member	offsetY,48,5,8,16
   420                        	.member	isShifted,64,14,8,8
   421                        	.member	cursorState,72,14,8,8
   422                        	.member	fontSet,80,142,8,32
   423                        	.member	data,112,129,8,32
   424                        	.eos
   425                        	.stag	_fx_msgbox_t,144,43
   426                        	.member	pos,0,5,8,16
   427                        	.member	selected,16,16,8,16
   428                        	.member	offsetX,32,5,8,16
   429                        	.member	offsetY,48,5,8,16
   430                        	.member	isShifted,64,14,8,8
   431                        	.member	cursorState,72,14,8,8
   432                        	.member	fontSet,80,142,8,32
   433                        	.member	data,112,129,8,32
   434                        	.eos
   435                        	.stag	_fx_menuAnchor_t,272,44
   436                        	.member	pCaption,0,142,8,32
   437                        	.member	renderLayoutX,32,16,8,16
   438                        	.member	renderLayoutY,48,16,8,16
   439                        	.member	captionPixelWidth,64,16,8,16
   440                        	.member	data,80,129,8,32
   441                        	.member	droppedWindow,112,138,8,32,33
   442                        	.member	bytes,144,110,8,0,16
   443                        	.eos
   444                        	.stag	_SubMenuStruct,64,45
   445                        	.member	caption,0,142,8,32
   446                        	.member	action,32,641,8,32
   447                        	.eos
   448                        	.stag	_SubMenuListStruct,40,46
   449                        	.member	cMenus,0,14,8,8
  Mon Sep 27 2021  9:39                                                Page 9


   450                        	.member	psubmenus,8,9354,8,32,45
   451                        	.eos
   452                        	.stag	_fx_ComBuffer,2080,47
   453                        	.member	cbSize,0,16,8,16
   454                        	.member	cbBuffer,16,16,8,16
   455                        	.member	buffer,32,110,8,0,256
   456                        	.eos
   457                        	.stag	_fx_resource_header,72,48
   458                        	.member	magic,0,110,8,0,4
   459                        	.member	major,32,14,8,8
   460                        	.member	minor,40,14,8,8
   461                        	.member	type,48,14,8,8
   462                        	.member	reserved,56,14,8,8
   463                        	.member	resheaderSize,64,14,8,8
   464                        	.eos
   465                        	.stag	_fx_resource_header_font,144,49
   466                        	.member	title,0,110,8,0,16
   467                        	.member	height,128,14,8,8
   468                        	.member	width,136,14,8,8
   469                        	.eos
   470                        	.stag	_fx_resource_string,32,50
   471                        	.member	locale,0,110,8,0,2
   472                        	.member	entries,16,16,8,16
   473                        	.eos
   474                        	.stag	_fx_resource_string_entry,40,51
   475                        	.member	index,0,16,8,16
   476                        	.member	length,16,16,8,16
   477                        	.member	data,32,14,8,8
   478                        	.eos
   479                        	.line	1064
   480                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.h",7
   481                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxc256u.h",0
   482                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   483                        	.line	1064
   484                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxc256u.h",5
   485                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fmx_vicky.h",0
   486                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   487                        	.line	1064
   488                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fmx_vicky.h",11
   489                        	.line	72
   490                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxc256u.h",6
   491                        	.line	1963
   492                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.h",12
   493                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxstring.h",0
   494                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",0
   495                        	.line	205
   496                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
  Mon Sep 27 2021  9:39                                                Page 10


                    space\FXOS-Beta\src\fxstring.h",5
   497                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    string.h",0
   498                        	.line	134
   499                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxstring.h",6
   500                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   501                        	.line	1064
   502                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxstring.h",7
   503                        	.stag	_fx_string,64,52
   504                        	.member	size,0,16,8,16
   505                        	.member	pos,16,5,8,16
   506                        	.member	buffer,32,142,8,32
   507                        	.eos
   508                        	.line	141
   509                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.h",17
   510                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxeventmanager.h",0
   511                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",0
   512                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    stdlib.h",0
   513                        	.line	205
   514                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",4
   515                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    string.h",0
   516                        	.line	134
   517                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",5
   518                        	.file	"G:\devtools\WDCTools\wdc\Tools\include\
                    ctype.h",0
   519                        	.line	103
   520                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",6
   521                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   522                        	.line	1064
   523                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",8
   524                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxstringtable.h",0
   525                        	.line	90
   526                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",9
   527                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxc256u.h",0
   528                        	.line	1963
   529                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",16
   530                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxkernel.h",0
   531                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",0
   532                        	.line	30
  Mon Sep 27 2021  9:39                                                Page 11


   533                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxkernel.h",5
   534                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxnode.h",0
   535                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   536                        	.line	1064
   537                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxnode.h",11
   538                        	.line	118
   539                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxkernel.h",6
   540                        	.stag	_fx_api_call_table,8192,53
   541                        	.member	call_table,0,1121,8,32,256
   542                        	.eos
   543                        	.stag	_fx_zero_page_irq_data,32,54
   544                        	.member	data,0,110,8,0,4
   545                        	.eos
   546                        	.stag	_fx_zero_page,720,55
   547                        	.member	fxos_mouse_byte_0,0,14,8,8
   548                        	.member	fxos_mouse_byte_1,8,14,8,8
   549                        	.member	fxos_mouse_byte_2,16,14,8,8
   550                        	.member	fxos_mouse_byte_t,24,14,8,8
   551                        	.member	fxos_mouse_byte_x_l,32,14,8,8
   552                        	.member	fxos_mouse_byte_x_h,40,14,8,8
   553                        	.member	fxos_mouse_byte_y_l,48,14,8,8
   554                        	.member	fxos_mouse_byte_y_h,56,14,8,8
   555                        	.member	fxos_key_byte_0,64,14,8,8
   556                        	.member	fxos_key_byte_1,72,14,8,8
   557                        	.member	fxos_key_byte_2,80,14,8,8
   558                        	.member	fxos_mouse_ctl,88,14,8,8
   559                        	.member	fxos_mouse_index,96,14,8,8
   560                        	.member	fxos_mouse_status,104,14,8,8
   561                        	.member	Endianness,112,16,8,16
   562                        	.member	VersionMajor,128,16,8,16
   563                        	.member	VersionMinor,144,16,8,16
   564                        	.member	VersionRelease,160,16,8,16
   565                        	.member	topMemory,176,18,8,32
   566                        	.member	bottomMemory,208,18,8,32
   567                        	.member	availableMemory,240,18,8,32
   568                        	.member	availableMemoryK,272,18,8,32
   569                        	.member	availableHeapMemory,304,18,8,32
   570                        	.member	availableHeapMemoryK,336,18,8,32
   571                        	.member	fxos_console_row,368,16,8,16
   572                        	.member	fxos_console_col,384,16,8,16
   573                        	.member	executive,400,129,8,32
   574                        	.member	eventmanager,432,129,8,32
   575                        	.member	devicemanager,464,129,8,32
   576                        	.member	windowmanager,496,129,8,32
   577                        	.member	fxos_kernel_api,528,138,8,32,53
   578                        	.member	fxos_dos_api,560,138,8,32,53
   579                        	.member	fxos_gfx_api,592,138,8,32,53
   580                        	.member	fxos_gui_api,624,138,8,32,53
   581                        	.member	fxos_con_api,656,138,8,32,53
   582                        	.member	fxos_reserved_2_api,688,138,8,32,53
   583                        	.eos
   584                        	.stag	_fx_environment,96,56
   585                        	.member	variables,0,142,8,32
  Mon Sep 27 2021  9:39                                                Page 12


   586                        	.member	reserved1,32,5,8,16
   587                        	.member	reserved2,48,5,8,16
   588                        	.member	reserved3,64,5,8,16
   589                        	.member	reserved4,80,5,8,16
   590                        	.eos
   591                        	.stag	_debug_byte_bits,8,57
   592                        	.member	bit7,0,14,17,1
   593                        	.member	bit6,1,14,17,1
   594                        	.member	bit5,2,14,17,1
   595                        	.member	bit4,3,14,17,1
   596                        	.member	bit3,4,14,17,1
   597                        	.member	bit2,5,14,17,1
   598                        	.member	bit1,6,14,17,1
   599                        	.member	bit0,7,14,17,1
   600                        	.eos
   601                        	.stag	_k_segmentheader,160,58
   602                        	.member	version_major,0,14,8,8
   603                        	.member	version_minor,8,14,8,8
   604                        	.member	length,16,5,8,16
   605                        	.member	segment_start_addr,32,7,8,32
   606                        	.member	segment_end_addr,64,7,8,32
   607                        	.member	segment_size,96,7,8,32
   608                        	.member	main_entry_addr,128,7,8,32
   609                        	.eos
   610                        	.stag	_fx_device_driver,776,59
   611                        	.member	name,0,110,8,0,32
   612                        	.member	version,256,110,8,0,16
   613                        	.member	hmajor,384,110,8,0,8
   614                        	.member	hminor,448,110,8,0,8
   615                        	.member	type,512,14,8,8
   616                        	.member	designation,520,110,8,0,6
   617                        	.member	irq_ctl,568,16,8,16
   618                        	.member	f_driver_irq,584,129,8,32
   619                        	.member	driver_context,616,129,8,32
   620                        	.member	f_driver_load,648,129,8,32
   621                        	.member	f_driver_read,680,129,8,32
   622                        	.member	f_driver_write,712,129,8,32
   623                        	.member	f_driver_unload,744,129,8,32
   624                        	.eos
   625                        	.stag	_fx_block_device_driver,808,60
   626                        	.member	name,0,110,8,0,32
   627                        	.member	version,256,110,8,0,16
   628                        	.member	hmajor,384,110,8,0,8
   629                        	.member	hminor,448,110,8,0,8
   630                        	.member	type,512,14,8,8
   631                        	.member	designation,520,110,8,0,6
   632                        	.member	irq_ctl,568,16,8,16
   633                        	.member	f_driver_irq,584,129,8,32
   634                        	.member	driver_context,616,129,8,32
   635                        	.member	f_driver_load,648,129,8,32
   636                        	.member	f_driver_read,680,129,8,32
   637                        	.member	f_driver_write,712,129,8,32
   638                        	.member	f_driver_unload,744,129,8,32
   639                        	.member	f_driver_command,776,129,8,32
   640                        	.eos
   641                        	.stag	_k_irq_chain,128,61
   642                        	.member	handlers,0,5217,8,32,4
   643                        	.eos
  Mon Sep 27 2021  9:39                                                Page 13


   644                        	.line	475
   645                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",22
   646                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.h",0
   647                        	.line	208
   648                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",23
   649                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxstring.h",0
   650                        	.line	141
   651                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",24
   652                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxnode.h",0
   653                        	.line	118
   654                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",25
   655                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\ff/ff.h",0
   656                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\ff/ffconf.h",0
   657                        	.line	298
   658                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\ff/ff.h",29
   659                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   660                        	.line	1064
   661                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\ff/ff.h",30
   662                        	.stag	fake62_,4504,62
   663                        	.member	fs_type,0,14,8,8
   664                        	.member	pdrv,8,14,8,8
   665                        	.member	n_fats,16,14,8,8
   666                        	.member	wflag,24,14,8,8
   667                        	.member	fsi_flag,32,14,8,8
   668                        	.member	id,40,5,8,16
   669                        	.member	n_rootdir,56,5,8,16
   670                        	.member	csize,72,5,8,16
   671                        	.member	lfnbuf,88,144,8,32
   672                        	.member	last_clst,120,18,8,32
   673                        	.member	free_clst,152,18,8,32
   674                        	.member	n_fatent,184,18,8,32
   675                        	.member	fsize,216,18,8,32
   676                        	.member	volbase,248,18,8,32
   677                        	.member	fatbase,280,18,8,32
   678                        	.member	dirbase,312,18,8,32
   679                        	.member	database,344,18,8,32
   680                        	.member	winsect,376,18,8,32
   681                        	.member	win,408,110,8,0,512
   682                        	.eos
   683                        	.stag	fake63_,128,63
   684                        	.member	fs,0,138,8,32,62
   685                        	.member	id,32,5,8,16
   686                        	.member	attr,48,14,8,8
   687                        	.member	stat,56,14,8,8
   688                        	.member	sclust,64,18,8,32
   689                        	.member	objsize,96,18,8,32
  Mon Sep 27 2021  9:39                                                Page 14


   690                        	.eos
   691                        	.stag	fake64_,4400,64
   692                        	.member	obj,0,10,8,128,63
   693                        	.member	flag,128,14,8,8
   694                        	.member	err,136,14,8,8
   695                        	.member	fptr,144,18,8,32
   696                        	.member	clust,176,18,8,32
   697                        	.member	sect,208,18,8,32
   698                        	.member	dir_sect,240,18,8,32
   699                        	.member	dir_ptr,272,142,8,32
   700                        	.member	buf,304,110,8,0,512
   701                        	.eos
   702                        	.stag	fake65_,416,65
   703                        	.member	obj,0,10,8,128,63
   704                        	.member	dptr,128,18,8,32
   705                        	.member	clust,160,18,8,32
   706                        	.member	sect,192,18,8,32
   707                        	.member	dir,224,142,8,32
   708                        	.member	fn,256,110,8,0,12
   709                        	.member	blk_ofs,352,18,8,32
   710                        	.member	pat,384,142,8,32
   711                        	.eos
   712                        	.stag	fake66_,2224,66
   713                        	.member	fsize,0,18,8,32
   714                        	.member	fdate,32,5,8,16
   715                        	.member	ftime,48,5,8,16
   716                        	.member	fattrib,64,14,8,8
   717                        	.member	altname,72,110,8,0,13
   718                        	.member	fname,176,110,8,0,256
   719                        	.eos
   720                        	.stag	fake67_,80,67
   721                        	.member	fmt,0,14,8,8
   722                        	.member	n_fat,8,14,8,8
   723                        	.member	align,16,16,8,16
   724                        	.member	n_root,32,16,8,16
   725                        	.member	au_size,48,18,8,32
   726                        	.eos
   727                        	.line	429
   728                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",26
   729                        	.line	30
   730                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxeventmanager.h",5
   731                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxexec.h",0
   732                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   733                        	.line	1064
   734                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxexec.h",5
   735                        	.stag	_fxos_executive_vtable,128,68
   736                        	.member	Init,0,8833,8,32
   737                        	.member	Configure,32,656,8,32
   738                        	.member	Query,64,656,8,32
   739                        	.member	Uninit,96,641,8,32
   740                        	.eos
   741                        	.line	86
   742                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
  Mon Sep 27 2021  9:39                                                Page 15


                    space\FXOS-Beta\src\fxeventmanager.h",6
   743                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxnode.h",0
   744                        	.line	118
   745                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxeventmanager.h",7
   746                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.h",0
   747                        	.line	208
   748                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxeventmanager.h",8
   749                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxwindowmanager.h",0
   750                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",0
   751                        	.line	30
   752                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxwindowmanager.h",5
   753                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxmemorymanager.h",0
   754                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos.h",0
   755                        	.line	30
   756                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxmemorymanager.h",5
   757                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\umm_malloc_cfg.h",0
   758                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxos_build_parameters.h",0
   759                        	.line	35
   760                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\umm_malloc_cfg.h",8
   761                        	.stag	UMM_HEAP_INFO_t,256,69
   762                        	.member	totalEntries,0,18,8,32
   763                        	.member	usedEntries,32,18,8,32
   764                        	.member	freeEntries,64,18,8,32
   765                        	.member	totalBlocks,96,18,8,32
   766                        	.member	usedBlocks,128,18,8,32
   767                        	.member	freeBlocks,160,18,8,32
   768                        	.member	maxFreeContiguousBlocks,192,18,8,32
   769                        	.member	blockSize,224,18,8,32
   770                        	.eos
   771                        	.line	199
   772                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxmemorymanager.h",6
   773                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\umm_malloc.h",0
   774                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   775                        	.line	1064
   776                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\umm_malloc.h",11
   777                        	.line	24
   778                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxmemorymanager.h",7
   779                        	.stag	_fx_memory_map,2072,70
   780                        	.member	availableMemory,0,18,8,32
   781                        	.member	valid_segments,32,110,8,0,255
  Mon Sep 27 2021  9:39                                                Page 16


   782                        	.eos
   783                        	.stag	_fx_ipc_port,144,71
   784                        	.member	id,0,18,8,32
   785                        	.member	type,32,14,8,8
   786                        	.member	name,40,138,8,32,52
   787                        	.member	time,72,18,8,32
   788                        	.member	queue,104,138,8,32,7
   789                        	.member	reserved_1,136,14,8,8
   790                        	.eos
   791                        	.stag	_k_mem_alloc_header,80,72
   792                        	.member	user,0,14,8,8
   793                        	.member	attr,8,14,8,8
   794                        	.member	size,16,18,8,32
   795                        	.member	virtual,48,129,8,32
   796                        	.eos
   797                        	.line	129
   798                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxwindowmanager.h",6
   799                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxeventmanager.h",0
   800                        	.line	572
   801                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxwindowmanager.h",7
   802                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxgfx.h",0
   803                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxfont.h",0
   804                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   805                        	.line	1064
   806                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxfont.h",6
   807                        	.line	74
   808                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxgfx.h",5
   809                        	.stag	_click_detected,64,73
   810                        	.member	window,0,138,8,32,33
   811                        	.member	handler,32,641,8,32
   812                        	.eos
   813                        	.stag	_current_palette_map,400,74
   814                        	.member	CUR_DESKTOP,0,5,8,16
   815                        	.member	CUR_BACKGROUND,16,5,8,16
   816                        	.member	CUR_FONT,32,5,8,16
   817                        	.member	CUR_SELECTED_FONT,48,5,8,16
   818                        	.member	CUR_HIGHLIGHT_COLOR,64,5,8,16
   819                        	.member	CUR_WINDOWFRAME,80,5,8,16
   820                        	.member	CUR_WINDOWBORDER,96,5,8,16
   821                        	.member	CUR_WINDOWSHADOW,112,5,8,16
   822                        	.member	CUR_MENU,128,5,8,16
   823                        	.member	CUR_GADGET,144,5,8,16
   824                        	.member	CUR_COLOR,160,101,8,0,15
   825                        	.eos
   826                        	.line	370
   827                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxwindowmanager.h",8
   828                        	.stag	_fxos_winman_vtable,160,75
   829                        	.member	Events,0,641,8,32
   830                        	.member	ConfigureWindowManager,32,656,8,32
  Mon Sep 27 2021  9:39                                                Page 17


   831                        	.member	ProcessWindowEvent,64,8833,8,32
   832                        	.member	QueryWindowManager,96,656,8,32
   833                        	.member	DoWndProcs,128,641,8,32
   834                        	.eos
   835                        	.stag	fake76_,64,76
   836                        	.member	type,0,16,8,16
   837                        	.member	size,16,16,8,16
   838                        	.member	desktopAction,32,129,8,32
   839                        	.eos
   840                        	.stag	fake77_,96,77
   841                        	.member	type,0,16,8,16
   842                        	.member	caption,16,138,8,32,52
   843                        	.member	buttonType,48,16,8,16
   844                        	.member	x,64,5,8,16
   845                        	.member	y,80,5,8,16
   846                        	.eos
   847                        	.stag	_childMessage_t,64,78
   848                        	.member	msgType,0,16,8,16
   849                        	.member	msgData,16,129,8,32
   850                        	.member	dataSize,48,16,8,16
   851                        	.eos
   852                        	.line	594
   853                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxeventmanager.h",9
   854                        	.stag	_fx_main_loopvars,16,79
   855                        	.member	dummy,0,5,8,16
   856                        	.eos
   857                        	.stag	_fxMouseMessageData,64,80
   858                        	.member	button1,0,14,8,8
   859                        	.member	button2,8,14,8,8
   860                        	.member	button3,16,14,8,8
   861                        	.member	button4,24,14,8,8
   862                        	.member	x,32,16,8,16
   863                        	.member	y,48,16,8,16
   864                        	.eos
   865                        	.utag	marshalled_data,32,81
   866                        	.member	byteValue,0,14,11,8
   867                        	.member	verbValue,0,110,11,0,2
   868                        	.member	intValue,0,16,11,16
   869                        	.member	longValue,0,18,11,32
   870                        	.member	pointerValue,0,129,11,32
   871                        	.eos
   872                        	.stag	_fx_eventProcess,64,82
   873                        	.member	process,0,138,8,32,20
   874                        	.member	eventProc,32,641,8,32
   875                        	.eos
   876                        	.stag	_mouse_msg_state,184,83
   877                        	.member	lastEvent,0,18,8,32
   878                        	.member	buttonLeftDown,32,14,8,8
   879                        	.member	lastLeftDown,40,18,8,32
   880                        	.member	buttonRightDown,72,14,8,8
   881                        	.member	lastRightDown,80,18,8,32
   882                        	.member	buttonMiddleDown,112,14,8,8
   883                        	.member	lastMiddleDown,120,18,8,32
   884                        	.member	lastX,152,16,8,16
   885                        	.member	lastY,168,16,8,16
   886                        	.eos
   887                        	.stag	_fxos_eventmanager_vtable,192,84
  Mon Sep 27 2021  9:39                                                Page 18


   888                        	.member	EventQueue,0,138,8,32,7
   889                        	.member	Init,32,8833,8,32
   890                        	.member	Run,64,656,8,32
   891                        	.member	Configure,96,656,8,32
   892                        	.member	Query,128,656,8,32
   893                        	.member	Uninit,160,641,8,32
   894                        	.eos
   895                        	.stag	_k_clipboard_data,168,85
   896                        	.member	type,0,14,8,8
   897                        	.member	readable,8,110,8,0,16
   898                        	.member	data,136,129,8,32
   899                        	.eos
   900                        	.line	572
   901                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.h",18
   902                        	.stag	_fx_spinner_ctx,48,86
   903                        	.member	index,0,5,8,16
   904                        	.member	spinner,16,142,8,32
   905                        	.eos
   906                        	.stag	_fx_console_ctx,1144,87
   907                        	.member	lineBufferIndex,0,5,8,16
   908                        	.member	lineBuffer,16,110,8,0,128
   909                        	.member	isShifted,1040,14,8,8
   910                        	.member	userData,1048,129,8,32
   911                        	.member	screenBuffer,1080,129,8,32
   912                        	.member	Reserved1,1112,129,8,32
   913                        	.eos
   914                        	.stag	_token,64,88
   915                        	.member	type,0,5,8,16
   916                        	.member	depth,16,16,8,16
   917                        	.member	text,32,142,8,32
   918                        	.eos
   919                        	.stag	_command_args,64,89
   920                        	.member	proc,0,656,8,32
   921                        	.member	tokens,32,138,8,32,5
   922                        	.eos
   923                        	.line	208
   924                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.c",2
   925                        ;#include "fxdos.h"
   926                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxdos.h",0
   927                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxtypes.h",0
   928                        	.line	1064
   929                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxdos.h",5
   930                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\ff/ff.h",0
   931                        	.line	429
   932                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxdos.h",6
   933                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\diskio.h",0
   934                        	.line	85
   935                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxdos.h",7
   936                        	.stag	_fx_sd_direntry,256,90
  Mon Sep 27 2021  9:39                                                Page 19


   937                        	.member	filename,0,110,8,0,11
   938                        	.member	type,88,14,8,8
   939                        	.member	attrs,96,110,8,0,20
   940                        	.eos
   941                        	.stag	_fx_info,416,91
   942                        	.member	stgName,0,110,8,0,32
   943                        	.member	Reserved1,256,14,8,8
   944                        	.member	stgType,264,16,8,16
   945                        	.member	Reserved2,280,14,8,8
   946                        	.member	stgReserved,288,110,8,0,16
   947                        	.eos
   948                        	.stag	_fx_fileinfo,136,92
   949                        	.member	type,0,14,8,8
   950                        	.member	pFilename,8,142,8,32
   951                        	.member	lSize,40,18,8,32
   952                        	.member	lcreateDate,72,18,8,32
   953                        	.member	lchangeDate,104,18,8,32
   954                        	.eos
   955                        	.stag	_FX_FAT_DIR_INFO,256,93
   956                        	.member	DIR_Name,0,110,8,0,11
   957                        	.member	DIR_Attr,88,14,8,8
   958                        	.member	DIR_NTRes,96,14,8,8
   959                        	.member	DIR_CrtTimeTenth,104,14,8,8
   960                        	.member	DIR_CrtTime,112,16,8,16
   961                        	.member	DIR_CrtDate,128,16,8,16
   962                        	.member	DIR_LstAccDate,144,16,8,16
   963                        	.member	DIR_FstClusHI,160,16,8,16
   964                        	.member	DIR_WrtTime,176,16,8,16
   965                        	.member	DIR_WrtDate,192,16,8,16
   966                        	.member	DIR_FstClusLO,208,16,8,16
   967                        	.member	DIR_FileSize,224,18,8,32
   968                        	.eos
   969                        	.stag	fat_extBS_32,416,94
   970                        	.member	table_size_32,0,18,8,32
   971                        	.member	extended_flags,32,16,8,16
   972                        	.member	fat_version,48,16,8,16
   973                        	.member	root_cluster,64,18,8,32
   974                        	.member	fat_info,96,16,8,16
   975                        	.member	backup_BS_sector,112,16,8,16
   976                        	.member	reserved_0,128,110,8,0,12
   977                        	.member	drive_number,224,14,8,8
   978                        	.member	reserved_1,232,14,8,8
   979                        	.member	boot_signature,240,14,8,8
   980                        	.member	volume_id,248,16,8,16
   981                        	.member	volume_label,264,110,8,0,11
   982                        	.member	fat_type_label,352,110,8,0,8
   983                        	.eos
   984                        	.stag	fat_extBS_16,192,95
   985                        	.member	bios_drive_num,0,14,8,8
   986                        	.member	reserved1,8,14,8,8
   987                        	.member	boot_signature,16,14,8,8
   988                        	.member	volume_id,24,16,8,16
   989                        	.member	volume_label,40,110,8,0,11
   990                        	.member	fat_type_label,128,110,8,0,8
   991                        	.eos
   992                        	.stag	fat_BS,688,96
   993                        	.member	bootjmp,0,110,8,0,3
   994                        	.member	oem_name,24,110,8,0,8
  Mon Sep 27 2021  9:39                                                Page 20


   995                        	.member	bytes_per_sector,88,16,8,16
   996                        	.member	sectors_per_cluster,104,14,8,8
   997                        	.member	reserved_sector_count,112,16,8,16
   998                        	.member	table_count,128,14,8,8
   999                        	.member	root_entry_count,136,16,8,16
  1000                        	.member	total_sectors_16,152,16,8,16
  1001                        	.member	media_type,168,14,8,8
  1002                        	.member	table_size_16,176,16,8,16
  1003                        	.member	sectors_per_track,192,16,8,16
  1004                        	.member	head_side_count,208,16,8,16
  1005                        	.member	hidden_sector_count,224,16,8,16
  1006                        	.member	total_sectors_32,240,16,8,16
  1007                        	.member	extended_section,256,110,8,0,54
  1008                        	.eos
  1009                        	.stag	__FATBootSector,928,97
  1010                        	.member	bootjmp,0,110,8,0,3
  1011                        	.member	oem_name,24,110,8,0,8
  1012                        	.member	bytes_per_sector,88,16,8,16
  1013                        	.member	sectors_per_cluster,104,14,8,8
  1014                        	.member	reserved_sector_count,112,16,8,16
  1015                        	.member	fat_table_count,128,14,8,8
  1016                        	.member	root_entry_count,136,16,8,16
  1017                        	.member	total_sectors_16,152,16,8,16
  1018                        	.member	media_type,168,14,8,8
  1019                        	.member	sectors_per_fat,176,16,8,16
  1020                        	.member	sectors_per_track,192,16,8,16
  1021                        	.member	head_side_count,208,16,8,16
  1022                        	.member	hidden_sector_count,224,18,8,32
  1023                        	.member	total_sectors_32,256,18,8,32
  1024                        	.member	drive_number,288,14,8,8
  1025                        	.member	reserved1,296,14,8,8
  1026                        	.member	boot_sig,304,14,8,8
  1027                        	.member	vol_id,312,18,8,32
  1028                        	.member	vol_name,344,110,8,0,11
  1029                        	.member	file_system_type,432,110,8,0,8
  1030                        	.member	extended_section,496,110,8,0,54
  1031                        	.eos
  1032                        	.stag	__PARTITIONTABLE,128,98
  1033                        	.member	first_byte,0,14,8,8
  1034                        	.member	start_chs,8,110,8,0,3
  1035                        	.member	partition_type,32,14,8,8
  1036                        	.member	end_chs,40,110,8,0,3
  1037                        	.member	start_sector,64,18,8,32
  1038                        	.member	length_sectors,96,18,8,32
  1039                        	.eos
  1040                        	.stag	fake99_,4096,99
  1041                        	.member	jmp,0,110,8,0,3
  1042                        	.member	oem,24,110,8,0,8
  1043                        	.member	sector_size,88,15,8,16
  1044                        	.member	sectors_per_cluster,104,14,8,8
  1045                        	.member	reserved_sectors,112,15,8,16
  1046                        	.member	number_ok_dos_fats,128,14,8,8
  1047                        	.member	root_dir_entries,136,15,8,16
  1048                        	.member	total_sectors_short,152,15,8,16
  1049                        	.member	media_descriptor,168,14,8,8
  1050                        	.member	fat_size_sectors,176,15,8,16
  1051                        	.member	sectors_per_track,192,15,8,16
  1052                        	.member	number_ok_dos_heads,208,15,8,16
  Mon Sep 27 2021  9:39                                                Page 21


  1053                        	.member	hidden_sectors,224,18,8,32
  1054                        	.member	total_sectors_long,256,18,8,32
  1055                        	.member	drive_number,288,14,8,8
  1056                        	.member	current_head,296,14,8,8
  1057                        	.member	boot_signature,304,14,8,8
  1058                        	.member	volume_id,312,18,8,32
  1059                        	.member	volume_label,344,110,8,0,11
  1060                        	.member	fs_type,432,110,8,0,8
  1061                        	.member	boot_code,496,110,8,0,448
  1062                        	.member	boot_sector_signature,4080,15,8,16
  1063                        	.eos
  1064                        	.stag	__FAT16ENTRY,256,100
  1065                        	.member	filename,0,110,8,0,8
  1066                        	.member	ext,64,110,8,0,3
  1067                        	.member	attributes,88,14,8,8
  1068                        	.member	reserved,96,110,8,0,10
  1069                        	.member	modify_time,176,16,8,16
  1070                        	.member	modify_date,192,16,8,16
  1071                        	.member	starting_cluster,208,16,8,16
  1072                        	.member	file_size,224,18,8,32
  1073                        	.eos
  1074                        	.stag	__FAT16ENTRYLONG,288,101
  1075                        	.member	filename,0,110,8,0,8
  1076                        	.member	ext,64,110,8,0,3
  1077                        	.member	attributes,88,14,8,8
  1078                        	.member	reserved,96,110,8,0,10
  1079                        	.member	modify_time,176,16,8,16
  1080                        	.member	modify_date,192,16,8,16
  1081                        	.member	starting_cluster,208,16,8,16
  1082                        	.member	file_size,224,18,8,32
  1083                        	.member	plongfileName,256,142,8,32
  1084                        	.eos
  1085                        	.stag	_LongFileName,256,102
  1086                        	.member	sequenceNo,0,14,8,8
  1087                        	.member	fileName_Part1,8,110,8,0,10
  1088                        	.member	fileattribute,88,14,8,8
  1089                        	.member	type,96,14,8,8
  1090                        	.member	checksum,104,14,8,8
  1091                        	.member	fileName_Part2,112,110,8,0,12
  1092                        	.member	fstclusLO,208,5,8,16
  1093                        	.member	fileName_Part3,224,110,8,0,4
  1094                        	.eos
  1095                        	.stag	_IDSECTOR,2048,103
  1096                        	.member	wGenConfig,0,16,8,16
  1097                        	.member	wNumCyls,16,16,8,16
  1098                        	.member	wReserved,32,16,8,16
  1099                        	.member	wNumHeads,48,16,8,16
  1100                        	.member	wBytesPerTrack,64,16,8,16
  1101                        	.member	wBytesPerSector,80,16,8,16
  1102                        	.member	wSectorsPerTrack,96,16,8,16
  1103                        	.member	wVendorUnique,112,112,8,0,3
  1104                        	.member	sSerialNumber,160,110,8,0,20
  1105                        	.member	wBufferType,320,16,8,16
  1106                        	.member	wBufferSize,336,16,8,16
  1107                        	.member	wECCSize,352,16,8,16
  1108                        	.member	sFirmwareRev,368,110,8,0,8
  1109                        	.member	sModelNumber,432,110,8,0,40
  1110                        	.member	wMoreVendorUnique,752,16,8,16
  Mon Sep 27 2021  9:39                                                Page 22


  1111                        	.member	wDoubleWordIO,768,16,8,16
  1112                        	.member	wCapabilities,784,16,8,16
  1113                        	.member	wReserved1,800,16,8,16
  1114                        	.member	wPIOTiming,816,16,8,16
  1115                        	.member	wDMATiming,832,16,8,16
  1116                        	.member	wBS,848,16,8,16
  1117                        	.member	wNumCurrentCyls,864,16,8,16
  1118                        	.member	wNumCurrentHeads,880,16,8,16
  1119                        	.member	wNumCurrentSectorsPerTrack,896,16,8,16
  1120                        	.member	ulCurrentSectorCapacity,912,18,8,32
  1121                        	.member	wMultSectorStuff,944,16,8,16
  1122                        	.member	ulTotalAddressableSectors,960,18,8,32
  1123                        	.member	wSingleWordDMA,992,16,8,16
  1124                        	.member	wMultiWordDMA,1008,16,8,16
  1125                        	.member	bReserved,1024,110,8,0,128
  1126                        	.eos
  1127                        	.stag	fake104_,16,104
  1128                        	.member	Reserved1,0,16,17,1
  1129                        	.member	Retired3,1,16,17,1
  1130                        	.member	ResponseIncomplete,2,16,17,1
  1131                        	.member	Retired2,3,16,17,3
  1132                        	.member	FixedDevice,6,16,17,1
  1133                        	.member	RemovableMedia,7,16,17,1
  1134                        	.member	Retired1,8,16,17,7
  1135                        	.member	DeviceType,15,16,17,1
  1136                        	.eos
  1137                        	.stag	fake105_,16,105
  1138                        	.member	FeatureSupported,0,16,17,1
  1139                        	.member	Reserved,1,16,17,15
  1140                        	.eos
  1141                        	.stag	fake106_,32,106
  1142                        	.member	CurrentLongPhysicalSectorAlignment,0,14,
                    17,2
  1143                        	.member	ReservedByte49,2,14,17,6
  1144                        	.member	DmaSupported,8,14,17,1
  1145                        	.member	LbaSupported,9,14,17,1
  1146                        	.member	IordyDisable,10,14,17,1
  1147                        	.member	IordySupported,11,14,17,1
  1148                        	.member	Reserved1,12,14,17,1
  1149                        	.member	StandybyTimerSupport,13,14,17,1
  1150                        	.member	Reserved2,14,14,17,2
  1151                        	.member	ReservedWord50,16,16,8,16
  1152                        	.eos
  1153                        	.stag	fake107_,16,107
  1154                        	.member	ZonedCapabilities,0,16,17,2
  1155                        	.member	NonVolatileWriteCache,2,16,17,1
  1156                        	.member	ExtendedUserAddressableSectorsSupported,
                    3,16,17,1
  1157                        	.member	DeviceEncryptsAllUserData,4,16,17,1
  1158                        	.member	ReadZeroAfterTrimSupported,5,16,17,1
  1159                        	.member	Optional28BitCommandsSupported,6,16,17,1
  1160                        	.member	IEEE1667,7,16,17,1
  1161                        	.member	DownloadMicrocodeDmaSupported,8,16,17,1
  1162                        	.member	SetMaxSetPasswordUnlockDmaSupported,9,16
                    ,17,1
  1163                        	.member	WriteBufferDmaSupported,10,16,17,1
  1164                        	.member	ReadBufferDmaSupported,11,16,17,1
  1165                        	.member	DeviceConfigIdentifySetDmaSupported,12,1
  Mon Sep 27 2021  9:39                                                Page 23


                    6,17,1
  1166                        	.member	LPSAERCSupported,13,16,17,1
  1167                        	.member	DeterministicReadAfterTrimSupported,14,1
                    6,17,1
  1168                        	.member	CFastSpecSupported,15,16,17,1
  1169                        	.eos
  1170                        	.stag	fake108_,32,108
  1171                        	.member	Reserved0,0,16,17,1
  1172                        	.member	SataGen1,1,16,17,1
  1173                        	.member	SataGen2,2,16,17,1
  1174                        	.member	SataGen3,3,16,17,1
  1175                        	.member	Reserved1,4,16,17,4
  1176                        	.member	NCQ,8,16,17,1
  1177                        	.member	HIPM,9,16,17,1
  1178                        	.member	PhyEvents,10,16,17,1
  1179                        	.member	NcqUnload,11,16,17,1
  1180                        	.member	NcqPriority,12,16,17,1
  1181                        	.member	HostAutoPS,13,16,17,1
  1182                        	.member	DeviceAutoPS,14,16,17,1
  1183                        	.member	ReadLogDMA,15,16,17,1
  1184                        	.member	Reserved2,16,16,17,1
  1185                        	.member	CurrentSpeed,17,16,17,3
  1186                        	.member	NcqStreaming,20,16,17,1
  1187                        	.member	NcqQueueMgmt,21,16,17,1
  1188                        	.member	NcqReceiveSend,22,16,17,1
  1189                        	.member	DEVSLPtoReducedPwrState,23,16,17,1
  1190                        	.member	Reserved3,24,16,17,8
  1191                        	.eos
  1192                        	.stag	fake109_,16,109
  1193                        	.member	Reserved0,0,16,17,1
  1194                        	.member	NonZeroOffsets,1,16,17,1
  1195                        	.member	DmaSetupAutoActivate,2,16,17,1
  1196                        	.member	DIPM,3,16,17,1
  1197                        	.member	InOrderData,4,16,17,1
  1198                        	.member	HardwareFeatureControl,5,16,17,1
  1199                        	.member	SoftwareSettingsPreservation,6,16,17,1
  1200                        	.member	NCQAutosense,7,16,17,1
  1201                        	.member	DEVSLP,8,16,17,1
  1202                        	.member	HybridInformation,9,16,17,1
  1203                        	.member	Reserved1,10,16,17,6
  1204                        	.eos
  1205                        	.stag	fake110_,16,110
  1206                        	.member	Reserved0,0,16,17,1
  1207                        	.member	NonZeroOffsets,1,16,17,1
  1208                        	.member	DmaSetupAutoActivate,2,16,17,1
  1209                        	.member	DIPM,3,16,17,1
  1210                        	.member	InOrderData,4,16,17,1
  1211                        	.member	HardwareFeatureControl,5,16,17,1
  1212                        	.member	SoftwareSettingsPreservation,6,16,17,1
  1213                        	.member	DeviceAutoPS,7,16,17,1
  1214                        	.member	DEVSLP,8,16,17,1
  1215                        	.member	HybridInformation,9,16,17,1
  1216                        	.member	Reserved1,10,16,17,6
  1217                        	.eos
  1218                        	.stag	fake111_,48,111
  1219                        	.member	SmartCommands,0,16,17,1
  1220                        	.member	SecurityMode,1,16,17,1
  1221                        	.member	RemovableMediaFeature,2,16,17,1
  Mon Sep 27 2021  9:39                                                Page 24


  1222                        	.member	PowerManagement,3,16,17,1
  1223                        	.member	Reserved1,4,16,17,1
  1224                        	.member	WriteCache,5,16,17,1
  1225                        	.member	LookAhead,6,16,17,1
  1226                        	.member	ReleaseInterrupt,7,16,17,1
  1227                        	.member	ServiceInterrupt,8,16,17,1
  1228                        	.member	DeviceReset,9,16,17,1
  1229                        	.member	HostProtectedArea,10,16,17,1
  1230                        	.member	Obsolete1,11,16,17,1
  1231                        	.member	WriteBuffer,12,16,17,1
  1232                        	.member	ReadBuffer,13,16,17,1
  1233                        	.member	Nop,14,16,17,1
  1234                        	.member	Obsolete2,15,16,17,1
  1235                        	.member	DownloadMicrocode,16,16,17,1
  1236                        	.member	DmaQueued,17,16,17,1
  1237                        	.member	Cfa,18,16,17,1
  1238                        	.member	AdvancedPm,19,16,17,1
  1239                        	.member	Msn,20,16,17,1
  1240                        	.member	PowerUpInStandby,21,16,17,1
  1241                        	.member	ManualPowerUp,22,16,17,1
  1242                        	.member	Reserved2,23,16,17,1
  1243                        	.member	SetMax,24,16,17,1
  1244                        	.member	Acoustics,25,16,17,1
  1245                        	.member	BigLba,26,16,17,1
  1246                        	.member	DeviceConfigOverlay,27,16,17,1
  1247                        	.member	FlushCache,28,16,17,1
  1248                        	.member	FlushCacheExt,29,16,17,1
  1249                        	.member	WordValid83,30,16,17,2
  1250                        	.member	SmartErrorLog,32,16,17,1
  1251                        	.member	SmartSelfTest,33,16,17,1
  1252                        	.member	MediaSerialNumber,34,16,17,1
  1253                        	.member	MediaCardPassThrough,35,16,17,1
  1254                        	.member	StreamingFeature,36,16,17,1
  1255                        	.member	GpLogging,37,16,17,1
  1256                        	.member	WriteFua,38,16,17,1
  1257                        	.member	WriteQueuedFua,39,16,17,1
  1258                        	.member	WWN64Bit,40,16,17,1
  1259                        	.member	URGReadStream,41,16,17,1
  1260                        	.member	URGWriteStream,42,16,17,1
  1261                        	.member	ReservedForTechReport,43,16,17,2
  1262                        	.member	IdleWithUnloadFeature,45,16,17,1
  1263                        	.member	WordValid,46,16,17,2
  1264                        	.eos
  1265                        	.stag	fake112_,48,112
  1266                        	.member	SmartCommands,0,16,17,1
  1267                        	.member	SecurityMode,1,16,17,1
  1268                        	.member	RemovableMediaFeature,2,16,17,1
  1269                        	.member	PowerManagement,3,16,17,1
  1270                        	.member	Reserved1,4,16,17,1
  1271                        	.member	WriteCache,5,16,17,1
  1272                        	.member	LookAhead,6,16,17,1
  1273                        	.member	ReleaseInterrupt,7,16,17,1
  1274                        	.member	ServiceInterrupt,8,16,17,1
  1275                        	.member	DeviceReset,9,16,17,1
  1276                        	.member	HostProtectedArea,10,16,17,1
  1277                        	.member	Obsolete1,11,16,17,1
  1278                        	.member	WriteBuffer,12,16,17,1
  1279                        	.member	ReadBuffer,13,16,17,1
  Mon Sep 27 2021  9:39                                                Page 25


  1280                        	.member	Nop,14,16,17,1
  1281                        	.member	Obsolete2,15,16,17,1
  1282                        	.member	DownloadMicrocode,16,16,17,1
  1283                        	.member	DmaQueued,17,16,17,1
  1284                        	.member	Cfa,18,16,17,1
  1285                        	.member	AdvancedPm,19,16,17,1
  1286                        	.member	Msn,20,16,17,1
  1287                        	.member	PowerUpInStandby,21,16,17,1
  1288                        	.member	ManualPowerUp,22,16,17,1
  1289                        	.member	Reserved2,23,16,17,1
  1290                        	.member	SetMax,24,16,17,1
  1291                        	.member	Acoustics,25,16,17,1
  1292                        	.member	BigLba,26,16,17,1
  1293                        	.member	DeviceConfigOverlay,27,16,17,1
  1294                        	.member	FlushCache,28,16,17,1
  1295                        	.member	FlushCacheExt,29,16,17,1
  1296                        	.member	Resrved3,30,16,17,1
  1297                        	.member	Words119_120Valid,31,16,17,1
  1298                        	.member	SmartErrorLog,32,16,17,1
  1299                        	.member	SmartSelfTest,33,16,17,1
  1300                        	.member	MediaSerialNumber,34,16,17,1
  1301                        	.member	MediaCardPassThrough,35,16,17,1
  1302                        	.member	StreamingFeature,36,16,17,1
  1303                        	.member	GpLogging,37,16,17,1
  1304                        	.member	WriteFua,38,16,17,1
  1305                        	.member	WriteQueuedFua,39,16,17,1
  1306                        	.member	WWN64Bit,40,16,17,1
  1307                        	.member	URGReadStream,41,16,17,1
  1308                        	.member	URGWriteStream,42,16,17,1
  1309                        	.member	ReservedForTechReport,43,16,17,2
  1310                        	.member	IdleWithUnloadFeature,45,16,17,1
  1311                        	.member	Reserved4,46,16,17,2
  1312                        	.eos
  1313                        	.stag	fake113_,16,113
  1314                        	.member	TimeRequired,0,16,17,15
  1315                        	.member	ExtendedTimeReported,15,16,17,1
  1316                        	.eos
  1317                        	.stag	fake114_,16,114
  1318                        	.member	TimeRequired,0,16,17,15
  1319                        	.member	ExtendedTimeReported,15,16,17,1
  1320                        	.eos
  1321                        	.stag	fake115_,16,115
  1322                        	.member	LogicalSectorsPerPhysicalSector,0,16,17,
                    4
  1323                        	.member	Reserved0,4,16,17,8
  1324                        	.member	LogicalSectorLongerThan256Words,12,16,17
                    ,1
  1325                        	.member	MultipleLogicalSectorsPerPhysicalSector,
                    13,16,17,1
  1326                        	.member	Reserved1,14,16,17,2
  1327                        	.eos
  1328                        	.stag	fake116_,16,116
  1329                        	.member	ReservedForDrqTechnicalReport,0,16,17,1
  1330                        	.member	WriteReadVerify,1,16,17,1
  1331                        	.member	WriteUncorrectableExt,2,16,17,1
  1332                        	.member	ReadWriteLogDmaExt,3,16,17,1
  1333                        	.member	DownloadMicrocodeMode3,4,16,17,1
  1334                        	.member	FreefallControl,5,16,17,1
  Mon Sep 27 2021  9:39                                                Page 26


  1335                        	.member	SenseDataReporting,6,16,17,1
  1336                        	.member	ExtendedPowerConditions,7,16,17,1
  1337                        	.member	Reserved0,8,16,17,6
  1338                        	.member	WordValid,14,16,17,2
  1339                        	.eos
  1340                        	.stag	fake117_,16,117
  1341                        	.member	ReservedForDrqTechnicalReport,0,16,17,1
  1342                        	.member	WriteReadVerify,1,16,17,1
  1343                        	.member	WriteUncorrectableExt,2,16,17,1
  1344                        	.member	ReadWriteLogDmaExt,3,16,17,1
  1345                        	.member	DownloadMicrocodeMode3,4,16,17,1
  1346                        	.member	FreefallControl,5,16,17,1
  1347                        	.member	SenseDataReporting,6,16,17,1
  1348                        	.member	ExtendedPowerConditions,7,16,17,1
  1349                        	.member	Reserved0,8,16,17,6
  1350                        	.member	Reserved1,14,16,17,2
  1351                        	.eos
  1352                        	.stag	fake118_,16,118
  1353                        	.member	SecuritySupported,0,16,17,1
  1354                        	.member	SecurityEnabled,1,16,17,1
  1355                        	.member	SecurityLocked,2,16,17,1
  1356                        	.member	SecurityFrozen,3,16,17,1
  1357                        	.member	SecurityCountExpired,4,16,17,1
  1358                        	.member	EnhancedSecurityEraseSupported,5,16,17,1
  1359                        	.member	Reserved0,6,16,17,2
  1360                        	.member	SecurityLevel,8,16,17,1
  1361                        	.member	Reserved1,9,16,17,7
  1362                        	.eos
  1363                        	.stag	fake119_,16,119
  1364                        	.member	MaximumCurrentInMA,0,16,17,12
  1365                        	.member	CfaPowerMode1Disabled,12,16,17,1
  1366                        	.member	CfaPowerMode1Required,13,16,17,1
  1367                        	.member	Reserved0,14,16,17,1
  1368                        	.member	Word160Supported,15,16,17,1
  1369                        	.eos
  1370                        	.stag	fake120_,16,120
  1371                        	.member	SupportsTrim,0,16,17,1
  1372                        	.member	Reserved0,1,16,17,15
  1373                        	.eos
  1374                        	.stag	fake121_,16,121
  1375                        	.member	Supported,0,16,17,1
  1376                        	.member	Reserved0,1,16,17,1
  1377                        	.member	WriteSameSuported,2,16,17,1
  1378                        	.member	ErrorRecoveryControlSupported,3,16,17,1
  1379                        	.member	FeatureControlSuported,4,16,17,1
  1380                        	.member	DataTablesSuported,5,16,17,1
  1381                        	.member	Reserved1,6,16,17,6
  1382                        	.member	VendorSpecific,12,16,17,4
  1383                        	.eos
  1384                        	.stag	fake122_,16,122
  1385                        	.member	AlignmentOfLogicalWithinPhysical,0,16,17
                    ,14
  1386                        	.member	Word209Supported,14,16,17,1
  1387                        	.member	Reserved0,15,16,17,1
  1388                        	.eos
  1389                        	.stag	fake123_,16,123
  1390                        	.member	NVCachePowerModeEnabled,0,16,17,1
  1391                        	.member	Reserved0,1,16,17,3
  Mon Sep 27 2021  9:39                                                Page 27


  1392                        	.member	NVCacheFeatureSetEnabled,4,16,17,1
  1393                        	.member	Reserved1,5,16,17,3
  1394                        	.member	NVCachePowerModeVersion,8,16,17,4
  1395                        	.member	NVCacheFeatureSetVersion,12,16,17,4
  1396                        	.eos
  1397                        	.stag	fake124_,16,124
  1398                        	.member	NVCacheEstimatedTimeToSpinUpInSeconds,0,
                    14,8,8
  1399                        	.member	Reserved,8,14,8,8
  1400                        	.eos
  1401                        	.stag	fake125_,16,125
  1402                        	.member	MajorVersion,0,16,17,12
  1403                        	.member	TransportType,12,16,17,4
  1404                        	.eos
  1405                        	.stag	_IDENTIFY_DEVICE_DATA,4096,126
  1406                        	.member	GeneralConfiguration,0,10,8,16,104
  1407                        	.member	NumCylinders,16,16,8,16
  1408                        	.member	SpecificConfiguration,32,16,8,16
  1409                        	.member	NumHeads,48,16,8,16
  1410                        	.member	Retired1Bytes,64,110,8,0,4
  1411                        	.member	NumSectorsPerTrack,96,16,8,16
  1412                        	.member	VendorUnique1Bytes,112,110,8,0,6
  1413                        	.member	SerialNumber,160,110,8,0,20
  1414                        	.member	Retired2,320,112,8,0,2
  1415                        	.member	Obsolete1,352,16,8,16
  1416                        	.member	FirmwareRevision,368,110,8,0,8
  1417                        	.member	ModelNumber,432,110,8,0,40
  1418                        	.member	MaximumBlockTransfer,752,14,8,8
  1419                        	.member	VendorUnique2,760,14,8,8
  1420                        	.member	TrustedComputing,768,10,8,16,105
  1421                        	.member	Capabilities,784,10,8,32,106
  1422                        	.member	ObsoleteWords51,816,112,8,0,2
  1423                        	.member	TranslationFieldsValid,848,16,17,3
  1424                        	.member	Reserved3,851,16,17,5
  1425                        	.member	FreeFallControlSensitivity,856,16,17,8
  1426                        	.member	NumberOfCurrentCylinders,864,16,8,16
  1427                        	.member	NumberOfCurrentHeads,880,16,8,16
  1428                        	.member	CurrentSectorsPerTrack,896,16,8,16
  1429                        	.member	CurrentSectorCapacity,912,18,8,32
  1430                        	.member	CurrentMultiSectorSetting,944,14,8,8
  1431                        	.member	MultiSectorSettingValid,952,14,17,1
  1432                        	.member	ReservedByte59,953,14,17,3
  1433                        	.member	SanitizeFeatureSupported,956,14,17,1
  1434                        	.member	CryptoScrambleExtCommandSupported,957,14
                    ,17,1
  1435                        	.member	OverwriteExtCommandSupported,958,14,17,1
  1436                        	.member	BlockEraseExtCommandSupported,959,14,17,
                    1
  1437                        	.member	UserAddressableSectors,960,18,8,32
  1438                        	.member	ObsoleteWord62,992,16,8,16
  1439                        	.member	MultiWordDMASupport,1008,16,17,8
  1440                        	.member	MultiWordDMAActive,1016,16,17,8
  1441                        	.member	AdvancedPIOModes,1024,16,17,8
  1442                        	.member	ReservedByte64,1032,16,17,8
  1443                        	.member	MinimumMWXferCycleTime,1040,16,8,16
  1444                        	.member	RecommendedMWXferCycleTime,1056,16,8,16
  1445                        	.member	MinimumPIOCycleTime,1072,16,8,16
  1446                        	.member	MinimumPIOCycleTimeIORDY,1088,16,8,16
  Mon Sep 27 2021  9:39                                                Page 28


  1447                        	.member	AdditionalSupported,1104,10,8,16,107
  1448                        	.member	ReservedWords70,1120,112,8,0,5
  1449                        	.member	QueueDepth,1200,16,17,5
  1450                        	.member	ReservedWord75,1205,16,17,11
  1451                        	.member	SerialAtaCapabilities,1216,10,8,32,108
  1452                        	.member	SerialAtaFeaturesSupported,1248,10,8,16,
                    109
  1453                        	.member	SerialAtaFeaturesEnabled,1264,10,8,16,11
                    0
  1454                        	.member	MajorRevision,1280,16,8,16
  1455                        	.member	MinorRevision,1296,16,8,16
  1456                        	.member	CommandSetSupport,1312,10,8,48,111
  1457                        	.member	CommandSetActive,1360,10,8,48,112
  1458                        	.member	UltraDMASupport,1408,16,17,8
  1459                        	.member	UltraDMAActive,1416,16,17,8
  1460                        	.member	NormalSecurityEraseUnit,1424,10,8,16,113
  1461                        	.member	EnhancedSecurityEraseUnit,1440,10,8,16,1
                    14
  1462                        	.member	CurrentAPMLevel,1456,16,17,8
  1463                        	.member	ReservedWord91,1464,16,17,8
  1464                        	.member	MasterPasswordID,1472,16,8,16
  1465                        	.member	HardwareResetResult,1488,16,8,16
  1466                        	.member	CurrentAcousticValue,1504,16,17,8
  1467                        	.member	RecommendedAcousticValue,1512,16,17,8
  1468                        	.member	StreamMinRequestSize,1520,16,8,16
  1469                        	.member	StreamingTransferTimeDMA,1536,16,8,16
  1470                        	.member	StreamingAccessLatencyDMAPIO,1552,16,8,1
                    6
  1471                        	.member	StreamingPerfGranularity,1568,18,8,32
  1472                        	.member	Max48BitLBA,1600,114,8,0,2
  1473                        	.member	StreamingTransferTime,1664,16,8,16
  1474                        	.member	DsmCap,1680,16,8,16
  1475                        	.member	PhysicalLogicalSectorSize,1696,10,8,16,1
                    15
  1476                        	.member	InterSeekDelay,1712,16,8,16
  1477                        	.member	WorldWideName,1728,112,8,0,4
  1478                        	.member	ReservedForWorldWideName128,1792,112,8,0
                    ,4
  1479                        	.member	ReservedForTlcTechnicalReport,1856,16,8,
                    16
  1480                        	.member	WordsPerLogicalSector,1872,112,8,0,2
  1481                        	.member	CommandSetSupportExt,1904,10,8,16,116
  1482                        	.member	CommandSetActiveExt,1920,10,8,16,117
  1483                        	.member	ReservedForExpandedSupportandActive,1936
                    ,112,8,0,6
  1484                        	.member	MsnSupport,2032,16,17,2
  1485                        	.member	ReservedWord127,2034,16,17,14
  1486                        	.member	SecurityStatus,2048,10,8,16,118
  1487                        	.member	ReservedWord129,2064,112,8,0,31
  1488                        	.member	CfaPowerMode1,2560,10,8,16,119
  1489                        	.member	ReservedForCfaWord161,2576,112,8,0,7
  1490                        	.member	NominalFormFactor,2688,16,17,4
  1491                        	.member	ReservedWord168,2692,16,17,12
  1492                        	.member	DataSetManagementFeature,2704,10,8,16,12
                    0
  1493                        	.member	AdditionalProductID,2720,112,8,0,4
  1494                        	.member	ReservedForCfaWord174,2784,112,8,0,2
  1495                        	.member	CurrentMediaSerialNumber,2816,112,8,0,30
  Mon Sep 27 2021  9:39                                                Page 29


  1496                        	.member	SCTCommandTransport,3296,10,8,16,121
  1497                        	.member	ReservedWord207,3312,112,8,0,2
  1498                        	.member	BlockAlignment,3344,10,8,16,122
  1499                        	.member	WriteReadVerifySectorCountMode3Only,3360
                    ,112,8,0,2
  1500                        	.member	WriteReadVerifySectorCountMode2Only,3392
                    ,112,8,0,2
  1501                        	.member	NVCacheCapabilities,3424,10,8,16,123
  1502                        	.member	NVCacheSizeLSW,3440,16,8,16
  1503                        	.member	NVCacheSizeMSW,3456,16,8,16
  1504                        	.member	NominalMediaRotationRate,3472,16,8,16
  1505                        	.member	ReservedWord218,3488,16,8,16
  1506                        	.member	NVCacheOptions,3504,10,8,16,124
  1507                        	.member	WriteReadVerifySectorCountMode,3520,16,1
                    7,8
  1508                        	.member	ReservedWord220,3528,16,17,8
  1509                        	.member	ReservedWord221,3536,16,8,16
  1510                        	.member	TransportMajorVersion,3552,10,8,16,125
  1511                        	.member	TransportMinorVersion,3568,16,8,16
  1512                        	.member	ReservedWord224,3584,112,8,0,6
  1513                        	.member	ExtendedNumberOfUserAddressableSectors,3
                    680,114,8,0,2
  1514                        	.member	MinBlocksPerDownloadMicrocodeMode03,3744
                    ,16,8,16
  1515                        	.member	MaxBlocksPerDownloadMicrocodeMode03,3760
                    ,16,8,16
  1516                        	.member	ReservedWord236,3776,112,8,0,19
  1517                        	.member	Signature,4080,16,17,8
  1518                        	.member	CheckSum,4088,16,17,8
  1519                        	.eos
  1520                        	.stag	_FXDosDevice,5744,127
  1521                        	.member	type,0,14,8,8
  1522                        	.member	initialized,8,14,8,8
  1523                        	.member	devdata,16,129,8,32
  1524                        	.member	devstatus,48,14,8,8
  1525                        	.member	bootSector,56,10,8,928,97
  1526                        	.member	partitionTable,984,10,8,128,98
  1527                        	.member	fileAllocationTable,1112,110,8,0,512
  1528                        	.member	bsOffset,5208,18,8,32
  1529                        	.member	rootDirSectors,5240,18,8,32
  1530                        	.member	root_entry_count,5272,5,8,16
  1531                        	.member	rootEntriesPerPage,5288,5,8,16
  1532                        	.member	sectors_per_cluster,5304,5,8,16
  1533                        	.member	firstDataSector,5320,18,8,32
  1534                        	.member	fatTableOffset,5352,18,8,32
  1535                        	.member	volume_name,5384,110,8,0,12
  1536                        	.member	root_volume_name,5480,110,8,0,12
  1537                        	.member	errorCode,5576,14,8,8
  1538                        	.member	pfInit,5584,641,8,32
  1539                        	.member	pfReset,5616,641,8,32
  1540                        	.member	pfUninit,5648,641,8,32
  1541                        	.member	pfReader,5680,654,8,32
  1542                        	.member	pfWriter,5712,654,8,32
  1543                        	.eos
  1544                        	.utag	item,32,128
  1545                        	.member	dir,0,138,11,32,65
  1546                        	.member	file,0,138,11,32,64
  1547                        	.member	fileInfo,0,138,11,32,66
  Mon Sep 27 2021  9:39                                                Page 30


  1548                        	.eos
  1549                        	.stag	_dos_handle,80,129
  1550                        	.member	fs,0,138,8,32,62
  1551                        	.member	fr,32,5,8,16
  1552                        	.member	path,48,142,8,32
  1553                        	.eos
  1554                        	.stag	fx_file,112,130
  1555                        	.member	fs,0,138,8,32,62
  1556                        	.member	fileInfo,32,138,8,32,66
  1557                        	.member	f,64,138,8,32,64
  1558                        	.member	fr,96,5,8,16
  1559                        	.eos
  1560                        	.line	812
  1561                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.c",3
  1562                        ;#include "fxnode.h"
  1563                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxnode.h",0
  1564                        	.line	118
  1565                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.c",4
  1566                        ;#include "fxmemorymanager.h"
  1567                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxmemorymanager.h",0
  1568                        	.line	129
  1569                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.c",5
  1570                        ;#include "fxgfx.h"
  1571                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxgfx.h",0
  1572                        	.line	370
  1573                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.c",6
  1574                        ;
  1575                        ;#define CONSOLE_FIRST_LINE (5)
  1576                        ;
  1577                        ;static int 	_k_window_index = 0;
  1578                        	data
  1579                        ~~_k_window_index:
  1580 00:0000: 00 00        	dw	$0
  1581 00:0002:              	ends
  1582                        ;static WINDOW _k_window_list[10];
  1583                        ;
  1584                        ;static LPCHAR console_commands[] = {"cls","vol","
                    dir","tsd","desktop","fcolor","bcolor","init","newdir","task
                    s","front","back",
  1585                        	data
  1586                        ~~console_commands:
  1587 00:0002: xx xx xx xx  	dl	L1+0
  1588 00:0006: xx xx xx xx  	dl	L1+4
  1589 00:000A: xx xx xx xx  	dl	L1+8
  1590 00:000E: xx xx xx xx  	dl	L1+12
  1591 00:0012: xx xx xx xx  	dl	L1+16
  1592 00:0016: xx xx xx xx  	dl	L1+24
  1593 00:001A: xx xx xx xx  	dl	L1+31
  1594 00:001E: xx xx xx xx  	dl	L1+38
  1595 00:0022: xx xx xx xx  	dl	L1+43
  1596 00:0026: xx xx xx xx  	dl	L1+50
  Mon Sep 27 2021  9:39                                                Page 31


  1597 00:002A: xx xx xx xx  	dl	L1+56
  1598 00:002E: xx xx xx xx  	dl	L1+62
  1599                        ;							
                     	 	"chdir","display","window","send","start",
  1600 00:0032: xx xx xx xx  	dl	L1+67
  1601 00:0036: xx xx xx xx  	dl	L1+73
  1602 00:003A: xx xx xx xx  	dl	L1+81
  1603 00:003E: xx xx xx xx  	dl	L1+88
  1604 00:0042: xx xx xx xx  	dl	L1+93
  1605                        ;							
                    		"time","exit","pause","resume","lineup",
  1606 00:0046: xx xx xx xx  	dl	L1+99
  1607 00:004A: xx xx xx xx  	dl	L1+104
  1608 00:004E: xx xx xx xx  	dl	L1+109
  1609 00:0052: xx xx xx xx  	dl	L1+115
  1610 00:0056: xx xx xx xx  	dl	L1+122
  1611                        ;							
                    		NULL};
  1612 00:005A: 00 00 00 00  	dl	$0
  1613 00:005E:              	ends
  1614                        	data
  1615                        L1:
  1616 00:005E: 63 6C 73 00  	db	$63,$6C,$73,$00,$76,$6F,$6C,$00,$64,$69,
                    $72,$00,$74,$73,$64
       00:0062: 76 6F 6C 00 
       00:0066: 64 69 72 00 
       00:006A: 74 73 64 
  1617 00:006D: 00 64 65 73  	db	$00,$64,$65,$73,$6B,$74,$6F,$70,$00,$66,
                    $63,$6F,$6C,$6F,$72
       00:0071: 6B 74 6F 70 
       00:0075: 00 66 63 6F 
       00:0079: 6C 6F 72 
  1618 00:007C: 00 62 63 6F  	db	$00,$62,$63,$6F,$6C,$6F,$72,$00,$69,$6E,
                    $69,$74,$00,$6E,$65
       00:0080: 6C 6F 72 00 
       00:0084: 69 6E 69 74 
       00:0088: 00 6E 65 
  1619 00:008B: 77 64 69 72  	db	$77,$64,$69,$72,$00,$74,$61,$73,$6B,$73,
                    $00,$66,$72,$6F,$6E
       00:008F: 00 74 61 73 
       00:0093: 6B 73 00 66 
       00:0097: 72 6F 6E 
  1620 00:009A: 74 00 62 61  	db	$74,$00,$62,$61,$63,$6B,$00,$63,$68,$64,
                    $69,$72,$00,$64,$69
       00:009E: 63 6B 00 63 
       00:00A2: 68 64 69 72 
       00:00A6: 00 64 69 
  1621 00:00A9: 73 70 6C 61  	db	$73,$70,$6C,$61,$79,$00,$77,$69,$6E,$64,
                    $6F,$77,$00,$73,$65
       00:00AD: 79 00 77 69 
       00:00B1: 6E 64 6F 77 
       00:00B5: 00 73 65 
  1622 00:00B8: 6E 64 00 73  	db	$6E,$64,$00,$73,$74,$61,$72,$74,$00,$74,
                    $69,$6D,$65,$00,$65
       00:00BC: 74 61 72 74 
       00:00C0: 00 74 69 6D 
       00:00C4: 65 00 65 
  1623 00:00C7: 78 69 74 00  	db	$78,$69,$74,$00,$70,$61,$75,$73,$65,$00,
  Mon Sep 27 2021  9:39                                                Page 32


                    $72,$65,$73,$75,$6D
       00:00CB: 70 61 75 73 
       00:00CF: 65 00 72 65 
       00:00D3: 73 75 6D 
  1624 00:00D6: 65 00 6C 69  	db	$65,$00,$6C,$69,$6E,$65,$75,$70,$00
       00:00DA: 6E 65 75 70 
       00:00DE: 00 
  1625 00:00DF:              	ends
  1626                        ;static FXCommandHandler console_command_proc[] = 
                    {cmd_CLEAR,cmd_VOL,cmd_DIR,cmd_TESTSD,cmd_WORKBENCH,
  1627                        	data
  1628                        ~~console_command_proc:
  1629 00:00DF: xx xx xx xx  	dl	~~cmd_CLEAR
  1630 00:00E3: xx xx xx xx  	dl	~~cmd_VOL
  1631 00:00E7: xx xx xx xx  	dl	~~cmd_DIR
  1632 00:00EB: xx xx xx xx  	dl	~~cmd_TESTSD
  1633 00:00EF: xx xx xx xx  	dl	~~cmd_WORKBENCH
  1634                        ;		                                        
                      cmd_FCOLOR,cmd_BCOLOR,cmd_INIT,cmd_NEWDIR,cmd_TASKS,
  1635 00:00F3: xx xx xx xx  	dl	~~cmd_FCOLOR
  1636 00:00F7: xx xx xx xx  	dl	~~cmd_BCOLOR
  1637 00:00FB: xx xx xx xx  	dl	~~cmd_INIT
  1638 00:00FF: xx xx xx xx  	dl	~~cmd_NEWDIR
  1639 00:0103: xx xx xx xx  	dl	~~cmd_TASKS
  1640                        ;							
                    					  cmd_FRONT,cmd_BACK,cmd
                    _CHRDIR,cmd_DISPLAY,
  1641 00:0107: xx xx xx xx  	dl	~~cmd_FRONT
  1642 00:010B: xx xx xx xx  	dl	~~cmd_BACK
  1643 00:010F: xx xx xx xx  	dl	~~cmd_CHRDIR
  1644 00:0113: xx xx xx xx  	dl	~~cmd_DISPLAY
  1645                        ;							
                    					  cmd_Window,
  1646 00:0117: xx xx xx xx  	dl	~~cmd_Window
  1647                        ;							
                    					  cmd_SEND,
  1648 00:011B: xx xx xx xx  	dl	~~cmd_SEND
  1649                        ;							
                    					  cmd_START,
  1650 00:011F: xx xx xx xx  	dl	~~cmd_START
  1651                        ;							
                    					  cmd_TIME,
  1652 00:0123: xx xx xx xx  	dl	~~cmd_TIME
  1653                        ;							
                    					  cmd_EXIT,cmd_PAUSE,cmd
                    _RESUME,
  1654 00:0127: xx xx xx xx  	dl	~~cmd_EXIT
  1655 00:012B: xx xx xx xx  	dl	~~cmd_PAUSE
  1656 00:012F: xx xx xx xx  	dl	~~cmd_RESUME
  1657                        ;							
                    					  cmd_LINEUP,
  1658 00:0133: xx xx xx xx  	dl	~~cmd_LINEUP
  1659                        ;							
                    					  NULL};
  1660 00:0137: 00 00 00 00  	dl	$0
  1661 00:013B:              	ends
  1662                        ;
  1663                        ;static char consolespinner[] = {'|','/','-','\\'}
  Mon Sep 27 2021  9:39                                                Page 33


                    ;
  1664                        	data
  1665                        ~~consolespinner:
  1666 00:013B: 7C 2F 2D 5C  	db	$7C,$2F,$2D,$5C
  1667 00:013F:              	ends
  1668                        ;
  1669                        ;static SPINNERCTX consolespinctx;
  1670                        ;
  1671                        ;static UINT cursorFlashInterval  = 0;
  1672                        	data
  1673                        ~~cursorFlashInterval:
  1674 00:013F: 00 00        	dw	$0
  1675 00:0141:              	ends
  1676                        ;static UINT cursorCurrentColor   = 15;
  1677                        	data
  1678                        ~~cursorCurrentColor:
  1679 00:0141: 0F 00        	dw	$F
  1680 00:0143:              	ends
  1681                        ;
  1682                        ;static LPCHAR tokentypeNames[] = { "WORD",
  1683                        	data
  1684                        ~~tokentypeNames:
  1685 00:0143: xx xx xx xx  	dl	L2+0
  1686                        ;"NUMBER","STRING","LABEL","LINE","EQUALS",
  1687 00:0147: xx xx xx xx  	dl	L2+5
  1688 00:014B: xx xx xx xx  	dl	L2+12
  1689 00:014F: xx xx xx xx  	dl	L2+19
  1690 00:0153: xx xx xx xx  	dl	L2+25
  1691 00:0157: xx xx xx xx  	dl	L2+30
  1692                        ;"OPERATOR","LEFT_PAREN", "RIGHT_PAREN", "EOF", "C
                    OMMA", "LEFT_BLOCK",
  1693 00:015B: xx xx xx xx  	dl	L2+37
  1694 00:015F: xx xx xx xx  	dl	L2+46
  1695 00:0163: xx xx xx xx  	dl	L2+57
  1696 00:0167: xx xx xx xx  	dl	L2+69
  1697 00:016B: xx xx xx xx  	dl	L2+73
  1698 00:016F: xx xx xx xx  	dl	L2+79
  1699                        ;"RIGHT_BLOCK", "BANG", "NOTEQUAL", "ANNOTATION",
  1700 00:0173: xx xx xx xx  	dl	L2+90
  1701 00:0177: xx xx xx xx  	dl	L2+102
  1702 00:017B: xx xx xx xx  	dl	L2+107
  1703 00:017F: xx xx xx xx  	dl	L2+116
  1704                        ;"GTE", "LTE", "GT", "LT", "PERIOD", "POINTER", "N
                    OOP",
  1705 00:0183: xx xx xx xx  	dl	L2+127
  1706 00:0187: xx xx xx xx  	dl	L2+131
  1707 00:018B: xx xx xx xx  	dl	L2+135
  1708 00:018F: xx xx xx xx  	dl	L2+138
  1709 00:0193: xx xx xx xx  	dl	L2+141
  1710 00:0197: xx xx xx xx  	dl	L2+148
  1711 00:019B: xx xx xx xx  	dl	L2+156
  1712                        ;"START_BLOCK", "END_BLOCK","AND","OR","VARIADIC",
                     "DOLLAR"};
  1713 00:019F: xx xx xx xx  	dl	L2+161
  1714 00:01A3: xx xx xx xx  	dl	L2+173
  1715 00:01A7: xx xx xx xx  	dl	L2+183
  1716 00:01AB: xx xx xx xx  	dl	L2+187
  1717 00:01AF: xx xx xx xx  	dl	L2+190
  Mon Sep 27 2021  9:39                                                Page 34


  1718 00:01B3: xx xx xx xx  	dl	L2+199
  1719 00:01B7:              	ends
  1720                        	data
  1721                        L2:
  1722 00:01B7: 57 4F 52 44  	db	$57,$4F,$52,$44,$00,$4E,$55,$4D,$42,$45,
                    $52,$00,$53,$54,$52
       00:01BB: 00 4E 55 4D 
       00:01BF: 42 45 52 00 
       00:01C3: 53 54 52 
  1723 00:01C6: 49 4E 47 00  	db	$49,$4E,$47,$00,$4C,$41,$42,$45,$4C,$00,
                    $4C,$49,$4E,$45,$00
       00:01CA: 4C 41 42 45 
       00:01CE: 4C 00 4C 49 
       00:01D2: 4E 45 00 
  1724 00:01D5: 45 51 55 41  	db	$45,$51,$55,$41,$4C,$53,$00,$4F,$50,$45,
                    $52,$41,$54,$4F,$52
       00:01D9: 4C 53 00 4F 
       00:01DD: 50 45 52 41 
       00:01E1: 54 4F 52 
  1725 00:01E4: 00 4C 45 46  	db	$00,$4C,$45,$46,$54,$5F,$50,$41,$52,$45,
                    $4E,$00,$52,$49,$47
       00:01E8: 54 5F 50 41 
       00:01EC: 52 45 4E 00 
       00:01F0: 52 49 47 
  1726 00:01F3: 48 54 5F 50  	db	$48,$54,$5F,$50,$41,$52,$45,$4E,$00,$45,
                    $4F,$46,$00,$43,$4F
       00:01F7: 41 52 45 4E 
       00:01FB: 00 45 4F 46 
       00:01FF: 00 43 4F 
  1727 00:0202: 4D 4D 41 00  	db	$4D,$4D,$41,$00,$4C,$45,$46,$54,$5F,$42,
                    $4C,$4F,$43,$4B,$00
       00:0206: 4C 45 46 54 
       00:020A: 5F 42 4C 4F 
       00:020E: 43 4B 00 
  1728 00:0211: 52 49 47 48  	db	$52,$49,$47,$48,$54,$5F,$42,$4C,$4F,$43,
                    $4B,$00,$42,$41,$4E
       00:0215: 54 5F 42 4C 
       00:0219: 4F 43 4B 00 
       00:021D: 42 41 4E 
  1729 00:0220: 47 00 4E 4F  	db	$47,$00,$4E,$4F,$54,$45,$51,$55,$41,$4C,
                    $00,$41,$4E,$4E,$4F
       00:0224: 54 45 51 55 
       00:0228: 41 4C 00 41 
       00:022C: 4E 4E 4F 
  1730 00:022F: 54 41 54 49  	db	$54,$41,$54,$49,$4F,$4E,$00,$47,$54,$45,
                    $00,$4C,$54,$45,$00
       00:0233: 4F 4E 00 47 
       00:0237: 54 45 00 4C 
       00:023B: 54 45 00 
  1731 00:023E: 47 54 00 4C  	db	$47,$54,$00,$4C,$54,$00,$50,$45,$52,$49,
                    $4F,$44,$00,$50,$4F
       00:0242: 54 00 50 45 
       00:0246: 52 49 4F 44 
       00:024A: 00 50 4F 
  1732 00:024D: 49 4E 54 45  	db	$49,$4E,$54,$45,$52,$00,$4E,$4F,$4F,$50,
                    $00,$53,$54,$41,$52
       00:0251: 52 00 4E 4F 
       00:0255: 4F 50 00 53 
  Mon Sep 27 2021  9:39                                                Page 35


       00:0259: 54 41 52 
  1733 00:025C: 54 5F 42 4C  	db	$54,$5F,$42,$4C,$4F,$43,$4B,$00,$45,$4E,
                    $44,$5F,$42,$4C,$4F
       00:0260: 4F 43 4B 00 
       00:0264: 45 4E 44 5F 
       00:0268: 42 4C 4F 
  1734 00:026B: 43 4B 00 41  	db	$43,$4B,$00,$41,$4E,$44,$00,$4F,$52,$00,
                    $56,$41,$52,$49,$41
       00:026F: 4E 44 00 4F 
       00:0273: 52 00 56 41 
       00:0277: 52 49 41 
  1735 00:027A: 44 49 43 00  	db	$44,$49,$43,$00,$44,$4F,$4C,$4C,$41,$52,
                    $00
       00:027E: 44 4F 4C 4C 
       00:0282: 41 52 00 
  1736 00:0285:              	ends
  1737                        ;
  1738                        ;static consoleBuffer[56][72];
  1739                        ;//static consoleBufferTemp[56][72];
  1740                        ;//#pragma section CODE=CONSOLE,offset $07:0000
  1741                        ;
  1742                        ;VOID k_initialize_text(VOID)
  1743                        ;{
  1744                        	.line	46
  1745                        	.line	47
  1746                        	code
  1747                        	xdef	~~k_initialize_text
  1748                        	func
  1749                        	.function	47
  1750                        ~~k_initialize_text:
  1751                        	longa	on
  1752                        	longi	on
  1753 00:0000: 3B           	tsc
  1754 00:0001: 38           	sec
  1755 00:0002: E9 00 00     	sbc	#L4
  1756 00:0005: 1B           	tcs
  1757 00:0006: 0B           	phd
  1758 00:0007: 5B           	tcd
  1759                        	.block	47
  1760                        ;	//k_debug_string("k_initialize_text\r\n");
  1761                        ;	*((int FAR *)COLS_VISIBLE)  =  72;
  1762                        	.line	49
  1763 00:0008: A9 48 00     	lda	#$48
  1764 00:000B: 8F 0F 00 00  	sta	>15
  1765                        ;	*((int FAR *)LINES_VISIBLE) =  56;
  1766                        	.line	50
  1767 00:000F: A9 38 00     	lda	#$38
  1768 00:0012: 8F 13 00 00  	sta	>19
  1769                        ;	*((int FAR *)COLS_PER_LINE) = 128;
  1770                        	.line	51
  1771 00:0016: A9 80 00     	lda	#$80
  1772 00:0019: 8F 11 00 00  	sta	>17
  1773                        ;	*((int FAR *)LINES_MAX) 	=  64;
  1774                        	.line	52
  1775 00:001D: A9 40 00     	lda	#$40
  1776 00:0020: 8F 15 00 00  	sta	>21
  1777                        ;}
  1778                        	.line	53
  Mon Sep 27 2021  9:39                                                Page 36


  1779                        L7:
  1780 00:0024: 2B           	pld
  1781 00:0025: 3B           	tsc
  1782 00:0026: 18           	clc
  1783 00:0027: 69 00 00     	adc	#L4
  1784 00:002A: 1B           	tcs
  1785 00:002B: 6B           	rtl
  1786                        	.endblock	53
  1787             00000000   L4	equ	0
  1788             00000001   L5	equ	1
  1789                        	ends
  1790                        	efunc
  1791                        	.endfunc	53,1,0
  1792                        	.line	53
  1793                        ;
  1794                        ;void k_init_spinner(PSPINNERCTX ctx)
  1795                        ;{
  1796                        	.line	55
  1797                        	.line	56
  1798                        	code
  1799                        	xdef	~~k_init_spinner
  1800                        	func
  1801                        	.function	56
  1802                        ~~k_init_spinner:
  1803                        	longa	on
  1804                        	longi	on
  1805 00:002C: 3B           	tsc
  1806 00:002D: 38           	sec
  1807 00:002E: E9 04 00     	sbc	#L8
  1808 00:0031: 1B           	tcs
  1809 00:0032: 0B           	phd
  1810 00:0033: 5B           	tcd
  1811             00000004   ctx_0	set	4
  1812                        	.block	56
  1813                        ;	ctx->spinner = consolespinner;
  1814                        	.sym	ctx,4,138,6,32,86
  1815                        	.line	57
  1816 00:0034: A9 xx xx     	lda	#<~~consolespinner
  1817 00:0037: 85 01        	sta	<R0
  1818                        	xref	_BEG_DATA
  1819 00:0039: A9 xx xx     	lda	#_BEG_DATA>>16
  1820 00:003C: 85 03        	sta	<R0+2
  1821 00:003E: A5 01        	lda	<R0
  1822 00:0040: A0 02 00     	ldy	#$2
  1823 00:0043: 97 08        	sta	[<L8+ctx_0],Y
  1824 00:0045: A5 03        	lda	<R0+2
  1825 00:0047: A0 04 00     	ldy	#$4
  1826 00:004A: 97 08        	sta	[<L8+ctx_0],Y
  1827                        ;	ctx->index = 0;
  1828                        	.line	58
  1829 00:004C: A9 00 00     	lda	#$0
  1830 00:004F: 87 08        	sta	[<L8+ctx_0]
  1831                        ;}
  1832                        	.line	59
  1833                        L11:
  1834 00:0051: A5 06        	lda	<L8+2
  1835 00:0053: 85 0A        	sta	<L8+2+4
  1836 00:0055: A5 05        	lda	<L8+1
  Mon Sep 27 2021  9:39                                                Page 37


  1837 00:0057: 85 09        	sta	<L8+1+4
  1838 00:0059: 2B           	pld
  1839 00:005A: 3B           	tsc
  1840 00:005B: 18           	clc
  1841 00:005C: 69 08 00     	adc	#L8+4
  1842 00:005F: 1B           	tcs
  1843 00:0060: 6B           	rtl
  1844                        	.endblock	59
  1845             00000004   L8	equ	4
  1846             00000005   L9	equ	5
  1847                        	ends
  1848                        	efunc
  1849                        	.endfunc	59,5,4
  1850                        	.line	59
  1851                        ;
  1852                        ;void k_updatespinner(int pos,int line,PSPINNERCTX
                     ctx)
  1853                        ;{
  1854                        	.line	61
  1855                        	.line	62
  1856                        	code
  1857                        	xdef	~~k_updatespinner
  1858                        	func
  1859                        	.function	62
  1860                        ~~k_updatespinner:
  1861                        	longa	on
  1862                        	longi	on
  1863 00:0061: 3B           	tsc
  1864 00:0062: 38           	sec
  1865 00:0063: E9 04 00     	sbc	#L12
  1866 00:0066: 1B           	tcs
  1867 00:0067: 0B           	phd
  1868 00:0068: 5B           	tcd
  1869             00000004   pos_0	set	4
  1870             00000006   line_0	set	6
  1871             00000008   ctx_0	set	8
  1872                        	.block	62
  1873                        ;	k_put_char(pos,line,consolespinner[ctx->index++]
                    ,15,0);
  1874                        	.sym	pos,4,5,6,16
  1875                        	.sym	line,6,5,6,16
  1876                        	.sym	ctx,8,138,6,32,86
  1877                        	.line	63
  1878 00:0069: F4 00 00     	pea	#<$0
  1879 00:006C: F4 0F 00     	pea	#<$f
  1880 00:006F: A7 0C        	lda	[<L12+ctx_0]
  1881 00:0071: 85 01        	sta	<R0
  1882 00:0073: A7 0C        	lda	[<L12+ctx_0]
  1883 00:0075: 1A           	ina
  1884 00:0076: 87 0C        	sta	[<L12+ctx_0]
  1885 00:0078: A6 01        	ldx	<R0
  1886 00:007A: BD xx xx     	lda	|~~consolespinner,X
  1887 00:007D: 48           	pha
  1888 00:007E: D4 0A        	pei	<L12+line_0
  1889 00:0080: D4 08        	pei	<L12+pos_0
  1890 00:0082: 22 xx xx xx  	jsl	~~k_put_char
  1891                        ;	if(ctx->index>3) ctx->index = 0;
  1892                        	.line	64
  Mon Sep 27 2021  9:39                                                Page 38


  1893 00:0086: 38           	sec
  1894 00:0087: A9 03 00     	lda	#$3
  1895 00:008A: E7 0C        	sbc	[<L12+ctx_0]
  1896 00:008C: 70 03        	bvs	L15
  1897 00:008E: 49 00 80     	eor	#$8000
  1898                        L15:
  1899 00:0091: 10 03        	bpl	L16
  1900 00:0093: 82 05 00     	brl	L10001
  1901                        L16:
  1902                        	.line	64
  1903 00:0096: A9 00 00     	lda	#$0
  1904 00:0099: 87 0C        	sta	[<L12+ctx_0]
  1905                        ;}
  1906                        L10001:
  1907                        	.line	65
  1908                        L17:
  1909 00:009B: A5 06        	lda	<L12+2
  1910 00:009D: 85 0E        	sta	<L12+2+8
  1911 00:009F: A5 05        	lda	<L12+1
  1912 00:00A1: 85 0D        	sta	<L12+1+8
  1913 00:00A3: 2B           	pld
  1914 00:00A4: 3B           	tsc
  1915 00:00A5: 18           	clc
  1916 00:00A6: 69 0C 00     	adc	#L12+8
  1917 00:00A9: 1B           	tcs
  1918 00:00AA: 6B           	rtl
  1919                        	.endblock	65
  1920             00000004   L12	equ	4
  1921             00000005   L13	equ	5
  1922                        	ends
  1923                        	efunc
  1924                        	.endfunc	65,5,4
  1925                        	.line	65
  1926                        ;
  1927                        ;int k_initialize_text_fonts(UINT flag)
  1928                        ;{
  1929                        	.line	67
  1930                        	.line	68
  1931                        	code
  1932                        	xdef	~~k_initialize_text_fonts
  1933                        	func
  1934                        	.function	68
  1935                        ~~k_initialize_text_fonts:
  1936                        	longa	on
  1937                        	longi	on
  1938 00:00AB: 3B           	tsc
  1939 00:00AC: 38           	sec
  1940 00:00AD: E9 0A 00     	sbc	#L18
  1941 00:00B0: 1B           	tcs
  1942 00:00B1: 0B           	phd
  1943 00:00B2: 5B           	tcd
  1944             00000004   flag_0	set	4
  1945                        	.block	68
  1946                        ;
  1947                        ;	int i = 0;
  1948                        ;
  1949                        ;	LPSTR font = EGAFONT;
  1950                        ;	//LPSTR font = BM437_ATI_8X8_Font_Set;
  Mon Sep 27 2021  9:39                                                Page 39


  1951                        ;
  1952                        ;	for(i=0;i<0x800;i++)
  1953             00000000   i_1	set	0
  1954             00000002   font_1	set	2
  1955                        	.sym	i,0,5,1,16
  1956                        	.sym	font,2,142,1,32
  1957                        	.sym	flag,4,16,6,16
  1958 00:00B3: 64 05        	stz	<L19+i_1
  1959 00:00B5: A9 xx xx     	lda	#<~~EGAFONT
  1960 00:00B8: 85 07        	sta	<L19+font_1
  1961 00:00BA: A9 xx xx     	lda	#^~~EGAFONT
  1962 00:00BD: 85 09        	sta	<L19+font_1+2
  1963                        	.line	75
  1964 00:00BF: 64 05        	stz	<L19+i_1
  1965                        L10004:
  1966                        ;	{
  1967                        	.line	76
  1968                        ;		//FONT_MEMORY_BANK0[i] = FONT_4_BANK0[i]
                    ;
  1969                        ;		FONT_MEMORY_BANK0[i] = font[i];
  1970                        	.line	78
  1971 00:00C1: A9 00 00     	lda	#$0
  1972 00:00C4: 85 01        	sta	<R0
  1973 00:00C6: A9 AF 00     	lda	#$af
  1974 00:00C9: 85 03        	sta	<R0+2
  1975 00:00CB: E2 20        	sep	#$20
  1976                        	longa	off
  1977 00:00CD: A4 05        	ldy	<L19+i_1
  1978 00:00CF: B7 07        	lda	[<L19+font_1],Y
  1979 00:00D1: A4 05        	ldy	<L19+i_1
  1980 00:00D3: 97 01        	sta	[<R0],Y
  1981 00:00D5: C2 20        	rep	#$20
  1982                        	longa	on
  1983                        ;		//FONT_MEMORY_BANK1[i] = BM437_ATI_8X8_F
                    ont_Set[i];
  1984                        ;		FONT_MEMORY_BANK1[i] = font[i];
  1985                        	.line	80
  1986 00:00D7: A9 00 88     	lda	#$8800
  1987 00:00DA: 85 01        	sta	<R0
  1988 00:00DC: A9 AF 00     	lda	#$af
  1989 00:00DF: 85 03        	sta	<R0+2
  1990 00:00E1: E2 20        	sep	#$20
  1991                        	longa	off
  1992 00:00E3: A4 05        	ldy	<L19+i_1
  1993 00:00E5: B7 07        	lda	[<L19+font_1],Y
  1994 00:00E7: A4 05        	ldy	<L19+i_1
  1995 00:00E9: 97 01        	sta	[<R0],Y
  1996 00:00EB: C2 20        	rep	#$20
  1997                        	longa	on
  1998                        ;	}
  1999                        	.line	81
  2000                        L10002:
  2001 00:00ED: E6 05        	inc	<L19+i_1
  2002 00:00EF: 38           	sec
  2003 00:00F0: A5 05        	lda	<L19+i_1
  2004 00:00F2: E9 00 08     	sbc	#<$800
  2005 00:00F5: 70 03        	bvs	L21
  2006 00:00F7: 49 00 80     	eor	#$8000
  Mon Sep 27 2021  9:39                                                Page 40


  2007                        L21:
  2008 00:00FA: 30 03        	bmi	L22
  2009 00:00FC: 82 C2 FF     	brl	L10004
  2010                        L22:
  2011                        L10003:
  2012                        ;
  2013                        ;	return 0;
  2014                        	.line	83
  2015 00:00FF: A9 00 00     	lda	#$0
  2016                        L23:
  2017 00:0102: A8           	tay
  2018 00:0103: A5 0C        	lda	<L18+2
  2019 00:0105: 85 0E        	sta	<L18+2+2
  2020 00:0107: A5 0B        	lda	<L18+1
  2021 00:0109: 85 0D        	sta	<L18+1+2
  2022 00:010B: 2B           	pld
  2023 00:010C: 3B           	tsc
  2024 00:010D: 18           	clc
  2025 00:010E: 69 0C 00     	adc	#L18+2
  2026 00:0111: 1B           	tcs
  2027 00:0112: 98           	tya
  2028 00:0113: 6B           	rtl
  2029                        ;}
  2030                        	.line	84
  2031                        	.endblock	84
  2032             0000000A   L18	equ	10
  2033             00000005   L19	equ	5
  2034                        	ends
  2035                        	efunc
  2036                        	.endfunc	84,5,10
  2037                        	.line	84
  2038                        ;
  2039                        ;void k_scroll_screen(PFXPROCESS p)
  2040                        ;{
  2041                        	.line	86
  2042                        	.line	87
  2043                        	code
  2044                        	xdef	~~k_scroll_screen
  2045                        	func
  2046                        	.function	87
  2047                        ~~k_scroll_screen:
  2048                        	longa	on
  2049                        	longi	on
  2050 00:0114: 3B           	tsc
  2051 00:0115: 38           	sec
  2052 00:0116: E9 14 00     	sbc	#L24
  2053 00:0119: 1B           	tcs
  2054 00:011A: 0B           	phd
  2055 00:011B: 5B           	tcd
  2056             00000004   p_0	set	4
  2057                        	.block	87
  2058                        ;	int i = 0;
  2059                        ;	int j = 0;
  2060                        ;
  2061                        ;	for(i=0;i<(p->consoleCtl->maxCols - 1);i++)
  2062             00000000   i_1	set	0
  2063             00000002   j_1	set	2
  2064                        	.sym	i,0,5,1,16
  Mon Sep 27 2021  9:39                                                Page 41


  2065                        	.sym	j,2,5,1,16
  2066                        	.sym	p,4,138,6,32,20
  2067 00:011C: 64 11        	stz	<L25+i_1
  2068 00:011E: 64 13        	stz	<L25+j_1
  2069                        	.line	91
  2070 00:0120: 64 11        	stz	<L25+i_1
  2071 00:0122: 82 61 00     	brl	L10008
  2072                        L10007:
  2073                        ;	{
  2074                        	.line	92
  2075                        ;		for(j=0;j<p->consoleCtl->maxRows;j++)
  2076                        	.line	93
  2077 00:0125: 64 13        	stz	<L25+j_1
  2078 00:0127: 82 3A 00     	brl	L10012
  2079                        L10011:
  2080                        ;		{
  2081                        	.line	94
  2082                        ;			consoleBuffer[i][j] = consoleBuf
                    fer[i+1][j];
  2083                        	.line	95
  2084 00:012A: A5 13        	lda	<L25+j_1
  2085 00:012C: 0A           	asl	A
  2086 00:012D: 85 01        	sta	<R0
  2087 00:012F: A5 11        	lda	<L25+i_1
  2088 00:0131: A2 90 00     	ldx	#<$90
  2089                        	xref	~~~mul
  2090 00:0134: 22 xx xx xx  	jsl	~~~mul
  2091 00:0138: 85 05        	sta	<R1
  2092 00:013A: 18           	clc
  2093 00:013B: A5 05        	lda	<R1
  2094 00:013D: 65 01        	adc	<R0
  2095 00:013F: 85 09        	sta	<R2
  2096 00:0141: A5 13        	lda	<L25+j_1
  2097 00:0143: 0A           	asl	A
  2098 00:0144: 85 01        	sta	<R0
  2099 00:0146: A5 11        	lda	<L25+i_1
  2100 00:0148: A2 90 00     	ldx	#<$90
  2101                        	xref	~~~mul
  2102 00:014B: 22 xx xx xx  	jsl	~~~mul
  2103 00:014F: 85 05        	sta	<R1
  2104 00:0151: 18           	clc
  2105 00:0152: A5 05        	lda	<R1
  2106 00:0154: 65 01        	adc	<R0
  2107 00:0156: 85 0D        	sta	<R3
  2108 00:0158: A6 0D        	ldx	<R3
  2109 00:015A: BD xx xx     	lda	|~~consoleBuffer+144,X
  2110 00:015D: A6 09        	ldx	<R2
  2111 00:015F: 9D xx xx     	sta	|~~consoleBuffer,X
  2112                        ;		}
  2113                        	.line	96
  2114                        L10009:
  2115 00:0162: E6 13        	inc	<L25+j_1
  2116                        L10012:
  2117 00:0164: A0 54 00     	ldy	#$54
  2118 00:0167: B7 18        	lda	[<L24+p_0],Y
  2119 00:0169: 85 01        	sta	<R0
  2120 00:016B: A0 56 00     	ldy	#$56
  2121 00:016E: B7 18        	lda	[<L24+p_0],Y
  Mon Sep 27 2021  9:39                                                Page 42


  2122 00:0170: 85 03        	sta	<R0+2
  2123 00:0172: 38           	sec
  2124 00:0173: A5 13        	lda	<L25+j_1
  2125 00:0175: A0 02 00     	ldy	#$2
  2126 00:0178: F7 01        	sbc	[<R0],Y
  2127 00:017A: 70 03        	bvs	L27
  2128 00:017C: 49 00 80     	eor	#$8000
  2129                        L27:
  2130 00:017F: 30 03        	bmi	L28
  2131 00:0181: 82 A6 FF     	brl	L10011
  2132                        L28:
  2133                        L10010:
  2134                        ;	}
  2135                        	.line	97
  2136                        L10005:
  2137 00:0184: E6 11        	inc	<L25+i_1
  2138                        L10008:
  2139 00:0186: A0 54 00     	ldy	#$54
  2140 00:0189: B7 18        	lda	[<L24+p_0],Y
  2141 00:018B: 85 01        	sta	<R0
  2142 00:018D: A0 56 00     	ldy	#$56
  2143 00:0190: B7 18        	lda	[<L24+p_0],Y
  2144 00:0192: 85 03        	sta	<R0+2
  2145 00:0194: 18           	clc
  2146 00:0195: A9 FF FF     	lda	#$ffff
  2147 00:0198: 67 01        	adc	[<R0]
  2148 00:019A: 85 05        	sta	<R1
  2149 00:019C: 38           	sec
  2150 00:019D: A5 11        	lda	<L25+i_1
  2151 00:019F: E5 05        	sbc	<R1
  2152 00:01A1: 70 03        	bvs	L29
  2153 00:01A3: 49 00 80     	eor	#$8000
  2154                        L29:
  2155 00:01A6: 30 03        	bmi	L30
  2156 00:01A8: 82 7A FF     	brl	L10007
  2157                        L30:
  2158                        L10006:
  2159                        ;
  2160                        ;	for(i=0;i<p->consoleCtl->maxCols;i++)
  2161                        	.line	99
  2162 00:01AB: 64 11        	stz	<L25+i_1
  2163 00:01AD: 82 54 00     	brl	L10016
  2164                        L10015:
  2165                        ;	{
  2166                        	.line	100
  2167                        ;		for(j=0;j<p->consoleCtl->maxRows;j++)
  2168                        	.line	101
  2169 00:01B0: 64 13        	stz	<L25+j_1
  2170 00:01B2: 82 2D 00     	brl	L10020
  2171                        L10019:
  2172                        ;		{
  2173                        	.line	102
  2174                        ;			k_put_char(j,i,consoleBuffer[i][
                    j],15,0);
  2175                        	.line	103
  2176 00:01B5: F4 00 00     	pea	#<$0
  2177 00:01B8: F4 0F 00     	pea	#<$f
  2178 00:01BB: A5 13        	lda	<L25+j_1
  Mon Sep 27 2021  9:39                                                Page 43


  2179 00:01BD: 0A           	asl	A
  2180 00:01BE: 85 01        	sta	<R0
  2181 00:01C0: A5 11        	lda	<L25+i_1
  2182 00:01C2: A2 90 00     	ldx	#<$90
  2183                        	xref	~~~mul
  2184 00:01C5: 22 xx xx xx  	jsl	~~~mul
  2185 00:01C9: 85 05        	sta	<R1
  2186 00:01CB: 18           	clc
  2187 00:01CC: A5 05        	lda	<R1
  2188 00:01CE: 65 01        	adc	<R0
  2189 00:01D0: 85 09        	sta	<R2
  2190 00:01D2: A6 09        	ldx	<R2
  2191 00:01D4: BD xx xx     	lda	|~~consoleBuffer,X
  2192 00:01D7: 48           	pha
  2193 00:01D8: D4 11        	pei	<L25+i_1
  2194 00:01DA: D4 13        	pei	<L25+j_1
  2195 00:01DC: 22 xx xx xx  	jsl	~~k_put_char
  2196                        ;		}
  2197                        	.line	104
  2198                        L10017:
  2199 00:01E0: E6 13        	inc	<L25+j_1
  2200                        L10020:
  2201 00:01E2: A0 54 00     	ldy	#$54
  2202 00:01E5: B7 18        	lda	[<L24+p_0],Y
  2203 00:01E7: 85 01        	sta	<R0
  2204 00:01E9: A0 56 00     	ldy	#$56
  2205 00:01EC: B7 18        	lda	[<L24+p_0],Y
  2206 00:01EE: 85 03        	sta	<R0+2
  2207 00:01F0: 38           	sec
  2208 00:01F1: A5 13        	lda	<L25+j_1
  2209 00:01F3: A0 02 00     	ldy	#$2
  2210 00:01F6: F7 01        	sbc	[<R0],Y
  2211 00:01F8: 70 03        	bvs	L31
  2212 00:01FA: 49 00 80     	eor	#$8000
  2213                        L31:
  2214 00:01FD: 30 03        	bmi	L32
  2215 00:01FF: 82 B3 FF     	brl	L10019
  2216                        L32:
  2217                        L10018:
  2218                        ;	}
  2219                        	.line	105
  2220                        L10013:
  2221 00:0202: E6 11        	inc	<L25+i_1
  2222                        L10016:
  2223 00:0204: A0 54 00     	ldy	#$54
  2224 00:0207: B7 18        	lda	[<L24+p_0],Y
  2225 00:0209: 85 01        	sta	<R0
  2226 00:020B: A0 56 00     	ldy	#$56
  2227 00:020E: B7 18        	lda	[<L24+p_0],Y
  2228 00:0210: 85 03        	sta	<R0+2
  2229 00:0212: 38           	sec
  2230 00:0213: A5 11        	lda	<L25+i_1
  2231 00:0215: E7 01        	sbc	[<R0]
  2232 00:0217: 70 03        	bvs	L33
  2233 00:0219: 49 00 80     	eor	#$8000
  2234                        L33:
  2235 00:021C: 30 03        	bmi	L34
  2236 00:021E: 82 8F FF     	brl	L10015
  Mon Sep 27 2021  9:39                                                Page 44


  2237                        L34:
  2238                        L10014:
  2239                        ;
  2240                        ;	p->consoleCtl->curX = 0;
  2241                        	.line	107
  2242 00:0221: A0 54 00     	ldy	#$54
  2243 00:0224: B7 18        	lda	[<L24+p_0],Y
  2244 00:0226: 85 01        	sta	<R0
  2245 00:0228: A0 56 00     	ldy	#$56
  2246 00:022B: B7 18        	lda	[<L24+p_0],Y
  2247 00:022D: 85 03        	sta	<R0+2
  2248 00:022F: A9 00 00     	lda	#$0
  2249 00:0232: A0 04 00     	ldy	#$4
  2250 00:0235: 97 01        	sta	[<R0],Y
  2251                        ;	p->consoleCtl->curY--;
  2252                        	.line	108
  2253 00:0237: A0 54 00     	ldy	#$54
  2254 00:023A: B7 18        	lda	[<L24+p_0],Y
  2255 00:023C: 85 01        	sta	<R0
  2256 00:023E: A0 56 00     	ldy	#$56
  2257 00:0241: B7 18        	lda	[<L24+p_0],Y
  2258 00:0243: 85 03        	sta	<R0+2
  2259 00:0245: 18           	clc
  2260 00:0246: A9 FF FF     	lda	#$ffff
  2261 00:0249: A0 06 00     	ldy	#$6
  2262 00:024C: 77 01        	adc	[<R0],Y
  2263 00:024E: A0 06 00     	ldy	#$6
  2264 00:0251: 97 01        	sta	[<R0],Y
  2265                        ;}
  2266                        	.line	109
  2267                        L35:
  2268 00:0253: A5 16        	lda	<L24+2
  2269 00:0255: 85 1A        	sta	<L24+2+4
  2270 00:0257: A5 15        	lda	<L24+1
  2271 00:0259: 85 19        	sta	<L24+1+4
  2272 00:025B: 2B           	pld
  2273 00:025C: 3B           	tsc
  2274 00:025D: 18           	clc
  2275 00:025E: 69 18 00     	adc	#L24+4
  2276 00:0261: 1B           	tcs
  2277 00:0262: 6B           	rtl
  2278                        	.endblock	109
  2279             00000014   L24	equ	20
  2280             00000011   L25	equ	17
  2281                        	ends
  2282                        	efunc
  2283                        	.endfunc	109,17,20
  2284                        	.line	109
  2285                        ;
  2286                        ;int k_get_cols_visible(void)
  2287                        ;{
  2288                        	.line	111
  2289                        	.line	112
  2290                        	code
  2291                        	xdef	~~k_get_cols_visible
  2292                        	func
  2293                        	.function	112
  2294                        ~~k_get_cols_visible:
  Mon Sep 27 2021  9:39                                                Page 45


  2295                        	longa	on
  2296                        	longi	on
  2297 00:0263: 3B           	tsc
  2298 00:0264: 38           	sec
  2299 00:0265: E9 00 00     	sbc	#L36
  2300 00:0268: 1B           	tcs
  2301 00:0269: 0B           	phd
  2302 00:026A: 5B           	tcd
  2303                        	.block	112
  2304                        ;	//return *((int*)(&((COLS_VISIBLE)[0]))); //2 By
                    tes Columns visible per screen line. A virtual line can be l
                    onger than displayed, up to COLS_PER_LINE long. Default  80
  2305                        ;	return *((int FAR *)COLS_VISIBLE);
  2306                        	.line	114
  2307 00:026B: AF 0F 00 00  	lda	>15
  2308                        L39:
  2309 00:026F: A8           	tay
  2310 00:0270: 2B           	pld
  2311 00:0271: 3B           	tsc
  2312 00:0272: 18           	clc
  2313 00:0273: 69 00 00     	adc	#L36
  2314 00:0276: 1B           	tcs
  2315 00:0277: 98           	tya
  2316 00:0278: 6B           	rtl
  2317                        ;}
  2318                        	.line	115
  2319                        	.endblock	115
  2320             00000000   L36	equ	0
  2321             00000001   L37	equ	1
  2322                        	ends
  2323                        	efunc
  2324                        	.endfunc	115,1,0
  2325                        	.line	115
  2326                        ;
  2327                        ;int k_get_cols_per_line(void)
  2328                        ;{
  2329                        	.line	117
  2330                        	.line	118
  2331                        	code
  2332                        	xdef	~~k_get_cols_per_line
  2333                        	func
  2334                        	.function	118
  2335                        ~~k_get_cols_per_line:
  2336                        	longa	on
  2337                        	longi	on
  2338 00:0279: 3B           	tsc
  2339 00:027A: 38           	sec
  2340 00:027B: E9 00 00     	sbc	#L40
  2341 00:027E: 1B           	tcs
  2342 00:027F: 0B           	phd
  2343 00:0280: 5B           	tcd
  2344                        	.block	118
  2345                        ;	return *((int*)COLS_PER_LINE); //2 Bytes Columns
                     visible per screen line. A virtual line can be longer than 
                    displayed, up to COLS_PER_LINE long. Default  80
  2346                        	.line	119
  2347 00:0281: AF 11 00 00  	lda	>17
  2348                        L43:
  Mon Sep 27 2021  9:39                                                Page 46


  2349 00:0285: A8           	tay
  2350 00:0286: 2B           	pld
  2351 00:0287: 3B           	tsc
  2352 00:0288: 18           	clc
  2353 00:0289: 69 00 00     	adc	#L40
  2354 00:028C: 1B           	tcs
  2355 00:028D: 98           	tya
  2356 00:028E: 6B           	rtl
  2357                        ;}
  2358                        	.line	120
  2359                        	.endblock	120
  2360             00000000   L40	equ	0
  2361             00000001   L41	equ	1
  2362                        	ends
  2363                        	efunc
  2364                        	.endfunc	120,1,0
  2365                        	.line	120
  2366                        ;
  2367                        ;int k_get_lines_visible(void)
  2368                        ;{
  2369                        	.line	122
  2370                        	.line	123
  2371                        	code
  2372                        	xdef	~~k_get_lines_visible
  2373                        	func
  2374                        	.function	123
  2375                        ~~k_get_lines_visible:
  2376                        	longa	on
  2377                        	longi	on
  2378 00:028F: 3B           	tsc
  2379 00:0290: 38           	sec
  2380 00:0291: E9 00 00     	sbc	#L44
  2381 00:0294: 1B           	tcs
  2382 00:0295: 0B           	phd
  2383 00:0296: 5B           	tcd
  2384                        	.block	123
  2385                        ;	return *((int*)LINES_VISIBLE); //2 Bytes Columns
                     visible per screen line. A virtual line can be longer than 
                    displayed, up to COLS_PER_LINE long. Default  80
  2386                        	.line	124
  2387 00:0297: AF 13 00 00  	lda	>19
  2388                        L47:
  2389 00:029B: A8           	tay
  2390 00:029C: 2B           	pld
  2391 00:029D: 3B           	tsc
  2392 00:029E: 18           	clc
  2393 00:029F: 69 00 00     	adc	#L44
  2394 00:02A2: 1B           	tcs
  2395 00:02A3: 98           	tya
  2396 00:02A4: 6B           	rtl
  2397                        ;}
  2398                        	.line	125
  2399                        	.endblock	125
  2400             00000000   L44	equ	0
  2401             00000001   L45	equ	1
  2402                        	ends
  2403                        	efunc
  2404                        	.endfunc	125,1,0
  Mon Sep 27 2021  9:39                                                Page 47


  2405                        	.line	125
  2406                        ;
  2407                        ;int k_get_lines_max(void)
  2408                        ;{
  2409                        	.line	127
  2410                        	.line	128
  2411                        	code
  2412                        	xdef	~~k_get_lines_max
  2413                        	func
  2414                        	.function	128
  2415                        ~~k_get_lines_max:
  2416                        	longa	on
  2417                        	longi	on
  2418 00:02A5: 3B           	tsc
  2419 00:02A6: 38           	sec
  2420 00:02A7: E9 00 00     	sbc	#L48
  2421 00:02AA: 1B           	tcs
  2422 00:02AB: 0B           	phd
  2423 00:02AC: 5B           	tcd
  2424                        	.block	128
  2425                        ;	return *((int*)LINES_MAX); //2 Bytes Columns vis
                    ible per screen line. A virtual line can be longer than disp
                    layed, up to COLS_PER_LINE long. Default  80
  2426                        	.line	129
  2427 00:02AD: AF 15 00 00  	lda	>21
  2428                        L51:
  2429 00:02B1: A8           	tay
  2430 00:02B2: 2B           	pld
  2431 00:02B3: 3B           	tsc
  2432 00:02B4: 18           	clc
  2433 00:02B5: 69 00 00     	adc	#L48
  2434 00:02B8: 1B           	tcs
  2435 00:02B9: 98           	tya
  2436 00:02BA: 6B           	rtl
  2437                        ;}
  2438                        	.line	130
  2439                        	.endblock	130
  2440             00000000   L48	equ	0
  2441             00000001   L49	equ	1
  2442                        	ends
  2443                        	efunc
  2444                        	.endfunc	130,1,0
  2445                        	.line	130
  2446                        ;
  2447                        ;void k_enable_text_mode(void)
  2448                        ;{
  2449                        	.line	132
  2450                        	.line	133
  2451                        	code
  2452                        	xdef	~~k_enable_text_mode
  2453                        	func
  2454                        	.function	133
  2455                        ~~k_enable_text_mode:
  2456                        	longa	on
  2457                        	longi	on
  2458 00:02BB: 3B           	tsc
  2459 00:02BC: 38           	sec
  2460 00:02BD: E9 04 00     	sbc	#L52
  Mon Sep 27 2021  9:39                                                Page 48


  2461 00:02C0: 1B           	tcs
  2462 00:02C1: 0B           	phd
  2463 00:02C2: 5B           	tcd
  2464                        	.block	133
  2465                        ;	int i = 0;
  2466                        ;	int j = 0;
  2467                        ;
  2468                        ;	k_clear_console();
  2469             00000000   i_1	set	0
  2470             00000002   j_1	set	2
  2471                        	.sym	i,0,5,1,16
  2472                        	.sym	j,2,5,1,16
  2473 00:02C3: 64 01        	stz	<L53+i_1
  2474 00:02C5: 64 03        	stz	<L53+j_1
  2475                        	.line	137
  2476 00:02C7: 22 xx xx xx  	jsl	~~k_clear_console
  2477                        ;	k_clear_screen(0);
  2478                        	.line	138
  2479 00:02CB: F4 00 00     	pea	#<$0
  2480 00:02CE: 22 xx xx xx  	jsl	~~k_clear_screen
  2481                        ;
  2482                        ;	//k_debug_string("k_enable_bitmap_mode RESET 1a.
                    ..\r\n");
  2483                        ;
  2484                        ;	MASTER_CTRL_REG_H[0] = MSTR_CTRL_VIDEO_MODE0;
  2485                        	.line	142
  2486 00:02D2: E2 20        	sep	#$20
  2487                        	longa	off
  2488 00:02D4: A9 01        	lda	#$1
  2489 00:02D6: 8F 01 00 AF  	sta	>11468801
  2490 00:02DA: C2 20        	rep	#$20
  2491                        	longa	on
  2492                        ;	MASTER_CTRL_REG_L[0] = MSTR_CTRL_TEXT_MODE_EN;
  2493                        	.line	143
  2494 00:02DC: E2 20        	sep	#$20
  2495                        	longa	off
  2496 00:02DE: A9 01        	lda	#$1
  2497 00:02E0: 8F 00 00 AF  	sta	>11468800
  2498 00:02E4: C2 20        	rep	#$20
  2499                        	longa	on
  2500                        ;
  2501                        ;	for(i=3200;i>0;i--)
  2502                        	.line	145
  2503 00:02E6: A9 80 0C     	lda	#$c80
  2504 00:02E9: 85 01        	sta	<L53+i_1
  2505                        L10023:
  2506                        ;	{
  2507                        	.line	146
  2508                        ;		for(j=0;j<256;j++)
  2509                        	.line	147
  2510 00:02EB: 64 03        	stz	<L53+j_1
  2511                        L10026:
  2512                        ;		{
  2513                        	.line	148
  2514                        ;			asm NOP;
  2515                        	.line	149
  2516                        	asmstart
  2517 00:02ED: EA           	NOP
  Mon Sep 27 2021  9:39                                                Page 49


  2518                        	asmend
  2519                        ;		}
  2520                        	.line	150
  2521                        L10024:
  2522 00:02EE: E6 03        	inc	<L53+j_1
  2523 00:02F0: 38           	sec
  2524 00:02F1: A5 03        	lda	<L53+j_1
  2525 00:02F3: E9 00 01     	sbc	#<$100
  2526 00:02F6: 70 03        	bvs	L55
  2527 00:02F8: 49 00 80     	eor	#$8000
  2528                        L55:
  2529 00:02FB: 30 03        	bmi	L56
  2530 00:02FD: 82 ED FF     	brl	L10026
  2531                        L56:
  2532                        L10025:
  2533                        ;	}
  2534                        	.line	151
  2535                        L10021:
  2536 00:0300: C6 01        	dec	<L53+i_1
  2537 00:0302: 38           	sec
  2538 00:0303: A9 00 00     	lda	#$0
  2539 00:0306: E5 01        	sbc	<L53+i_1
  2540 00:0308: 70 03        	bvs	L57
  2541 00:030A: 49 00 80     	eor	#$8000
  2542                        L57:
  2543 00:030D: 30 03        	bmi	L58
  2544 00:030F: 82 D9 FF     	brl	L10023
  2545                        L58:
  2546                        L10022:
  2547                        ;
  2548                        ;	//k_debug_string("k_enable_bitmap_mode RESET 1b.
                    ..\r\n");
  2549                        ;	//k_clear_console();
  2550                        ;	//k_clear_screen(0);
  2551                        ;
  2552                        ;	MASTER_CTRL_REG_H[0] = MSTR_CTRL_VIDEO_MODE0;
  2553                        	.line	157
  2554 00:0312: E2 20        	sep	#$20
  2555                        	longa	off
  2556 00:0314: A9 01        	lda	#$1
  2557 00:0316: 8F 01 00 AF  	sta	>11468801
  2558 00:031A: C2 20        	rep	#$20
  2559                        	longa	on
  2560                        ;	MASTER_CTRL_REG_L[0] = MSTR_CTRL_TEXT_MODE_EN;
  2561                        	.line	158
  2562 00:031C: E2 20        	sep	#$20
  2563                        	longa	off
  2564 00:031E: A9 01        	lda	#$1
  2565 00:0320: 8F 00 00 AF  	sta	>11468800
  2566 00:0324: C2 20        	rep	#$20
  2567                        	longa	on
  2568                        ;
  2569                        ;	for(i=3200;i>0;i--)
  2570                        	.line	160
  2571 00:0326: A9 80 0C     	lda	#$c80
  2572 00:0329: 85 01        	sta	<L53+i_1
  2573                        L10029:
  2574                        ;	{
  Mon Sep 27 2021  9:39                                                Page 50


  2575                        	.line	161
  2576                        ;		for(j=0;j<256;j++)
  2577                        	.line	162
  2578 00:032B: 64 03        	stz	<L53+j_1
  2579                        L10032:
  2580                        ;		{
  2581                        	.line	163
  2582                        ;			asm NOP;
  2583                        	.line	164
  2584                        	asmstart
  2585 00:032D: EA           	NOP
  2586                        	asmend
  2587                        ;		}
  2588                        	.line	165
  2589                        L10030:
  2590 00:032E: E6 03        	inc	<L53+j_1
  2591 00:0330: 38           	sec
  2592 00:0331: A5 03        	lda	<L53+j_1
  2593 00:0333: E9 00 01     	sbc	#<$100
  2594 00:0336: 70 03        	bvs	L59
  2595 00:0338: 49 00 80     	eor	#$8000
  2596                        L59:
  2597 00:033B: 30 03        	bmi	L60
  2598 00:033D: 82 ED FF     	brl	L10032
  2599                        L60:
  2600                        L10031:
  2601                        ;	}
  2602                        	.line	166
  2603                        L10027:
  2604 00:0340: C6 01        	dec	<L53+i_1
  2605 00:0342: 38           	sec
  2606 00:0343: A9 00 00     	lda	#$0
  2607 00:0346: E5 01        	sbc	<L53+i_1
  2608 00:0348: 70 03        	bvs	L61
  2609 00:034A: 49 00 80     	eor	#$8000
  2610                        L61:
  2611 00:034D: 30 03        	bmi	L62
  2612 00:034F: 82 D9 FF     	brl	L10029
  2613                        L62:
  2614                        L10028:
  2615                        ;
  2616                        ;	//k_debug_string("k_enable_bitmap_mode RESET 1c.
                    ..\r\n");
  2617                        ;	//k_clear_console();
  2618                        ;	//k_clear_screen(0);
  2619                        ;
  2620                        ;	MASTER_CTRL_REG_H[0] = MSTR_CTRL_VIDEO_MODE0;
  2621                        	.line	172
  2622 00:0352: E2 20        	sep	#$20
  2623                        	longa	off
  2624 00:0354: A9 01        	lda	#$1
  2625 00:0356: 8F 01 00 AF  	sta	>11468801
  2626 00:035A: C2 20        	rep	#$20
  2627                        	longa	on
  2628                        ;	MASTER_CTRL_REG_L[0] = MSTR_CTRL_TEXT_MODE_EN;
  2629                        	.line	173
  2630 00:035C: E2 20        	sep	#$20
  2631                        	longa	off
  Mon Sep 27 2021  9:39                                                Page 51


  2632 00:035E: A9 01        	lda	#$1
  2633 00:0360: 8F 00 00 AF  	sta	>11468800
  2634 00:0364: C2 20        	rep	#$20
  2635                        	longa	on
  2636                        ;
  2637                        ;	for(i=3200;i>0;i--)
  2638                        	.line	175
  2639 00:0366: A9 80 0C     	lda	#$c80
  2640 00:0369: 85 01        	sta	<L53+i_1
  2641                        L10035:
  2642                        ;	{
  2643                        	.line	176
  2644                        ;		for(j=0;j<256;j++)
  2645                        	.line	177
  2646 00:036B: 64 03        	stz	<L53+j_1
  2647                        L10038:
  2648                        ;		{
  2649                        	.line	178
  2650                        ;			asm NOP;
  2651                        	.line	179
  2652                        	asmstart
  2653 00:036D: EA           	NOP
  2654                        	asmend
  2655                        ;		}
  2656                        	.line	180
  2657                        L10036:
  2658 00:036E: E6 03        	inc	<L53+j_1
  2659 00:0370: 38           	sec
  2660 00:0371: A5 03        	lda	<L53+j_1
  2661 00:0373: E9 00 01     	sbc	#<$100
  2662 00:0376: 70 03        	bvs	L63
  2663 00:0378: 49 00 80     	eor	#$8000
  2664                        L63:
  2665 00:037B: 30 03        	bmi	L64
  2666 00:037D: 82 ED FF     	brl	L10038
  2667                        L64:
  2668                        L10037:
  2669                        ;	}
  2670                        	.line	181
  2671                        L10033:
  2672 00:0380: C6 01        	dec	<L53+i_1
  2673 00:0382: 38           	sec
  2674 00:0383: A9 00 00     	lda	#$0
  2675 00:0386: E5 01        	sbc	<L53+i_1
  2676 00:0388: 70 03        	bvs	L65
  2677 00:038A: 49 00 80     	eor	#$8000
  2678                        L65:
  2679 00:038D: 30 03        	bmi	L66
  2680 00:038F: 82 D9 FF     	brl	L10035
  2681                        L66:
  2682                        L10034:
  2683                        ;
  2684                        ;
  2685                        ;	//k_debug_string("k_enable_text_mode RESET 1...\
                    r\n");
  2686                        ;	//k_clear_console();
  2687                        ;	//k_clear_screen(0);
  2688                        ;
  Mon Sep 27 2021  9:39                                                Page 52


  2689                        ;	MASTER_CTRL_REG_H[0] = 0x00;
  2690                        	.line	188
  2691 00:0392: E2 20        	sep	#$20
  2692                        	longa	off
  2693 00:0394: A9 00        	lda	#$0
  2694 00:0396: 8F 01 00 AF  	sta	>11468801
  2695 00:039A: C2 20        	rep	#$20
  2696                        	longa	on
  2697                        ;	MASTER_CTRL_REG_L[0] = MSTR_CTRL_TEXT_MODE_EN;
  2698                        	.line	189
  2699 00:039C: E2 20        	sep	#$20
  2700                        	longa	off
  2701 00:039E: A9 01        	lda	#$1
  2702 00:03A0: 8F 00 00 AF  	sta	>11468800
  2703 00:03A4: C2 20        	rep	#$20
  2704                        	longa	on
  2705                        ;
  2706                        ;	for(i=32;i>0;i--)
  2707                        	.line	191
  2708 00:03A6: A9 20 00     	lda	#$20
  2709 00:03A9: 85 01        	sta	<L53+i_1
  2710                        L10041:
  2711                        ;	{
  2712                        	.line	192
  2713                        ;		for(j=0;j<256;j++)
  2714                        	.line	193
  2715 00:03AB: 64 03        	stz	<L53+j_1
  2716                        L10044:
  2717                        ;		{
  2718                        	.line	194
  2719                        ;			asm NOP;
  2720                        	.line	195
  2721                        	asmstart
  2722 00:03AD: EA           	NOP
  2723                        	asmend
  2724                        ;		}
  2725                        	.line	196
  2726                        L10042:
  2727 00:03AE: E6 03        	inc	<L53+j_1
  2728 00:03B0: 38           	sec
  2729 00:03B1: A5 03        	lda	<L53+j_1
  2730 00:03B3: E9 00 01     	sbc	#<$100
  2731 00:03B6: 70 03        	bvs	L67
  2732 00:03B8: 49 00 80     	eor	#$8000
  2733                        L67:
  2734 00:03BB: 30 03        	bmi	L68
  2735 00:03BD: 82 ED FF     	brl	L10044
  2736                        L68:
  2737                        L10043:
  2738                        ;	}
  2739                        	.line	197
  2740                        L10039:
  2741 00:03C0: C6 01        	dec	<L53+i_1
  2742 00:03C2: 38           	sec
  2743 00:03C3: A9 00 00     	lda	#$0
  2744 00:03C6: E5 01        	sbc	<L53+i_1
  2745 00:03C8: 70 03        	bvs	L69
  2746 00:03CA: 49 00 80     	eor	#$8000
  Mon Sep 27 2021  9:39                                                Page 53


  2747                        L69:
  2748 00:03CD: 30 03        	bmi	L70
  2749 00:03CF: 82 D9 FF     	brl	L10041
  2750                        L70:
  2751                        L10040:
  2752                        ;
  2753                        ;	//k_clear_console();
  2754                        ;	//k_clear_screen(0);
  2755                        ;
  2756                        ;	//k_debug_string("k_enable_text_mode RESET 2...\
                    r\n");
  2757                        ;	MASTER_CTRL_REG_H[0] = 0x00;
  2758                        	.line	203
  2759 00:03D2: E2 20        	sep	#$20
  2760                        	longa	off
  2761 00:03D4: A9 00        	lda	#$0
  2762 00:03D6: 8F 01 00 AF  	sta	>11468801
  2763 00:03DA: C2 20        	rep	#$20
  2764                        	longa	on
  2765                        ;	MASTER_CTRL_REG_L[0] = MSTR_CTRL_TEXT_MODE_EN;
  2766                        	.line	204
  2767 00:03DC: E2 20        	sep	#$20
  2768                        	longa	off
  2769 00:03DE: A9 01        	lda	#$1
  2770 00:03E0: 8F 00 00 AF  	sta	>11468800
  2771 00:03E4: C2 20        	rep	#$20
  2772                        	longa	on
  2773                        ;
  2774                        ;	for(i=32;i>0;i--)
  2775                        	.line	206
  2776 00:03E6: A9 20 00     	lda	#$20
  2777 00:03E9: 85 01        	sta	<L53+i_1
  2778                        L10047:
  2779                        ;	{
  2780                        	.line	207
  2781                        ;		for(j=0;j<256;j++)
  2782                        	.line	208
  2783 00:03EB: 64 03        	stz	<L53+j_1
  2784                        L10050:
  2785                        ;		{
  2786                        	.line	209
  2787                        ;			asm NOP;
  2788                        	.line	210
  2789                        	asmstart
  2790 00:03ED: EA           	NOP
  2791                        	asmend
  2792                        ;		}
  2793                        	.line	211
  2794                        L10048:
  2795 00:03EE: E6 03        	inc	<L53+j_1
  2796 00:03F0: 38           	sec
  2797 00:03F1: A5 03        	lda	<L53+j_1
  2798 00:03F3: E9 00 01     	sbc	#<$100
  2799 00:03F6: 70 03        	bvs	L71
  2800 00:03F8: 49 00 80     	eor	#$8000
  2801                        L71:
  2802 00:03FB: 30 03        	bmi	L72
  2803 00:03FD: 82 ED FF     	brl	L10050
  Mon Sep 27 2021  9:39                                                Page 54


  2804                        L72:
  2805                        L10049:
  2806                        ;	}
  2807                        	.line	212
  2808                        L10045:
  2809 00:0400: C6 01        	dec	<L53+i_1
  2810 00:0402: 38           	sec
  2811 00:0403: A9 00 00     	lda	#$0
  2812 00:0406: E5 01        	sbc	<L53+i_1
  2813 00:0408: 70 03        	bvs	L73
  2814 00:040A: 49 00 80     	eor	#$8000
  2815                        L73:
  2816 00:040D: 30 03        	bmi	L74
  2817 00:040F: 82 D9 FF     	brl	L10047
  2818                        L74:
  2819                        L10046:
  2820                        ;
  2821                        ;	//k_debug_string("k_enable_text_mode RESET 3...\
                    r\n");
  2822                        ;	MASTER_CTRL_REG_H[0] = 0x00;
  2823                        	.line	215
  2824 00:0412: E2 20        	sep	#$20
  2825                        	longa	off
  2826 00:0414: A9 00        	lda	#$0
  2827 00:0416: 8F 01 00 AF  	sta	>11468801
  2828 00:041A: C2 20        	rep	#$20
  2829                        	longa	on
  2830                        ;	MASTER_CTRL_REG_L[0] = MSTR_CTRL_TEXT_MODE_EN;
  2831                        	.line	216
  2832 00:041C: E2 20        	sep	#$20
  2833                        	longa	off
  2834 00:041E: A9 01        	lda	#$1
  2835 00:0420: 8F 00 00 AF  	sta	>11468800
  2836 00:0424: C2 20        	rep	#$20
  2837                        	longa	on
  2838                        ;
  2839                        ;	for(i=32;i>0;i--)
  2840                        	.line	218
  2841 00:0426: A9 20 00     	lda	#$20
  2842 00:0429: 85 01        	sta	<L53+i_1
  2843                        L10053:
  2844                        ;	{
  2845                        	.line	219
  2846                        ;		for(j=0;j<256;j++)
  2847                        	.line	220
  2848 00:042B: 64 03        	stz	<L53+j_1
  2849                        L10056:
  2850                        ;		{
  2851                        	.line	221
  2852                        ;			asm NOP;
  2853                        	.line	222
  2854                        	asmstart
  2855 00:042D: EA           	NOP
  2856                        	asmend
  2857                        ;		}
  2858                        	.line	223
  2859                        L10054:
  2860 00:042E: E6 03        	inc	<L53+j_1
  Mon Sep 27 2021  9:39                                                Page 55


  2861 00:0430: 38           	sec
  2862 00:0431: A5 03        	lda	<L53+j_1
  2863 00:0433: E9 00 01     	sbc	#<$100
  2864 00:0436: 70 03        	bvs	L75
  2865 00:0438: 49 00 80     	eor	#$8000
  2866                        L75:
  2867 00:043B: 30 03        	bmi	L76
  2868 00:043D: 82 ED FF     	brl	L10056
  2869                        L76:
  2870                        L10055:
  2871                        ;	}
  2872                        	.line	224
  2873                        L10051:
  2874 00:0440: C6 01        	dec	<L53+i_1
  2875 00:0442: 38           	sec
  2876 00:0443: A9 00 00     	lda	#$0
  2877 00:0446: E5 01        	sbc	<L53+i_1
  2878 00:0448: 70 03        	bvs	L77
  2879 00:044A: 49 00 80     	eor	#$8000
  2880                        L77:
  2881 00:044D: 30 03        	bmi	L78
  2882 00:044F: 82 D9 FF     	brl	L10053
  2883                        L78:
  2884                        L10052:
  2885                        ;#asm
  2886                        	.line	225
  2887                        ;	NOP
  2888                        ;	NOP
  2889                        ;	NOP
  2890                        ;	NOP
  2891                        ;	NOP
  2892                        ;	NOP
  2893                        ;	NOP
  2894                        ;	NOP
  2895                        ;#endasm
  2896                        	asmstart
  2897 00:0452: EA           	NOP
  2898 00:0453: EA           	NOP
  2899 00:0454: EA           	NOP
  2900 00:0455: EA           	NOP
  2901 00:0456: EA           	NOP
  2902 00:0457: EA           	NOP
  2903 00:0458: EA           	NOP
  2904 00:0459: EA           	NOP
  2905                        	asmend
  2906                        ;
  2907                        ;	//MASTER_CTRL_REG_L[0] = MSTR_CTRL_DISABLE_VID;
  2908                        ;
  2909                        ;#asm
  2910                        	.line	238
  2911                        ;	NOP
  2912                        ;	NOP
  2913                        ;	NOP
  2914                        ;	NOP
  2915                        ;	NOP
  2916                        ;	NOP
  2917                        ;	NOP
  2918                        ;	NOP
  Mon Sep 27 2021  9:39                                                Page 56


  2919                        ;#endasm
  2920                        	asmstart
  2921 00:045A: EA           	NOP
  2922 00:045B: EA           	NOP
  2923 00:045C: EA           	NOP
  2924 00:045D: EA           	NOP
  2925 00:045E: EA           	NOP
  2926 00:045F: EA           	NOP
  2927 00:0460: EA           	NOP
  2928 00:0461: EA           	NOP
  2929                        	asmend
  2930                        ;
  2931                        ;	//MASTER_CTRL_REG_H[0] = 0;
  2932                        ;	MASTER_CTRL_REG_L[0] = MSTR_CTRL_TEXT_MODE_EN;
  2933                        	.line	250
  2934 00:0462: E2 20        	sep	#$20
  2935                        	longa	off
  2936 00:0464: A9 01        	lda	#$1
  2937 00:0466: 8F 00 00 AF  	sta	>11468800
  2938 00:046A: C2 20        	rep	#$20
  2939                        	longa	on
  2940                        ;
  2941                        ;}
  2942                        	.line	252
  2943                        L79:
  2944 00:046C: 2B           	pld
  2945 00:046D: 3B           	tsc
  2946 00:046E: 18           	clc
  2947 00:046F: 69 04 00     	adc	#L52
  2948 00:0472: 1B           	tcs
  2949 00:0473: 6B           	rtl
  2950                        	.endblock	252
  2951             00000004   L52	equ	4
  2952             00000001   L53	equ	1
  2953                        	ends
  2954                        	efunc
  2955                        	.endfunc	252,1,4
  2956                        	.line	252
  2957                        ;
  2958                        ;void k_enable_border(void)
  2959                        ;{
  2960                        	.line	254
  2961                        	.line	255
  2962                        	code
  2963                        	xdef	~~k_enable_border
  2964                        	func
  2965                        	.function	255
  2966                        ~~k_enable_border:
  2967                        	longa	on
  2968                        	longi	on
  2969 00:0474: 3B           	tsc
  2970 00:0475: 38           	sec
  2971 00:0476: E9 00 00     	sbc	#L80
  2972 00:0479: 1B           	tcs
  2973 00:047A: 0B           	phd
  2974 00:047B: 5B           	tcd
  2975                        	.block	255
  2976                        ;	BORDER_CTRL_REG[0] = BORDER_CTRL_ENABLE;
  Mon Sep 27 2021  9:39                                                Page 57


  2977                        	.line	256
  2978 00:047C: E2 20        	sep	#$20
  2979                        	longa	off
  2980 00:047E: A9 01        	lda	#$1
  2981 00:0480: 8F 04 00 AF  	sta	>11468804
  2982 00:0484: C2 20        	rep	#$20
  2983                        	longa	on
  2984                        ;}
  2985                        	.line	257
  2986                        L83:
  2987 00:0486: 2B           	pld
  2988 00:0487: 3B           	tsc
  2989 00:0488: 18           	clc
  2990 00:0489: 69 00 00     	adc	#L80
  2991 00:048C: 1B           	tcs
  2992 00:048D: 6B           	rtl
  2993                        	.endblock	257
  2994             00000000   L80	equ	0
  2995             00000001   L81	equ	1
  2996                        	ends
  2997                        	efunc
  2998                        	.endfunc	257,1,0
  2999                        	.line	257
  3000                        ;
  3001                        ;void k_disable_border(void)
  3002                        ;{
  3003                        	.line	259
  3004                        	.line	260
  3005                        	code
  3006                        	xdef	~~k_disable_border
  3007                        	func
  3008                        	.function	260
  3009                        ~~k_disable_border:
  3010                        	longa	on
  3011                        	longi	on
  3012 00:048E: 3B           	tsc
  3013 00:048F: 38           	sec
  3014 00:0490: E9 00 00     	sbc	#L84
  3015 00:0493: 1B           	tcs
  3016 00:0494: 0B           	phd
  3017 00:0495: 5B           	tcd
  3018                        	.block	260
  3019                        ;	BORDER_CTRL_REG[0] = 0x00 ;
  3020                        	.line	261
  3021 00:0496: E2 20        	sep	#$20
  3022                        	longa	off
  3023 00:0498: A9 00        	lda	#$0
  3024 00:049A: 8F 04 00 AF  	sta	>11468804
  3025 00:049E: C2 20        	rep	#$20
  3026                        	longa	on
  3027                        ;}
  3028                        	.line	262
  3029                        L87:
  3030 00:04A0: 2B           	pld
  3031 00:04A1: 3B           	tsc
  3032 00:04A2: 18           	clc
  3033 00:04A3: 69 00 00     	adc	#L84
  3034 00:04A6: 1B           	tcs
  Mon Sep 27 2021  9:39                                                Page 58


  3035 00:04A7: 6B           	rtl
  3036                        	.endblock	262
  3037             00000000   L84	equ	0
  3038             00000001   L85	equ	1
  3039                        	ends
  3040                        	efunc
  3041                        	.endfunc	262,1,0
  3042                        	.line	262
  3043                        ;
  3044                        ;void k_set_border(int x,int y,char r,char g,char 
                    b)
  3045                        ;{
  3046                        	.line	264
  3047                        	.line	265
  3048                        	code
  3049                        	xdef	~~k_set_border
  3050                        	func
  3051                        	.function	265
  3052                        ~~k_set_border:
  3053                        	longa	on
  3054                        	longi	on
  3055 00:04A8: 3B           	tsc
  3056 00:04A9: 38           	sec
  3057 00:04AA: E9 00 00     	sbc	#L88
  3058 00:04AD: 1B           	tcs
  3059 00:04AE: 0B           	phd
  3060 00:04AF: 5B           	tcd
  3061             00000004   x_0	set	4
  3062             00000006   y_0	set	6
  3063             00000008   r_0	set	8
  3064             0000000A   g_0	set	10
  3065             0000000C   b_0	set	12
  3066                        	.block	265
  3067                        ;	BORDER_COLOR_B[0] = b;
  3068                        	.sym	x,4,5,6,16
  3069                        	.sym	y,6,5,6,16
  3070                        	.sym	r,8,14,6,8
  3071                        	.sym	g,10,14,6,8
  3072                        	.sym	b,12,14,6,8
  3073                        	.line	266
  3074 00:04B0: E2 20        	sep	#$20
  3075                        	longa	off
  3076 00:04B2: A5 0C        	lda	<L88+b_0
  3077 00:04B4: 8F 05 00 AF  	sta	>11468805
  3078 00:04B8: C2 20        	rep	#$20
  3079                        	longa	on
  3080                        ;	BORDER_COLOR_G[0] = g;
  3081                        	.line	267
  3082 00:04BA: E2 20        	sep	#$20
  3083                        	longa	off
  3084 00:04BC: A5 0A        	lda	<L88+g_0
  3085 00:04BE: 8F 06 00 AF  	sta	>11468806
  3086 00:04C2: C2 20        	rep	#$20
  3087                        	longa	on
  3088                        ;	BORDER_COLOR_R[0] = r;
  3089                        	.line	268
  3090 00:04C4: E2 20        	sep	#$20
  3091                        	longa	off
  Mon Sep 27 2021  9:39                                                Page 59


  3092 00:04C6: A5 08        	lda	<L88+r_0
  3093 00:04C8: 8F 07 00 AF  	sta	>11468807
  3094 00:04CC: C2 20        	rep	#$20
  3095                        	longa	on
  3096                        ;
  3097                        ;    *BORDER_X_SIZE = x;
  3098                        	.line	270
  3099 00:04CE: E2 20        	sep	#$20
  3100                        	longa	off
  3101 00:04D0: A5 04        	lda	<L88+x_0
  3102 00:04D2: 8F 08 00 AF  	sta	>11468808
  3103 00:04D6: C2 20        	rep	#$20
  3104                        	longa	on
  3105                        ;    *BORDER_Y_SIZE = y;
  3106                        	.line	271
  3107 00:04D8: E2 20        	sep	#$20
  3108                        	longa	off
  3109 00:04DA: A5 06        	lda	<L88+y_0
  3110 00:04DC: 8F 09 00 AF  	sta	>11468809
  3111 00:04E0: C2 20        	rep	#$20
  3112                        	longa	on
  3113                        ;}
  3114                        	.line	272
  3115                        L91:
  3116 00:04E2: A5 02        	lda	<L88+2
  3117 00:04E4: 85 0C        	sta	<L88+2+10
  3118 00:04E6: A5 01        	lda	<L88+1
  3119 00:04E8: 85 0B        	sta	<L88+1+10
  3120 00:04EA: 2B           	pld
  3121 00:04EB: 3B           	tsc
  3122 00:04EC: 18           	clc
  3123 00:04ED: 69 0A 00     	adc	#L88+10
  3124 00:04F0: 1B           	tcs
  3125 00:04F1: 6B           	rtl
  3126                        	.endblock	272
  3127             00000000   L88	equ	0
  3128             00000001   L89	equ	1
  3129                        	ends
  3130                        	efunc
  3131                        	.endfunc	272,1,0
  3132                        	.line	272
  3133                        ;
  3134                        ;void k_set_border_color(char r,char g,char b)
  3135                        ;{
  3136                        	.line	274
  3137                        	.line	275
  3138                        	code
  3139                        	xdef	~~k_set_border_color
  3140                        	func
  3141                        	.function	275
  3142                        ~~k_set_border_color:
  3143                        	longa	on
  3144                        	longi	on
  3145 00:04F2: 3B           	tsc
  3146 00:04F3: 38           	sec
  3147 00:04F4: E9 00 00     	sbc	#L92
  3148 00:04F7: 1B           	tcs
  3149 00:04F8: 0B           	phd
  Mon Sep 27 2021  9:39                                                Page 60


  3150 00:04F9: 5B           	tcd
  3151             00000004   r_0	set	4
  3152             00000006   g_0	set	6
  3153             00000008   b_0	set	8
  3154                        	.block	275
  3155                        ;	BORDER_COLOR_B[0] = b;
  3156                        	.sym	r,4,14,6,8
  3157                        	.sym	g,6,14,6,8
  3158                        	.sym	b,8,14,6,8
  3159                        	.line	276
  3160 00:04FA: E2 20        	sep	#$20
  3161                        	longa	off
  3162 00:04FC: A5 08        	lda	<L92+b_0
  3163 00:04FE: 8F 05 00 AF  	sta	>11468805
  3164 00:0502: C2 20        	rep	#$20
  3165                        	longa	on
  3166                        ;	BORDER_COLOR_G[0] = g;
  3167                        	.line	277
  3168 00:0504: E2 20        	sep	#$20
  3169                        	longa	off
  3170 00:0506: A5 06        	lda	<L92+g_0
  3171 00:0508: 8F 06 00 AF  	sta	>11468806
  3172 00:050C: C2 20        	rep	#$20
  3173                        	longa	on
  3174                        ;	BORDER_COLOR_R[0] = r;
  3175                        	.line	278
  3176 00:050E: E2 20        	sep	#$20
  3177                        	longa	off
  3178 00:0510: A5 04        	lda	<L92+r_0
  3179 00:0512: 8F 07 00 AF  	sta	>11468807
  3180 00:0516: C2 20        	rep	#$20
  3181                        	longa	on
  3182                        ;}
  3183                        	.line	279
  3184                        L95:
  3185 00:0518: A5 02        	lda	<L92+2
  3186 00:051A: 85 08        	sta	<L92+2+6
  3187 00:051C: A5 01        	lda	<L92+1
  3188 00:051E: 85 07        	sta	<L92+1+6
  3189 00:0520: 2B           	pld
  3190 00:0521: 3B           	tsc
  3191 00:0522: 18           	clc
  3192 00:0523: 69 06 00     	adc	#L92+6
  3193 00:0526: 1B           	tcs
  3194 00:0527: 6B           	rtl
  3195                        	.endblock	279
  3196             00000000   L92	equ	0
  3197             00000001   L93	equ	1
  3198                        	ends
  3199                        	efunc
  3200                        	.endfunc	279,1,0
  3201                        	.line	279
  3202                        ;
  3203                        ;void k_clear_screen(int bcolor)
  3204                        ;{
  3205                        	.line	281
  3206                        	.line	282
  3207                        	code
  Mon Sep 27 2021  9:39                                                Page 61


  3208                        	xdef	~~k_clear_screen
  3209                        	func
  3210                        	.function	282
  3211                        ~~k_clear_screen:
  3212                        	longa	on
  3213                        	longi	on
  3214 00:0528: 3B           	tsc
  3215 00:0529: 38           	sec
  3216 00:052A: E9 00 00     	sbc	#L96
  3217 00:052D: 1B           	tcs
  3218 00:052E: 0B           	phd
  3219 00:052F: 5B           	tcd
  3220             00000004   bcolor_0	set	4
  3221                        	.block	282
  3222                        ;	//memset((unsigned char FAR *)0xAFA000,0,0xAFA00
                    0 + 0xC000);
  3223                        ;	//memset((unsigned char FAR *)0xAFC000,bcolor,0x
                    AFA000 + 0xC000);
  3224                        ;	memset((unsigned char FAR *)0xAFA000,0,0xC000);
  3225                        	.sym	bcolor,4,5,6,16
  3226                        	.line	285
  3227 00:0530: F4 00 C0     	pea	#<$c000
  3228 00:0533: F4 00 00     	pea	#<$0
  3229 00:0536: F4 AF 00     	pea	#^$afa000
  3230 00:0539: F4 00 A0     	pea	#<$afa000
  3231 00:053C: 22 xx xx xx  	jsl	~~memset
  3232                        ;	memset((unsigned char FAR *)0xAFC000,bcolor,0xC0
                    00);
  3233                        	.line	286
  3234 00:0540: F4 00 C0     	pea	#<$c000
  3235 00:0543: D4 04        	pei	<L96+bcolor_0
  3236 00:0545: F4 AF 00     	pea	#^$afc000
  3237 00:0548: F4 00 C0     	pea	#<$afc000
  3238 00:054B: 22 xx xx xx  	jsl	~~memset
  3239                        ;
  3240                        ;}
  3241                        	.line	288
  3242                        L99:
  3243 00:054F: A5 02        	lda	<L96+2
  3244 00:0551: 85 04        	sta	<L96+2+2
  3245 00:0553: A5 01        	lda	<L96+1
  3246 00:0555: 85 03        	sta	<L96+1+2
  3247 00:0557: 2B           	pld
  3248 00:0558: 3B           	tsc
  3249 00:0559: 18           	clc
  3250 00:055A: 69 02 00     	adc	#L96+2
  3251 00:055D: 1B           	tcs
  3252 00:055E: 6B           	rtl
  3253                        	.endblock	288
  3254             00000000   L96	equ	0
  3255             00000001   L97	equ	1
  3256                        	ends
  3257                        	efunc
  3258                        	.endfunc	288,1,0
  3259                        	.line	288
  3260                        ;
  3261                        ;void k_clear_console(VOID)
  3262                        ;{
  Mon Sep 27 2021  9:39                                                Page 62


  3263                        	.line	290
  3264                        	.line	291
  3265                        	code
  3266                        	xdef	~~k_clear_console
  3267                        	func
  3268                        	.function	291
  3269                        ~~k_clear_console:
  3270                        	longa	on
  3271                        	longi	on
  3272 00:055F: 3B           	tsc
  3273 00:0560: 38           	sec
  3274 00:0561: E9 04 00     	sbc	#L100
  3275 00:0564: 1B           	tcs
  3276 00:0565: 0B           	phd
  3277 00:0566: 5B           	tcd
  3278                        	.block	291
  3279                        ;	PFXZEROPAGE zp = k_getZeroPage();
  3280                        ;	if(zp)
  3281             00000000   zp_1	set	0
  3282                        	.sym	zp,0,138,1,32,55
  3283 00:0567: 22 xx xx xx  	jsl	~~k_getZeroPage
  3284 00:056B: 85 01        	sta	<L101+zp_1
  3285 00:056D: 86 03        	stx	<L101+zp_1+2
  3286                        	.line	293
  3287                        ;	{
  3288 00:056F: A5 01        	lda	<L101+zp_1
  3289 00:0571: 05 03        	ora	<L101+zp_1+2
  3290 00:0573: D0 03        	bne	L103
  3291 00:0575: 82 17 00     	brl	L10057
  3292                        L103:
  3293                        	.line	294
  3294                        ;		k_clear_screen(0x00);
  3295                        	.line	295
  3296 00:0578: F4 00 00     	pea	#<$0
  3297 00:057B: 22 xx xx xx  	jsl	~~k_clear_screen
  3298                        ;		zp->fxos_console_col = 0;
  3299                        	.line	296
  3300 00:057F: A9 00 00     	lda	#$0
  3301 00:0582: A0 30 00     	ldy	#$30
  3302 00:0585: 97 01        	sta	[<L101+zp_1],Y
  3303                        ;		zp->fxos_console_row = CONSOLE_FIRST_LIN
                    E;
  3304                        	.line	297
  3305 00:0587: A9 05 00     	lda	#$5
  3306 00:058A: A0 2E 00     	ldy	#$2e
  3307 00:058D: 97 01        	sta	[<L101+zp_1],Y
  3308                        ;	}
  3309                        	.line	298
  3310                        ;}
  3311                        L10057:
  3312                        	.line	299
  3313                        L104:
  3314 00:058F: 2B           	pld
  3315 00:0590: 3B           	tsc
  3316 00:0591: 18           	clc
  3317 00:0592: 69 04 00     	adc	#L100
  3318 00:0595: 1B           	tcs
  3319 00:0596: 6B           	rtl
  Mon Sep 27 2021  9:39                                                Page 63


  3320                        	.endblock	299
  3321             00000004   L100	equ	4
  3322             00000001   L101	equ	1
  3323                        	ends
  3324                        	efunc
  3325                        	.endfunc	299,1,4
  3326                        	.line	299
  3327                        ;
  3328                        ;void k_pos_console(int row,int col)
  3329                        ;{
  3330                        	.line	301
  3331                        	.line	302
  3332                        	code
  3333                        	xdef	~~k_pos_console
  3334                        	func
  3335                        	.function	302
  3336                        ~~k_pos_console:
  3337                        	longa	on
  3338                        	longi	on
  3339 00:0597: 3B           	tsc
  3340 00:0598: 38           	sec
  3341 00:0599: E9 04 00     	sbc	#L105
  3342 00:059C: 1B           	tcs
  3343 00:059D: 0B           	phd
  3344 00:059E: 5B           	tcd
  3345             00000004   row_0	set	4
  3346             00000006   col_0	set	6
  3347                        	.block	302
  3348                        ;	PFXZEROPAGE zp = k_getZeroPage();
  3349                        ;	if(zp)
  3350             00000000   zp_1	set	0
  3351                        	.sym	zp,0,138,1,32,55
  3352                        	.sym	row,4,5,6,16
  3353                        	.sym	col,6,5,6,16
  3354 00:059F: 22 xx xx xx  	jsl	~~k_getZeroPage
  3355 00:05A3: 85 01        	sta	<L106+zp_1
  3356 00:05A5: 86 03        	stx	<L106+zp_1+2
  3357                        	.line	304
  3358                        ;	{
  3359 00:05A7: A5 01        	lda	<L106+zp_1
  3360 00:05A9: 05 03        	ora	<L106+zp_1+2
  3361 00:05AB: D0 03        	bne	L108
  3362 00:05AD: 82 0E 00     	brl	L10058
  3363                        L108:
  3364                        	.line	305
  3365                        ;		zp->fxos_console_col = col;
  3366                        	.line	306
  3367 00:05B0: A5 0A        	lda	<L105+col_0
  3368 00:05B2: A0 30 00     	ldy	#$30
  3369 00:05B5: 97 01        	sta	[<L106+zp_1],Y
  3370                        ;		zp->fxos_console_row = row;
  3371                        	.line	307
  3372 00:05B7: A5 08        	lda	<L105+row_0
  3373 00:05B9: A0 2E 00     	ldy	#$2e
  3374 00:05BC: 97 01        	sta	[<L106+zp_1],Y
  3375                        ;	}
  3376                        	.line	308
  3377                        ;}
  Mon Sep 27 2021  9:39                                                Page 64


  3378                        L10058:
  3379                        	.line	309
  3380                        L109:
  3381 00:05BE: A5 06        	lda	<L105+2
  3382 00:05C0: 85 0A        	sta	<L105+2+4
  3383 00:05C2: A5 05        	lda	<L105+1
  3384 00:05C4: 85 09        	sta	<L105+1+4
  3385 00:05C6: 2B           	pld
  3386 00:05C7: 3B           	tsc
  3387 00:05C8: 18           	clc
  3388 00:05C9: 69 08 00     	adc	#L105+4
  3389 00:05CC: 1B           	tcs
  3390 00:05CD: 6B           	rtl
  3391                        	.endblock	309
  3392             00000004   L105	equ	4
  3393             00000001   L106	equ	1
  3394                        	ends
  3395                        	efunc
  3396                        	.endfunc	309,1,4
  3397                        	.line	309
  3398                        ;
  3399                        ;int k_row_console()
  3400                        ;{
  3401                        	.line	311
  3402                        	.line	312
  3403                        	code
  3404                        	xdef	~~k_row_console
  3405                        	func
  3406                        	.function	312
  3407                        ~~k_row_console:
  3408                        	longa	on
  3409                        	longi	on
  3410 00:05CE: 3B           	tsc
  3411 00:05CF: 38           	sec
  3412 00:05D0: E9 04 00     	sbc	#L110
  3413 00:05D3: 1B           	tcs
  3414 00:05D4: 0B           	phd
  3415 00:05D5: 5B           	tcd
  3416                        	.block	312
  3417                        ;	PFXZEROPAGE zp = k_getZeroPage();
  3418                        ;	if(zp)
  3419             00000000   zp_1	set	0
  3420                        	.sym	zp,0,138,1,32,55
  3421 00:05D6: 22 xx xx xx  	jsl	~~k_getZeroPage
  3422 00:05DA: 85 01        	sta	<L111+zp_1
  3423 00:05DC: 86 03        	stx	<L111+zp_1+2
  3424                        	.line	314
  3425                        ;	{
  3426 00:05DE: A5 01        	lda	<L111+zp_1
  3427 00:05E0: 05 03        	ora	<L111+zp_1+2
  3428 00:05E2: D0 03        	bne	L113
  3429 00:05E4: 82 0F 00     	brl	L10059
  3430                        L113:
  3431                        	.line	315
  3432                        ;		return zp->fxos_console_row;
  3433                        	.line	316
  3434 00:05E7: A0 2E 00     	ldy	#$2e
  3435 00:05EA: B7 01        	lda	[<L111+zp_1],Y
  Mon Sep 27 2021  9:39                                                Page 65


  3436                        L114:
  3437 00:05EC: A8           	tay
  3438 00:05ED: 2B           	pld
  3439 00:05EE: 3B           	tsc
  3440 00:05EF: 18           	clc
  3441 00:05F0: 69 04 00     	adc	#L110
  3442 00:05F3: 1B           	tcs
  3443 00:05F4: 98           	tya
  3444 00:05F5: 6B           	rtl
  3445                        ;	}
  3446                        	.line	317
  3447                        ;
  3448                        ;	return 0;
  3449                        L10059:
  3450                        	.line	319
  3451 00:05F6: A9 00 00     	lda	#$0
  3452 00:05F9: 82 F0 FF     	brl	L114
  3453                        ;}
  3454                        	.line	320
  3455                        	.endblock	320
  3456             00000004   L110	equ	4
  3457             00000001   L111	equ	1
  3458                        	ends
  3459                        	efunc
  3460                        	.endfunc	320,1,4
  3461                        	.line	320
  3462                        ;
  3463                        ;int k_col_console()
  3464                        ;{
  3465                        	.line	322
  3466                        	.line	323
  3467                        	code
  3468                        	xdef	~~k_col_console
  3469                        	func
  3470                        	.function	323
  3471                        ~~k_col_console:
  3472                        	longa	on
  3473                        	longi	on
  3474 00:05FC: 3B           	tsc
  3475 00:05FD: 38           	sec
  3476 00:05FE: E9 04 00     	sbc	#L115
  3477 00:0601: 1B           	tcs
  3478 00:0602: 0B           	phd
  3479 00:0603: 5B           	tcd
  3480                        	.block	323
  3481                        ;	PFXZEROPAGE zp = k_getZeroPage();
  3482                        ;	if(zp)
  3483             00000000   zp_1	set	0
  3484                        	.sym	zp,0,138,1,32,55
  3485 00:0604: 22 xx xx xx  	jsl	~~k_getZeroPage
  3486 00:0608: 85 01        	sta	<L116+zp_1
  3487 00:060A: 86 03        	stx	<L116+zp_1+2
  3488                        	.line	325
  3489                        ;	{
  3490 00:060C: A5 01        	lda	<L116+zp_1
  3491 00:060E: 05 03        	ora	<L116+zp_1+2
  3492 00:0610: D0 03        	bne	L118
  3493 00:0612: 82 0F 00     	brl	L10060
  Mon Sep 27 2021  9:39                                                Page 66


  3494                        L118:
  3495                        	.line	326
  3496                        ;		return zp->fxos_console_col;
  3497                        	.line	327
  3498 00:0615: A0 30 00     	ldy	#$30
  3499 00:0618: B7 01        	lda	[<L116+zp_1],Y
  3500                        L119:
  3501 00:061A: A8           	tay
  3502 00:061B: 2B           	pld
  3503 00:061C: 3B           	tsc
  3504 00:061D: 18           	clc
  3505 00:061E: 69 04 00     	adc	#L115
  3506 00:0621: 1B           	tcs
  3507 00:0622: 98           	tya
  3508 00:0623: 6B           	rtl
  3509                        ;	}
  3510                        	.line	328
  3511                        ;
  3512                        ;	return 0;
  3513                        L10060:
  3514                        	.line	330
  3515 00:0624: A9 00 00     	lda	#$0
  3516 00:0627: 82 F0 FF     	brl	L119
  3517                        ;}
  3518                        	.line	331
  3519                        	.endblock	331
  3520             00000004   L115	equ	4
  3521             00000001   L116	equ	1
  3522                        	ends
  3523                        	efunc
  3524                        	.endfunc	331,1,4
  3525                        	.line	331
  3526                        ;
  3527                        ;int k_write_console(LPCSTR message)
  3528                        ;{
  3529                        	.line	333
  3530                        	.line	334
  3531                        	code
  3532                        	xdef	~~k_write_console
  3533                        	func
  3534                        	.function	334
  3535                        ~~k_write_console:
  3536                        	longa	on
  3537                        	longi	on
  3538 00:062A: 3B           	tsc
  3539 00:062B: 38           	sec
  3540 00:062C: E9 1C 00     	sbc	#L120
  3541 00:062F: 1B           	tcs
  3542 00:0630: 0B           	phd
  3543 00:0631: 5B           	tcd
  3544             00000004   message_0	set	4
  3545                        	.block	334
  3546                        ;	LPCSTR token = "\n";
  3547                        ;	LPCHAR line = NULL;
  3548                        ;	LPCHAR cl = NULL;
  3549                        ;	PFXZEROPAGE zp = k_getZeroPage();
  3550                        ;	if(zp)
  3551             00000000   token_1	set	0
  Mon Sep 27 2021  9:39                                                Page 67


  3552             00000004   line_1	set	4
  3553             00000008   cl_1	set	8
  3554             0000000C   zp_1	set	12
  3555                        	.sym	token,0,142,1,32
  3556                        	.sym	line,4,142,1,32
  3557                        	.sym	cl,8,142,1,32
  3558                        	.sym	zp,12,138,1,32,55
  3559                        	.sym	message,4,142,6,32
  3560 00:0632: A9 xx xx     	lda	#<L3
  3561 00:0635: 85 09        	sta	<L121+token_1
  3562 00:0637: A9 xx xx     	lda	#^L3
  3563 00:063A: 85 0B        	sta	<L121+token_1+2
  3564 00:063C: 64 0D        	stz	<L121+line_1
  3565 00:063E: 64 0F        	stz	<L121+line_1+2
  3566 00:0640: 64 11        	stz	<L121+cl_1
  3567 00:0642: 64 13        	stz	<L121+cl_1+2
  3568 00:0644: 22 xx xx xx  	jsl	~~k_getZeroPage
  3569 00:0648: 85 15        	sta	<L121+zp_1
  3570 00:064A: 86 17        	stx	<L121+zp_1+2
  3571                        	.line	339
  3572                        ;	{
  3573 00:064C: A5 15        	lda	<L121+zp_1
  3574 00:064E: 05 17        	ora	<L121+zp_1+2
  3575 00:0650: D0 03        	bne	L123
  3576 00:0652: 82 2B 01     	brl	L10061
  3577                        L123:
  3578                        	.line	340
  3579                        ;		line = k_mem_allocate_heap(strlen(messag
                    e) + 1);
  3580                        	.line	341
  3581 00:0655: D4 22        	pei	<L120+message_0+2
  3582 00:0657: D4 20        	pei	<L120+message_0
  3583 00:0659: 22 xx xx xx  	jsl	~~strlen
  3584 00:065D: 85 01        	sta	<R0
  3585 00:065F: A5 01        	lda	<R0
  3586 00:0661: 1A           	ina
  3587 00:0662: 85 05        	sta	<R1
  3588 00:0664: A5 05        	lda	<R1
  3589 00:0666: 85 01        	sta	<R0
  3590 00:0668: 64 03        	stz	<R0+2
  3591 00:066A: D4 03        	pei	<R0+2
  3592 00:066C: D4 01        	pei	<R0
  3593 00:066E: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  3594 00:0672: 85 0D        	sta	<L121+line_1
  3595 00:0674: 86 0F        	stx	<L121+line_1+2
  3596                        ;		//strcpy(line,message);
  3597                        ;
  3598                        ;
  3599                        ;
  3600                        ;
  3601                        ;		if(strchr(message,'\n'))
  3602                        	.line	347
  3603                        ;		{
  3604 00:0676: F4 0A 00     	pea	#<$a
  3605 00:0679: D4 22        	pei	<L120+message_0+2
  3606 00:067B: D4 20        	pei	<L120+message_0
  3607 00:067D: 22 xx xx xx  	jsl	~~strchr
  3608 00:0681: 85 01        	sta	<R0
  Mon Sep 27 2021  9:39                                                Page 68


  3609 00:0683: 86 03        	stx	<R0+2
  3610 00:0685: A5 01        	lda	<R0
  3611 00:0687: 05 03        	ora	<R0+2
  3612 00:0689: D0 03        	bne	L124
  3613 00:068B: 82 B4 00     	brl	L10062
  3614                        L124:
  3615                        	.line	348
  3616                        ;			int c = 0;
  3617                        ;			int lc = 0;
  3618                        ;			line[0] = 0;
  3619                        	.block	351
  3620             00000010   c_2	set	16
  3621             00000012   lc_2	set	18
  3622                        	.sym	c,16,5,1,16
  3623                        	.sym	lc,18,5,1,16
  3624 00:068E: 64 19        	stz	<L121+c_2
  3625 00:0690: 64 1B        	stz	<L121+lc_2
  3626                        	.line	351
  3627 00:0692: E2 20        	sep	#$20
  3628                        	longa	off
  3629 00:0694: A9 00        	lda	#$0
  3630 00:0696: 87 0D        	sta	[<L121+line_1]
  3631 00:0698: C2 20        	rep	#$20
  3632                        	longa	on
  3633                        ;			while(message[c]!=0)
  3634                        	.line	352
  3635                        L10063:
  3636 00:069A: A4 19        	ldy	<L121+c_2
  3637 00:069C: B7 20        	lda	[<L120+message_0],Y
  3638 00:069E: 29 FF 00     	and	#$ff
  3639 00:06A1: D0 03        	bne	L126
  3640 00:06A3: 82 70 00     	brl	L10064
  3641                        L126:
  3642                        ;			{
  3643                        	.line	353
  3644                        ;				if(message[c] == '\n')
  3645                        	.line	354
  3646                        ;				{
  3647 00:06A6: E2 20        	sep	#$20
  3648                        	longa	off
  3649 00:06A8: A4 19        	ldy	<L121+c_2
  3650 00:06AA: B7 20        	lda	[<L120+message_0],Y
  3651 00:06AC: C9 0A        	cmp	#<$a
  3652 00:06AE: C2 20        	rep	#$20
  3653                        	longa	on
  3654 00:06B0: F0 03        	beq	L127
  3655 00:06B2: 82 4E 00     	brl	L10065
  3656                        L127:
  3657                        	.line	355
  3658                        ;					//k_debug_string
                    ("found lf\r\n");
  3659                        ;					if(line[0]!=0)
  3660                        	.line	357
  3661                        ;					{
  3662 00:06B5: A7 0D        	lda	[<L121+line_1]
  3663 00:06B7: 29 FF 00     	and	#$ff
  3664 00:06BA: D0 03        	bne	L128
  3665 00:06BC: 82 24 00     	brl	L10066
  Mon Sep 27 2021  9:39                                                Page 69


  3666                        L128:
  3667                        	.line	358
  3668                        ;						//k_debu
                    g_strings("line:",(LPSTR)line);
  3669                        ;						line[lc]
                     = 0;
  3670                        	.line	360
  3671 00:06BF: E2 20        	sep	#$20
  3672                        	longa	off
  3673 00:06C1: A9 00        	lda	#$0
  3674 00:06C3: A4 1B        	ldy	<L121+lc_2
  3675 00:06C5: 97 0D        	sta	[<L121+line_1],Y
  3676 00:06C7: C2 20        	rep	#$20
  3677                        	longa	on
  3678                        ;						k_put_st
                    ring(zp->fxos_console_col,zp->fxos_console_row,(LPSTR)line,0
                    x0F,0x00);
  3679                        	.line	361
  3680 00:06C9: F4 00 00     	pea	#<$0
  3681 00:06CC: F4 0F 00     	pea	#<$f
  3682 00:06CF: D4 0F        	pei	<L121+line_1+2
  3683 00:06D1: D4 0D        	pei	<L121+line_1
  3684 00:06D3: A0 2E 00     	ldy	#$2e
  3685 00:06D6: B7 15        	lda	[<L121+zp_1],Y
  3686 00:06D8: 48           	pha
  3687 00:06D9: A0 30 00     	ldy	#$30
  3688 00:06DC: B7 15        	lda	[<L121+zp_1],Y
  3689 00:06DE: 48           	pha
  3690 00:06DF: 22 xx xx xx  	jsl	~~k_put_string
  3691                        ;					}
  3692                        	.line	362
  3693                        ;					zp->fxos_console
                    _row++;
  3694                        L10066:
  3695                        	.line	363
  3696 00:06E3: A0 2E 00     	ldy	#$2e
  3697 00:06E6: B7 15        	lda	[<L121+zp_1],Y
  3698 00:06E8: 1A           	ina
  3699 00:06E9: A0 2E 00     	ldy	#$2e
  3700 00:06EC: 97 15        	sta	[<L121+zp_1],Y
  3701                        ;					zp->fxos_console
                    _col = CONSOLE_FIRST_LINE;
  3702                        	.line	364
  3703 00:06EE: A9 05 00     	lda	#$5
  3704 00:06F1: A0 30 00     	ldy	#$30
  3705 00:06F4: 97 15        	sta	[<L121+zp_1],Y
  3706                        ;					line[0] = 0;
  3707                        	.line	365
  3708 00:06F6: E2 20        	sep	#$20
  3709                        	longa	off
  3710 00:06F8: A9 00        	lda	#$0
  3711 00:06FA: 87 0D        	sta	[<L121+line_1]
  3712 00:06FC: C2 20        	rep	#$20
  3713                        	longa	on
  3714                        ;					lc = 0;
  3715                        	.line	366
  3716 00:06FE: 64 1B        	stz	<L121+lc_2
  3717                        ;				}
  Mon Sep 27 2021  9:39                                                Page 70


  3718                        	.line	367
  3719                        ;				else
  3720 00:0700: 82 0E 00     	brl	L10067
  3721                        L10065:
  3722                        ;				{
  3723                        	.line	369
  3724                        ;					//k_debug_string
                    ("found c\r\n");
  3725                        ;					line[lc] = messa
                    ge[c];
  3726                        	.line	371
  3727 00:0703: E2 20        	sep	#$20
  3728                        	longa	off
  3729 00:0705: A4 19        	ldy	<L121+c_2
  3730 00:0707: B7 20        	lda	[<L120+message_0],Y
  3731 00:0709: A4 1B        	ldy	<L121+lc_2
  3732 00:070B: 97 0D        	sta	[<L121+line_1],Y
  3733 00:070D: C2 20        	rep	#$20
  3734                        	longa	on
  3735                        ;					lc++;
  3736                        	.line	372
  3737 00:070F: E6 1B        	inc	<L121+lc_2
  3738                        ;				}
  3739                        	.line	373
  3740                        L10067:
  3741                        ;				c++;
  3742                        	.line	374
  3743 00:0711: E6 19        	inc	<L121+c_2
  3744                        ;			}
  3745                        	.line	375
  3746 00:0713: 82 84 FF     	brl	L10063
  3747                        L10064:
  3748                        ;
  3749                        ;			if(line[0]!=0)
  3750                        	.line	377
  3751                        ;			{
  3752 00:0716: A7 0D        	lda	[<L121+line_1]
  3753 00:0718: 29 FF 00     	and	#$ff
  3754 00:071B: D0 03        	bne	L129
  3755 00:071D: 82 1F 00     	brl	L10068
  3756                        L129:
  3757                        	.line	378
  3758                        ;				//k_debug_string("found 
                    last\r\n");
  3759                        ;				zp->fxos_console_col = k
                    _put_string(zp->fxos_console_col,zp->fxos_console_row,(LPSTR
                    )line,0x0F,0x00);
  3760                        	.line	380
  3761 00:0720: F4 00 00     	pea	#<$0
  3762 00:0723: F4 0F 00     	pea	#<$f
  3763 00:0726: D4 0F        	pei	<L121+line_1+2
  3764 00:0728: D4 0D        	pei	<L121+line_1
  3765 00:072A: A0 2E 00     	ldy	#$2e
  3766 00:072D: B7 15        	lda	[<L121+zp_1],Y
  3767 00:072F: 48           	pha
  3768 00:0730: A0 30 00     	ldy	#$30
  3769 00:0733: B7 15        	lda	[<L121+zp_1],Y
  3770 00:0735: 48           	pha
  Mon Sep 27 2021  9:39                                                Page 71


  3771 00:0736: 22 xx xx xx  	jsl	~~k_put_string
  3772 00:073A: A0 30 00     	ldy	#$30
  3773 00:073D: 97 15        	sta	[<L121+zp_1],Y
  3774                        ;			}
  3775                        	.line	381
  3776                        ;
  3777                        ;			/*
  3778                        ;			cl = strtok(line,token);
  3779                        ;			while(cl)
  3780                        ;			{
  3781                        ;				k_put_string(zp->fxos_co
                    nsole_col,zp->fxos_console_row++,(LPSTR)cl,0x0F,0x00);
  3782                        ;				zp->fxos_console_col = 0
                    ;
  3783                        ;				cl = strtok(NULL,token);
  3784                        ;			}
  3785                        ;			*/
  3786                        ;		}
  3787                        L10068:
  3788                        	.endblock	392
  3789                        	.line	392
  3790                        ;		else
  3791 00:073F: 82 1F 00     	brl	L10069
  3792                        L10062:
  3793                        ;		{
  3794                        	.line	394
  3795                        ;			//k_debug_string("found no char\
                    r\n");
  3796                        ;			zp->fxos_console_col = k_put_str
                    ing(zp->fxos_console_col,zp->fxos_console_row,(LPSTR)message
                    ,0x0F,0x00);
  3797                        	.line	396
  3798 00:0742: F4 00 00     	pea	#<$0
  3799 00:0745: F4 0F 00     	pea	#<$f
  3800 00:0748: D4 22        	pei	<L120+message_0+2
  3801 00:074A: D4 20        	pei	<L120+message_0
  3802 00:074C: A0 2E 00     	ldy	#$2e
  3803 00:074F: B7 15        	lda	[<L121+zp_1],Y
  3804 00:0751: 48           	pha
  3805 00:0752: A0 30 00     	ldy	#$30
  3806 00:0755: B7 15        	lda	[<L121+zp_1],Y
  3807 00:0757: 48           	pha
  3808 00:0758: 22 xx xx xx  	jsl	~~k_put_string
  3809 00:075C: A0 30 00     	ldy	#$30
  3810 00:075F: 97 15        	sta	[<L121+zp_1],Y
  3811                        ;		}
  3812                        	.line	397
  3813                        L10069:
  3814                        ;
  3815                        ;		k_mem_deallocate_heap(line);
  3816                        	.line	399
  3817 00:0761: D4 0F        	pei	<L121+line_1+2
  3818 00:0763: D4 0D        	pei	<L121+line_1
  3819 00:0765: 22 xx xx xx  	jsl	~~k_mem_deallocate_heap
  3820                        ;
  3821                        ;		return zp->fxos_console_col;
  3822                        	.line	401
  3823 00:0769: A0 30 00     	ldy	#$30
  Mon Sep 27 2021  9:39                                                Page 72


  3824 00:076C: B7 15        	lda	[<L121+zp_1],Y
  3825                        L130:
  3826 00:076E: A8           	tay
  3827 00:076F: A5 1E        	lda	<L120+2
  3828 00:0771: 85 22        	sta	<L120+2+4
  3829 00:0773: A5 1D        	lda	<L120+1
  3830 00:0775: 85 21        	sta	<L120+1+4
  3831 00:0777: 2B           	pld
  3832 00:0778: 3B           	tsc
  3833 00:0779: 18           	clc
  3834 00:077A: 69 20 00     	adc	#L120+4
  3835 00:077D: 1B           	tcs
  3836 00:077E: 98           	tya
  3837 00:077F: 6B           	rtl
  3838                        ;	}
  3839                        	.line	402
  3840                        ;	return 0;
  3841                        L10061:
  3842                        	.line	403
  3843 00:0780: A9 00 00     	lda	#$0
  3844 00:0783: 82 E8 FF     	brl	L130
  3845                        ;}
  3846                        	.line	404
  3847                        	.endblock	404
  3848             0000001C   L120	equ	28
  3849             00000009   L121	equ	9
  3850                        	ends
  3851                        	efunc
  3852                        	.endfunc	404,9,28
  3853                        	.line	404
  3854                        	data
  3855                        L3:
  3856 00:0285: 0A 00        	db	$0A,$00
  3857 00:0287:              	ends
  3858                        ;
  3859                        ;int k_put_string(int col,int row,char * text,int 
                    fcolor,int bcolor)
  3860                        ;{
  3861                        	.line	406
  3862                        	.line	407
  3863                        	code
  3864                        	xdef	~~k_put_string
  3865                        	func
  3866                        	.function	407
  3867                        ~~k_put_string:
  3868                        	longa	on
  3869                        	longi	on
  3870 00:0786: 3B           	tsc
  3871 00:0787: 38           	sec
  3872 00:0788: E9 04 00     	sbc	#L132
  3873 00:078B: 1B           	tcs
  3874 00:078C: 0B           	phd
  3875 00:078D: 5B           	tcd
  3876             00000004   col_0	set	4
  3877             00000006   row_0	set	6
  3878             00000008   text_0	set	8
  3879             0000000C   fcolor_0	set	12
  3880             0000000E   bcolor_0	set	14
  Mon Sep 27 2021  9:39                                                Page 73


  3881                        	.block	407
  3882                        ;	char * ptr = text;
  3883                        ;	while(*ptr)
  3884             00000000   ptr_1	set	0
  3885                        	.sym	ptr,0,142,1,32
  3886                        	.sym	col,4,5,6,16
  3887                        	.sym	row,6,5,6,16
  3888                        	.sym	text,8,142,6,32
  3889                        	.sym	fcolor,12,5,6,16
  3890                        	.sym	bcolor,14,5,6,16
  3891 00:078E: A5 0C        	lda	<L132+text_0
  3892 00:0790: 85 01        	sta	<L133+ptr_1
  3893 00:0792: A5 0E        	lda	<L132+text_0+2
  3894 00:0794: 85 03        	sta	<L133+ptr_1+2
  3895                        	.line	409
  3896                        L10070:
  3897 00:0796: A7 01        	lda	[<L133+ptr_1]
  3898 00:0798: 29 FF 00     	and	#$ff
  3899 00:079B: D0 03        	bne	L135
  3900 00:079D: 82 1A 00     	brl	L10071
  3901                        L135:
  3902                        ;	{
  3903                        	.line	410
  3904                        ;		k_put_char(col,row,*ptr,fcolor,bcolor);
  3905                        	.line	411
  3906 00:07A0: D4 12        	pei	<L132+bcolor_0
  3907 00:07A2: D4 10        	pei	<L132+fcolor_0
  3908 00:07A4: A7 01        	lda	[<L133+ptr_1]
  3909 00:07A6: 48           	pha
  3910 00:07A7: D4 0A        	pei	<L132+row_0
  3911 00:07A9: D4 08        	pei	<L132+col_0
  3912 00:07AB: 22 xx xx xx  	jsl	~~k_put_char
  3913                        ;		col++;
  3914                        	.line	412
  3915 00:07AF: E6 08        	inc	<L132+col_0
  3916                        ;		ptr++;
  3917                        	.line	413
  3918 00:07B1: E6 01        	inc	<L133+ptr_1
  3919 00:07B3: D0 02        	bne	L136
  3920 00:07B5: E6 03        	inc	<L133+ptr_1+2
  3921                        L136:
  3922                        ;	}
  3923                        	.line	414
  3924 00:07B7: 82 DC FF     	brl	L10070
  3925                        L10071:
  3926                        ;
  3927                        ;	return col;
  3928                        	.line	416
  3929 00:07BA: A5 08        	lda	<L132+col_0
  3930                        L137:
  3931 00:07BC: A8           	tay
  3932 00:07BD: A5 06        	lda	<L132+2
  3933 00:07BF: 85 12        	sta	<L132+2+12
  3934 00:07C1: A5 05        	lda	<L132+1
  3935 00:07C3: 85 11        	sta	<L132+1+12
  3936 00:07C5: 2B           	pld
  3937 00:07C6: 3B           	tsc
  3938 00:07C7: 18           	clc
  Mon Sep 27 2021  9:39                                                Page 74


  3939 00:07C8: 69 10 00     	adc	#L132+12
  3940 00:07CB: 1B           	tcs
  3941 00:07CC: 98           	tya
  3942 00:07CD: 6B           	rtl
  3943                        ;}
  3944                        	.line	417
  3945                        	.endblock	417
  3946             00000004   L132	equ	4
  3947             00000001   L133	equ	1
  3948                        	ends
  3949                        	efunc
  3950                        	.endfunc	417,1,4
  3951                        	.line	417
  3952                        ;
  3953                        ;int k_put_string_buffer(int col,int row,char * te
                    xt,LPVOID buffer)
  3954                        ;{
  3955                        	.line	419
  3956                        	.line	420
  3957                        	code
  3958                        	xdef	~~k_put_string_buffer
  3959                        	func
  3960                        	.function	420
  3961                        ~~k_put_string_buffer:
  3962                        	longa	on
  3963                        	longi	on
  3964 00:07CE: 3B           	tsc
  3965 00:07CF: 38           	sec
  3966 00:07D0: E9 04 00     	sbc	#L138
  3967 00:07D3: 1B           	tcs
  3968 00:07D4: 0B           	phd
  3969 00:07D5: 5B           	tcd
  3970             00000004   col_0	set	4
  3971             00000006   row_0	set	6
  3972             00000008   text_0	set	8
  3973             0000000C   buffer_0	set	12
  3974                        	.block	420
  3975                        ;	char * ptr = text;
  3976                        ;	while(*ptr)
  3977             00000000   ptr_1	set	0
  3978                        	.sym	ptr,0,142,1,32
  3979                        	.sym	col,4,5,6,16
  3980                        	.sym	row,6,5,6,16
  3981                        	.sym	text,8,142,6,32
  3982                        	.sym	buffer,12,129,6,32
  3983 00:07D6: A5 0C        	lda	<L138+text_0
  3984 00:07D8: 85 01        	sta	<L139+ptr_1
  3985 00:07DA: A5 0E        	lda	<L138+text_0+2
  3986 00:07DC: 85 03        	sta	<L139+ptr_1+2
  3987                        	.line	422
  3988                        L10072:
  3989 00:07DE: A7 01        	lda	[<L139+ptr_1]
  3990 00:07E0: 29 FF 00     	and	#$ff
  3991 00:07E3: D0 03        	bne	L141
  3992 00:07E5: 82 0B 00     	brl	L10073
  3993                        L141:
  3994                        ;	{
  3995                        	.line	423
  Mon Sep 27 2021  9:39                                                Page 75


  3996                        ;		//((LPSTR)buffer)[col][row];
  3997                        ;		col++;
  3998                        	.line	425
  3999 00:07E8: E6 08        	inc	<L138+col_0
  4000                        ;		ptr++;
  4001                        	.line	426
  4002 00:07EA: E6 01        	inc	<L139+ptr_1
  4003 00:07EC: D0 02        	bne	L142
  4004 00:07EE: E6 03        	inc	<L139+ptr_1+2
  4005                        L142:
  4006                        ;	}
  4007                        	.line	427
  4008 00:07F0: 82 EB FF     	brl	L10072
  4009                        L10073:
  4010                        ;
  4011                        ;	return col;
  4012                        	.line	429
  4013 00:07F3: A5 08        	lda	<L138+col_0
  4014                        L143:
  4015 00:07F5: A8           	tay
  4016 00:07F6: A5 06        	lda	<L138+2
  4017 00:07F8: 85 12        	sta	<L138+2+12
  4018 00:07FA: A5 05        	lda	<L138+1
  4019 00:07FC: 85 11        	sta	<L138+1+12
  4020 00:07FE: 2B           	pld
  4021 00:07FF: 3B           	tsc
  4022 00:0800: 18           	clc
  4023 00:0801: 69 10 00     	adc	#L138+12
  4024 00:0804: 1B           	tcs
  4025 00:0805: 98           	tya
  4026 00:0806: 6B           	rtl
  4027                        ;}
  4028                        	.line	430
  4029                        	.endblock	430
  4030             00000004   L138	equ	4
  4031             00000001   L139	equ	1
  4032                        	ends
  4033                        	efunc
  4034                        	.endfunc	430,1,4
  4035                        	.line	430
  4036                        ;
  4037                        ;int k_put_color(int col,int row,char * textColor)
  4038                        ;{
  4039                        	.line	432
  4040                        	.line	433
  4041                        	code
  4042                        	xdef	~~k_put_color
  4043                        	func
  4044                        	.function	433
  4045                        ~~k_put_color:
  4046                        	longa	on
  4047                        	longi	on
  4048 00:0807: 3B           	tsc
  4049 00:0808: 38           	sec
  4050 00:0809: E9 0C 00     	sbc	#L144
  4051 00:080C: 1B           	tcs
  4052 00:080D: 0B           	phd
  4053 00:080E: 5B           	tcd
  Mon Sep 27 2021  9:39                                                Page 76


  4054             00000004   col_0	set	4
  4055             00000006   row_0	set	6
  4056             00000008   textColor_0	set	8
  4057                        	.block	433
  4058                        ;	char * ptr = textColor;
  4059                        ;	col++;
  4060             00000000   ptr_1	set	0
  4061                        	.sym	ptr,0,142,1,32
  4062                        	.sym	col,4,5,6,16
  4063                        	.sym	row,6,5,6,16
  4064                        	.sym	textColor,8,142,6,32
  4065 00:080F: A5 14        	lda	<L144+textColor_0
  4066 00:0811: 85 09        	sta	<L145+ptr_1
  4067 00:0813: A5 16        	lda	<L144+textColor_0+2
  4068 00:0815: 85 0B        	sta	<L145+ptr_1+2
  4069                        	.line	435
  4070 00:0817: E6 10        	inc	<L144+col_0
  4071                        ;	while(*ptr)
  4072                        	.line	436
  4073                        L10074:
  4074 00:0819: A7 09        	lda	[<L145+ptr_1]
  4075 00:081B: 29 FF 00     	and	#$ff
  4076 00:081E: D0 03        	bne	L147
  4077 00:0820: 82 31 00     	brl	L10075
  4078                        L147:
  4079                        ;	{
  4080                        	.line	437
  4081                        ;		//CS_COLOR_MEM_PTR[128 * row + col] = *p
                    tr;
  4082                        ;		CS_COLOR_MEM_PTR[80 * row + col] = *ptr;
  4083                        	.line	439
  4084 00:0823: A5 12        	lda	<L144+row_0
  4085 00:0825: A2 50 00     	ldx	#<$50
  4086                        	xref	~~~mul
  4087 00:0828: 22 xx xx xx  	jsl	~~~mul
  4088 00:082C: 85 01        	sta	<R0
  4089 00:082E: 18           	clc
  4090 00:082F: A5 01        	lda	<R0
  4091 00:0831: 65 10        	adc	<L144+col_0
  4092 00:0833: 85 05        	sta	<R1
  4093 00:0835: A9 00 C0     	lda	#$c000
  4094 00:0838: 85 01        	sta	<R0
  4095 00:083A: A9 AF 00     	lda	#$af
  4096 00:083D: 85 03        	sta	<R0+2
  4097 00:083F: E2 20        	sep	#$20
  4098                        	longa	off
  4099 00:0841: A7 09        	lda	[<L145+ptr_1]
  4100 00:0843: A4 05        	ldy	<R1
  4101 00:0845: 97 01        	sta	[<R0],Y
  4102 00:0847: C2 20        	rep	#$20
  4103                        	longa	on
  4104                        ;		col++;
  4105                        	.line	440
  4106 00:0849: E6 10        	inc	<L144+col_0
  4107                        ;		ptr++;
  4108                        	.line	441
  4109 00:084B: E6 09        	inc	<L145+ptr_1
  4110 00:084D: D0 02        	bne	L148
  Mon Sep 27 2021  9:39                                                Page 77


  4111 00:084F: E6 0B        	inc	<L145+ptr_1+2
  4112                        L148:
  4113                        ;	}
  4114                        	.line	442
  4115 00:0851: 82 C5 FF     	brl	L10074
  4116                        L10075:
  4117                        ;
  4118                        ;	return col;
  4119                        	.line	444
  4120 00:0854: A5 10        	lda	<L144+col_0
  4121                        L149:
  4122 00:0856: A8           	tay
  4123 00:0857: A5 0E        	lda	<L144+2
  4124 00:0859: 85 16        	sta	<L144+2+8
  4125 00:085B: A5 0D        	lda	<L144+1
  4126 00:085D: 85 15        	sta	<L144+1+8
  4127 00:085F: 2B           	pld
  4128 00:0860: 3B           	tsc
  4129 00:0861: 18           	clc
  4130 00:0862: 69 14 00     	adc	#L144+8
  4131 00:0865: 1B           	tcs
  4132 00:0866: 98           	tya
  4133 00:0867: 6B           	rtl
  4134                        ;}
  4135                        	.line	445
  4136                        	.endblock	445
  4137             0000000C   L144	equ	12
  4138             00000009   L145	equ	9
  4139                        	ends
  4140                        	efunc
  4141                        	.endfunc	445,9,12
  4142                        	.line	445
  4143                        ;
  4144                        ;/*
  4145                        ;int k_put_string(int col,int row,char * text,int 
                    fcolor,int bcolor)
  4146                        ;{
  4147                        ;	int tcolor = 0;
  4148                        ;	char * ptr = text;
  4149                        ;	while(*ptr)
  4150                        ;	{
  4151                        ;		if(*ptr == '\\')
  4152                        ;		{
  4153                        ;			ptr++;
  4154                        ;			tcolor = *ptr;
  4155                        ;			k_debug_hex("tcolor:",(UCHAR)tco
                    lor);
  4156                        ;			ptr+=2;
  4157                        ;			k_debug_char("char:",*ptr);
  4158                        ;			k_put_char(col,row,*ptr,tcolor,b
                    color);
  4159                        ;		}
  4160                        ;		else
  4161                        ;		{
  4162                        ;			k_put_char(col,row,*ptr,fcolor,b
                    color);
  4163                        ;		}
  4164                        ;		col++;
  Mon Sep 27 2021  9:39                                                Page 78


  4165                        ;		ptr++;
  4166                        ;	}
  4167                        ;
  4168                        ;	return col;
  4169                        ;}
  4170                        ;*/
  4171                        ;
  4172                        ;void k_put_char(int col,int row,char c,int fcolor
                    ,int bcolor)
  4173                        ;{
  4174                        	.line	475
  4175                        	.line	476
  4176                        	code
  4177                        	xdef	~~k_put_char
  4178                        	func
  4179                        	.function	476
  4180                        ~~k_put_char:
  4181                        	longa	on
  4182                        	longi	on
  4183 00:0868: 3B           	tsc
  4184 00:0869: 38           	sec
  4185 00:086A: E9 0C 00     	sbc	#L150
  4186 00:086D: 1B           	tcs
  4187 00:086E: 0B           	phd
  4188 00:086F: 5B           	tcd
  4189             00000004   col_0	set	4
  4190             00000006   row_0	set	6
  4191             00000008   c_0	set	8
  4192             0000000A   fcolor_0	set	10
  4193             0000000C   bcolor_0	set	12
  4194                        	.block	476
  4195                        ;#ifdef USE_FX256_FMX
  4196                        ;	col++;
  4197                        ;	CS_TEXT_MEM_PTR[80 * row + col ] = c;
  4198                        ;	//CS_COLOR_MEM_PTR[80 * row + col] = ((fcolor & 
                    0x0F) << 4 + (bcolor & 0x0F));
  4199                        ;	//CS_COLOR_MEM_PTR[80 * row + col] = ((fcolor & 
                    0x00FF) << 8 + (bcolor & 0x00FF));
  4200                        ;	CS_COLOR_MEM_PTR[80 * row + col] = ((fcolor & 0x
                    0F) << 4 + (bcolor & 0x0F));
  4201                        ;#elif USE_FX256_U
  4202                        ;	col++;
  4203                        	.sym	col,4,5,6,16
  4204                        	.sym	row,6,5,6,16
  4205                        	.sym	c,8,14,6,8
  4206                        	.sym	fcolor,10,5,6,16
  4207                        	.sym	bcolor,12,5,6,16
  4208                        	.line	484
  4209 00:0870: E6 10        	inc	<L150+col_0
  4210                        ;	CS_TEXT_MEM_PTR[80 * row + col ] = c;
  4211                        	.line	485
  4212 00:0872: A5 12        	lda	<L150+row_0
  4213 00:0874: A2 50 00     	ldx	#<$50
  4214                        	xref	~~~mul
  4215 00:0877: 22 xx xx xx  	jsl	~~~mul
  4216 00:087B: 85 01        	sta	<R0
  4217 00:087D: 18           	clc
  4218 00:087E: A5 01        	lda	<R0
  Mon Sep 27 2021  9:39                                                Page 79


  4219 00:0880: 65 10        	adc	<L150+col_0
  4220 00:0882: 85 05        	sta	<R1
  4221 00:0884: A9 00 A0     	lda	#$a000
  4222 00:0887: 85 01        	sta	<R0
  4223 00:0889: A9 AF 00     	lda	#$af
  4224 00:088C: 85 03        	sta	<R0+2
  4225 00:088E: E2 20        	sep	#$20
  4226                        	longa	off
  4227 00:0890: A5 14        	lda	<L150+c_0
  4228 00:0892: A4 05        	ldy	<R1
  4229 00:0894: 97 01        	sta	[<R0],Y
  4230 00:0896: C2 20        	rep	#$20
  4231                        	longa	on
  4232                        ;	CS_COLOR_MEM_PTR[80 * row + col] = ((fcolor & 0x
                    0F) << 4 + (bcolor & 0x0F));
  4233                        	.line	486
  4234 00:0898: A5 12        	lda	<L150+row_0
  4235 00:089A: A2 50 00     	ldx	#<$50
  4236                        	xref	~~~mul
  4237 00:089D: 22 xx xx xx  	jsl	~~~mul
  4238 00:08A1: 85 01        	sta	<R0
  4239 00:08A3: 18           	clc
  4240 00:08A4: A5 01        	lda	<R0
  4241 00:08A6: 65 10        	adc	<L150+col_0
  4242 00:08A8: 85 05        	sta	<R1
  4243 00:08AA: A9 00 C0     	lda	#$c000
  4244 00:08AD: 85 01        	sta	<R0
  4245 00:08AF: A9 AF 00     	lda	#$af
  4246 00:08B2: 85 03        	sta	<R0+2
  4247 00:08B4: A5 18        	lda	<L150+bcolor_0
  4248 00:08B6: 29 0F 00     	and	#<$f
  4249 00:08B9: 85 09        	sta	<R2
  4250 00:08BB: 18           	clc
  4251 00:08BC: A9 04 00     	lda	#$4
  4252 00:08BF: 65 09        	adc	<R2
  4253 00:08C1: 48           	pha
  4254 00:08C2: A5 16        	lda	<L150+fcolor_0
  4255 00:08C4: 29 0F 00     	and	#<$f
  4256 00:08C7: FA           	plx
  4257                        	xref	~~~asl
  4258 00:08C8: 22 xx xx xx  	jsl	~~~asl
  4259 00:08CC: E2 20        	sep	#$20
  4260                        	longa	off
  4261 00:08CE: A4 05        	ldy	<R1
  4262 00:08D0: 97 01        	sta	[<R0],Y
  4263 00:08D2: C2 20        	rep	#$20
  4264                        	longa	on
  4265                        ;#else
  4266                        ;	CS_TEXT_MEM_PTR[128 * row + col] = c;
  4267                        ;	CS_COLOR_MEM_PTR[128 * row + col] = ((fcolor & 0
                    x0F) << 4 + (bcolor & 0x0F));
  4268                        ;#endif
  4269                        ;}
  4270                        	.line	491
  4271                        L153:
  4272 00:08D4: A5 0E        	lda	<L150+2
  4273 00:08D6: 85 18        	sta	<L150+2+10
  4274 00:08D8: A5 0D        	lda	<L150+1
  Mon Sep 27 2021  9:39                                                Page 80


  4275 00:08DA: 85 17        	sta	<L150+1+10
  4276 00:08DC: 2B           	pld
  4277 00:08DD: 3B           	tsc
  4278 00:08DE: 18           	clc
  4279 00:08DF: 69 16 00     	adc	#L150+10
  4280 00:08E2: 1B           	tcs
  4281 00:08E3: 6B           	rtl
  4282                        	.endblock	491
  4283             0000000C   L150	equ	12
  4284             0000000D   L151	equ	13
  4285                        	ends
  4286                        	efunc
  4287                        	.endfunc	491,13,12
  4288                        	.line	491
  4289                        ;
  4290                        ;void k_set_background(int col,int row,int bcolor)
  4291                        ;{
  4292                        	.line	493
  4293                        	.line	494
  4294                        	code
  4295                        	xdef	~~k_set_background
  4296                        	func
  4297                        	.function	494
  4298                        ~~k_set_background:
  4299                        	longa	on
  4300                        	longi	on
  4301 00:08E4: 3B           	tsc
  4302 00:08E5: 38           	sec
  4303 00:08E6: E9 0C 00     	sbc	#L154
  4304 00:08E9: 1B           	tcs
  4305 00:08EA: 0B           	phd
  4306 00:08EB: 5B           	tcd
  4307             00000004   col_0	set	4
  4308             00000006   row_0	set	6
  4309             00000008   bcolor_0	set	8
  4310                        	.block	494
  4311                        ;	((unsigned char FAR *)(0xAFC000 + (128 * row) + 
                    col))[0] =  bcolor;
  4312                        	.sym	col,4,5,6,16
  4313                        	.sym	row,6,5,6,16
  4314                        	.sym	bcolor,8,5,6,16
  4315                        	.line	495
  4316 00:08EC: A0 00 00     	ldy	#$0
  4317 00:08EF: A5 10        	lda	<L154+col_0
  4318 00:08F1: 10 01        	bpl	L157
  4319 00:08F3: 88           	dey
  4320                        L157:
  4321 00:08F4: 85 01        	sta	<R0
  4322 00:08F6: 84 03        	sty	<R0+2
  4323 00:08F8: A5 12        	lda	<L154+row_0
  4324 00:08FA: A2 07 00     	ldx	#<$7
  4325                        	xref	~~~asl
  4326 00:08FD: 22 xx xx xx  	jsl	~~~asl
  4327 00:0901: 85 05        	sta	<R1
  4328 00:0903: A0 00 00     	ldy	#$0
  4329 00:0906: A5 05        	lda	<R1
  4330 00:0908: 10 01        	bpl	L158
  4331 00:090A: 88           	dey
  Mon Sep 27 2021  9:39                                                Page 81


  4332                        L158:
  4333 00:090B: 85 05        	sta	<R1
  4334 00:090D: 84 07        	sty	<R1+2
  4335 00:090F: 18           	clc
  4336 00:0910: A5 05        	lda	<R1
  4337 00:0912: 65 01        	adc	<R0
  4338 00:0914: 85 09        	sta	<R2
  4339 00:0916: A5 07        	lda	<R1+2
  4340 00:0918: 65 03        	adc	<R0+2
  4341 00:091A: 85 0B        	sta	<R2+2
  4342 00:091C: 18           	clc
  4343 00:091D: A9 00 C0     	lda	#$c000
  4344 00:0920: 65 09        	adc	<R2
  4345 00:0922: 85 01        	sta	<R0
  4346 00:0924: A9 AF 00     	lda	#$af
  4347 00:0927: 65 0B        	adc	<R2+2
  4348 00:0929: 85 03        	sta	<R0+2
  4349 00:092B: E2 20        	sep	#$20
  4350                        	longa	off
  4351 00:092D: A5 14        	lda	<L154+bcolor_0
  4352 00:092F: 87 01        	sta	[<R0]
  4353 00:0931: C2 20        	rep	#$20
  4354                        	longa	on
  4355                        ;}
  4356                        	.line	496
  4357                        L159:
  4358 00:0933: A5 0E        	lda	<L154+2
  4359 00:0935: 85 14        	sta	<L154+2+6
  4360 00:0937: A5 0D        	lda	<L154+1
  4361 00:0939: 85 13        	sta	<L154+1+6
  4362 00:093B: 2B           	pld
  4363 00:093C: 3B           	tsc
  4364 00:093D: 18           	clc
  4365 00:093E: 69 12 00     	adc	#L154+6
  4366 00:0941: 1B           	tcs
  4367 00:0942: 6B           	rtl
  4368                        	.endblock	496
  4369             0000000C   L154	equ	12
  4370             0000000D   L155	equ	13
  4371                        	ends
  4372                        	efunc
  4373                        	.endfunc	496,13,12
  4374                        	.line	496
  4375                        ;
  4376                        ;void k_set_text_font_page(UINT page)
  4377                        ;{
  4378                        	.line	498
  4379                        	.line	499
  4380                        	code
  4381                        	xdef	~~k_set_text_font_page
  4382                        	func
  4383                        	.function	499
  4384                        ~~k_set_text_font_page:
  4385                        	longa	on
  4386                        	longi	on
  4387 00:0943: 3B           	tsc
  4388 00:0944: 38           	sec
  4389 00:0945: E9 00 00     	sbc	#L160
  Mon Sep 27 2021  9:39                                                Page 82


  4390 00:0948: 1B           	tcs
  4391 00:0949: 0B           	phd
  4392 00:094A: 5B           	tcd
  4393             00000004   page_0	set	4
  4394                        	.block	499
  4395                        ;	/*
  4396                        ;	if(page)
  4397                        ;		VKY_TXT_CURSOR_CTRL_REG[0] = 0x13;
  4398                        ;	else
  4399                        ;		VKY_TXT_CURSOR_CTRL_REG[0] = 0x0B;
  4400                        ;	*/
  4401                        ;}
  4402                        	.sym	page,4,16,6,16
  4403                        	.line	506
  4404                        L163:
  4405 00:094B: A5 02        	lda	<L160+2
  4406 00:094D: 85 04        	sta	<L160+2+2
  4407 00:094F: A5 01        	lda	<L160+1
  4408 00:0951: 85 03        	sta	<L160+1+2
  4409 00:0953: 2B           	pld
  4410 00:0954: 3B           	tsc
  4411 00:0955: 18           	clc
  4412 00:0956: 69 02 00     	adc	#L160+2
  4413 00:0959: 1B           	tcs
  4414 00:095A: 6B           	rtl
  4415                        	.endblock	506
  4416             00000000   L160	equ	0
  4417             00000001   L161	equ	1
  4418                        	ends
  4419                        	efunc
  4420                        	.endfunc	506,1,0
  4421                        	.line	506
  4422                        ;
  4423                        ;void k_enable_text_cursor(UINT page)
  4424                        ;{
  4425                        	.line	508
  4426                        	.line	509
  4427                        	code
  4428                        	xdef	~~k_enable_text_cursor
  4429                        	func
  4430                        	.function	509
  4431                        ~~k_enable_text_cursor:
  4432                        	longa	on
  4433                        	longi	on
  4434 00:095B: 3B           	tsc
  4435 00:095C: 38           	sec
  4436 00:095D: E9 00 00     	sbc	#L164
  4437 00:0960: 1B           	tcs
  4438 00:0961: 0B           	phd
  4439 00:0962: 5B           	tcd
  4440             00000004   page_0	set	4
  4441                        	.block	509
  4442                        ;	CURCOLOR[0] = 15;
  4443                        	.sym	page,4,16,6,16
  4444                        	.line	510
  4445 00:0963: E2 20        	sep	#$20
  4446                        	longa	off
  4447 00:0965: A9 0F        	lda	#$f
  Mon Sep 27 2021  9:39                                                Page 83


  4448 00:0967: 8F 1E 00 00  	sta	>30
  4449 00:096B: C2 20        	rep	#$20
  4450                        	longa	on
  4451                        ;	VKY_TXT_CURSOR_CTRL_REG[0] = 0;
  4452                        	.line	511
  4453 00:096D: E2 20        	sep	#$20
  4454                        	longa	off
  4455 00:096F: A9 00        	lda	#$0
  4456 00:0971: 8F 10 00 AF  	sta	>11468816
  4457 00:0975: C2 20        	rep	#$20
  4458                        	longa	on
  4459                        ;	//VKY_TXT_CURSOR_CHAR_REG[0] = 0x00;  // FULL BL
                    OCK
  4460                        ;	VKY_TXT_CURSOR_CHAR_REG[0] = 0xA0;  // FULL BLOC
                    K
  4461                        	.line	513
  4462 00:0977: E2 20        	sep	#$20
  4463                        	longa	off
  4464 00:0979: A9 A0        	lda	#$a0
  4465 00:097B: 8F 12 00 AF  	sta	>11468818
  4466 00:097F: C2 20        	rep	#$20
  4467                        	longa	on
  4468                        ;	//VKY_TXT_CURSOR_CTRL_REG[0] = 0x03;  // ENABLE,
                     FLASH RATE 0
  4469                        ;	//VKY_TXT_CURSOR_CTRL_REG[0] = 0x0B;  // ENABLE,
                     FLASH RATE 0
  4470                        ;	//VKY_TXT_CURSOR_CTRL_REG[0] = 0x13;
  4471                        ;
  4472                        ;	//k_set_text_font_page(page);
  4473                        ;
  4474                        ;	//VKY_TXT_CURSOR_COLR_REG[0] = 0xF0;
  4475                        ;	VKY_TXT_CURSOR_COLR_REG[0] = 0x00;
  4476                        	.line	521
  4477 00:0981: E2 20        	sep	#$20
  4478                        	longa	off
  4479 00:0983: A9 00        	lda	#$0
  4480 00:0985: 8F 13 00 AF  	sta	>11468819
  4481 00:0989: C2 20        	rep	#$20
  4482                        	longa	on
  4483                        ;	VKY_TXT_CURSOR_Y_REG_L[0]  = (UCHAR)0;
  4484                        	.line	522
  4485 00:098B: E2 20        	sep	#$20
  4486                        	longa	off
  4487 00:098D: A9 00        	lda	#$0
  4488 00:098F: 8F 16 00 AF  	sta	>11468822
  4489 00:0993: C2 20        	rep	#$20
  4490                        	longa	on
  4491                        ;	VKY_TXT_CURSOR_X_REG_L[0]  = (UCHAR)0;
  4492                        	.line	523
  4493 00:0995: E2 20        	sep	#$20
  4494                        	longa	off
  4495 00:0997: A9 00        	lda	#$0
  4496 00:0999: 8F 14 00 AF  	sta	>11468820
  4497 00:099D: C2 20        	rep	#$20
  4498                        	longa	on
  4499                        ;	VKY_TXT_CURSOR_Y_REG_H[0]  = (UCHAR)0;
  4500                        	.line	524
  4501 00:099F: E2 20        	sep	#$20
  Mon Sep 27 2021  9:39                                                Page 84


  4502                        	longa	off
  4503 00:09A1: A9 00        	lda	#$0
  4504 00:09A3: 8F 17 00 AF  	sta	>11468823
  4505 00:09A7: C2 20        	rep	#$20
  4506                        	longa	on
  4507                        ;	VKY_TXT_CURSOR_X_REG_H[0]  = (UCHAR)0;
  4508                        	.line	525
  4509 00:09A9: E2 20        	sep	#$20
  4510                        	longa	off
  4511 00:09AB: A9 00        	lda	#$0
  4512 00:09AD: 8F 15 00 AF  	sta	>11468821
  4513 00:09B1: C2 20        	rep	#$20
  4514                        	longa	on
  4515                        ;}
  4516                        	.line	526
  4517                        L167:
  4518 00:09B3: A5 02        	lda	<L164+2
  4519 00:09B5: 85 04        	sta	<L164+2+2
  4520 00:09B7: A5 01        	lda	<L164+1
  4521 00:09B9: 85 03        	sta	<L164+1+2
  4522 00:09BB: 2B           	pld
  4523 00:09BC: 3B           	tsc
  4524 00:09BD: 18           	clc
  4525 00:09BE: 69 02 00     	adc	#L164+2
  4526 00:09C1: 1B           	tcs
  4527 00:09C2: 6B           	rtl
  4528                        	.endblock	526
  4529             00000000   L164	equ	0
  4530             00000001   L165	equ	1
  4531                        	ends
  4532                        	efunc
  4533                        	.endfunc	526,1,0
  4534                        	.line	526
  4535                        ;
  4536                        ;void k_set_cursor_position(int x,int y)
  4537                        ;{
  4538                        	.line	528
  4539                        	.line	529
  4540                        	code
  4541                        	xdef	~~k_set_cursor_position
  4542                        	func
  4543                        	.function	529
  4544                        ~~k_set_cursor_position:
  4545                        	longa	on
  4546                        	longi	on
  4547 00:09C3: 3B           	tsc
  4548 00:09C4: 38           	sec
  4549 00:09C5: E9 00 00     	sbc	#L168
  4550 00:09C8: 1B           	tcs
  4551 00:09C9: 0B           	phd
  4552 00:09CA: 5B           	tcd
  4553             00000004   x_0	set	4
  4554             00000006   y_0	set	6
  4555                        	.block	529
  4556                        ;	VKY_TXT_CURSOR_Y_REG_L[0] = (UCHAR)y;
  4557                        	.sym	x,4,5,6,16
  4558                        	.sym	y,6,5,6,16
  4559                        	.line	530
  Mon Sep 27 2021  9:39                                                Page 85


  4560 00:09CB: E2 20        	sep	#$20
  4561                        	longa	off
  4562 00:09CD: A5 06        	lda	<L168+y_0
  4563 00:09CF: 8F 16 00 AF  	sta	>11468822
  4564 00:09D3: C2 20        	rep	#$20
  4565                        	longa	on
  4566                        ;	VKY_TXT_CURSOR_X_REG_L[0] = (UCHAR)x;
  4567                        	.line	531
  4568 00:09D5: E2 20        	sep	#$20
  4569                        	longa	off
  4570 00:09D7: A5 04        	lda	<L168+x_0
  4571 00:09D9: 8F 14 00 AF  	sta	>11468820
  4572 00:09DD: C2 20        	rep	#$20
  4573                        	longa	on
  4574                        ;	VKY_TXT_CURSOR_Y_REG_H[0] = (UCHAR)0;
  4575                        	.line	532
  4576 00:09DF: E2 20        	sep	#$20
  4577                        	longa	off
  4578 00:09E1: A9 00        	lda	#$0
  4579 00:09E3: 8F 17 00 AF  	sta	>11468823
  4580 00:09E7: C2 20        	rep	#$20
  4581                        	longa	on
  4582                        ;	VKY_TXT_CURSOR_X_REG_H[0] = (UCHAR)0;
  4583                        	.line	533
  4584 00:09E9: E2 20        	sep	#$20
  4585                        	longa	off
  4586 00:09EB: A9 00        	lda	#$0
  4587 00:09ED: 8F 15 00 AF  	sta	>11468821
  4588 00:09F1: C2 20        	rep	#$20
  4589                        	longa	on
  4590                        ;}
  4591                        	.line	534
  4592                        L171:
  4593 00:09F3: A5 02        	lda	<L168+2
  4594 00:09F5: 85 06        	sta	<L168+2+4
  4595 00:09F7: A5 01        	lda	<L168+1
  4596 00:09F9: 85 05        	sta	<L168+1+4
  4597 00:09FB: 2B           	pld
  4598 00:09FC: 3B           	tsc
  4599 00:09FD: 18           	clc
  4600 00:09FE: 69 04 00     	adc	#L168+4
  4601 00:0A01: 1B           	tcs
  4602 00:0A02: 6B           	rtl
  4603                        	.endblock	534
  4604             00000000   L168	equ	0
  4605             00000001   L169	equ	1
  4606                        	ends
  4607                        	efunc
  4608                        	.endfunc	534,1,0
  4609                        	.line	534
  4610                        ;
  4611                        ;void k_create_text_window(PRECT prect,TITLE title
                    ,PHANDLE phandle)
  4612                        ;{
  4613                        	.line	536
  4614                        	.line	537
  4615                        	code
  4616                        	xdef	~~k_create_text_window
  Mon Sep 27 2021  9:39                                                Page 86


  4617                        	func
  4618                        	.function	537
  4619                        ~~k_create_text_window:
  4620                        	longa	on
  4621                        	longi	on
  4622 00:0A03: 3B           	tsc
  4623 00:0A04: 38           	sec
  4624 00:0A05: E9 0E 00     	sbc	#L172
  4625 00:0A08: 1B           	tcs
  4626 00:0A09: 0B           	phd
  4627 00:0A0A: 5B           	tcd
  4628             00000004   prect_0	set	4
  4629             00000008   title_0	set	8
  4630             0000000C   phandle_0	set	12
  4631                        	.block	537
  4632                        ;	int index = -1;
  4633                        ;	PWINDOW pwin = NULL;
  4634                        ;
  4635                        ;	//k_put_char(0,1,'a',5,0);
  4636                        ;
  4637                        ;	index = _k_window_index++;
  4638             00000000   index_1	set	0
  4639             00000002   pwin_1	set	2
  4640                        	.sym	index,0,5,1,16
  4641                        	.sym	pwin,2,138,1,32,33
  4642                        	.sym	prect,4,138,6,32,26
  4643                        	.sym	title,8,142,6,32
  4644                        	.sym	phandle,12,1153,6,32
  4645 00:0A0B: A9 FF FF     	lda	#$ffff
  4646 00:0A0E: 85 09        	sta	<L173+index_1
  4647 00:0A10: 64 0B        	stz	<L173+pwin_1
  4648 00:0A12: 64 0D        	stz	<L173+pwin_1+2
  4649                        	.line	543
  4650 00:0A14: AD xx xx     	lda	|~~_k_window_index
  4651 00:0A17: 85 09        	sta	<L173+index_1
  4652 00:0A19: EE xx xx     	inc	|~~_k_window_index
  4653                        ;
  4654                        ;	//k_put_char(0,1,'b',5,0);
  4655                        ;
  4656                        ;	pwin = &_k_window_list[index];
  4657                        	.line	547
  4658 00:0A1C: A5 09        	lda	<L173+index_1
  4659 00:0A1E: A2 E8 01     	ldx	#<$1e8
  4660                        	xref	~~~mul
  4661 00:0A21: 22 xx xx xx  	jsl	~~~mul
  4662 00:0A25: 85 01        	sta	<R0
  4663 00:0A27: 18           	clc
  4664 00:0A28: A9 xx xx     	lda	#<~~_k_window_list
  4665 00:0A2B: 65 01        	adc	<R0
  4666 00:0A2D: 85 05        	sta	<R1
  4667 00:0A2F: A5 05        	lda	<R1
  4668 00:0A31: 85 0B        	sta	<L173+pwin_1
  4669                        	xref	_BEG_DATA
  4670 00:0A33: A9 xx xx     	lda	#_BEG_DATA>>16
  4671 00:0A36: 85 0D        	sta	<L173+pwin_1+2
  4672                        ;
  4673                        ;	pwin->win_x = prect->x;
  4674                        	.line	549
  Mon Sep 27 2021  9:39                                                Page 87


  4675 00:0A38: A7 12        	lda	[<L172+prect_0]
  4676 00:0A3A: A0 0C 00     	ldy	#$c
  4677 00:0A3D: 97 0B        	sta	[<L173+pwin_1],Y
  4678                        ;	pwin->win_y = prect->y;
  4679                        	.line	550
  4680 00:0A3F: A0 02 00     	ldy	#$2
  4681 00:0A42: B7 12        	lda	[<L172+prect_0],Y
  4682 00:0A44: A0 0E 00     	ldy	#$e
  4683 00:0A47: 97 0B        	sta	[<L173+pwin_1],Y
  4684                        ;	pwin->win_width = prect->width;
  4685                        	.line	551
  4686 00:0A49: A0 08 00     	ldy	#$8
  4687 00:0A4C: B7 12        	lda	[<L172+prect_0],Y
  4688 00:0A4E: A0 10 00     	ldy	#$10
  4689 00:0A51: 97 0B        	sta	[<L173+pwin_1],Y
  4690                        ;	pwin->win_height = prect->height;
  4691                        	.line	552
  4692 00:0A53: A0 0A 00     	ldy	#$a
  4693 00:0A56: B7 12        	lda	[<L172+prect_0],Y
  4694 00:0A58: A0 12 00     	ldy	#$12
  4695 00:0A5B: 97 0B        	sta	[<L173+pwin_1],Y
  4696                        ;
  4697                        ;	//k_put_char(0,1,'c',5,0);
  4698                        ;
  4699                        ;	strcpy(pwin->win_title,title);
  4700                        	.line	556
  4701 00:0A5D: D4 18        	pei	<L172+title_0+2
  4702 00:0A5F: D4 16        	pei	<L172+title_0
  4703 00:0A61: 18           	clc
  4704 00:0A62: A9 4C 01     	lda	#$14c
  4705 00:0A65: 65 0B        	adc	<L173+pwin_1
  4706 00:0A67: 85 01        	sta	<R0
  4707 00:0A69: A9 00 00     	lda	#$0
  4708 00:0A6C: 65 0D        	adc	<L173+pwin_1+2
  4709 00:0A6E: 85 03        	sta	<R0+2
  4710 00:0A70: D4 03        	pei	<R0+2
  4711 00:0A72: D4 01        	pei	<R0
  4712 00:0A74: 22 xx xx xx  	jsl	~~strcpy
  4713                        ;
  4714                        ;	//k_put_char(0,1,'d',5,0);
  4715                        ;
  4716                        ;	k_window_draw(pwin->win_x,pwin->win_y,pwin->win_
                    width,pwin->win_height,pwin->win_title);
  4717                        	.line	560
  4718 00:0A78: 18           	clc
  4719 00:0A79: A9 4C 01     	lda	#$14c
  4720 00:0A7C: 65 0B        	adc	<L173+pwin_1
  4721 00:0A7E: 85 01        	sta	<R0
  4722 00:0A80: A9 00 00     	lda	#$0
  4723 00:0A83: 65 0D        	adc	<L173+pwin_1+2
  4724 00:0A85: 85 03        	sta	<R0+2
  4725 00:0A87: D4 03        	pei	<R0+2
  4726 00:0A89: D4 01        	pei	<R0
  4727 00:0A8B: A0 12 00     	ldy	#$12
  4728 00:0A8E: B7 0B        	lda	[<L173+pwin_1],Y
  4729 00:0A90: 48           	pha
  4730 00:0A91: A0 10 00     	ldy	#$10
  4731 00:0A94: B7 0B        	lda	[<L173+pwin_1],Y
  Mon Sep 27 2021  9:39                                                Page 88


  4732 00:0A96: 48           	pha
  4733 00:0A97: A0 0E 00     	ldy	#$e
  4734 00:0A9A: B7 0B        	lda	[<L173+pwin_1],Y
  4735 00:0A9C: 48           	pha
  4736 00:0A9D: A0 0C 00     	ldy	#$c
  4737 00:0AA0: B7 0B        	lda	[<L173+pwin_1],Y
  4738 00:0AA2: 48           	pha
  4739 00:0AA3: 22 xx xx xx  	jsl	~~k_window_draw
  4740                        ;
  4741                        ;	//k_put_char(0,1,'e',5,0);
  4742                        ;
  4743                        ;	*phandle = (LPVOID)index;
  4744                        	.line	564
  4745 00:0AA7: A0 00 00     	ldy	#$0
  4746 00:0AAA: A5 09        	lda	<L173+index_1
  4747 00:0AAC: 10 01        	bpl	L175
  4748 00:0AAE: 88           	dey
  4749                        L175:
  4750 00:0AAF: 85 01        	sta	<R0
  4751 00:0AB1: 84 03        	sty	<R0+2
  4752 00:0AB3: A5 01        	lda	<R0
  4753 00:0AB5: 87 1A        	sta	[<L172+phandle_0]
  4754 00:0AB7: A5 03        	lda	<R0+2
  4755 00:0AB9: A0 02 00     	ldy	#$2
  4756 00:0ABC: 97 1A        	sta	[<L172+phandle_0],Y
  4757                        ;
  4758                        ;	return;
  4759                        	.line	566
  4760                        L176:
  4761 00:0ABE: A5 10        	lda	<L172+2
  4762 00:0AC0: 85 1C        	sta	<L172+2+12
  4763 00:0AC2: A5 0F        	lda	<L172+1
  4764 00:0AC4: 85 1B        	sta	<L172+1+12
  4765 00:0AC6: 2B           	pld
  4766 00:0AC7: 3B           	tsc
  4767 00:0AC8: 18           	clc
  4768 00:0AC9: 69 1A 00     	adc	#L172+12
  4769 00:0ACC: 1B           	tcs
  4770 00:0ACD: 6B           	rtl
  4771                        ;}
  4772                        	.line	567
  4773                        	.endblock	567
  4774             0000000E   L172	equ	14
  4775             00000009   L173	equ	9
  4776                        	ends
  4777                        	efunc
  4778                        	.endfunc	567,9,14
  4779                        	.line	567
  4780                        ;
  4781                        ;void k_text_mode_dialog(int x,int y,int width,int
                     height,LPCSTR message)
  4782                        ;{
  4783                        	.line	569
  4784                        	.line	570
  4785                        	code
  4786                        	xdef	~~k_text_mode_dialog
  4787                        	func
  4788                        	.function	570
  Mon Sep 27 2021  9:39                                                Page 89


  4789                        ~~k_text_mode_dialog:
  4790                        	longa	on
  4791                        	longi	on
  4792 00:0ACE: 3B           	tsc
  4793 00:0ACF: 38           	sec
  4794 00:0AD0: E9 08 00     	sbc	#L177
  4795 00:0AD3: 1B           	tcs
  4796 00:0AD4: 0B           	phd
  4797 00:0AD5: 5B           	tcd
  4798             00000004   x_0	set	4
  4799             00000006   y_0	set	6
  4800             00000008   width_0	set	8
  4801             0000000A   height_0	set	10
  4802             0000000C   message_0	set	12
  4803                        	.block	570
  4804                        ;	int pos  = x;
  4805                        ;	int line = y;
  4806                        ;
  4807                        ;	pos = k_put_string(pos,line,CONST_TBOX_TL_STR,15
                    ,0);
  4808             00000000   pos_1	set	0
  4809             00000002   line_1	set	2
  4810                        	.sym	pos,0,5,1,16
  4811                        	.sym	line,2,5,1,16
  4812                        	.sym	x,4,5,6,16
  4813                        	.sym	y,6,5,6,16
  4814                        	.sym	width,8,5,6,16
  4815                        	.sym	height,10,5,6,16
  4816                        	.sym	message,12,142,6,32
  4817 00:0AD6: A5 0C        	lda	<L177+x_0
  4818 00:0AD8: 85 05        	sta	<L178+pos_1
  4819 00:0ADA: A5 0E        	lda	<L177+y_0
  4820 00:0ADC: 85 07        	sta	<L178+line_1
  4821                        	.line	574
  4822 00:0ADE: F4 00 00     	pea	#<$0
  4823 00:0AE1: F4 0F 00     	pea	#<$f
  4824 00:0AE4: F4 xx xx     	pea	#^L131
  4825 00:0AE7: F4 xx xx     	pea	#<L131
  4826 00:0AEA: D4 07        	pei	<L178+line_1
  4827 00:0AEC: D4 05        	pei	<L178+pos_1
  4828 00:0AEE: 22 xx xx xx  	jsl	~~k_put_string
  4829 00:0AF2: 85 05        	sta	<L178+pos_1
  4830                        ;	while(pos < x + width)
  4831                        	.line	575
  4832                        L10076:
  4833 00:0AF4: 18           	clc
  4834 00:0AF5: A5 0C        	lda	<L177+x_0
  4835 00:0AF7: 65 10        	adc	<L177+width_0
  4836 00:0AF9: 85 01        	sta	<R0
  4837 00:0AFB: 38           	sec
  4838 00:0AFC: A5 05        	lda	<L178+pos_1
  4839 00:0AFE: E5 01        	sbc	<R0
  4840 00:0B00: 70 03        	bvs	L180
  4841 00:0B02: 49 00 80     	eor	#$8000
  4842                        L180:
  4843 00:0B05: 10 03        	bpl	L181
  4844 00:0B07: 82 19 00     	brl	L10077
  4845                        L181:
  Mon Sep 27 2021  9:39                                                Page 90


  4846                        ;	{
  4847                        	.line	576
  4848                        ;		pos = k_put_string(pos,line,CONST_TBOX_T
                    OP_STR,15,0);
  4849                        	.line	577
  4850 00:0B0A: F4 00 00     	pea	#<$0
  4851 00:0B0D: F4 0F 00     	pea	#<$f
  4852 00:0B10: F4 xx xx     	pea	#^L131+2
  4853 00:0B13: F4 xx xx     	pea	#<L131+2
  4854 00:0B16: D4 07        	pei	<L178+line_1
  4855 00:0B18: D4 05        	pei	<L178+pos_1
  4856 00:0B1A: 22 xx xx xx  	jsl	~~k_put_string
  4857 00:0B1E: 85 05        	sta	<L178+pos_1
  4858                        ;	}
  4859                        	.line	578
  4860 00:0B20: 82 D1 FF     	brl	L10076
  4861                        L10077:
  4862                        ;	k_put_string(pos,line,CONST_TBOX_TR_STR,15,0);
  4863                        	.line	579
  4864 00:0B23: F4 00 00     	pea	#<$0
  4865 00:0B26: F4 0F 00     	pea	#<$f
  4866 00:0B29: F4 xx xx     	pea	#^L131+4
  4867 00:0B2C: F4 xx xx     	pea	#<L131+4
  4868 00:0B2F: D4 07        	pei	<L178+line_1
  4869 00:0B31: D4 05        	pei	<L178+pos_1
  4870 00:0B33: 22 xx xx xx  	jsl	~~k_put_string
  4871                        ;	line++;
  4872                        	.line	580
  4873 00:0B37: E6 07        	inc	<L178+line_1
  4874                        ;
  4875                        ;	while(line < y + height)
  4876                        	.line	582
  4877                        L10078:
  4878 00:0B39: 18           	clc
  4879 00:0B3A: A5 0E        	lda	<L177+y_0
  4880 00:0B3C: 65 12        	adc	<L177+height_0
  4881 00:0B3E: 85 01        	sta	<R0
  4882 00:0B40: 38           	sec
  4883 00:0B41: A5 07        	lda	<L178+line_1
  4884 00:0B43: E5 01        	sbc	<R0
  4885 00:0B45: 70 03        	bvs	L182
  4886 00:0B47: 49 00 80     	eor	#$8000
  4887                        L182:
  4888 00:0B4A: 10 03        	bpl	L183
  4889 00:0B4C: 82 2D 00     	brl	L10079
  4890                        L183:
  4891                        ;	{
  4892                        	.line	583
  4893                        ;		k_put_string(x,line,CONST_TBOX_LEFT_STR,
                    15,0);
  4894                        	.line	584
  4895 00:0B4F: F4 00 00     	pea	#<$0
  4896 00:0B52: F4 0F 00     	pea	#<$f
  4897 00:0B55: F4 xx xx     	pea	#^L131+6
  4898 00:0B58: F4 xx xx     	pea	#<L131+6
  4899 00:0B5B: D4 07        	pei	<L178+line_1
  4900 00:0B5D: D4 0C        	pei	<L177+x_0
  4901 00:0B5F: 22 xx xx xx  	jsl	~~k_put_string
  Mon Sep 27 2021  9:39                                                Page 91


  4902                        ;		k_put_string(pos,line,CONST_TBOX_RIGHT_S
                    TR,15,0);
  4903                        	.line	585
  4904 00:0B63: F4 00 00     	pea	#<$0
  4905 00:0B66: F4 0F 00     	pea	#<$f
  4906 00:0B69: F4 xx xx     	pea	#^L131+8
  4907 00:0B6C: F4 xx xx     	pea	#<L131+8
  4908 00:0B6F: D4 07        	pei	<L178+line_1
  4909 00:0B71: D4 05        	pei	<L178+pos_1
  4910 00:0B73: 22 xx xx xx  	jsl	~~k_put_string
  4911                        ;		line++;
  4912                        	.line	586
  4913 00:0B77: E6 07        	inc	<L178+line_1
  4914                        ;	}
  4915                        	.line	587
  4916 00:0B79: 82 BD FF     	brl	L10078
  4917                        L10079:
  4918                        ;	pos = x;
  4919                        	.line	588
  4920 00:0B7C: A5 0C        	lda	<L177+x_0
  4921 00:0B7E: 85 05        	sta	<L178+pos_1
  4922                        ;	pos = k_put_string(pos,line,CONST_TBOX_BL_STR,15
                    ,0);
  4923                        	.line	589
  4924 00:0B80: F4 00 00     	pea	#<$0
  4925 00:0B83: F4 0F 00     	pea	#<$f
  4926 00:0B86: F4 xx xx     	pea	#^L131+10
  4927 00:0B89: F4 xx xx     	pea	#<L131+10
  4928 00:0B8C: D4 07        	pei	<L178+line_1
  4929 00:0B8E: D4 05        	pei	<L178+pos_1
  4930 00:0B90: 22 xx xx xx  	jsl	~~k_put_string
  4931 00:0B94: 85 05        	sta	<L178+pos_1
  4932                        ;	while(pos < x + width)
  4933                        	.line	590
  4934                        L10080:
  4935 00:0B96: 18           	clc
  4936 00:0B97: A5 0C        	lda	<L177+x_0
  4937 00:0B99: 65 10        	adc	<L177+width_0
  4938 00:0B9B: 85 01        	sta	<R0
  4939 00:0B9D: 38           	sec
  4940 00:0B9E: A5 05        	lda	<L178+pos_1
  4941 00:0BA0: E5 01        	sbc	<R0
  4942 00:0BA2: 70 03        	bvs	L184
  4943 00:0BA4: 49 00 80     	eor	#$8000
  4944                        L184:
  4945 00:0BA7: 10 03        	bpl	L185
  4946 00:0BA9: 82 19 00     	brl	L10081
  4947                        L185:
  4948                        ;	{
  4949                        	.line	591
  4950                        ;		pos = k_put_string(pos,line,CONST_TBOX_B
                    OTTOM_STR,15,0);
  4951                        	.line	592
  4952 00:0BAC: F4 00 00     	pea	#<$0
  4953 00:0BAF: F4 0F 00     	pea	#<$f
  4954 00:0BB2: F4 xx xx     	pea	#^L131+12
  4955 00:0BB5: F4 xx xx     	pea	#<L131+12
  4956 00:0BB8: D4 07        	pei	<L178+line_1
  Mon Sep 27 2021  9:39                                                Page 92


  4957 00:0BBA: D4 05        	pei	<L178+pos_1
  4958 00:0BBC: 22 xx xx xx  	jsl	~~k_put_string
  4959 00:0BC0: 85 05        	sta	<L178+pos_1
  4960                        ;	}
  4961                        	.line	593
  4962 00:0BC2: 82 D1 FF     	brl	L10080
  4963                        L10081:
  4964                        ;	pos = k_put_string(pos,line,CONST_TBOX_BR_STR,15
                    ,0);
  4965                        	.line	594
  4966 00:0BC5: F4 00 00     	pea	#<$0
  4967 00:0BC8: F4 0F 00     	pea	#<$f
  4968 00:0BCB: F4 xx xx     	pea	#^L131+14
  4969 00:0BCE: F4 xx xx     	pea	#<L131+14
  4970 00:0BD1: D4 07        	pei	<L178+line_1
  4971 00:0BD3: D4 05        	pei	<L178+pos_1
  4972 00:0BD5: 22 xx xx xx  	jsl	~~k_put_string
  4973 00:0BD9: 85 05        	sta	<L178+pos_1
  4974                        ;
  4975                        ;	/*
  4976                        ;	pos = 1;
  4977                        ;	pos = k_put_string(pos,line,boxside,15,0);
  4978                        ;	pos = 70;
  4979                        ;	pos = k_put_string(pos,line,boxside,15,0);
  4980                        ;	line++;
  4981                        ;	pos = 1;
  4982                        ;	pos = k_put_string(pos,line,boxside,15,0);
  4983                        ;	pos = k_put_string(pos,line,CONST_EXCEPTION_TITL
                    E,15,0);
  4984                        ;	//pos = k_put_string(pos,line,k_longtodec(_k_exe
                    c_context,_brk_Buffer),15,0);
  4985                        ;	pos = k_put_string(pos,line,k_longtodec(_k_exec_
                    context,_brk_Buffer),15,0);
  4986                        ;	//pos = k_put_string(pos,line,k_longtodec(_k_exe
                    c_context,_brk_Buffer),15,0);
  4987                        ;	//pos++;
  4988                        ;	//pos = k_put_string(pos,line,k_longtodec(   ,_b
                    rk_Buffer),15,0);
  4989                        ;
  4990                        ;	pos = k_put_string(pos,line,":",15,0);
  4991                        ;	pos = k_put_string(pos,line,k_longtodec(_k_exec_
                    error,_brk_Buffer),15,0);
  4992                        ;	pos = 70;
  4993                        ;	pos = k_put_string(pos,line,boxside,15,0);
  4994                        ;	line++;
  4995                        ;	pos = 1;
  4996                        ;	pos = k_put_string(pos,line,boxside,15,0);
  4997                        ;	pos = k_put_string(pos,line,"",15,0);
  4998                        ;	pos = 70;
  4999                        ;	pos = k_put_string(pos,line,boxside,15,0);
  5000                        ;	line++;
  5001                        ;	pos = 1;
  5002                        ;	pos = k_put_string(pos,line,boxside,15,0);
  5003                        ;	pos = k_put_string(pos,line,_k_exec_message,15,0
                    );
  5004                        ;	pos = 70;
  5005                        ;	pos = k_put_string(pos,line,boxside,15,0);
  5006                        ;	line++;
  Mon Sep 27 2021  9:39                                                Page 93


  5007                        ;	pos = 1;
  5008                        ;	pos = k_put_string(pos,line,boxside,15,0);
  5009                        ;	pos = 70;
  5010                        ;	pos = k_put_string(pos,line,boxside,15,0);
  5011                        ;	line++;
  5012                        ;	pos = 1;
  5013                        ;	pos = k_put_string(pos,line,boxbottom,15,0);
  5014                        ;	*/
  5015                        ;
  5016                        ;}
  5017                        	.line	637
  5018                        L186:
  5019 00:0BDB: A5 0A        	lda	<L177+2
  5020 00:0BDD: 85 16        	sta	<L177+2+12
  5021 00:0BDF: A5 09        	lda	<L177+1
  5022 00:0BE1: 85 15        	sta	<L177+1+12
  5023 00:0BE3: 2B           	pld
  5024 00:0BE4: 3B           	tsc
  5025 00:0BE5: 18           	clc
  5026 00:0BE6: 69 14 00     	adc	#L177+12
  5027 00:0BE9: 1B           	tcs
  5028 00:0BEA: 6B           	rtl
  5029                        	.endblock	637
  5030             00000008   L177	equ	8
  5031             00000005   L178	equ	5
  5032                        	ends
  5033                        	efunc
  5034                        	.endfunc	637,5,8
  5035                        	.line	637
  5036                        	data
  5037                        L131:
  5038 00:0287: D6 00 C4 00  	db	$D6,$00,$FFFFFFC4,$00,$FFFFFFB7,$00,$FFF
                    FFFBA,$00,$FFFFFFBA,$00,$FFFFFFD3,$00,$FFFFFFC4,$00,$FFFFFFB
                    D
       00:028B: B7 00 BA 00 
       00:028F: BA 00 D3 00 
       00:0293: C4 00 BD 
  5039 00:0296: 00           	db	$00
  5040 00:0297:              	ends
  5041                        ;
  5042                        ;void k_window_draw(int bx,int by,int bw,int bh,ch
                    ar FAR* title)
  5043                        ;{
  5044                        	.line	639
  5045                        	.line	640
  5046                        	code
  5047                        	xdef	~~k_window_draw
  5048                        	func
  5049                        	.function	640
  5050                        ~~k_window_draw:
  5051                        	longa	on
  5052                        	longi	on
  5053 00:0BEB: 3B           	tsc
  5054 00:0BEC: 38           	sec
  5055 00:0BED: E9 0C 00     	sbc	#L188
  5056 00:0BF0: 1B           	tcs
  5057 00:0BF1: 0B           	phd
  5058 00:0BF2: 5B           	tcd
  Mon Sep 27 2021  9:39                                                Page 94


  5059             00000004   bx_0	set	4
  5060             00000006   by_0	set	6
  5061             00000008   bw_0	set	8
  5062             0000000A   bh_0	set	10
  5063             0000000C   title_0	set	12
  5064                        	.block	640
  5065                        ;	int i = 0;
  5066                        ;	int k = 0;
  5067                        ;
  5068                        ;	k_put_char(0,1,'z',5,0);
  5069             00000000   i_1	set	0
  5070             00000002   k_1	set	2
  5071                        	.sym	i,0,5,1,16
  5072                        	.sym	k,2,5,1,16
  5073                        	.sym	bx,4,5,6,16
  5074                        	.sym	by,6,5,6,16
  5075                        	.sym	bw,8,5,6,16
  5076                        	.sym	bh,10,5,6,16
  5077                        	.sym	title,12,142,6,32
  5078 00:0BF3: 64 09        	stz	<L189+i_1
  5079 00:0BF5: 64 0B        	stz	<L189+k_1
  5080                        	.line	644
  5081 00:0BF7: F4 00 00     	pea	#<$0
  5082 00:0BFA: F4 05 00     	pea	#<$5
  5083 00:0BFD: F4 7A 00     	pea	#<$7a
  5084 00:0C00: F4 01 00     	pea	#<$1
  5085 00:0C03: F4 00 00     	pea	#<$0
  5086 00:0C06: 22 xx xx xx  	jsl	~~k_put_char
  5087                        ;
  5088                        ;	k_window_draw_background(bx,by,bw,bh,(char)8);
  5089                        	.line	646
  5090 00:0C0A: F4 08 00     	pea	#<$8
  5091 00:0C0D: D4 16        	pei	<L188+bh_0
  5092 00:0C0F: D4 14        	pei	<L188+bw_0
  5093 00:0C11: D4 12        	pei	<L188+by_0
  5094 00:0C13: D4 10        	pei	<L188+bx_0
  5095 00:0C15: 22 xx xx xx  	jsl	~~k_window_draw_background
  5096                        ;
  5097                        ;	k_put_char(0,1,'y',5,0);
  5098                        	.line	648
  5099 00:0C19: F4 00 00     	pea	#<$0
  5100 00:0C1C: F4 05 00     	pea	#<$5
  5101 00:0C1F: F4 79 00     	pea	#<$79
  5102 00:0C22: F4 01 00     	pea	#<$1
  5103 00:0C25: F4 00 00     	pea	#<$0
  5104 00:0C28: 22 xx xx xx  	jsl	~~k_put_char
  5105                        ;
  5106                        ;	for(k=by;k<(by+bh);k++)
  5107                        	.line	650
  5108 00:0C2C: A5 12        	lda	<L188+by_0
  5109 00:0C2E: 85 0B        	sta	<L189+k_1
  5110 00:0C30: 82 4E 01     	brl	L10085
  5111                        L10084:
  5112                        ;	{
  5113                        	.line	651
  5114                        ;		if(k == by ||  k == (by + 2))
  5115                        	.line	652
  5116                        ;		{
  Mon Sep 27 2021  9:39                                                Page 95


  5117 00:0C33: A5 0B        	lda	<L189+k_1
  5118 00:0C35: C5 12        	cmp	<L188+by_0
  5119 00:0C37: D0 03        	bne	L192
  5120 00:0C39: 82 11 00     	brl	L191
  5121                        L192:
  5122 00:0C3C: 18           	clc
  5123 00:0C3D: A9 02 00     	lda	#$2
  5124 00:0C40: 65 12        	adc	<L188+by_0
  5125 00:0C42: 85 01        	sta	<R0
  5126 00:0C44: A5 01        	lda	<R0
  5127 00:0C46: C5 0B        	cmp	<L189+k_1
  5128 00:0C48: F0 03        	beq	L193
  5129 00:0C4A: 82 83 00     	brl	L10086
  5130                        L193:
  5131                        L191:
  5132                        	.line	653
  5133                        ;			k_put_char(bx     ,k,WIN_BORDER_
                    CHAR_CORNER_TLEFT,15,0);
  5134                        	.line	654
  5135 00:0C4D: F4 00 00     	pea	#<$0
  5136 00:0C50: F4 0F 00     	pea	#<$f
  5137 00:0C53: F4 D6 00     	pea	#<$d6
  5138 00:0C56: D4 0B        	pei	<L189+k_1
  5139 00:0C58: D4 10        	pei	<L188+bx_0
  5140 00:0C5A: 22 xx xx xx  	jsl	~~k_put_char
  5141                        ;			k_put_char(bx+bw-1,k,WIN_BORDER_
                    CHAR_CORNER_TRIGHT,15,0);
  5142                        	.line	655
  5143 00:0C5E: F4 00 00     	pea	#<$0
  5144 00:0C61: F4 0F 00     	pea	#<$f
  5145 00:0C64: F4 B7 00     	pea	#<$b7
  5146 00:0C67: D4 0B        	pei	<L189+k_1
  5147 00:0C69: 18           	clc
  5148 00:0C6A: A5 10        	lda	<L188+bx_0
  5149 00:0C6C: 65 14        	adc	<L188+bw_0
  5150 00:0C6E: 85 01        	sta	<R0
  5151 00:0C70: 18           	clc
  5152 00:0C71: A9 FF FF     	lda	#$ffff
  5153 00:0C74: 65 01        	adc	<R0
  5154 00:0C76: 48           	pha
  5155 00:0C77: 22 xx xx xx  	jsl	~~k_put_char
  5156                        ;			for(i=bx+1;i<(bx+bw-1);i++)
  5157                        	.line	656
  5158 00:0C7B: A5 10        	lda	<L188+bx_0
  5159 00:0C7D: 1A           	ina
  5160 00:0C7E: 85 09        	sta	<L189+i_1
  5161 00:0C80: 82 13 00     	brl	L10090
  5162                        L10089:
  5163                        ;			{
  5164                        	.line	657
  5165                        ;				k_put_char(i,k,WIN_BORDE
                    R_CHAR_TOP,15,0);
  5166                        	.line	658
  5167 00:0C83: F4 00 00     	pea	#<$0
  5168 00:0C86: F4 0F 00     	pea	#<$f
  5169 00:0C89: F4 C4 00     	pea	#<$c4
  5170 00:0C8C: D4 0B        	pei	<L189+k_1
  5171 00:0C8E: D4 09        	pei	<L189+i_1
  Mon Sep 27 2021  9:39                                                Page 96


  5172 00:0C90: 22 xx xx xx  	jsl	~~k_put_char
  5173                        ;			}
  5174                        	.line	659
  5175                        L10087:
  5176 00:0C94: E6 09        	inc	<L189+i_1
  5177                        L10090:
  5178 00:0C96: 18           	clc
  5179 00:0C97: A5 10        	lda	<L188+bx_0
  5180 00:0C99: 65 14        	adc	<L188+bw_0
  5181 00:0C9B: 85 01        	sta	<R0
  5182 00:0C9D: 18           	clc
  5183 00:0C9E: A9 FF FF     	lda	#$ffff
  5184 00:0CA1: 65 01        	adc	<R0
  5185 00:0CA3: 85 05        	sta	<R1
  5186 00:0CA5: 38           	sec
  5187 00:0CA6: A5 09        	lda	<L189+i_1
  5188 00:0CA8: E5 05        	sbc	<R1
  5189 00:0CAA: 70 03        	bvs	L194
  5190 00:0CAC: 49 00 80     	eor	#$8000
  5191                        L194:
  5192 00:0CAF: 30 03        	bmi	L195
  5193 00:0CB1: 82 CF FF     	brl	L10089
  5194                        L195:
  5195                        L10088:
  5196                        ;			k_put_string(bx+2,by+1,title,15,
                    0);
  5197                        	.line	660
  5198 00:0CB4: F4 00 00     	pea	#<$0
  5199 00:0CB7: F4 0F 00     	pea	#<$f
  5200 00:0CBA: D4 1A        	pei	<L188+title_0+2
  5201 00:0CBC: D4 18        	pei	<L188+title_0
  5202 00:0CBE: A5 12        	lda	<L188+by_0
  5203 00:0CC0: 1A           	ina
  5204 00:0CC1: 48           	pha
  5205 00:0CC2: 18           	clc
  5206 00:0CC3: A9 02 00     	lda	#$2
  5207 00:0CC6: 65 10        	adc	<L188+bx_0
  5208 00:0CC8: 48           	pha
  5209 00:0CC9: 22 xx xx xx  	jsl	~~k_put_string
  5210                        ;			//k_put_char(bx     ,k,WIN_BORDE
                    R_CHAR_CORNER_EDGE,15,0);
  5211                        ;			//k_put_char(bx+bw-1,k,WIN_BORDE
                    R_CHAR_CORNER_EDGE,15,0);
  5212                        ;
  5213                        ;		}
  5214                        	.line	664
  5215                        ;		/*
  5216                        ;		else if(k == (by + 1))
  5217                        ;		{
  5218                        ;			k_put_char(bx     ,k,WIN_BORDER_
                    CHAR_CORNER_EDGE,15,0);
  5219                        ;			k_put_char(bx+bw-1,k,WIN_BORDER_
                    CHAR_CORNER_EDGE,15,0);
  5220                        ;			for(i=bx+1;i<(bx+bw-1);i++)
  5221                        ;			{
  5222                        ;				k_put_char(i,k,'=',15,0)
                    ;
  5223                        ;			}
  Mon Sep 27 2021  9:39                                                Page 97


  5224                        ;		}
  5225                        ;		*/
  5226                        ;		else if(k == (by + bh - 1))
  5227 00:0CCD: 82 AF 00     	brl	L10091
  5228                        L10086:
  5229                        	.line	676
  5230                        ;		{
  5231 00:0CD0: 18           	clc
  5232 00:0CD1: A5 12        	lda	<L188+by_0
  5233 00:0CD3: 65 16        	adc	<L188+bh_0
  5234 00:0CD5: 85 01        	sta	<R0
  5235 00:0CD7: 18           	clc
  5236 00:0CD8: A9 FF FF     	lda	#$ffff
  5237 00:0CDB: 65 01        	adc	<R0
  5238 00:0CDD: 85 05        	sta	<R1
  5239 00:0CDF: A5 05        	lda	<R1
  5240 00:0CE1: C5 0B        	cmp	<L189+k_1
  5241 00:0CE3: F0 03        	beq	L196
  5242 00:0CE5: 82 69 00     	brl	L10092
  5243                        L196:
  5244                        	.line	677
  5245                        ;			for(i=bx;i<(bx+bw-1);i++)
  5246                        	.line	678
  5247 00:0CE8: A5 10        	lda	<L188+bx_0
  5248 00:0CEA: 85 09        	sta	<L189+i_1
  5249 00:0CEC: 82 13 00     	brl	L10096
  5250                        L10095:
  5251                        ;			{
  5252                        	.line	679
  5253                        ;				k_put_char(i,k,WIN_BORDE
                    R_CHAR_BOTTOM,15,0);
  5254                        	.line	680
  5255 00:0CEF: F4 00 00     	pea	#<$0
  5256 00:0CF2: F4 0F 00     	pea	#<$f
  5257 00:0CF5: F4 C4 00     	pea	#<$c4
  5258 00:0CF8: D4 0B        	pei	<L189+k_1
  5259 00:0CFA: D4 09        	pei	<L189+i_1
  5260 00:0CFC: 22 xx xx xx  	jsl	~~k_put_char
  5261                        ;			}
  5262                        	.line	681
  5263                        L10093:
  5264 00:0D00: E6 09        	inc	<L189+i_1
  5265                        L10096:
  5266 00:0D02: 18           	clc
  5267 00:0D03: A5 10        	lda	<L188+bx_0
  5268 00:0D05: 65 14        	adc	<L188+bw_0
  5269 00:0D07: 85 01        	sta	<R0
  5270 00:0D09: 18           	clc
  5271 00:0D0A: A9 FF FF     	lda	#$ffff
  5272 00:0D0D: 65 01        	adc	<R0
  5273 00:0D0F: 85 05        	sta	<R1
  5274 00:0D11: 38           	sec
  5275 00:0D12: A5 09        	lda	<L189+i_1
  5276 00:0D14: E5 05        	sbc	<R1
  5277 00:0D16: 70 03        	bvs	L197
  5278 00:0D18: 49 00 80     	eor	#$8000
  5279                        L197:
  5280 00:0D1B: 30 03        	bmi	L198
  Mon Sep 27 2021  9:39                                                Page 98


  5281 00:0D1D: 82 CF FF     	brl	L10095
  5282                        L198:
  5283                        L10094:
  5284                        ;			k_put_char(bx     ,k,WIN_BORDER_
                    CHAR_CORNER_BLEFT,15,0);
  5285                        	.line	682
  5286 00:0D20: F4 00 00     	pea	#<$0
  5287 00:0D23: F4 0F 00     	pea	#<$f
  5288 00:0D26: F4 D3 00     	pea	#<$d3
  5289 00:0D29: D4 0B        	pei	<L189+k_1
  5290 00:0D2B: D4 10        	pei	<L188+bx_0
  5291 00:0D2D: 22 xx xx xx  	jsl	~~k_put_char
  5292                        ;			k_put_char(bx+bw-1,k,WIN_BORDER_
                    CHAR_CORNER_BRIGHT,15,0);
  5293                        	.line	683
  5294 00:0D31: F4 00 00     	pea	#<$0
  5295 00:0D34: F4 0F 00     	pea	#<$f
  5296 00:0D37: F4 D3 00     	pea	#<$d3
  5297 00:0D3A: D4 0B        	pei	<L189+k_1
  5298 00:0D3C: 18           	clc
  5299 00:0D3D: A5 10        	lda	<L188+bx_0
  5300 00:0D3F: 65 14        	adc	<L188+bw_0
  5301 00:0D41: 85 01        	sta	<R0
  5302 00:0D43: 18           	clc
  5303 00:0D44: A9 FF FF     	lda	#$ffff
  5304 00:0D47: 65 01        	adc	<R0
  5305 00:0D49: 48           	pha
  5306 00:0D4A: 22 xx xx xx  	jsl	~~k_put_char
  5307                        ;		}
  5308                        	.line	684
  5309                        ;		else
  5310 00:0D4E: 82 2E 00     	brl	L10097
  5311                        L10092:
  5312                        ;		{
  5313                        	.line	686
  5314                        ;			k_put_char(bx     ,k,WIN_BORDER_
                    CHAR_EDGE,15,0);
  5315                        	.line	687
  5316 00:0D51: F4 00 00     	pea	#<$0
  5317 00:0D54: F4 0F 00     	pea	#<$f
  5318 00:0D57: F4 BA 00     	pea	#<$ba
  5319 00:0D5A: D4 0B        	pei	<L189+k_1
  5320 00:0D5C: D4 10        	pei	<L188+bx_0
  5321 00:0D5E: 22 xx xx xx  	jsl	~~k_put_char
  5322                        ;			k_put_char(bx+bw-1,k,WIN_BORDER_
                    CHAR_EDGE,15,0);
  5323                        	.line	688
  5324 00:0D62: F4 00 00     	pea	#<$0
  5325 00:0D65: F4 0F 00     	pea	#<$f
  5326 00:0D68: F4 BA 00     	pea	#<$ba
  5327 00:0D6B: D4 0B        	pei	<L189+k_1
  5328 00:0D6D: 18           	clc
  5329 00:0D6E: A5 10        	lda	<L188+bx_0
  5330 00:0D70: 65 14        	adc	<L188+bw_0
  5331 00:0D72: 85 01        	sta	<R0
  5332 00:0D74: 18           	clc
  5333 00:0D75: A9 FF FF     	lda	#$ffff
  5334 00:0D78: 65 01        	adc	<R0
  Mon Sep 27 2021  9:39                                                Page 99


  5335 00:0D7A: 48           	pha
  5336 00:0D7B: 22 xx xx xx  	jsl	~~k_put_char
  5337                        ;		}
  5338                        	.line	689
  5339                        L10097:
  5340                        L10091:
  5341                        ;	}
  5342                        	.line	690
  5343                        L10082:
  5344 00:0D7F: E6 0B        	inc	<L189+k_1
  5345                        L10085:
  5346 00:0D81: 18           	clc
  5347 00:0D82: A5 12        	lda	<L188+by_0
  5348 00:0D84: 65 16        	adc	<L188+bh_0
  5349 00:0D86: 85 01        	sta	<R0
  5350 00:0D88: 38           	sec
  5351 00:0D89: A5 0B        	lda	<L189+k_1
  5352 00:0D8B: E5 01        	sbc	<R0
  5353 00:0D8D: 70 03        	bvs	L199
  5354 00:0D8F: 49 00 80     	eor	#$8000
  5355                        L199:
  5356 00:0D92: 30 03        	bmi	L200
  5357 00:0D94: 82 9C FE     	brl	L10084
  5358                        L200:
  5359                        L10083:
  5360                        ;
  5361                        ;	k_put_char(0,1,'x',5,0);
  5362                        	.line	692
  5363 00:0D97: F4 00 00     	pea	#<$0
  5364 00:0D9A: F4 05 00     	pea	#<$5
  5365 00:0D9D: F4 78 00     	pea	#<$78
  5366 00:0DA0: F4 01 00     	pea	#<$1
  5367 00:0DA3: F4 00 00     	pea	#<$0
  5368 00:0DA6: 22 xx xx xx  	jsl	~~k_put_char
  5369                        ;
  5370                        ;}
  5371                        	.line	694
  5372                        L201:
  5373 00:0DAA: A5 0E        	lda	<L188+2
  5374 00:0DAC: 85 1A        	sta	<L188+2+12
  5375 00:0DAE: A5 0D        	lda	<L188+1
  5376 00:0DB0: 85 19        	sta	<L188+1+12
  5377 00:0DB2: 2B           	pld
  5378 00:0DB3: 3B           	tsc
  5379 00:0DB4: 18           	clc
  5380 00:0DB5: 69 18 00     	adc	#L188+12
  5381 00:0DB8: 1B           	tcs
  5382 00:0DB9: 6B           	rtl
  5383                        	.endblock	694
  5384             0000000C   L188	equ	12
  5385             00000009   L189	equ	9
  5386                        	ends
  5387                        	efunc
  5388                        	.endfunc	694,9,12
  5389                        	.line	694
  5390                        ;
  5391                        ;void k_window_draw_background(int bx,int by, int 
                    bw,int bh,char bcolor)
  Mon Sep 27 2021  9:39                                                Page 100


  5392                        ;{
  5393                        	.line	696
  5394                        	.line	697
  5395                        	code
  5396                        	xdef	~~k_window_draw_background
  5397                        	func
  5398                        	.function	697
  5399                        ~~k_window_draw_background:
  5400                        	longa	on
  5401                        	longi	on
  5402 00:0DBA: 3B           	tsc
  5403 00:0DBB: 38           	sec
  5404 00:0DBC: E9 08 00     	sbc	#L202
  5405 00:0DBF: 1B           	tcs
  5406 00:0DC0: 0B           	phd
  5407 00:0DC1: 5B           	tcd
  5408             00000004   bx_0	set	4
  5409             00000006   by_0	set	6
  5410             00000008   bw_0	set	8
  5411             0000000A   bh_0	set	10
  5412             0000000C   bcolor_0	set	12
  5413                        	.block	697
  5414                        ;	int i = 0;
  5415                        ;	int k = 0;
  5416                        ;
  5417                        ;	k_put_char(0,1,'w',5,0);
  5418             00000000   i_1	set	0
  5419             00000002   k_1	set	2
  5420                        	.sym	i,0,5,1,16
  5421                        	.sym	k,2,5,1,16
  5422                        	.sym	bx,4,5,6,16
  5423                        	.sym	by,6,5,6,16
  5424                        	.sym	bw,8,5,6,16
  5425                        	.sym	bh,10,5,6,16
  5426                        	.sym	bcolor,12,14,6,8
  5427 00:0DC2: 64 05        	stz	<L203+i_1
  5428 00:0DC4: 64 07        	stz	<L203+k_1
  5429                        	.line	701
  5430 00:0DC6: F4 00 00     	pea	#<$0
  5431 00:0DC9: F4 05 00     	pea	#<$5
  5432 00:0DCC: F4 77 00     	pea	#<$77
  5433 00:0DCF: F4 01 00     	pea	#<$1
  5434 00:0DD2: F4 00 00     	pea	#<$0
  5435 00:0DD5: 22 xx xx xx  	jsl	~~k_put_char
  5436                        ;
  5437                        ;	for(k=by;k<(by + bh);k++)
  5438                        	.line	703
  5439 00:0DD9: A5 0E        	lda	<L202+by_0
  5440 00:0DDB: 85 07        	sta	<L203+k_1
  5441 00:0DDD: 82 58 00     	brl	L10101
  5442                        L10100:
  5443                        ;	{
  5444                        	.line	704
  5445                        ;		k_put_char(0,1,'u',5,0);
  5446                        	.line	705
  5447 00:0DE0: F4 00 00     	pea	#<$0
  5448 00:0DE3: F4 05 00     	pea	#<$5
  5449 00:0DE6: F4 75 00     	pea	#<$75
  Mon Sep 27 2021  9:39                                                Page 101


  5450 00:0DE9: F4 01 00     	pea	#<$1
  5451 00:0DEC: F4 00 00     	pea	#<$0
  5452 00:0DEF: 22 xx xx xx  	jsl	~~k_put_char
  5453                        ;		for(i=bx;i<(bx+bw);i++)
  5454                        	.line	706
  5455 00:0DF3: A5 0C        	lda	<L202+bx_0
  5456 00:0DF5: 85 05        	sta	<L203+i_1
  5457 00:0DF7: 82 26 00     	brl	L10105
  5458                        L10104:
  5459                        ;		{
  5460                        	.line	707
  5461                        ;			//k_set_background(i,k,bcolor);
  5462                        ;			k_put_char(i,k,' ',0,15);
  5463                        	.line	709
  5464 00:0DFA: F4 0F 00     	pea	#<$f
  5465 00:0DFD: F4 00 00     	pea	#<$0
  5466 00:0E00: F4 20 00     	pea	#<$20
  5467 00:0E03: D4 07        	pei	<L203+k_1
  5468 00:0E05: D4 05        	pei	<L203+i_1
  5469 00:0E07: 22 xx xx xx  	jsl	~~k_put_char
  5470                        ;			k_put_char(0,1,'t',5,0);
  5471                        	.line	710
  5472 00:0E0B: F4 00 00     	pea	#<$0
  5473 00:0E0E: F4 05 00     	pea	#<$5
  5474 00:0E11: F4 74 00     	pea	#<$74
  5475 00:0E14: F4 01 00     	pea	#<$1
  5476 00:0E17: F4 00 00     	pea	#<$0
  5477 00:0E1A: 22 xx xx xx  	jsl	~~k_put_char
  5478                        ;		}
  5479                        	.line	711
  5480                        L10102:
  5481 00:0E1E: E6 05        	inc	<L203+i_1
  5482                        L10105:
  5483 00:0E20: 18           	clc
  5484 00:0E21: A5 0C        	lda	<L202+bx_0
  5485 00:0E23: 65 10        	adc	<L202+bw_0
  5486 00:0E25: 85 01        	sta	<R0
  5487 00:0E27: 38           	sec
  5488 00:0E28: A5 05        	lda	<L203+i_1
  5489 00:0E2A: E5 01        	sbc	<R0
  5490 00:0E2C: 70 03        	bvs	L205
  5491 00:0E2E: 49 00 80     	eor	#$8000
  5492                        L205:
  5493 00:0E31: 30 03        	bmi	L206
  5494 00:0E33: 82 C4 FF     	brl	L10104
  5495                        L206:
  5496                        L10103:
  5497                        ;	}
  5498                        	.line	712
  5499                        L10098:
  5500 00:0E36: E6 07        	inc	<L203+k_1
  5501                        L10101:
  5502 00:0E38: 18           	clc
  5503 00:0E39: A5 0E        	lda	<L202+by_0
  5504 00:0E3B: 65 12        	adc	<L202+bh_0
  5505 00:0E3D: 85 01        	sta	<R0
  5506 00:0E3F: 38           	sec
  5507 00:0E40: A5 07        	lda	<L203+k_1
  Mon Sep 27 2021  9:39                                                Page 102


  5508 00:0E42: E5 01        	sbc	<R0
  5509 00:0E44: 70 03        	bvs	L207
  5510 00:0E46: 49 00 80     	eor	#$8000
  5511                        L207:
  5512 00:0E49: 30 03        	bmi	L208
  5513 00:0E4B: 82 92 FF     	brl	L10100
  5514                        L208:
  5515                        L10099:
  5516                        ;
  5517                        ;	k_put_char(0,1,'v',5,0);
  5518                        	.line	714
  5519 00:0E4E: F4 00 00     	pea	#<$0
  5520 00:0E51: F4 05 00     	pea	#<$5
  5521 00:0E54: F4 76 00     	pea	#<$76
  5522 00:0E57: F4 01 00     	pea	#<$1
  5523 00:0E5A: F4 00 00     	pea	#<$0
  5524 00:0E5D: 22 xx xx xx  	jsl	~~k_put_char
  5525                        ;}
  5526                        	.line	715
  5527                        L209:
  5528 00:0E61: A5 0A        	lda	<L202+2
  5529 00:0E63: 85 14        	sta	<L202+2+10
  5530 00:0E65: A5 09        	lda	<L202+1
  5531 00:0E67: 85 13        	sta	<L202+1+10
  5532 00:0E69: 2B           	pld
  5533 00:0E6A: 3B           	tsc
  5534 00:0E6B: 18           	clc
  5535 00:0E6C: 69 12 00     	adc	#L202+10
  5536 00:0E6F: 1B           	tcs
  5537 00:0E70: 6B           	rtl
  5538                        	.endblock	715
  5539             00000008   L202	equ	8
  5540             00000005   L203	equ	5
  5541                        	ends
  5542                        	efunc
  5543                        	.endfunc	715,5,8
  5544                        	.line	715
  5545                        ;
  5546                        ;BOOL consoleWindowProc(PFXOSMESSAGE pMsg)
  5547                        ;{
  5548                        	.line	717
  5549                        	.line	718
  5550                        	code
  5551                        	xdef	~~consoleWindowProc
  5552                        	func
  5553                        	.function	718
  5554                        ~~consoleWindowProc:
  5555                        	longa	on
  5556                        	longi	on
  5557 00:0E71: 3B           	tsc
  5558 00:0E72: 38           	sec
  5559 00:0E73: E9 04 00     	sbc	#L210
  5560 00:0E76: 1B           	tcs
  5561 00:0E77: 0B           	phd
  5562 00:0E78: 5B           	tcd
  5563             00000004   pMsg_0	set	4
  5564                        	.block	718
  5565                        ;	PFXPROCESS p = NULL;
  Mon Sep 27 2021  9:39                                                Page 103


  5566                        ;
  5567                        ;	if(pMsg!=NULL)
  5568             00000000   p_1	set	0
  5569                        	.sym	p,0,138,1,32,20
  5570                        	.sym	pMsg,4,138,6,32,16
  5571 00:0E79: 64 01        	stz	<L211+p_1
  5572 00:0E7B: 64 03        	stz	<L211+p_1+2
  5573                        	.line	721
  5574                        ;	{
  5575 00:0E7D: A5 08        	lda	<L210+pMsg_0
  5576 00:0E7F: 05 0A        	ora	<L210+pMsg_0+2
  5577 00:0E81: D0 03        	bne	L213
  5578 00:0E83: 82 66 00     	brl	L10106
  5579                        L213:
  5580                        	.line	722
  5581                        ;		p = k_exec_get_current_process();
  5582                        	.line	723
  5583 00:0E86: 22 xx xx xx  	jsl	~~k_exec_get_current_process
  5584 00:0E8A: 85 01        	sta	<L211+p_1
  5585 00:0E8C: 86 03        	stx	<L211+p_1+2
  5586                        ;
  5587                        ;		//k_debug_long("consoleWindowProc::Proce
                    ssId:",p->procId);
  5588                        ;
  5589                        ;		switch(pMsg->type)
  5590                        	.line	727
  5591 00:0E8E: A0 08 00     	ldy	#$8
  5592 00:0E91: B7 08        	lda	[<L210+pMsg_0],Y
  5593 00:0E93: 82 46 00     	brl	L10107
  5594                        ;		{
  5595                        	.line	728
  5596                        ;		case FX_CREATE_WINDOW:
  5597                        	.line	729
  5598                        L10109:
  5599                        ;			k_debug_long("consoleWindowProc:
                    :ProcessId:",p->procId);
  5600                        	.line	730
  5601 00:0E96: A0 04 00     	ldy	#$4
  5602 00:0E99: B7 01        	lda	[<L211+p_1],Y
  5603 00:0E9B: 48           	pha
  5604 00:0E9C: A0 02 00     	ldy	#$2
  5605 00:0E9F: B7 01        	lda	[<L211+p_1],Y
  5606 00:0EA1: 48           	pha
  5607 00:0EA2: F4 xx xx     	pea	#^L187
  5608 00:0EA5: F4 xx xx     	pea	#<L187
  5609 00:0EA8: 22 xx xx xx  	jsl	~~k_debug_long
  5610                        ;			k_debug_integer("consoleWindowPr
                    oc::MessageId:",pMsg->type);
  5611                        	.line	731
  5612 00:0EAC: A0 08 00     	ldy	#$8
  5613 00:0EAF: B7 08        	lda	[<L210+pMsg_0],Y
  5614 00:0EB1: 48           	pha
  5615 00:0EB2: F4 xx xx     	pea	#^L187+30
  5616 00:0EB5: F4 xx xx     	pea	#<L187+30
  5617 00:0EB8: 22 xx xx xx  	jsl	~~k_debug_integer
  5618                        ;			break;
  5619                        	.line	732
  5620 00:0EBC: 82 2D 00     	brl	L10108
  Mon Sep 27 2021  9:39                                                Page 104


  5621                        ;		case FX_MBUTTON_DOWN:
  5622                        	.line	733
  5623                        L10110:
  5624                        ;			if(pMsg->type!=FX_PROCESS)
  5625                        	.line	734
  5626                        ;			{
  5627 00:0EBF: A0 08 00     	ldy	#$8
  5628 00:0EC2: B7 08        	lda	[<L210+pMsg_0],Y
  5629 00:0EC4: C9 00 FF     	cmp	#<$ff00
  5630 00:0EC7: D0 03        	bne	L214
  5631 00:0EC9: 82 0A 00     	brl	L10111
  5632                        L214:
  5633                        	.line	735
  5634                        ;				//k_debug_integer("conso
                    leWindowProc::ProcessId:",p->procId);
  5635                        ;				k_debug_string("consoleW
                    indowProc::FX_MBUTTON_DOWN\r\n");
  5636                        	.line	737
  5637 00:0ECC: F4 xx xx     	pea	#^L187+60
  5638 00:0ECF: F4 xx xx     	pea	#<L187+60
  5639 00:0ED2: 22 xx xx xx  	jsl	~~k_debug_string
  5640                        ;			}
  5641                        	.line	738
  5642                        ;
  5643                        ;			break;
  5644                        L10111:
  5645                        	.line	740
  5646 00:0ED6: 82 13 00     	brl	L10108
  5647                        ;		default:
  5648                        	.line	741
  5649                        L10112:
  5650                        ;			break;
  5651                        	.line	742
  5652 00:0ED9: 82 10 00     	brl	L10108
  5653                        ;		}
  5654                        	.line	743
  5655                        L10107:
  5656                        	xref	~~~swt
  5657 00:0EDC: 22 xx xx xx  	jsl	~~~swt
  5658 00:0EE0: 02 00        	dw	2
  5659 00:0EE2: 0C 0F        	dw	3852
  5660 00:0EE4: xx xx        	dw	L10110-1
  5661 00:0EE6: 03 FF        	dw	65283
  5662 00:0EE8: xx xx        	dw	L10109-1
  5663 00:0EEA: xx xx        	dw	L10112-1
  5664                        L10108:
  5665                        ;	}
  5666                        	.line	744
  5667                        ;
  5668                        ;	return TRUE;
  5669                        L10106:
  5670                        	.line	746
  5671 00:0EEC: A9 01 00     	lda	#$1
  5672                        L215:
  5673 00:0EEF: A8           	tay
  5674 00:0EF0: A5 06        	lda	<L210+2
  5675 00:0EF2: 85 0A        	sta	<L210+2+4
  5676 00:0EF4: A5 05        	lda	<L210+1
  Mon Sep 27 2021  9:39                                                Page 105


  5677 00:0EF6: 85 09        	sta	<L210+1+4
  5678 00:0EF8: 2B           	pld
  5679 00:0EF9: 3B           	tsc
  5680 00:0EFA: 18           	clc
  5681 00:0EFB: 69 08 00     	adc	#L210+4
  5682 00:0EFE: 1B           	tcs
  5683 00:0EFF: 98           	tya
  5684 00:0F00: 6B           	rtl
  5685                        ;}
  5686                        	.line	747
  5687                        	.endblock	747
  5688             00000004   L210	equ	4
  5689             00000001   L211	equ	1
  5690                        	ends
  5691                        	efunc
  5692                        	.endfunc	747,1,4
  5693                        	.line	747
  5694                        	data
  5695                        L187:
  5696 00:0297: 63 6F 6E 73  	db	$63,$6F,$6E,$73,$6F,$6C,$65,$57,$69,$6E,
                    $64,$6F,$77,$50,$72
       00:029B: 6F 6C 65 57 
       00:029F: 69 6E 64 6F 
       00:02A3: 77 50 72 
  5697 00:02A6: 6F 63 3A 3A  	db	$6F,$63,$3A,$3A,$50,$72,$6F,$63,$65,$73,
                    $73,$49,$64,$3A,$00
       00:02AA: 50 72 6F 63 
       00:02AE: 65 73 73 49 
       00:02B2: 64 3A 00 
  5698 00:02B5: 63 6F 6E 73  	db	$63,$6F,$6E,$73,$6F,$6C,$65,$57,$69,$6E,
                    $64,$6F,$77,$50,$72
       00:02B9: 6F 6C 65 57 
       00:02BD: 69 6E 64 6F 
       00:02C1: 77 50 72 
  5699 00:02C4: 6F 63 3A 3A  	db	$6F,$63,$3A,$3A,$4D,$65,$73,$73,$61,$67,
                    $65,$49,$64,$3A,$00
       00:02C8: 4D 65 73 73 
       00:02CC: 61 67 65 49 
       00:02D0: 64 3A 00 
  5700 00:02D3: 63 6F 6E 73  	db	$63,$6F,$6E,$73,$6F,$6C,$65,$57,$69,$6E,
                    $64,$6F,$77,$50,$72
       00:02D7: 6F 6C 65 57 
       00:02DB: 69 6E 64 6F 
       00:02DF: 77 50 72 
  5701 00:02E2: 6F 63 3A 3A  	db	$6F,$63,$3A,$3A,$46,$58,$5F,$4D,$42,$55,
                    $54,$54,$4F,$4E,$5F
       00:02E6: 46 58 5F 4D 
       00:02EA: 42 55 54 54 
       00:02EE: 4F 4E 5F 
  5702 00:02F1: 44 4F 57 4E  	db	$44,$4F,$57,$4E,$0D,$0A,$00
       00:02F5: 0D 0A 00 
  5703 00:02F8:              	ends
  5704                        ;
  5705                        ;
  5706                        ;void DefConsoleProc(PFXOSMESSAGE pMsg)
  5707                        ;{
  5708                        	.line	750
  5709                        	.line	751
  Mon Sep 27 2021  9:39                                                Page 106


  5710                        	code
  5711                        	xdef	~~DefConsoleProc
  5712                        	func
  5713                        	.function	751
  5714                        ~~DefConsoleProc:
  5715                        	longa	on
  5716                        	longi	on
  5717 00:0F01: 3B           	tsc
  5718 00:0F02: 38           	sec
  5719 00:0F03: E9 30 00     	sbc	#L217
  5720 00:0F06: 1B           	tcs
  5721 00:0F07: 0B           	phd
  5722 00:0F08: 5B           	tcd
  5723             00000004   pMsg_0	set	4
  5724                        	.block	751
  5725                        ;	LPCHAR ptr = NULL;
  5726                        ;	PFXPROCESS p = NULL;
  5727                        ;	PCONSOLECTX pctx = NULL;
  5728                        ;	BYTE decodedKey = 0;
  5729                        ;	int i = 0;
  5730                        ;	int j = 0;
  5731                        ;	int temp1;
  5732                        ;	int temp2;
  5733                        ;	UINT temp3;
  5734                        ;	BYTE serial;
  5735                        ;	PCLICKDETECTED pcd;
  5736                        ;	LPSTR captionText = NULL;
  5737                        ;	PFXNODE  clickNode = NULL;
  5738                        ;
  5739                        ;	//k_debug_string("DefConsoleProc enter\r\n");
  5740                        ;	if(pMsg!=NULL)
  5741             00000000   ptr_1	set	0
  5742             00000004   p_1	set	4
  5743             00000008   pctx_1	set	8
  5744             0000000C   decodedKey_1	set	12
  5745             0000000D   i_1	set	13
  5746             0000000F   j_1	set	15
  5747             00000011   temp1_1	set	17
  5748             00000013   temp2_1	set	19
  5749             00000015   temp3_1	set	21
  5750             00000017   serial_1	set	23
  5751             00000018   pcd_1	set	24
  5752             0000001C   captionText_1	set	28
  5753             00000020   clickNode_1	set	32
  5754                        	.sym	ptr,0,142,1,32
  5755                        	.sym	p,4,138,1,32,20
  5756                        	.sym	pctx,8,138,1,32,87
  5757                        	.sym	decodedKey,12,14,1,8
  5758                        	.sym	i,13,5,1,16
  5759                        	.sym	j,15,5,1,16
  5760                        	.sym	temp1,17,5,1,16
  5761                        	.sym	temp2,19,5,1,16
  5762                        	.sym	temp3,21,16,1,16
  5763                        	.sym	serial,23,14,1,8
  5764                        	.sym	pcd,24,138,1,32,73
  5765                        	.sym	captionText,28,142,1,32
  5766                        	.sym	clickNode,32,138,1,32,5
  5767                        	.sym	pMsg,4,138,6,32,16
  Mon Sep 27 2021  9:39                                                Page 107


  5768 00:0F09: 64 0D        	stz	<L218+ptr_1
  5769 00:0F0B: 64 0F        	stz	<L218+ptr_1+2
  5770 00:0F0D: 64 11        	stz	<L218+p_1
  5771 00:0F0F: 64 13        	stz	<L218+p_1+2
  5772 00:0F11: 64 15        	stz	<L218+pctx_1
  5773 00:0F13: 64 17        	stz	<L218+pctx_1+2
  5774 00:0F15: E2 20        	sep	#$20
  5775                        	longa	off
  5776 00:0F17: 64 19        	stz	<L218+decodedKey_1
  5777 00:0F19: C2 20        	rep	#$20
  5778                        	longa	on
  5779 00:0F1B: 64 1A        	stz	<L218+i_1
  5780 00:0F1D: 64 1C        	stz	<L218+j_1
  5781 00:0F1F: 64 29        	stz	<L218+captionText_1
  5782 00:0F21: 64 2B        	stz	<L218+captionText_1+2
  5783 00:0F23: 64 2D        	stz	<L218+clickNode_1
  5784 00:0F25: 64 2F        	stz	<L218+clickNode_1+2
  5785                        	.line	767
  5786                        ;	{
  5787 00:0F27: A5 34        	lda	<L217+pMsg_0
  5788 00:0F29: 05 36        	ora	<L217+pMsg_0+2
  5789 00:0F2B: D0 03        	bne	L220
  5790 00:0F2D: 82 AC 12     	brl	L10113
  5791                        L220:
  5792                        	.line	768
  5793                        ;		p = k_exec_get_current_process();
  5794                        	.line	769
  5795 00:0F30: 22 xx xx xx  	jsl	~~k_exec_get_current_process
  5796 00:0F34: 85 11        	sta	<L218+p_1
  5797 00:0F36: 86 13        	stx	<L218+p_1+2
  5798                        ;
  5799                        ;		if(p)
  5800                        	.line	771
  5801                        ;		{
  5802 00:0F38: A5 11        	lda	<L218+p_1
  5803 00:0F3A: 05 13        	ora	<L218+p_1+2
  5804 00:0F3C: D0 03        	bne	L221
  5805 00:0F3E: 82 0E 00     	brl	L10114
  5806                        L221:
  5807                        	.line	772
  5808                        ;			pctx = (PCONSOLECTX)p->ctx;
  5809                        	.line	773
  5810 00:0F41: A0 0A 00     	ldy	#$a
  5811 00:0F44: B7 11        	lda	[<L218+p_1],Y
  5812 00:0F46: 85 15        	sta	<L218+pctx_1
  5813 00:0F48: A0 0C 00     	ldy	#$c
  5814 00:0F4B: B7 11        	lda	[<L218+p_1],Y
  5815 00:0F4D: 85 17        	sta	<L218+pctx_1+2
  5816                        ;			//k_debug_pointer("DefConsolePro
                    c::pctx:",pctx);
  5817                        ;			//k_debug_pointer("DefConsolePro
                    c::pctx->userData:",pctx->userData);
  5818                        ;		}
  5819                        	.line	776
  5820                        ;
  5821                        ;		switch(pMsg->type)
  5822                        L10114:
  5823                        	.line	778
  Mon Sep 27 2021  9:39                                                Page 108


  5824 00:0F4F: A0 08 00     	ldy	#$8
  5825 00:0F52: B7 34        	lda	[<L217+pMsg_0],Y
  5826 00:0F54: 82 2D 12     	brl	L10115
  5827                        ;		{
  5828                        	.line	779
  5829                        ;		case FX_INIT_MESSAGE:
  5830                        	.line	780
  5831                        L10117:
  5832                        ;			if(p!=NULL)
  5833                        	.line	781
  5834                        ;			{
  5835 00:0F57: A5 11        	lda	<L218+p_1
  5836 00:0F59: 05 13        	ora	<L218+p_1+2
  5837 00:0F5B: D0 03        	bne	L222
  5838 00:0F5D: 82 DB 02     	brl	L10118
  5839                        L222:
  5840                        	.line	782
  5841                        ;				k_debug_long("DefConsole
                    Proc::ProcessId:",p->procId);
  5842                        	.line	783
  5843 00:0F60: A0 04 00     	ldy	#$4
  5844 00:0F63: B7 11        	lda	[<L218+p_1],Y
  5845 00:0F65: 48           	pha
  5846 00:0F66: A0 02 00     	ldy	#$2
  5847 00:0F69: B7 11        	lda	[<L218+p_1],Y
  5848 00:0F6B: 48           	pha
  5849 00:0F6C: F4 xx xx     	pea	#^L216
  5850 00:0F6F: F4 xx xx     	pea	#<L216
  5851 00:0F72: 22 xx xx xx  	jsl	~~k_debug_long
  5852                        ;
  5853                        ;				k_clear_screen(0);
  5854                        	.line	785
  5855 00:0F76: F4 00 00     	pea	#<$0
  5856 00:0F79: 22 xx xx xx  	jsl	~~k_clear_screen
  5857                        ;
  5858                        ;				p->consoleCtl = (PCONSOL
                    E_CONTROL)k_mem_allocate_heap(sizeof(CONSOLE_CONTROL));
  5859                        	.line	787
  5860 00:0F7D: F4 00 00     	pea	#^$38
  5861 00:0F80: F4 38 00     	pea	#<$38
  5862 00:0F83: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  5863 00:0F87: 85 01        	sta	<R0
  5864 00:0F89: 86 03        	stx	<R0+2
  5865 00:0F8B: A5 01        	lda	<R0
  5866 00:0F8D: A0 54 00     	ldy	#$54
  5867 00:0F90: 97 11        	sta	[<L218+p_1],Y
  5868 00:0F92: A5 03        	lda	<R0+2
  5869 00:0F94: A0 56 00     	ldy	#$56
  5870 00:0F97: 97 11        	sta	[<L218+p_1],Y
  5871                        ;				if(p->consoleCtl!=NULL)
  5872                        	.line	788
  5873                        ;				{
  5874 00:0F99: A0 54 00     	ldy	#$54
  5875 00:0F9C: B7 11        	lda	[<L218+p_1],Y
  5876 00:0F9E: A0 56 00     	ldy	#$56
  5877 00:0FA1: 17 11        	ora	[<L218+p_1],Y
  5878 00:0FA3: D0 03        	bne	L223
  5879 00:0FA5: 82 90 02     	brl	L10119
  Mon Sep 27 2021  9:39                                                Page 109


  5880                        L223:
  5881                        	.line	789
  5882                        ;					p->consoleCtl->b
                    gColor = 0;
  5883                        	.line	790
  5884 00:0FA8: A0 54 00     	ldy	#$54
  5885 00:0FAB: B7 11        	lda	[<L218+p_1],Y
  5886 00:0FAD: 85 01        	sta	<R0
  5887 00:0FAF: A0 56 00     	ldy	#$56
  5888 00:0FB2: B7 11        	lda	[<L218+p_1],Y
  5889 00:0FB4: 85 03        	sta	<R0+2
  5890 00:0FB6: A9 00 00     	lda	#$0
  5891 00:0FB9: A0 0A 00     	ldy	#$a
  5892 00:0FBC: 97 01        	sta	[<R0],Y
  5893                        ;					p->consoleCtl->c
                    urX    = 0;
  5894                        	.line	791
  5895 00:0FBE: A0 54 00     	ldy	#$54
  5896 00:0FC1: B7 11        	lda	[<L218+p_1],Y
  5897 00:0FC3: 85 01        	sta	<R0
  5898 00:0FC5: A0 56 00     	ldy	#$56
  5899 00:0FC8: B7 11        	lda	[<L218+p_1],Y
  5900 00:0FCA: 85 03        	sta	<R0+2
  5901 00:0FCC: A9 00 00     	lda	#$0
  5902 00:0FCF: A0 04 00     	ldy	#$4
  5903 00:0FD2: 97 01        	sta	[<R0],Y
  5904                        ;					p->consoleCtl->c
                    urY    = CONSOLE_FIRST_LINE;
  5905                        	.line	792
  5906 00:0FD4: A0 54 00     	ldy	#$54
  5907 00:0FD7: B7 11        	lda	[<L218+p_1],Y
  5908 00:0FD9: 85 01        	sta	<R0
  5909 00:0FDB: A0 56 00     	ldy	#$56
  5910 00:0FDE: B7 11        	lda	[<L218+p_1],Y
  5911 00:0FE0: 85 03        	sta	<R0+2
  5912 00:0FE2: A9 05 00     	lda	#$5
  5913 00:0FE5: A0 06 00     	ldy	#$6
  5914 00:0FE8: 97 01        	sta	[<R0],Y
  5915                        ;					p->consoleCtl->f
                    gColor = 15;
  5916                        	.line	793
  5917 00:0FEA: A0 54 00     	ldy	#$54
  5918 00:0FED: B7 11        	lda	[<L218+p_1],Y
  5919 00:0FEF: 85 01        	sta	<R0
  5920 00:0FF1: A0 56 00     	ldy	#$56
  5921 00:0FF4: B7 11        	lda	[<L218+p_1],Y
  5922 00:0FF6: 85 03        	sta	<R0+2
  5923 00:0FF8: A9 0F 00     	lda	#$f
  5924 00:0FFB: A0 08 00     	ldy	#$8
  5925 00:0FFE: 97 01        	sta	[<R0],Y
  5926                        ;					p->consoleCtl->m
                    axCols = k_get_cols_visible();
  5927                        	.line	794
  5928 00:1000: A0 54 00     	ldy	#$54
  5929 00:1003: B7 11        	lda	[<L218+p_1],Y
  5930 00:1005: 85 01        	sta	<R0
  5931 00:1007: A0 56 00     	ldy	#$56
  5932 00:100A: B7 11        	lda	[<L218+p_1],Y
  Mon Sep 27 2021  9:39                                                Page 110


  5933 00:100C: 85 03        	sta	<R0+2
  5934 00:100E: 22 xx xx xx  	jsl	~~k_get_cols_visible
  5935 00:1012: 87 01        	sta	[<R0]
  5936                        ;					p->consoleCtl->m
                    axRows = k_get_lines_visible();
  5937                        	.line	795
  5938 00:1014: A0 54 00     	ldy	#$54
  5939 00:1017: B7 11        	lda	[<L218+p_1],Y
  5940 00:1019: 85 01        	sta	<R0
  5941 00:101B: A0 56 00     	ldy	#$56
  5942 00:101E: B7 11        	lda	[<L218+p_1],Y
  5943 00:1020: 85 03        	sta	<R0+2
  5944 00:1022: 22 xx xx xx  	jsl	~~k_get_lines_visible
  5945 00:1026: A0 02 00     	ldy	#$2
  5946 00:1029: 97 01        	sta	[<R0],Y
  5947                        ;					p->consoleCtl->d
                    esktopMode = FALSE;
  5948                        	.line	796
  5949 00:102B: A0 54 00     	ldy	#$54
  5950 00:102E: B7 11        	lda	[<L218+p_1],Y
  5951 00:1030: 85 01        	sta	<R0
  5952 00:1032: A0 56 00     	ldy	#$56
  5953 00:1035: B7 11        	lda	[<L218+p_1],Y
  5954 00:1037: 85 03        	sta	<R0+2
  5955 00:1039: E2 20        	sep	#$20
  5956                        	longa	off
  5957 00:103B: A9 00        	lda	#$0
  5958 00:103D: A0 31 00     	ldy	#$31
  5959 00:1040: 97 01        	sta	[<R0],Y
  5960 00:1042: C2 20        	rep	#$20
  5961                        	longa	on
  5962                        ;
  5963                        ;					k_set_cursor_pos
                    ition(p->consoleCtl->curX,p->consoleCtl->curY);
  5964                        	.line	798
  5965 00:1044: A0 54 00     	ldy	#$54
  5966 00:1047: B7 11        	lda	[<L218+p_1],Y
  5967 00:1049: 85 01        	sta	<R0
  5968 00:104B: A0 56 00     	ldy	#$56
  5969 00:104E: B7 11        	lda	[<L218+p_1],Y
  5970 00:1050: 85 03        	sta	<R0+2
  5971 00:1052: A0 06 00     	ldy	#$6
  5972 00:1055: B7 01        	lda	[<R0],Y
  5973 00:1057: 48           	pha
  5974 00:1058: A0 54 00     	ldy	#$54
  5975 00:105B: B7 11        	lda	[<L218+p_1],Y
  5976 00:105D: 85 01        	sta	<R0
  5977 00:105F: A0 56 00     	ldy	#$56
  5978 00:1062: B7 11        	lda	[<L218+p_1],Y
  5979 00:1064: 85 03        	sta	<R0+2
  5980 00:1066: A0 04 00     	ldy	#$4
  5981 00:1069: B7 01        	lda	[<R0],Y
  5982 00:106B: 48           	pha
  5983 00:106C: 22 xx xx xx  	jsl	~~k_set_cursor_position
  5984                        ;
  5985                        ;					k_debug_integer(
                    "maxCols:",p->consoleCtl->maxCols);
  5986                        	.line	800
  Mon Sep 27 2021  9:39                                                Page 111


  5987 00:1070: A0 54 00     	ldy	#$54
  5988 00:1073: B7 11        	lda	[<L218+p_1],Y
  5989 00:1075: 85 01        	sta	<R0
  5990 00:1077: A0 56 00     	ldy	#$56
  5991 00:107A: B7 11        	lda	[<L218+p_1],Y
  5992 00:107C: 85 03        	sta	<R0+2
  5993 00:107E: A7 01        	lda	[<R0]
  5994 00:1080: 48           	pha
  5995 00:1081: F4 xx xx     	pea	#^L216+27
  5996 00:1084: F4 xx xx     	pea	#<L216+27
  5997 00:1087: 22 xx xx xx  	jsl	~~k_debug_integer
  5998                        ;					k_debug_integer(
                    "maxRows:",p->consoleCtl->maxRows);
  5999                        	.line	801
  6000 00:108B: A0 54 00     	ldy	#$54
  6001 00:108E: B7 11        	lda	[<L218+p_1],Y
  6002 00:1090: 85 01        	sta	<R0
  6003 00:1092: A0 56 00     	ldy	#$56
  6004 00:1095: B7 11        	lda	[<L218+p_1],Y
  6005 00:1097: 85 03        	sta	<R0+2
  6006 00:1099: A0 02 00     	ldy	#$2
  6007 00:109C: B7 01        	lda	[<R0],Y
  6008 00:109E: 48           	pha
  6009 00:109F: F4 xx xx     	pea	#^L216+36
  6010 00:10A2: F4 xx xx     	pea	#<L216+36
  6011 00:10A5: 22 xx xx xx  	jsl	~~k_debug_integer
  6012                        ;
  6013                        ;					for(i=0;i<56;i++
                    )
  6014                        	.line	803
  6015 00:10A9: 64 1A        	stz	<L218+i_1
  6016                        L10122:
  6017                        ;						for(j=0;
                    j<72;j++)
  6018                        	.line	804
  6019 00:10AB: 64 1C        	stz	<L218+j_1
  6020                        L10125:
  6021                        ;							
                    consoleBuffer[i][j] = 0;
  6022                        	.line	805
  6023 00:10AD: A5 1C        	lda	<L218+j_1
  6024 00:10AF: 0A           	asl	A
  6025 00:10B0: 85 01        	sta	<R0
  6026 00:10B2: A5 1A        	lda	<L218+i_1
  6027 00:10B4: A2 90 00     	ldx	#<$90
  6028                        	xref	~~~mul
  6029 00:10B7: 22 xx xx xx  	jsl	~~~mul
  6030 00:10BB: 85 05        	sta	<R1
  6031 00:10BD: 18           	clc
  6032 00:10BE: A5 05        	lda	<R1
  6033 00:10C0: 65 01        	adc	<R0
  6034 00:10C2: 85 09        	sta	<R2
  6035 00:10C4: A9 00 00     	lda	#$0
  6036 00:10C7: A6 09        	ldx	<R2
  6037 00:10C9: 9D xx xx     	sta	|~~consoleBuffer,X
  6038                        L10123:
  6039 00:10CC: E6 1C        	inc	<L218+j_1
  6040 00:10CE: 38           	sec
  Mon Sep 27 2021  9:39                                                Page 112


  6041 00:10CF: A5 1C        	lda	<L218+j_1
  6042 00:10D1: E9 48 00     	sbc	#<$48
  6043 00:10D4: 70 03        	bvs	L224
  6044 00:10D6: 49 00 80     	eor	#$8000
  6045                        L224:
  6046 00:10D9: 30 03        	bmi	L225
  6047 00:10DB: 82 CF FF     	brl	L10125
  6048                        L225:
  6049                        L10124:
  6050                        L10120:
  6051 00:10DE: E6 1A        	inc	<L218+i_1
  6052 00:10E0: 38           	sec
  6053 00:10E1: A5 1A        	lda	<L218+i_1
  6054 00:10E3: E9 38 00     	sbc	#<$38
  6055 00:10E6: 70 03        	bvs	L226
  6056 00:10E8: 49 00 80     	eor	#$8000
  6057                        L226:
  6058 00:10EB: 30 03        	bmi	L227
  6059 00:10ED: 82 BB FF     	brl	L10122
  6060                        L227:
  6061                        L10121:
  6062                        ;
  6063                        ;					p->ctx = k_mem_a
                    llocate_heap(sizeof(CONSOLECTX));
  6064                        	.line	807
  6065 00:10F0: F4 00 00     	pea	#^$8f
  6066 00:10F3: F4 8F 00     	pea	#<$8f
  6067 00:10F6: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  6068 00:10FA: 85 01        	sta	<R0
  6069 00:10FC: 86 03        	stx	<R0+2
  6070 00:10FE: A5 01        	lda	<R0
  6071 00:1100: A0 0A 00     	ldy	#$a
  6072 00:1103: 97 11        	sta	[<L218+p_1],Y
  6073 00:1105: A5 03        	lda	<R0+2
  6074 00:1107: A0 0C 00     	ldy	#$c
  6075 00:110A: 97 11        	sta	[<L218+p_1],Y
  6076                        ;					if(p->ctx!=NULL)
  6077                        	.line	808
  6078                        ;					{
  6079 00:110C: A0 0A 00     	ldy	#$a
  6080 00:110F: B7 11        	lda	[<L218+p_1],Y
  6081 00:1111: A0 0C 00     	ldy	#$c
  6082 00:1114: 17 11        	ora	[<L218+p_1],Y
  6083 00:1116: D0 03        	bne	L228
  6084 00:1118: 82 FA 00     	brl	L10126
  6085                        L228:
  6086                        	.line	809
  6087                        ;						k_debug_
                    pointer("DefConsoleProc::pctx:",p->ctx);
  6088                        	.line	810
  6089 00:111B: A0 0C 00     	ldy	#$c
  6090 00:111E: B7 11        	lda	[<L218+p_1],Y
  6091 00:1120: 48           	pha
  6092 00:1121: A0 0A 00     	ldy	#$a
  6093 00:1124: B7 11        	lda	[<L218+p_1],Y
  6094 00:1126: 48           	pha
  6095 00:1127: F4 xx xx     	pea	#^L216+45
  6096 00:112A: F4 xx xx     	pea	#<L216+45
  Mon Sep 27 2021  9:39                                                Page 113


  6097 00:112D: 22 xx xx xx  	jsl	~~k_debug_pointer
  6098                        ;
  6099                        ;						pctx = (
                    PCONSOLECTX)p->ctx;
  6100                        	.line	812
  6101 00:1131: A0 0A 00     	ldy	#$a
  6102 00:1134: B7 11        	lda	[<L218+p_1],Y
  6103 00:1136: 85 15        	sta	<L218+pctx_1
  6104 00:1138: A0 0C 00     	ldy	#$c
  6105 00:113B: B7 11        	lda	[<L218+p_1],Y
  6106 00:113D: 85 17        	sta	<L218+pctx_1+2
  6107                        ;						memset(p
                    ctx->lineBuffer,0,128);
  6108                        	.line	813
  6109 00:113F: F4 80 00     	pea	#<$80
  6110 00:1142: F4 00 00     	pea	#<$0
  6111 00:1145: 18           	clc
  6112 00:1146: A9 02 00     	lda	#$2
  6113 00:1149: 65 15        	adc	<L218+pctx_1
  6114 00:114B: 85 01        	sta	<R0
  6115 00:114D: A9 00 00     	lda	#$0
  6116 00:1150: 65 17        	adc	<L218+pctx_1+2
  6117 00:1152: 85 03        	sta	<R0+2
  6118 00:1154: D4 03        	pei	<R0+2
  6119 00:1156: D4 01        	pei	<R0
  6120 00:1158: 22 xx xx xx  	jsl	~~memset
  6121                        ;						pctx->li
                    neBufferIndex = 0;
  6122                        	.line	814
  6123 00:115C: A9 00 00     	lda	#$0
  6124 00:115F: 87 15        	sta	[<L218+pctx_1]
  6125                        ;
  6126                        ;						pctx->us
                    erData = k_mem_allocate_heap(sizeof(FXCOMBUFFER));
  6127                        	.line	816
  6128 00:1161: F4 00 00     	pea	#^$104
  6129 00:1164: F4 04 01     	pea	#<$104
  6130 00:1167: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  6131 00:116B: 85 01        	sta	<R0
  6132 00:116D: 86 03        	stx	<R0+2
  6133 00:116F: A5 01        	lda	<R0
  6134 00:1171: A0 83 00     	ldy	#$83
  6135 00:1174: 97 15        	sta	[<L218+pctx_1],Y
  6136 00:1176: A5 03        	lda	<R0+2
  6137 00:1178: A0 85 00     	ldy	#$85
  6138 00:117B: 97 15        	sta	[<L218+pctx_1],Y
  6139                        ;						k_debug_
                    pointer("DefConsoleProc::pctx->userData:",pctx->userData);
  6140                        	.line	817
  6141 00:117D: A0 85 00     	ldy	#$85
  6142 00:1180: B7 15        	lda	[<L218+pctx_1],Y
  6143 00:1182: 48           	pha
  6144 00:1183: A0 83 00     	ldy	#$83
  6145 00:1186: B7 15        	lda	[<L218+pctx_1],Y
  6146 00:1188: 48           	pha
  6147 00:1189: F4 xx xx     	pea	#^L216+67
  6148 00:118C: F4 xx xx     	pea	#<L216+67
  6149 00:118F: 22 xx xx xx  	jsl	~~k_debug_pointer
  Mon Sep 27 2021  9:39                                                Page 114


  6150                        ;
  6151                        ;						if(pctx-
                    >userData)
  6152                        	.line	819
  6153                        ;							
                    memset(pctx->userData ,0,sizeof(FXCOMBUFFER));
  6154 00:1193: A0 83 00     	ldy	#$83
  6155 00:1196: B7 15        	lda	[<L218+pctx_1],Y
  6156 00:1198: A0 85 00     	ldy	#$85
  6157 00:119B: 17 15        	ora	[<L218+pctx_1],Y
  6158 00:119D: D0 03        	bne	L229
  6159 00:119F: 82 16 00     	brl	L10127
  6160                        L229:
  6161                        	.line	820
  6162 00:11A2: F4 04 01     	pea	#<$104
  6163 00:11A5: F4 00 00     	pea	#<$0
  6164 00:11A8: A0 85 00     	ldy	#$85
  6165 00:11AB: B7 15        	lda	[<L218+pctx_1],Y
  6166 00:11AD: 48           	pha
  6167 00:11AE: A0 83 00     	ldy	#$83
  6168 00:11B1: B7 15        	lda	[<L218+pctx_1],Y
  6169 00:11B3: 48           	pha
  6170 00:11B4: 22 xx xx xx  	jsl	~~memset
  6171                        ;
  6172                        ;						((PFXCOM
                    BUFFER)(pctx->userData))->cbSize = sizeof(FXCOMBUFFER);
  6173                        L10127:
  6174                        	.line	822
  6175 00:11B8: A0 83 00     	ldy	#$83
  6176 00:11BB: B7 15        	lda	[<L218+pctx_1],Y
  6177 00:11BD: 85 01        	sta	<R0
  6178 00:11BF: A0 85 00     	ldy	#$85
  6179 00:11C2: B7 15        	lda	[<L218+pctx_1],Y
  6180 00:11C4: 85 03        	sta	<R0+2
  6181 00:11C6: A9 04 01     	lda	#$104
  6182 00:11C9: 87 01        	sta	[<R0]
  6183                        ;						((PFXCOM
                    BUFFER)(pctx->userData))->cbBuffer = 0;
  6184                        	.line	823
  6185 00:11CB: A0 83 00     	ldy	#$83
  6186 00:11CE: B7 15        	lda	[<L218+pctx_1],Y
  6187 00:11D0: 85 01        	sta	<R0
  6188 00:11D2: A0 85 00     	ldy	#$85
  6189 00:11D5: B7 15        	lda	[<L218+pctx_1],Y
  6190 00:11D7: 85 03        	sta	<R0+2
  6191 00:11D9: A9 00 00     	lda	#$0
  6192 00:11DC: A0 02 00     	ldy	#$2
  6193 00:11DF: 97 01        	sta	[<R0],Y
  6194                        ;						k_debug_
                    long("DefConsoleProc::ProcessId:",p->procId);
  6195                        	.line	824
  6196 00:11E1: A0 04 00     	ldy	#$4
  6197 00:11E4: B7 11        	lda	[<L218+p_1],Y
  6198 00:11E6: 48           	pha
  6199 00:11E7: A0 02 00     	ldy	#$2
  6200 00:11EA: B7 11        	lda	[<L218+p_1],Y
  6201 00:11EC: 48           	pha
  6202 00:11ED: F4 xx xx     	pea	#^L216+99
  Mon Sep 27 2021  9:39                                                Page 115


  6203 00:11F0: F4 xx xx     	pea	#<L216+99
  6204 00:11F3: 22 xx xx xx  	jsl	~~k_debug_long
  6205                        ;						k_debug_
                    integer("DefConsoleProc::FX_PROCESS:COM1-COUNT:",((PFXCOMBUF
                    FER)(pctx->userData))->cbBuffer);
  6206                        	.line	825
  6207 00:11F7: A0 83 00     	ldy	#$83
  6208 00:11FA: B7 15        	lda	[<L218+pctx_1],Y
  6209 00:11FC: 85 01        	sta	<R0
  6210 00:11FE: A0 85 00     	ldy	#$85
  6211 00:1201: B7 15        	lda	[<L218+pctx_1],Y
  6212 00:1203: 85 03        	sta	<R0+2
  6213 00:1205: A0 02 00     	ldy	#$2
  6214 00:1208: B7 01        	lda	[<R0],Y
  6215 00:120A: 48           	pha
  6216 00:120B: F4 xx xx     	pea	#^L216+126
  6217 00:120E: F4 xx xx     	pea	#<L216+126
  6218 00:1211: 22 xx xx xx  	jsl	~~k_debug_integer
  6219                        ;
  6220                        ;					}
  6221                        	.line	827
  6222                        ;
  6223                        ;					k_initialize_tex
                    t_fonts(0);
  6224                        L10126:
  6225                        	.line	829
  6226 00:1215: F4 00 00     	pea	#<$0
  6227 00:1218: 22 xx xx xx  	jsl	~~k_initialize_text_fonts
  6228                        ;
  6229                        ;					k_enable_text_mo
                    de();
  6230                        	.line	831
  6231 00:121C: 22 xx xx xx  	jsl	~~k_enable_text_mode
  6232                        ;					setColors();
  6233                        	.line	832
  6234 00:1220: 22 xx xx xx  	jsl	~~setColors
  6235                        ;
  6236                        ;					//k_enable_text_
                    cursor(1);
  6237                        ;					k_enable_text_cu
                    rsor(0);
  6238                        	.line	835
  6239 00:1224: F4 00 00     	pea	#<$0
  6240 00:1227: 22 xx xx xx  	jsl	~~k_enable_text_cursor
  6241                        ;
  6242                        ;
  6243                        ;					//k_set_cursor_p
                    osition(p->consoleCtl->curX,
  6244                        ;					//		
                                  p->consoleCtl->curY);
  6245                        ;					//k_set_cursor_p
                    osition(20,20);
  6246                        ;
  6247                        ;
  6248                        ;					k_debug_integer(
                    "DefConsoleProc::Initial-lineBufferIndex:",pctx->lineBufferI
                    ndex);
  6249                        	.line	843
  Mon Sep 27 2021  9:39                                                Page 116


  6250 00:122B: A7 15        	lda	[<L218+pctx_1]
  6251 00:122D: 48           	pha
  6252 00:122E: F4 xx xx     	pea	#^L216+165
  6253 00:1231: F4 xx xx     	pea	#<L216+165
  6254 00:1234: 22 xx xx xx  	jsl	~~k_debug_integer
  6255                        ;
  6256                        ;
  6257                        ;					//k_user_CreateW
                    indowClass("consoleWindowClass",NULL,0,NULL,NULL,NULL,consol
                    eWindowProc);
  6258                        ;
  6259                        ;					//UART1_BASE[1] 
                    = 0x01;
  6260                        ;
  6261                        ;				}
  6262                        	.line	850
  6263                        ;			}
  6264                        L10119:
  6265                        	.line	851
  6266                        ;			else
  6267 00:1238: 82 0A 00     	brl	L10128
  6268                        L10118:
  6269                        ;				k_debug_string("DefConso
                    leProc::FX_INIT_MESSAGE\r\n");
  6270                        	.line	853
  6271 00:123B: F4 xx xx     	pea	#^L216+206
  6272 00:123E: F4 xx xx     	pea	#<L216+206
  6273 00:1241: 22 xx xx xx  	jsl	~~k_debug_string
  6274                        L10128:
  6275                        ;			k_init_spinner(&consolespinctx);
  6276                        	.line	854
  6277 00:1245: A9 xx xx     	lda	#<~~consolespinctx
  6278 00:1248: 85 01        	sta	<R0
  6279                        	xref	_BEG_DATA
  6280 00:124A: A9 xx xx     	lda	#_BEG_DATA>>16
  6281 00:124D: 85 03        	sta	<R0+2
  6282 00:124F: D4 03        	pei	<R0+2
  6283 00:1251: D4 01        	pei	<R0
  6284 00:1253: 22 xx xx xx  	jsl	~~k_init_spinner
  6285                        ;			break;
  6286                        	.line	855
  6287 00:1257: 82 82 0F     	brl	L10116
  6288                        ;		case FX_UNINIT_MESSAGE:
  6289                        	.line	856
  6290                        L10129:
  6291                        ;			break;
  6292                        	.line	857
  6293 00:125A: 82 7F 0F     	brl	L10116
  6294                        ;		case FX_KEY_UP:
  6295                        	.line	858
  6296                        L10130:
  6297                        ;			//k_debug_integer("DefConsolePro
                    c::FX_KEY_UP0:",pMsg->data[0]);
  6298                        ;			//k_debug_integer("DefConsolePro
                    c::FX_KEY_UP1:",pMsg->data[1]);
  6299                        ;			//k_debug_integer("DefConsolePro
                    c::FX_KEY_UP2:",pMsg->data[2]);
  6300                        ;			//k_debug_integer("DefConsolePro
  Mon Sep 27 2021  9:39                                                Page 117


                    c::isShifted:",pctx->isShifted);
  6301                        ;			if(pMsg->data[0] == 182 || pMsg-
                    >data[0] == 170)
  6302                        	.line	863
  6303                        ;			{
  6304 00:125D: E2 20        	sep	#$20
  6305                        	longa	off
  6306 00:125F: A0 16 00     	ldy	#$16
  6307 00:1262: B7 34        	lda	[<L217+pMsg_0],Y
  6308 00:1264: C9 B6        	cmp	#<$b6
  6309 00:1266: C2 20        	rep	#$20
  6310                        	longa	on
  6311 00:1268: D0 03        	bne	L231
  6312 00:126A: 82 10 00     	brl	L230
  6313                        L231:
  6314 00:126D: E2 20        	sep	#$20
  6315                        	longa	off
  6316 00:126F: A0 16 00     	ldy	#$16
  6317 00:1272: B7 34        	lda	[<L217+pMsg_0],Y
  6318 00:1274: C9 AA        	cmp	#<$aa
  6319 00:1276: C2 20        	rep	#$20
  6320                        	longa	on
  6321 00:1278: F0 03        	beq	L232
  6322 00:127A: 82 0E 00     	brl	L10131
  6323                        L232:
  6324                        L230:
  6325                        	.line	864
  6326                        ;				pctx->isShifted = FALSE;
  6327                        	.line	865
  6328 00:127D: E2 20        	sep	#$20
  6329                        	longa	off
  6330 00:127F: A9 00        	lda	#$0
  6331 00:1281: A0 82 00     	ldy	#$82
  6332 00:1284: 97 15        	sta	[<L218+pctx_1],Y
  6333 00:1286: C2 20        	rep	#$20
  6334                        	longa	on
  6335                        ;			}
  6336                        	.line	866
  6337                        ;			else
  6338 00:1288: 82 00 00     	brl	L10132
  6339                        L10131:
  6340                        ;			{
  6341                        	.line	868
  6342                        ;
  6343                        ;			}
  6344                        	.line	870
  6345                        L10132:
  6346                        ;			break;
  6347                        	.line	871
  6348 00:128B: 82 4E 0F     	brl	L10116
  6349                        ;		case FX_KEY_DOWN:
  6350                        	.line	872
  6351                        L10133:
  6352                        ;			//if(p!=NULL)
  6353                        ;			//	k_debug_integer("DefCons
                    oleProc::ProcessId:",p->procId);
  6354                        ;			//k_debug_integer("DefConsolePro
                    c::FX_KEY_DOWN0:",pMsg->data[0]);
  Mon Sep 27 2021  9:39                                                Page 118


  6355                        ;			//k_debug_integer("DefConsolePro
                    c::FX_KEY_DOWN1:",pMsg->data[1]);
  6356                        ;			//k_debug_integer("DefConsolePro
                    c::FX_KEY_DOWN2:",pMsg->data[2]);
  6357                        ;			//k_debug_integer("DefConsolePro
                    c::isShifted:",pctx->isShifted);
  6358                        ;
  6359                        ;			//k_debug_integer("DefConsolePro
                    c::curX:",p->consoleCtl->curX);
  6360                        ;			//k_debug_integer("DefConsolePro
                    c::curY:",p->consoleCtl->curY);
  6361                        ;
  6362                        ;			k_debug_hex("DefConsoleProc::FX_
                    KEY_DOWN SCANCODE:",((PKEYSTATE)pMsg->data)->scanCode);
  6363                        	.line	883
  6364 00:128E: A0 16 00     	ldy	#$16
  6365 00:1291: B7 34        	lda	[<L217+pMsg_0],Y
  6366 00:1293: 48           	pha
  6367 00:1294: F4 xx xx     	pea	#^L216+240
  6368 00:1297: F4 xx xx     	pea	#<L216+240
  6369 00:129A: 22 xx xx xx  	jsl	~~k_debug_hex
  6370                        ;			//k_debug_hex("DesktopWindowProc
                    ::FX_KEY_DOWN EXT:",pMsg->data[3]);
  6371                        ;			//k_debug_hex("DesktopWindowProc
                    ::FX_KEY_DOWN SHIFTED:",pMsg->data[1]);
  6372                        ;			//k_debug_hex("DesktopWindowProc
                    ::FX_KEY_DOWN ALT:",pMsg->data[2]);
  6373                        ;			k_debug_char("DefConsoleProc::FX
                    _KEY_DOWN CHAR:",(CHAR)((PKEYSTATE)pMsg->data)->keyChar);
  6374                        	.line	887
  6375 00:129E: A0 1D 00     	ldy	#$1d
  6376 00:12A1: B7 34        	lda	[<L217+pMsg_0],Y
  6377 00:12A3: 48           	pha
  6378 00:12A4: F4 xx xx     	pea	#^L216+278
  6379 00:12A7: F4 xx xx     	pea	#<L216+278
  6380 00:12AA: 22 xx xx xx  	jsl	~~k_debug_char
  6381                        ;			//k_debug_hex_integer("DesktopWi
                    ndowProc::FX_KEY_DOWN CHAR:",*((PUINT)(&pMsg->data[0])));
  6382                        ;
  6383                        ;			pctx->isShifted = ((PKEYSTATE)pM
                    sg->data)->isShifted;
  6384                        	.line	890
  6385 00:12AE: E2 20        	sep	#$20
  6386                        	longa	off
  6387 00:12B0: A0 17 00     	ldy	#$17
  6388 00:12B3: B7 34        	lda	[<L217+pMsg_0],Y
  6389 00:12B5: A0 82 00     	ldy	#$82
  6390 00:12B8: 97 15        	sta	[<L218+pctx_1],Y
  6391 00:12BA: C2 20        	rep	#$20
  6392                        	longa	on
  6393                        ;
  6394                        ;			if(pMsg->data[0] == 54 || pMsg->
                    data[0] == 42)
  6395                        	.line	892
  6396                        ;			{
  6397 00:12BC: E2 20        	sep	#$20
  6398                        	longa	off
  6399 00:12BE: A0 16 00     	ldy	#$16
  Mon Sep 27 2021  9:39                                                Page 119


  6400 00:12C1: B7 34        	lda	[<L217+pMsg_0],Y
  6401 00:12C3: C9 36        	cmp	#<$36
  6402 00:12C5: C2 20        	rep	#$20
  6403                        	longa	on
  6404 00:12C7: D0 03        	bne	L234
  6405 00:12C9: 82 10 00     	brl	L233
  6406                        L234:
  6407 00:12CC: E2 20        	sep	#$20
  6408                        	longa	off
  6409 00:12CE: A0 16 00     	ldy	#$16
  6410 00:12D1: B7 34        	lda	[<L217+pMsg_0],Y
  6411 00:12D3: C9 2A        	cmp	#<$2a
  6412 00:12D5: C2 20        	rep	#$20
  6413                        	longa	on
  6414 00:12D7: F0 03        	beq	L235
  6415 00:12D9: 82 0E 00     	brl	L10134
  6416                        L235:
  6417                        L233:
  6418                        	.line	893
  6419                        ;				pctx->isShifted = TRUE;
  6420                        	.line	894
  6421 00:12DC: E2 20        	sep	#$20
  6422                        	longa	off
  6423 00:12DE: A9 01        	lda	#$1
  6424 00:12E0: A0 82 00     	ldy	#$82
  6425 00:12E3: 97 15        	sta	[<L218+pctx_1],Y
  6426 00:12E5: C2 20        	rep	#$20
  6427                        	longa	on
  6428                        ;			}
  6429                        	.line	895
  6430                        ;			else
  6431 00:12E7: 82 2B 04     	brl	L10135
  6432                        L10134:
  6433                        ;			{
  6434                        	.line	897
  6435                        ;				if((CHAR)((PKEYSTATE)pMs
                    g->data)->keyChar == 13)
  6436                        	.line	898
  6437                        ;				{
  6438 00:12EA: E2 20        	sep	#$20
  6439                        	longa	off
  6440 00:12EC: A0 1D 00     	ldy	#$1d
  6441 00:12EF: B7 34        	lda	[<L217+pMsg_0],Y
  6442 00:12F1: C9 0D        	cmp	#<$d
  6443 00:12F3: C2 20        	rep	#$20
  6444                        	longa	on
  6445 00:12F5: F0 03        	beq	L236
  6446 00:12F7: 82 AF 00     	brl	L10136
  6447                        L236:
  6448                        	.line	899
  6449                        ;					k_put_char(p->co
                    nsoleCtl->curX,
  6450                        	.line	900
  6451                        ;							
                    			   p->consoleCtl->curY,
  6452                        ;							
                    			   95,
  6453                        ;							
  Mon Sep 27 2021  9:39                                                Page 120


                    			   0,0);
  6454 00:12FA: F4 00 00     	pea	#<$0
  6455 00:12FD: F4 00 00     	pea	#<$0
  6456 00:1300: F4 5F 00     	pea	#<$5f
  6457 00:1303: A0 54 00     	ldy	#$54
  6458 00:1306: B7 11        	lda	[<L218+p_1],Y
  6459 00:1308: 85 01        	sta	<R0
  6460 00:130A: A0 56 00     	ldy	#$56
  6461 00:130D: B7 11        	lda	[<L218+p_1],Y
  6462 00:130F: 85 03        	sta	<R0+2
  6463 00:1311: A0 06 00     	ldy	#$6
  6464 00:1314: B7 01        	lda	[<R0],Y
  6465 00:1316: 48           	pha
  6466 00:1317: A0 54 00     	ldy	#$54
  6467 00:131A: B7 11        	lda	[<L218+p_1],Y
  6468 00:131C: 85 01        	sta	<R0
  6469 00:131E: A0 56 00     	ldy	#$56
  6470 00:1321: B7 11        	lda	[<L218+p_1],Y
  6471 00:1323: 85 03        	sta	<R0+2
  6472 00:1325: A0 04 00     	ldy	#$4
  6473 00:1328: B7 01        	lda	[<R0],Y
  6474 00:132A: 48           	pha
  6475 00:132B: 22 xx xx xx  	jsl	~~k_put_char
  6476                        ;
  6477                        ;					p->consoleCtl->c
                    urX = 0;
  6478                        	.line	905
  6479 00:132F: A0 54 00     	ldy	#$54
  6480 00:1332: B7 11        	lda	[<L218+p_1],Y
  6481 00:1334: 85 01        	sta	<R0
  6482 00:1336: A0 56 00     	ldy	#$56
  6483 00:1339: B7 11        	lda	[<L218+p_1],Y
  6484 00:133B: 85 03        	sta	<R0+2
  6485 00:133D: A9 00 00     	lda	#$0
  6486 00:1340: A0 04 00     	ldy	#$4
  6487 00:1343: 97 01        	sta	[<R0],Y
  6488                        ;					p->consoleCtl->c
                    urY++;
  6489                        	.line	906
  6490 00:1345: A0 54 00     	ldy	#$54
  6491 00:1348: B7 11        	lda	[<L218+p_1],Y
  6492 00:134A: 85 01        	sta	<R0
  6493 00:134C: A0 56 00     	ldy	#$56
  6494 00:134F: B7 11        	lda	[<L218+p_1],Y
  6495 00:1351: 85 03        	sta	<R0+2
  6496 00:1353: A0 06 00     	ldy	#$6
  6497 00:1356: B7 01        	lda	[<R0],Y
  6498 00:1358: 1A           	ina
  6499 00:1359: A0 06 00     	ldy	#$6
  6500 00:135C: 97 01        	sta	[<R0],Y
  6501                        ;
  6502                        ;					if(pctx->lineBuf
                    fer!=NULL && pctx->lineBufferIndex > 0)
  6503                        	.line	908
  6504                        ;					{
  6505 00:135E: 18           	clc
  6506 00:135F: A9 02 00     	lda	#$2
  6507 00:1362: 65 15        	adc	<L218+pctx_1
  Mon Sep 27 2021  9:39                                                Page 121


  6508 00:1364: 85 01        	sta	<R0
  6509 00:1366: A9 00 00     	lda	#$0
  6510 00:1369: 65 17        	adc	<L218+pctx_1+2
  6511 00:136B: 85 03        	sta	<R0+2
  6512 00:136D: A5 01        	lda	<R0
  6513 00:136F: 05 03        	ora	<R0+2
  6514 00:1371: D0 03        	bne	L237
  6515 00:1373: 82 2B 00     	brl	L10137
  6516                        L237:
  6517 00:1376: 38           	sec
  6518 00:1377: A9 00 00     	lda	#$0
  6519 00:137A: E7 15        	sbc	[<L218+pctx_1]
  6520 00:137C: 70 03        	bvs	L238
  6521 00:137E: 49 00 80     	eor	#$8000
  6522                        L238:
  6523 00:1381: 10 03        	bpl	L239
  6524 00:1383: 82 1B 00     	brl	L10137
  6525                        L239:
  6526                        	.line	909
  6527                        ;						k_consol
                    e_process_command(pctx->lineBuffer,p);
  6528                        	.line	910
  6529 00:1386: D4 13        	pei	<L218+p_1+2
  6530 00:1388: D4 11        	pei	<L218+p_1
  6531 00:138A: 18           	clc
  6532 00:138B: A9 02 00     	lda	#$2
  6533 00:138E: 65 15        	adc	<L218+pctx_1
  6534 00:1390: 85 01        	sta	<R0
  6535 00:1392: A9 00 00     	lda	#$0
  6536 00:1395: 65 17        	adc	<L218+pctx_1+2
  6537 00:1397: 85 03        	sta	<R0+2
  6538 00:1399: D4 03        	pei	<R0+2
  6539 00:139B: D4 01        	pei	<R0
  6540 00:139D: 22 xx xx xx  	jsl	~~k_console_process_command
  6541                        ;						//k_debu
                    g_string("DefConsoleProc::FX_KEY_DOWN:k_console_process_comm
                    and\r\n");
  6542                        ;					}
  6543                        	.line	912
  6544                        ;					pctx->lineBuffer
                    Index = 0;
  6545                        L10137:
  6546                        	.line	913
  6547 00:13A1: A9 00 00     	lda	#$0
  6548 00:13A4: 87 15        	sta	[<L218+pctx_1]
  6549                        ;
  6550                        ;				}
  6551                        	.line	915
  6552                        ;				else if((CHAR)((PKEYSTAT
                    E)pMsg->data)->keyChar == 8)
  6553 00:13A6: 82 2E 03     	brl	L10138
  6554                        L10136:
  6555                        	.line	916
  6556                        ;				{
  6557 00:13A9: E2 20        	sep	#$20
  6558                        	longa	off
  6559 00:13AB: A0 1D 00     	ldy	#$1d
  6560 00:13AE: B7 34        	lda	[<L217+pMsg_0],Y
  Mon Sep 27 2021  9:39                                                Page 122


  6561 00:13B0: C9 08        	cmp	#<$8
  6562 00:13B2: C2 20        	rep	#$20
  6563                        	longa	on
  6564 00:13B4: F0 03        	beq	L240
  6565 00:13B6: 82 4E 01     	brl	L10139
  6566                        L240:
  6567                        	.line	917
  6568                        ;					k_put_char(p->co
                    nsoleCtl->curX,
  6569                        	.line	918
  6570                        ;							
                    			   p->consoleCtl->curY,
  6571                        ;							
                    			   95,
  6572                        ;							
                    			   0,0);
  6573 00:13B9: F4 00 00     	pea	#<$0
  6574 00:13BC: F4 00 00     	pea	#<$0
  6575 00:13BF: F4 5F 00     	pea	#<$5f
  6576 00:13C2: A0 54 00     	ldy	#$54
  6577 00:13C5: B7 11        	lda	[<L218+p_1],Y
  6578 00:13C7: 85 01        	sta	<R0
  6579 00:13C9: A0 56 00     	ldy	#$56
  6580 00:13CC: B7 11        	lda	[<L218+p_1],Y
  6581 00:13CE: 85 03        	sta	<R0+2
  6582 00:13D0: A0 06 00     	ldy	#$6
  6583 00:13D3: B7 01        	lda	[<R0],Y
  6584 00:13D5: 48           	pha
  6585 00:13D6: A0 54 00     	ldy	#$54
  6586 00:13D9: B7 11        	lda	[<L218+p_1],Y
  6587 00:13DB: 85 01        	sta	<R0
  6588 00:13DD: A0 56 00     	ldy	#$56
  6589 00:13E0: B7 11        	lda	[<L218+p_1],Y
  6590 00:13E2: 85 03        	sta	<R0+2
  6591 00:13E4: A0 04 00     	ldy	#$4
  6592 00:13E7: B7 01        	lda	[<R0],Y
  6593 00:13E9: 48           	pha
  6594 00:13EA: 22 xx xx xx  	jsl	~~k_put_char
  6595                        ;
  6596                        ;					p->consoleCtl->c
                    urX--;
  6597                        	.line	923
  6598 00:13EE: A0 54 00     	ldy	#$54
  6599 00:13F1: B7 11        	lda	[<L218+p_1],Y
  6600 00:13F3: 85 01        	sta	<R0
  6601 00:13F5: A0 56 00     	ldy	#$56
  6602 00:13F8: B7 11        	lda	[<L218+p_1],Y
  6603 00:13FA: 85 03        	sta	<R0+2
  6604 00:13FC: 18           	clc
  6605 00:13FD: A9 FF FF     	lda	#$ffff
  6606 00:1400: A0 04 00     	ldy	#$4
  6607 00:1403: 77 01        	adc	[<R0],Y
  6608 00:1405: A0 04 00     	ldy	#$4
  6609 00:1408: 97 01        	sta	[<R0],Y
  6610                        ;					if(p->consoleCtl
                    ->curX < 0)
  6611                        	.line	924
  6612                        ;					{
  Mon Sep 27 2021  9:39                                                Page 123


  6613 00:140A: A0 54 00     	ldy	#$54
  6614 00:140D: B7 11        	lda	[<L218+p_1],Y
  6615 00:140F: 85 01        	sta	<R0
  6616 00:1411: A0 56 00     	ldy	#$56
  6617 00:1414: B7 11        	lda	[<L218+p_1],Y
  6618 00:1416: 85 03        	sta	<R0+2
  6619 00:1418: A0 04 00     	ldy	#$4
  6620 00:141B: B7 01        	lda	[<R0],Y
  6621 00:141D: 30 03        	bmi	L241
  6622 00:141F: 82 3F 00     	brl	L10140
  6623                        L241:
  6624                        	.line	925
  6625                        ;						p->conso
                    leCtl->curX = p->consoleCtl->maxCols;
  6626                        	.line	926
  6627 00:1422: A0 54 00     	ldy	#$54
  6628 00:1425: B7 11        	lda	[<L218+p_1],Y
  6629 00:1427: 85 01        	sta	<R0
  6630 00:1429: A0 56 00     	ldy	#$56
  6631 00:142C: B7 11        	lda	[<L218+p_1],Y
  6632 00:142E: 85 03        	sta	<R0+2
  6633 00:1430: A0 54 00     	ldy	#$54
  6634 00:1433: B7 11        	lda	[<L218+p_1],Y
  6635 00:1435: 85 05        	sta	<R1
  6636 00:1437: A0 56 00     	ldy	#$56
  6637 00:143A: B7 11        	lda	[<L218+p_1],Y
  6638 00:143C: 85 07        	sta	<R1+2
  6639 00:143E: A7 05        	lda	[<R1]
  6640 00:1440: A0 04 00     	ldy	#$4
  6641 00:1443: 97 01        	sta	[<R0],Y
  6642                        ;						p->conso
                    leCtl->curY--;
  6643                        	.line	927
  6644 00:1445: A0 54 00     	ldy	#$54
  6645 00:1448: B7 11        	lda	[<L218+p_1],Y
  6646 00:144A: 85 01        	sta	<R0
  6647 00:144C: A0 56 00     	ldy	#$56
  6648 00:144F: B7 11        	lda	[<L218+p_1],Y
  6649 00:1451: 85 03        	sta	<R0+2
  6650 00:1453: 18           	clc
  6651 00:1454: A9 FF FF     	lda	#$ffff
  6652 00:1457: A0 06 00     	ldy	#$6
  6653 00:145A: 77 01        	adc	[<R0],Y
  6654 00:145C: A0 06 00     	ldy	#$6
  6655 00:145F: 97 01        	sta	[<R0],Y
  6656                        ;					}
  6657                        	.line	928
  6658                        ;
  6659                        ;					pctx->lineBuffer
                    [pctx->lineBufferIndex] = 0;
  6660                        L10140:
  6661                        	.line	930
  6662 00:1461: A7 15        	lda	[<L218+pctx_1]
  6663 00:1463: 85 01        	sta	<R0
  6664 00:1465: 18           	clc
  6665 00:1466: A9 02 00     	lda	#$2
  6666 00:1469: 65 01        	adc	<R0
  6667 00:146B: 85 05        	sta	<R1
  Mon Sep 27 2021  9:39                                                Page 124


  6668 00:146D: E2 20        	sep	#$20
  6669                        	longa	off
  6670 00:146F: A9 00        	lda	#$0
  6671 00:1471: A4 05        	ldy	<R1
  6672 00:1473: 97 15        	sta	[<L218+pctx_1],Y
  6673 00:1475: C2 20        	rep	#$20
  6674                        	longa	on
  6675                        ;					pctx->lineBuffer
                    Index = pctx->lineBufferIndex - 1;
  6676                        	.line	931
  6677 00:1477: 18           	clc
  6678 00:1478: A9 FF FF     	lda	#$ffff
  6679 00:147B: 67 15        	adc	[<L218+pctx_1]
  6680 00:147D: 87 15        	sta	[<L218+pctx_1]
  6681                        ;					if(pctx->lineBuf
                    ferIndex < 0)
  6682                        	.line	932
  6683                        ;						pctx->li
                    neBufferIndex = 0;
  6684 00:147F: A7 15        	lda	[<L218+pctx_1]
  6685 00:1481: 30 03        	bmi	L242
  6686 00:1483: 82 05 00     	brl	L10141
  6687                        L242:
  6688                        	.line	933
  6689 00:1486: A9 00 00     	lda	#$0
  6690 00:1489: 87 15        	sta	[<L218+pctx_1]
  6691                        ;
  6692                        ;					pctx->lineBuffer
                    [pctx->lineBufferIndex] = 0;
  6693                        L10141:
  6694                        	.line	935
  6695 00:148B: A7 15        	lda	[<L218+pctx_1]
  6696 00:148D: 85 01        	sta	<R0
  6697 00:148F: 18           	clc
  6698 00:1490: A9 02 00     	lda	#$2
  6699 00:1493: 65 01        	adc	<R0
  6700 00:1495: 85 05        	sta	<R1
  6701 00:1497: E2 20        	sep	#$20
  6702                        	longa	off
  6703 00:1499: A9 00        	lda	#$0
  6704 00:149B: A4 05        	ldy	<R1
  6705 00:149D: 97 15        	sta	[<L218+pctx_1],Y
  6706 00:149F: C2 20        	rep	#$20
  6707                        	longa	on
  6708                        ;
  6709                        ;					if(p->consoleCtl
                    ->curY < CONSOLE_FIRST_LINE)
  6710                        	.line	937
  6711                        ;						p->conso
                    leCtl->curY = CONSOLE_FIRST_LINE;
  6712 00:14A1: A0 54 00     	ldy	#$54
  6713 00:14A4: B7 11        	lda	[<L218+p_1],Y
  6714 00:14A6: 85 01        	sta	<R0
  6715 00:14A8: A0 56 00     	ldy	#$56
  6716 00:14AB: B7 11        	lda	[<L218+p_1],Y
  6717 00:14AD: 85 03        	sta	<R0+2
  6718 00:14AF: A0 06 00     	ldy	#$6
  6719 00:14B2: B7 01        	lda	[<R0],Y
  Mon Sep 27 2021  9:39                                                Page 125


  6720 00:14B4: 30 0A        	bmi	L243
  6721 00:14B6: 3A           	dea
  6722 00:14B7: 3A           	dea
  6723 00:14B8: 3A           	dea
  6724 00:14B9: 3A           	dea
  6725 00:14BA: 3A           	dea
  6726 00:14BB: 30 03        	bmi	L243
  6727 00:14BD: 82 16 00     	brl	L10142
  6728                        L243:
  6729                        	.line	938
  6730 00:14C0: A0 54 00     	ldy	#$54
  6731 00:14C3: B7 11        	lda	[<L218+p_1],Y
  6732 00:14C5: 85 01        	sta	<R0
  6733 00:14C7: A0 56 00     	ldy	#$56
  6734 00:14CA: B7 11        	lda	[<L218+p_1],Y
  6735 00:14CC: 85 03        	sta	<R0+2
  6736 00:14CE: A9 05 00     	lda	#$5
  6737 00:14D1: A0 06 00     	ldy	#$6
  6738 00:14D4: 97 01        	sta	[<R0],Y
  6739                        ;					if(p->consoleCtl
                    ->curX < 0)
  6740                        L10142:
  6741                        	.line	939
  6742                        ;						p->conso
                    leCtl->curX = 0;
  6743 00:14D6: A0 54 00     	ldy	#$54
  6744 00:14D9: B7 11        	lda	[<L218+p_1],Y
  6745 00:14DB: 85 01        	sta	<R0
  6746 00:14DD: A0 56 00     	ldy	#$56
  6747 00:14E0: B7 11        	lda	[<L218+p_1],Y
  6748 00:14E2: 85 03        	sta	<R0+2
  6749 00:14E4: A0 04 00     	ldy	#$4
  6750 00:14E7: B7 01        	lda	[<R0],Y
  6751 00:14E9: 30 03        	bmi	L244
  6752 00:14EB: 82 16 00     	brl	L10143
  6753                        L244:
  6754                        	.line	940
  6755 00:14EE: A0 54 00     	ldy	#$54
  6756 00:14F1: B7 11        	lda	[<L218+p_1],Y
  6757 00:14F3: 85 01        	sta	<R0
  6758 00:14F5: A0 56 00     	ldy	#$56
  6759 00:14F8: B7 11        	lda	[<L218+p_1],Y
  6760 00:14FA: 85 03        	sta	<R0+2
  6761 00:14FC: A9 00 00     	lda	#$0
  6762 00:14FF: A0 04 00     	ldy	#$4
  6763 00:1502: 97 01        	sta	[<R0],Y
  6764                        ;				}
  6765                        L10143:
  6766                        	.line	941
  6767                        ;				else
  6768 00:1504: 82 D0 01     	brl	L10144
  6769                        L10139:
  6770                        ;				{
  6771                        	.line	943
  6772                        ;					k_debug_integer(
                    "DefConsoleProc::lineBufferIndexA:",pctx->lineBufferIndex);
  6773                        	.line	944
  6774 00:1507: A7 15        	lda	[<L218+pctx_1]
  Mon Sep 27 2021  9:39                                                Page 126


  6775 00:1509: 48           	pha
  6776 00:150A: F4 xx xx     	pea	#^L216+312
  6777 00:150D: F4 xx xx     	pea	#<L216+312
  6778 00:1510: 22 xx xx xx  	jsl	~~k_debug_integer
  6779                        ;
  6780                        ;					/*
  6781                        ;					if(pctx->isShift
                    ed)
  6782                        ;						decodedK
                    ey = k_getKeyboardChar(pMsg->data[0],pMsg->data[1],pctx->isS
                    hifted,0);
  6783                        ;					else
  6784                        ;						decodedK
                    ey = pMsg->data[2];
  6785                        ;					*/
  6786                        ;
  6787                        ;					decodedKey = (CH
                    AR)((PKEYSTATE)pMsg->data)->keyChar;
  6788                        	.line	953
  6789 00:1514: E2 20        	sep	#$20
  6790                        	longa	off
  6791 00:1516: A0 1D 00     	ldy	#$1d
  6792 00:1519: B7 34        	lda	[<L217+pMsg_0],Y
  6793 00:151B: 85 19        	sta	<L218+decodedKey_1
  6794 00:151D: C2 20        	rep	#$20
  6795                        	longa	on
  6796                        ;
  6797                        ;					pctx->lineBuffer
                    [pctx->lineBufferIndex] = decodedKey;
  6798                        	.line	955
  6799 00:151F: A7 15        	lda	[<L218+pctx_1]
  6800 00:1521: 85 01        	sta	<R0
  6801 00:1523: 18           	clc
  6802 00:1524: A9 02 00     	lda	#$2
  6803 00:1527: 65 01        	adc	<R0
  6804 00:1529: 85 05        	sta	<R1
  6805 00:152B: E2 20        	sep	#$20
  6806                        	longa	off
  6807 00:152D: A5 19        	lda	<L218+decodedKey_1
  6808 00:152F: A4 05        	ldy	<R1
  6809 00:1531: 97 15        	sta	[<L218+pctx_1],Y
  6810 00:1533: C2 20        	rep	#$20
  6811                        	longa	on
  6812                        ;
  6813                        ;					//k_debug_char("
                    KEY:",decodedKey);
  6814                        ;
  6815                        ;
  6816                        ;					if(p->consoleCtl
                    ->desktopMode)
  6817                        	.line	960
  6818                        ;					{
  6819 00:1535: A0 54 00     	ldy	#$54
  6820 00:1538: B7 11        	lda	[<L218+p_1],Y
  6821 00:153A: 85 01        	sta	<R0
  6822 00:153C: A0 56 00     	ldy	#$56
  6823 00:153F: B7 11        	lda	[<L218+p_1],Y
  6824 00:1541: 85 03        	sta	<R0+2
  Mon Sep 27 2021  9:39                                                Page 127


  6825 00:1543: A0 31 00     	ldy	#$31
  6826 00:1546: B7 01        	lda	[<R0],Y
  6827 00:1548: 29 FF 00     	and	#$ff
  6828 00:154B: D0 03        	bne	L245
  6829 00:154D: 82 45 00     	brl	L10145
  6830                        L245:
  6831                        	.line	961
  6832                        ;
  6833                        ;						k_put_fo
                    nt(decodedKey,p->consoleCtl->curX,p->consoleCtl->curY,p->con
                    soleCtl->fgColor);
  6834                        	.line	963
  6835 00:1550: A0 54 00     	ldy	#$54
  6836 00:1553: B7 11        	lda	[<L218+p_1],Y
  6837 00:1555: 85 01        	sta	<R0
  6838 00:1557: A0 56 00     	ldy	#$56
  6839 00:155A: B7 11        	lda	[<L218+p_1],Y
  6840 00:155C: 85 03        	sta	<R0+2
  6841 00:155E: A0 08 00     	ldy	#$8
  6842 00:1561: B7 01        	lda	[<R0],Y
  6843 00:1563: 48           	pha
  6844 00:1564: A0 54 00     	ldy	#$54
  6845 00:1567: B7 11        	lda	[<L218+p_1],Y
  6846 00:1569: 85 05        	sta	<R1
  6847 00:156B: A0 56 00     	ldy	#$56
  6848 00:156E: B7 11        	lda	[<L218+p_1],Y
  6849 00:1570: 85 07        	sta	<R1+2
  6850 00:1572: A0 06 00     	ldy	#$6
  6851 00:1575: B7 05        	lda	[<R1],Y
  6852 00:1577: 48           	pha
  6853 00:1578: A0 54 00     	ldy	#$54
  6854 00:157B: B7 11        	lda	[<L218+p_1],Y
  6855 00:157D: 85 05        	sta	<R1
  6856 00:157F: A0 56 00     	ldy	#$56
  6857 00:1582: B7 11        	lda	[<L218+p_1],Y
  6858 00:1584: 85 07        	sta	<R1+2
  6859 00:1586: A0 04 00     	ldy	#$4
  6860 00:1589: B7 05        	lda	[<R1],Y
  6861 00:158B: 48           	pha
  6862 00:158C: D4 19        	pei	<L218+decodedKey_1
  6863 00:158E: 22 xx xx xx  	jsl	~~k_put_font
  6864                        ;
  6865                        ;					}
  6866                        	.line	965
  6867                        ;					else
  6868 00:1592: 82 88 00     	brl	L10146
  6869                        L10145:
  6870                        ;					{
  6871                        	.line	967
  6872                        ;
  6873                        ;						k_put_ch
                    ar(p->consoleCtl->curX,
  6874                        	.line	969
  6875                        ;							
                    	   p->consoleCtl->curY,
  6876                        ;							
                    	   decodedKey,
  6877                        ;							
  Mon Sep 27 2021  9:39                                                Page 128


                    	   p->consoleCtl->fgColor,0);
  6878 00:1595: F4 00 00     	pea	#<$0
  6879 00:1598: A0 54 00     	ldy	#$54
  6880 00:159B: B7 11        	lda	[<L218+p_1],Y
  6881 00:159D: 85 01        	sta	<R0
  6882 00:159F: A0 56 00     	ldy	#$56
  6883 00:15A2: B7 11        	lda	[<L218+p_1],Y
  6884 00:15A4: 85 03        	sta	<R0+2
  6885 00:15A6: A0 08 00     	ldy	#$8
  6886 00:15A9: B7 01        	lda	[<R0],Y
  6887 00:15AB: 48           	pha
  6888 00:15AC: D4 19        	pei	<L218+decodedKey_1
  6889 00:15AE: A0 54 00     	ldy	#$54
  6890 00:15B1: B7 11        	lda	[<L218+p_1],Y
  6891 00:15B3: 85 01        	sta	<R0
  6892 00:15B5: A0 56 00     	ldy	#$56
  6893 00:15B8: B7 11        	lda	[<L218+p_1],Y
  6894 00:15BA: 85 03        	sta	<R0+2
  6895 00:15BC: A0 06 00     	ldy	#$6
  6896 00:15BF: B7 01        	lda	[<R0],Y
  6897 00:15C1: 48           	pha
  6898 00:15C2: A0 54 00     	ldy	#$54
  6899 00:15C5: B7 11        	lda	[<L218+p_1],Y
  6900 00:15C7: 85 01        	sta	<R0
  6901 00:15C9: A0 56 00     	ldy	#$56
  6902 00:15CC: B7 11        	lda	[<L218+p_1],Y
  6903 00:15CE: 85 03        	sta	<R0+2
  6904 00:15D0: A0 04 00     	ldy	#$4
  6905 00:15D3: B7 01        	lda	[<R0],Y
  6906 00:15D5: 48           	pha
  6907 00:15D6: 22 xx xx xx  	jsl	~~k_put_char
  6908                        ;						consoleB
                    uffer[p->consoleCtl->curY][p->consoleCtl->curX] = decodedKey
                    ;
  6909                        	.line	973
  6910 00:15DA: A0 54 00     	ldy	#$54
  6911 00:15DD: B7 11        	lda	[<L218+p_1],Y
  6912 00:15DF: 85 05        	sta	<R1
  6913 00:15E1: A0 56 00     	ldy	#$56
  6914 00:15E4: B7 11        	lda	[<L218+p_1],Y
  6915 00:15E6: 85 07        	sta	<R1+2
  6916 00:15E8: A0 04 00     	ldy	#$4
  6917 00:15EB: B7 05        	lda	[<R1],Y
  6918 00:15ED: 0A           	asl	A
  6919 00:15EE: 85 01        	sta	<R0
  6920 00:15F0: A0 54 00     	ldy	#$54
  6921 00:15F3: B7 11        	lda	[<L218+p_1],Y
  6922 00:15F5: 85 05        	sta	<R1
  6923 00:15F7: A0 56 00     	ldy	#$56
  6924 00:15FA: B7 11        	lda	[<L218+p_1],Y
  6925 00:15FC: 85 07        	sta	<R1+2
  6926 00:15FE: A0 06 00     	ldy	#$6
  6927 00:1601: B7 05        	lda	[<R1],Y
  6928 00:1603: A2 90 00     	ldx	#<$90
  6929                        	xref	~~~mul
  6930 00:1606: 22 xx xx xx  	jsl	~~~mul
  6931 00:160A: 85 05        	sta	<R1
  6932 00:160C: 18           	clc
  Mon Sep 27 2021  9:39                                                Page 129


  6933 00:160D: A5 05        	lda	<R1
  6934 00:160F: 65 01        	adc	<R0
  6935 00:1611: 85 09        	sta	<R2
  6936 00:1613: A5 19        	lda	<L218+decodedKey_1
  6937 00:1615: 29 FF 00     	and	#$ff
  6938 00:1618: A6 09        	ldx	<R2
  6939 00:161A: 9D xx xx     	sta	|~~consoleBuffer,X
  6940                        ;					}
  6941                        	.line	974
  6942                        L10146:
  6943                        ;
  6944                        ;					pctx->lineBuffer
                    Index = pctx->lineBufferIndex+1;
  6945                        	.line	976
  6946 00:161D: A7 15        	lda	[<L218+pctx_1]
  6947 00:161F: 1A           	ina
  6948 00:1620: 87 15        	sta	[<L218+pctx_1]
  6949                        ;					pctx->lineBuffer
                    [pctx->lineBufferIndex] = 0;
  6950                        	.line	977
  6951 00:1622: A7 15        	lda	[<L218+pctx_1]
  6952 00:1624: 85 01        	sta	<R0
  6953 00:1626: 18           	clc
  6954 00:1627: A9 02 00     	lda	#$2
  6955 00:162A: 65 01        	adc	<R0
  6956 00:162C: 85 05        	sta	<R1
  6957 00:162E: E2 20        	sep	#$20
  6958                        	longa	off
  6959 00:1630: A9 00        	lda	#$0
  6960 00:1632: A4 05        	ldy	<R1
  6961 00:1634: 97 15        	sta	[<L218+pctx_1],Y
  6962 00:1636: C2 20        	rep	#$20
  6963                        	longa	on
  6964                        ;
  6965                        ;					if(pctx->lineBuf
                    ferIndex > 127)
  6966                        	.line	979
  6967                        ;					{
  6968 00:1638: 38           	sec
  6969 00:1639: A9 7F 00     	lda	#$7f
  6970 00:163C: E7 15        	sbc	[<L218+pctx_1]
  6971 00:163E: 70 03        	bvs	L246
  6972 00:1640: 49 00 80     	eor	#$8000
  6973                        L246:
  6974 00:1643: 10 03        	bpl	L247
  6975 00:1645: 82 19 00     	brl	L10147
  6976                        L247:
  6977                        	.line	980
  6978                        ;						k_exec_t
                    hrow_exception(DefConsoleProc,0,"lineBufferIndex too large",
                    -1);
  6979                        	.line	981
  6980 00:1648: F4 FF FF     	pea	#<$ffffffff
  6981 00:164B: F4 xx xx     	pea	#^L216+346
  6982 00:164E: F4 xx xx     	pea	#<L216+346
  6983 00:1651: F4 00 00     	pea	#^$0
  6984 00:1654: F4 00 00     	pea	#<$0
  6985 00:1657: F4 xx xx     	pea	#^~~DefConsoleProc
  Mon Sep 27 2021  9:39                                                Page 130


  6986 00:165A: F4 xx xx     	pea	#<~~DefConsoleProc
  6987 00:165D: 22 xx xx xx  	jsl	~~k_exec_throw_exception
  6988                        ;					}
  6989                        	.line	982
  6990                        ;					//k_debug_intege
                    r("DefConsoleProc::lineBufferIndexB:",pctx->lineBufferIndex)
                    ;
  6991                        ;					//k_debug_string
                    ("DefConsoleProc::lineBuffer:");
  6992                        ;					//k_debug_string
                    (pctx->lineBuffer);
  6993                        ;					//k_debug_string
                    ("\r\n");
  6994                        ;
  6995                        ;					p->consoleCtl->c
                    urX++;
  6996                        L10147:
  6997                        	.line	988
  6998 00:1661: A0 54 00     	ldy	#$54
  6999 00:1664: B7 11        	lda	[<L218+p_1],Y
  7000 00:1666: 85 01        	sta	<R0
  7001 00:1668: A0 56 00     	ldy	#$56
  7002 00:166B: B7 11        	lda	[<L218+p_1],Y
  7003 00:166D: 85 03        	sta	<R0+2
  7004 00:166F: A0 04 00     	ldy	#$4
  7005 00:1672: B7 01        	lda	[<R0],Y
  7006 00:1674: 1A           	ina
  7007 00:1675: A0 04 00     	ldy	#$4
  7008 00:1678: 97 01        	sta	[<R0],Y
  7009                        ;					if(p->consoleCtl
                    ->curX >= p->consoleCtl->maxCols)
  7010                        	.line	989
  7011                        ;					{
  7012 00:167A: A0 54 00     	ldy	#$54
  7013 00:167D: B7 11        	lda	[<L218+p_1],Y
  7014 00:167F: 85 01        	sta	<R0
  7015 00:1681: A0 56 00     	ldy	#$56
  7016 00:1684: B7 11        	lda	[<L218+p_1],Y
  7017 00:1686: 85 03        	sta	<R0+2
  7018 00:1688: A0 54 00     	ldy	#$54
  7019 00:168B: B7 11        	lda	[<L218+p_1],Y
  7020 00:168D: 85 05        	sta	<R1
  7021 00:168F: A0 56 00     	ldy	#$56
  7022 00:1692: B7 11        	lda	[<L218+p_1],Y
  7023 00:1694: 85 07        	sta	<R1+2
  7024 00:1696: 38           	sec
  7025 00:1697: A0 04 00     	ldy	#$4
  7026 00:169A: B7 05        	lda	[<R1],Y
  7027 00:169C: E7 01        	sbc	[<R0]
  7028 00:169E: 70 03        	bvs	L248
  7029 00:16A0: 49 00 80     	eor	#$8000
  7030                        L248:
  7031 00:16A3: 30 03        	bmi	L249
  7032 00:16A5: 82 2F 00     	brl	L10148
  7033                        L249:
  7034                        	.line	990
  7035                        ;						p->conso
                    leCtl->curX = 0;
  Mon Sep 27 2021  9:39                                                Page 131


  7036                        	.line	991
  7037 00:16A8: A0 54 00     	ldy	#$54
  7038 00:16AB: B7 11        	lda	[<L218+p_1],Y
  7039 00:16AD: 85 01        	sta	<R0
  7040 00:16AF: A0 56 00     	ldy	#$56
  7041 00:16B2: B7 11        	lda	[<L218+p_1],Y
  7042 00:16B4: 85 03        	sta	<R0+2
  7043 00:16B6: A9 00 00     	lda	#$0
  7044 00:16B9: A0 04 00     	ldy	#$4
  7045 00:16BC: 97 01        	sta	[<R0],Y
  7046                        ;						p->conso
                    leCtl->curY++;
  7047                        	.line	992
  7048 00:16BE: A0 54 00     	ldy	#$54
  7049 00:16C1: B7 11        	lda	[<L218+p_1],Y
  7050 00:16C3: 85 01        	sta	<R0
  7051 00:16C5: A0 56 00     	ldy	#$56
  7052 00:16C8: B7 11        	lda	[<L218+p_1],Y
  7053 00:16CA: 85 03        	sta	<R0+2
  7054 00:16CC: A0 06 00     	ldy	#$6
  7055 00:16CF: B7 01        	lda	[<R0],Y
  7056 00:16D1: 1A           	ina
  7057 00:16D2: A0 06 00     	ldy	#$6
  7058 00:16D5: 97 01        	sta	[<R0],Y
  7059                        ;					}
  7060                        	.line	993
  7061                        ;				}
  7062                        L10148:
  7063                        	.line	994
  7064                        L10144:
  7065                        L10138:
  7066                        ;
  7067                        ;				if(p->consoleCtl->curY >
                     50)
  7068                        	.line	996
  7069                        ;				{
  7070 00:16D7: A0 54 00     	ldy	#$54
  7071 00:16DA: B7 11        	lda	[<L218+p_1],Y
  7072 00:16DC: 85 01        	sta	<R0
  7073 00:16DE: A0 56 00     	ldy	#$56
  7074 00:16E1: B7 11        	lda	[<L218+p_1],Y
  7075 00:16E3: 85 03        	sta	<R0+2
  7076 00:16E5: 38           	sec
  7077 00:16E6: A9 32 00     	lda	#$32
  7078 00:16E9: A0 06 00     	ldy	#$6
  7079 00:16EC: F7 01        	sbc	[<R0],Y
  7080 00:16EE: 70 03        	bvs	L250
  7081 00:16F0: 49 00 80     	eor	#$8000
  7082                        L250:
  7083 00:16F3: 10 03        	bpl	L251
  7084 00:16F5: 82 1D 00     	brl	L10149
  7085                        L251:
  7086                        	.line	997
  7087                        ;					k_send_process_c
                    ommand_message(p,FX_SCROLLBAR_COMMAND,CTL_VERT_SCROLL,0,1L,0
                    L);
  7088                        	.line	998
  7089 00:16F8: F4 00 00     	pea	#^$0
  Mon Sep 27 2021  9:39                                                Page 132


  7090 00:16FB: F4 00 00     	pea	#<$0
  7091 00:16FE: F4 00 00     	pea	#^$1
  7092 00:1701: F4 01 00     	pea	#<$1
  7093 00:1704: F4 00 00     	pea	#<$0
  7094 00:1707: F4 01 00     	pea	#<$1
  7095 00:170A: F4 02 FA     	pea	#<$fa02
  7096 00:170D: D4 13        	pei	<L218+p_1+2
  7097 00:170F: D4 11        	pei	<L218+p_1
  7098 00:1711: 22 xx xx xx  	jsl	~~k_send_process_command_message
  7099                        ;				}
  7100                        	.line	999
  7101                        ;			}
  7102                        L10149:
  7103                        	.line	1000
  7104                        L10135:
  7105                        ;
  7106                        ;			//k_enable_text_cursor();
  7107                        ;			//k_set_cursor_position(p->conso
                    leCtl->curX+1,p->consoleCtl->curY);
  7108                        ;			//k_set_cursor_position(20,20);
  7109                        ;
  7110                        ;			break;
  7111                        	.line	1006
  7112 00:1715: 82 C4 0A     	brl	L10116
  7113                        ;		case FX_DISK_INSERT:
  7114                        	.line	1007
  7115                        L10150:
  7116                        ;
  7117                        ;			k_debug_string("DefConsoleProc::
                    DISK-INSERT:");
  7118                        	.line	1009
  7119 00:1718: F4 xx xx     	pea	#^L216+372
  7120 00:171B: F4 xx xx     	pea	#<L216+372
  7121 00:171E: 22 xx xx xx  	jsl	~~k_debug_string
  7122                        ;			if(((PDISKINFO)pMsg->pheap)->stg
                    Name)
  7123                        	.line	1010
  7124                        ;			{
  7125 00:1722: A0 0E 00     	ldy	#$e
  7126 00:1725: B7 34        	lda	[<L217+pMsg_0],Y
  7127 00:1727: A0 10 00     	ldy	#$10
  7128 00:172A: 17 34        	ora	[<L217+pMsg_0],Y
  7129 00:172C: D0 03        	bne	L252
  7130 00:172E: 82 13 00     	brl	L10151
  7131                        L252:
  7132                        	.line	1011
  7133                        ;				k_debug_string(((PDISKIN
                    FO)pMsg->pheap)->stgName);
  7134                        	.line	1012
  7135 00:1731: A0 10 00     	ldy	#$10
  7136 00:1734: B7 34        	lda	[<L217+pMsg_0],Y
  7137 00:1736: 48           	pha
  7138 00:1737: A0 0E 00     	ldy	#$e
  7139 00:173A: B7 34        	lda	[<L217+pMsg_0],Y
  7140 00:173C: 48           	pha
  7141 00:173D: 22 xx xx xx  	jsl	~~k_debug_string
  7142                        ;			}
  7143                        	.line	1013
  Mon Sep 27 2021  9:39                                                Page 133


  7144                        ;			else
  7145 00:1741: 82 0A 00     	brl	L10152
  7146                        L10151:
  7147                        ;			{
  7148                        	.line	1015
  7149                        ;				k_debug_string("NULL");
  7150                        	.line	1016
  7151 00:1744: F4 xx xx     	pea	#^L216+401
  7152 00:1747: F4 xx xx     	pea	#<L216+401
  7153 00:174A: 22 xx xx xx  	jsl	~~k_debug_string
  7154                        ;			}
  7155                        	.line	1017
  7156                        L10152:
  7157                        ;			k_debug_string("\r\n");
  7158                        	.line	1018
  7159 00:174E: F4 xx xx     	pea	#^L216+406
  7160 00:1751: F4 xx xx     	pea	#<L216+406
  7161 00:1754: 22 xx xx xx  	jsl	~~k_debug_string
  7162                        ;
  7163                        ;			((PDISKINFO)pMsg->pheap)->stgNam
                    e[31] = 0;
  7164                        	.line	1020
  7165 00:1758: A0 0E 00     	ldy	#$e
  7166 00:175B: B7 34        	lda	[<L217+pMsg_0],Y
  7167 00:175D: 85 01        	sta	<R0
  7168 00:175F: A0 10 00     	ldy	#$10
  7169 00:1762: B7 34        	lda	[<L217+pMsg_0],Y
  7170 00:1764: 85 03        	sta	<R0+2
  7171 00:1766: E2 20        	sep	#$20
  7172                        	longa	off
  7173 00:1768: A9 00        	lda	#$0
  7174 00:176A: A0 1F 00     	ldy	#$1f
  7175 00:176D: 97 01        	sta	[<R0],Y
  7176 00:176F: C2 20        	rep	#$20
  7177                        	longa	on
  7178                        ;
  7179                        ;			if(p->consoleCtl->desktopMode)
  7180                        	.line	1022
  7181                        ;			{
  7182 00:1771: A0 54 00     	ldy	#$54
  7183 00:1774: B7 11        	lda	[<L218+p_1],Y
  7184 00:1776: 85 01        	sta	<R0
  7185 00:1778: A0 56 00     	ldy	#$56
  7186 00:177B: B7 11        	lda	[<L218+p_1],Y
  7187 00:177D: 85 03        	sta	<R0+2
  7188 00:177F: A0 31 00     	ldy	#$31
  7189 00:1782: B7 01        	lda	[<R0],Y
  7190 00:1784: 29 FF 00     	and	#$ff
  7191 00:1787: D0 03        	bne	L253
  7192 00:1789: 82 BC 02     	brl	L10153
  7193                        L253:
  7194                        	.line	1023
  7195                        ;				if(p->desktopCtl->curren
                    tDiskName && strcmp( k_to_uppercase(  ((PDISKINFO)pMsg->phea
                    p)->stgName),p->desktopCtl->currentDiskName) == 0)
  7196                        	.line	1024
  7197                        ;				{
  7198 00:178C: A0 58 00     	ldy	#$58
  Mon Sep 27 2021  9:39                                                Page 134


  7199 00:178F: B7 11        	lda	[<L218+p_1],Y
  7200 00:1791: 85 01        	sta	<R0
  7201 00:1793: A0 5A 00     	ldy	#$5a
  7202 00:1796: B7 11        	lda	[<L218+p_1],Y
  7203 00:1798: 85 03        	sta	<R0+2
  7204 00:179A: A0 11 00     	ldy	#$11
  7205 00:179D: B7 01        	lda	[<R0],Y
  7206 00:179F: A0 13 00     	ldy	#$13
  7207 00:17A2: 17 01        	ora	[<R0],Y
  7208 00:17A4: D0 03        	bne	L254
  7209 00:17A6: 82 47 00     	brl	L10154
  7210                        L254:
  7211 00:17A9: A0 58 00     	ldy	#$58
  7212 00:17AC: B7 11        	lda	[<L218+p_1],Y
  7213 00:17AE: 85 01        	sta	<R0
  7214 00:17B0: A0 5A 00     	ldy	#$5a
  7215 00:17B3: B7 11        	lda	[<L218+p_1],Y
  7216 00:17B5: 85 03        	sta	<R0+2
  7217 00:17B7: A0 13 00     	ldy	#$13
  7218 00:17BA: B7 01        	lda	[<R0],Y
  7219 00:17BC: 48           	pha
  7220 00:17BD: A0 11 00     	ldy	#$11
  7221 00:17C0: B7 01        	lda	[<R0],Y
  7222 00:17C2: 48           	pha
  7223 00:17C3: A0 10 00     	ldy	#$10
  7224 00:17C6: B7 34        	lda	[<L217+pMsg_0],Y
  7225 00:17C8: 48           	pha
  7226 00:17C9: A0 0E 00     	ldy	#$e
  7227 00:17CC: B7 34        	lda	[<L217+pMsg_0],Y
  7228 00:17CE: 48           	pha
  7229 00:17CF: 22 xx xx xx  	jsl	~~k_to_uppercase
  7230 00:17D3: 85 01        	sta	<R0
  7231 00:17D5: 86 03        	stx	<R0+2
  7232 00:17D7: DA           	phx
  7233 00:17D8: 48           	pha
  7234 00:17D9: 22 xx xx xx  	jsl	~~strcmp
  7235 00:17DD: AA           	tax
  7236 00:17DE: F0 03        	beq	L255
  7237 00:17E0: 82 0D 00     	brl	L10154
  7238                        L255:
  7239                        	.line	1025
  7240                        ;					k_debug_string("
                    DefConsoleProc::DISK-INSERT:NO-CHANGE\r\n");
  7241                        	.line	1026
  7242 00:17E3: F4 xx xx     	pea	#^L216+409
  7243 00:17E6: F4 xx xx     	pea	#<L216+409
  7244 00:17E9: 22 xx xx xx  	jsl	~~k_debug_string
  7245                        ;				}
  7246                        	.line	1027
  7247                        ;				else
  7248 00:17ED: 82 55 02     	brl	L10155
  7249                        L10154:
  7250                        ;				{
  7251                        	.line	1029
  7252                        ;
  7253                        ;
  7254                        ;					if(p->desktopCtl
                    ->currentDiskName)
  Mon Sep 27 2021  9:39                                                Page 135


  7255                        	.line	1032
  7256                        ;					{
  7257 00:17F0: A0 58 00     	ldy	#$58
  7258 00:17F3: B7 11        	lda	[<L218+p_1],Y
  7259 00:17F5: 85 01        	sta	<R0
  7260 00:17F7: A0 5A 00     	ldy	#$5a
  7261 00:17FA: B7 11        	lda	[<L218+p_1],Y
  7262 00:17FC: 85 03        	sta	<R0+2
  7263 00:17FE: A0 11 00     	ldy	#$11
  7264 00:1801: B7 01        	lda	[<R0],Y
  7265 00:1803: A0 13 00     	ldy	#$13
  7266 00:1806: 17 01        	ora	[<R0],Y
  7267 00:1808: D0 03        	bne	L256
  7268 00:180A: 82 B7 00     	brl	L10156
  7269                        L256:
  7270                        	.line	1033
  7271                        ;						temp1 = 
                    strlen(p->desktopCtl->currentDiskName);
  7272                        	.line	1034
  7273 00:180D: A0 58 00     	ldy	#$58
  7274 00:1810: B7 11        	lda	[<L218+p_1],Y
  7275 00:1812: 85 01        	sta	<R0
  7276 00:1814: A0 5A 00     	ldy	#$5a
  7277 00:1817: B7 11        	lda	[<L218+p_1],Y
  7278 00:1819: 85 03        	sta	<R0+2
  7279 00:181B: A0 13 00     	ldy	#$13
  7280 00:181E: B7 01        	lda	[<R0],Y
  7281 00:1820: 48           	pha
  7282 00:1821: A0 11 00     	ldy	#$11
  7283 00:1824: B7 01        	lda	[<R0],Y
  7284 00:1826: 48           	pha
  7285 00:1827: 22 xx xx xx  	jsl	~~strlen
  7286 00:182B: 85 1E        	sta	<L218+temp1_1
  7287                        ;						temp2 = 
                    (temp1*4);
  7288                        	.line	1035
  7289 00:182D: A5 1E        	lda	<L218+temp1_1
  7290 00:182F: 0A           	asl	A
  7291 00:1830: 0A           	asl	A
  7292 00:1831: 85 20        	sta	<L218+temp2_1
  7293                        ;						k_put_wi
                    nicon_point(ICON_DISK,640 - (40 + temp2/2),20,p->desktopCtl-
                    >backgroundColor,PAINTMODE_BACKGROUND);
  7294                        	.line	1036
  7295 00:1833: F4 F0 00     	pea	#<$f0
  7296 00:1836: A0 58 00     	ldy	#$58
  7297 00:1839: B7 11        	lda	[<L218+p_1],Y
  7298 00:183B: 85 01        	sta	<R0
  7299 00:183D: A0 5A 00     	ldy	#$5a
  7300 00:1840: B7 11        	lda	[<L218+p_1],Y
  7301 00:1842: 85 03        	sta	<R0+2
  7302 00:1844: A0 05 00     	ldy	#$5
  7303 00:1847: B7 01        	lda	[<R0],Y
  7304 00:1849: 48           	pha
  7305 00:184A: F4 14 00     	pea	#<$14
  7306 00:184D: A5 20        	lda	<L218+temp2_1
  7307 00:184F: A2 02 00     	ldx	#<$2
  7308                        	xref	~~~div
  Mon Sep 27 2021  9:39                                                Page 136


  7309 00:1852: 22 xx xx xx  	jsl	~~~div
  7310 00:1856: 85 01        	sta	<R0
  7311 00:1858: 18           	clc
  7312 00:1859: A9 28 00     	lda	#$28
  7313 00:185C: 65 01        	adc	<R0
  7314 00:185E: 85 05        	sta	<R1
  7315 00:1860: 38           	sec
  7316 00:1861: A9 80 02     	lda	#$280
  7317 00:1864: E5 05        	sbc	<R1
  7318 00:1866: 48           	pha
  7319 00:1867: F4 03 00     	pea	#<$3
  7320 00:186A: 22 xx xx xx  	jsl	~~k_put_winicon_point
  7321                        ;						k_draw_t
                    ext_point(p->desktopCtl->currentDiskName,640 - (35 + temp2/2
                    ) - (temp2),40,p->desktopCtl->backgroundColor);
  7322                        	.line	1037
  7323 00:186E: A0 58 00     	ldy	#$58
  7324 00:1871: B7 11        	lda	[<L218+p_1],Y
  7325 00:1873: 85 01        	sta	<R0
  7326 00:1875: A0 5A 00     	ldy	#$5a
  7327 00:1878: B7 11        	lda	[<L218+p_1],Y
  7328 00:187A: 85 03        	sta	<R0+2
  7329 00:187C: A0 05 00     	ldy	#$5
  7330 00:187F: B7 01        	lda	[<R0],Y
  7331 00:1881: 48           	pha
  7332 00:1882: F4 28 00     	pea	#<$28
  7333 00:1885: A5 20        	lda	<L218+temp2_1
  7334 00:1887: A2 02 00     	ldx	#<$2
  7335                        	xref	~~~div
  7336 00:188A: 22 xx xx xx  	jsl	~~~div
  7337 00:188E: 85 05        	sta	<R1
  7338 00:1890: 18           	clc
  7339 00:1891: A9 23 00     	lda	#$23
  7340 00:1894: 65 05        	adc	<R1
  7341 00:1896: 85 09        	sta	<R2
  7342 00:1898: 38           	sec
  7343 00:1899: A9 80 02     	lda	#$280
  7344 00:189C: E5 09        	sbc	<R2
  7345 00:189E: 85 05        	sta	<R1
  7346 00:18A0: 38           	sec
  7347 00:18A1: A5 05        	lda	<R1
  7348 00:18A3: E5 20        	sbc	<L218+temp2_1
  7349 00:18A5: 48           	pha
  7350 00:18A6: A0 58 00     	ldy	#$58
  7351 00:18A9: B7 11        	lda	[<L218+p_1],Y
  7352 00:18AB: 85 05        	sta	<R1
  7353 00:18AD: A0 5A 00     	ldy	#$5a
  7354 00:18B0: B7 11        	lda	[<L218+p_1],Y
  7355 00:18B2: 85 07        	sta	<R1+2
  7356 00:18B4: A0 13 00     	ldy	#$13
  7357 00:18B7: B7 05        	lda	[<R1],Y
  7358 00:18B9: 48           	pha
  7359 00:18BA: A0 11 00     	ldy	#$11
  7360 00:18BD: B7 05        	lda	[<R1],Y
  7361 00:18BF: 48           	pha
  7362 00:18C0: 22 xx xx xx  	jsl	~~k_draw_text_point
  7363                        ;					}
  7364                        	.line	1038
  Mon Sep 27 2021  9:39                                                Page 137


  7365                        ;
  7366                        ;					temp1 = strlen((
                    (PDISKINFO)pMsg->pheap)->stgName);
  7367                        L10156:
  7368                        	.line	1040
  7369 00:18C4: A0 10 00     	ldy	#$10
  7370 00:18C7: B7 34        	lda	[<L217+pMsg_0],Y
  7371 00:18C9: 48           	pha
  7372 00:18CA: A0 0E 00     	ldy	#$e
  7373 00:18CD: B7 34        	lda	[<L217+pMsg_0],Y
  7374 00:18CF: 48           	pha
  7375 00:18D0: 22 xx xx xx  	jsl	~~strlen
  7376 00:18D4: 85 1E        	sta	<L218+temp1_1
  7377                        ;					temp2 = (temp1*4
                    );
  7378                        	.line	1041
  7379 00:18D6: A5 1E        	lda	<L218+temp1_1
  7380 00:18D8: 0A           	asl	A
  7381 00:18D9: 0A           	asl	A
  7382 00:18DA: 85 20        	sta	<L218+temp2_1
  7383                        ;
  7384                        ;					k_put_winicon_po
                    int(ICON_DISK,640 - (40 + temp2/2),20,0,PAINTMODE_DEFAULT);
  7385                        	.line	1043
  7386 00:18DC: F4 00 00     	pea	#<$0
  7387 00:18DF: F4 00 00     	pea	#<$0
  7388 00:18E2: F4 14 00     	pea	#<$14
  7389 00:18E5: A5 20        	lda	<L218+temp2_1
  7390 00:18E7: A2 02 00     	ldx	#<$2
  7391                        	xref	~~~div
  7392 00:18EA: 22 xx xx xx  	jsl	~~~div
  7393 00:18EE: 85 01        	sta	<R0
  7394 00:18F0: 18           	clc
  7395 00:18F1: A9 28 00     	lda	#$28
  7396 00:18F4: 65 01        	adc	<R0
  7397 00:18F6: 85 05        	sta	<R1
  7398 00:18F8: 38           	sec
  7399 00:18F9: A9 80 02     	lda	#$280
  7400 00:18FC: E5 05        	sbc	<R1
  7401 00:18FE: 48           	pha
  7402 00:18FF: F4 03 00     	pea	#<$3
  7403 00:1902: 22 xx xx xx  	jsl	~~k_put_winicon_point
  7404                        ;					k_draw_text_poin
                    t(k_to_uppercase(((PDISKINFO)pMsg->pheap)->stgName),640 - (3
                    5 + temp2/2) - (temp2),40,0);
  7405                        	.line	1044
  7406 00:1906: F4 00 00     	pea	#<$0
  7407 00:1909: F4 28 00     	pea	#<$28
  7408 00:190C: A5 20        	lda	<L218+temp2_1
  7409 00:190E: A2 02 00     	ldx	#<$2
  7410                        	xref	~~~div
  7411 00:1911: 22 xx xx xx  	jsl	~~~div
  7412 00:1915: 85 01        	sta	<R0
  7413 00:1917: 18           	clc
  7414 00:1918: A9 23 00     	lda	#$23
  7415 00:191B: 65 01        	adc	<R0
  7416 00:191D: 85 05        	sta	<R1
  7417 00:191F: 38           	sec
  Mon Sep 27 2021  9:39                                                Page 138


  7418 00:1920: A9 80 02     	lda	#$280
  7419 00:1923: E5 05        	sbc	<R1
  7420 00:1925: 85 01        	sta	<R0
  7421 00:1927: 38           	sec
  7422 00:1928: A5 01        	lda	<R0
  7423 00:192A: E5 20        	sbc	<L218+temp2_1
  7424 00:192C: 48           	pha
  7425 00:192D: A0 10 00     	ldy	#$10
  7426 00:1930: B7 34        	lda	[<L217+pMsg_0],Y
  7427 00:1932: 48           	pha
  7428 00:1933: A0 0E 00     	ldy	#$e
  7429 00:1936: B7 34        	lda	[<L217+pMsg_0],Y
  7430 00:1938: 48           	pha
  7431 00:1939: 22 xx xx xx  	jsl	~~k_to_uppercase
  7432 00:193D: 85 01        	sta	<R0
  7433 00:193F: 86 03        	stx	<R0+2
  7434 00:1941: DA           	phx
  7435 00:1942: 48           	pha
  7436 00:1943: 22 xx xx xx  	jsl	~~k_draw_text_point
  7437                        ;
  7438                        ;					if(p->desktopCtl
                    ->currentDiskName!=NULL)
  7439                        	.line	1046
  7440                        ;						k_mem_de
                    allocate_heap(p->desktopCtl->currentDiskName);
  7441 00:1947: A0 58 00     	ldy	#$58
  7442 00:194A: B7 11        	lda	[<L218+p_1],Y
  7443 00:194C: 85 01        	sta	<R0
  7444 00:194E: A0 5A 00     	ldy	#$5a
  7445 00:1951: B7 11        	lda	[<L218+p_1],Y
  7446 00:1953: 85 03        	sta	<R0+2
  7447 00:1955: A0 11 00     	ldy	#$11
  7448 00:1958: B7 01        	lda	[<R0],Y
  7449 00:195A: A0 13 00     	ldy	#$13
  7450 00:195D: 17 01        	ora	[<R0],Y
  7451 00:195F: D0 03        	bne	L257
  7452 00:1961: 82 1E 00     	brl	L10157
  7453                        L257:
  7454                        	.line	1047
  7455 00:1964: A0 58 00     	ldy	#$58
  7456 00:1967: B7 11        	lda	[<L218+p_1],Y
  7457 00:1969: 85 01        	sta	<R0
  7458 00:196B: A0 5A 00     	ldy	#$5a
  7459 00:196E: B7 11        	lda	[<L218+p_1],Y
  7460 00:1970: 85 03        	sta	<R0+2
  7461 00:1972: A0 13 00     	ldy	#$13
  7462 00:1975: B7 01        	lda	[<R0],Y
  7463 00:1977: 48           	pha
  7464 00:1978: A0 11 00     	ldy	#$11
  7465 00:197B: B7 01        	lda	[<R0],Y
  7466 00:197D: 48           	pha
  7467 00:197E: 22 xx xx xx  	jsl	~~k_mem_deallocate_heap
  7468                        ;
  7469                        ;					p->desktopCtl->c
                    urrentDiskName = k_string_copy_string(((PDISKINFO)pMsg->phea
                    p)->stgName);
  7470                        L10157:
  7471                        	.line	1049
  Mon Sep 27 2021  9:39                                                Page 139


  7472 00:1982: A0 58 00     	ldy	#$58
  7473 00:1985: B7 11        	lda	[<L218+p_1],Y
  7474 00:1987: 85 01        	sta	<R0
  7475 00:1989: A0 5A 00     	ldy	#$5a
  7476 00:198C: B7 11        	lda	[<L218+p_1],Y
  7477 00:198E: 85 03        	sta	<R0+2
  7478 00:1990: A0 10 00     	ldy	#$10
  7479 00:1993: B7 34        	lda	[<L217+pMsg_0],Y
  7480 00:1995: 48           	pha
  7481 00:1996: A0 0E 00     	ldy	#$e
  7482 00:1999: B7 34        	lda	[<L217+pMsg_0],Y
  7483 00:199B: 48           	pha
  7484 00:199C: 22 xx xx xx  	jsl	~~k_string_copy_string
  7485 00:19A0: 85 05        	sta	<R1
  7486 00:19A2: 86 07        	stx	<R1+2
  7487 00:19A4: A5 05        	lda	<R1
  7488 00:19A6: A0 11 00     	ldy	#$11
  7489 00:19A9: 97 01        	sta	[<R0],Y
  7490 00:19AB: A5 07        	lda	<R1+2
  7491 00:19AD: A0 13 00     	ldy	#$13
  7492 00:19B0: 97 01        	sta	[<R0],Y
  7493                        ;
  7494                        ;					pcd = k_mem_allo
                    cate_heap(sizeof(CLICKDETECTED));
  7495                        	.line	1051
  7496 00:19B2: F4 00 00     	pea	#^$8
  7497 00:19B5: F4 08 00     	pea	#<$8
  7498 00:19B8: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  7499 00:19BC: 85 25        	sta	<L218+pcd_1
  7500 00:19BE: 86 27        	stx	<L218+pcd_1+2
  7501                        ;					if(pcd)
  7502                        	.line	1052
  7503                        ;					{
  7504 00:19C0: A5 25        	lda	<L218+pcd_1
  7505 00:19C2: 05 27        	ora	<L218+pcd_1+2
  7506 00:19C4: D0 03        	bne	L258
  7507 00:19C6: 82 58 00     	brl	L10158
  7508                        L258:
  7509                        	.line	1053
  7510                        ;						pcd->win
                    dow  = k_create_ui_window_class(640 - (40 + temp2/2),20,ICON
                    H,ICONW,"disk","icon",NULL);
  7511                        	.line	1054
  7512 00:19C9: F4 00 00     	pea	#^$0
  7513 00:19CC: F4 00 00     	pea	#<$0
  7514 00:19CF: F4 xx xx     	pea	#^L216+454
  7515 00:19D2: F4 xx xx     	pea	#<L216+454
  7516 00:19D5: F4 xx xx     	pea	#^L216+449
  7517 00:19D8: F4 xx xx     	pea	#<L216+449
  7518 00:19DB: F4 10 00     	pea	#<$10
  7519 00:19DE: F4 10 00     	pea	#<$10
  7520 00:19E1: F4 14 00     	pea	#<$14
  7521 00:19E4: A5 20        	lda	<L218+temp2_1
  7522 00:19E6: A2 02 00     	ldx	#<$2
  7523                        	xref	~~~div
  7524 00:19E9: 22 xx xx xx  	jsl	~~~div
  7525 00:19ED: 85 01        	sta	<R0
  7526 00:19EF: 18           	clc
  Mon Sep 27 2021  9:39                                                Page 140


  7527 00:19F0: A9 28 00     	lda	#$28
  7528 00:19F3: 65 01        	adc	<R0
  7529 00:19F5: 85 05        	sta	<R1
  7530 00:19F7: 38           	sec
  7531 00:19F8: A9 80 02     	lda	#$280
  7532 00:19FB: E5 05        	sbc	<R1
  7533 00:19FD: 48           	pha
  7534 00:19FE: 22 xx xx xx  	jsl	~~k_create_ui_window_class
  7535 00:1A02: 85 01        	sta	<R0
  7536 00:1A04: 86 03        	stx	<R0+2
  7537 00:1A06: A5 01        	lda	<R0
  7538 00:1A08: 87 25        	sta	[<L218+pcd_1]
  7539 00:1A0A: A5 03        	lda	<R0+2
  7540 00:1A0C: A0 02 00     	ldy	#$2
  7541 00:1A0F: 97 25        	sta	[<L218+pcd_1],Y
  7542                        ;						pcd->han
                    dler = ObjectClicked;
  7543                        	.line	1055
  7544 00:1A11: A9 xx xx     	lda	#<~~ObjectClicked
  7545 00:1A14: A0 04 00     	ldy	#$4
  7546 00:1A17: 97 25        	sta	[<L218+pcd_1],Y
  7547 00:1A19: A9 xx xx     	lda	#^~~ObjectClicked
  7548 00:1A1C: A0 06 00     	ldy	#$6
  7549 00:1A1F: 97 25        	sta	[<L218+pcd_1],Y
  7550                        ;						//k_add_
                    window_hit_node(pcd);
  7551                        ;					}
  7552                        	.line	1057
  7553                        ;
  7554                        ;					k_debug_message(
                    "DefConsoleProc::DISK-INSERT:DISK:",p->desktopCtl->currentDi
                    skName);
  7555                        L10158:
  7556                        	.line	1059
  7557 00:1A21: A0 58 00     	ldy	#$58
  7558 00:1A24: B7 11        	lda	[<L218+p_1],Y
  7559 00:1A26: 85 01        	sta	<R0
  7560 00:1A28: A0 5A 00     	ldy	#$5a
  7561 00:1A2B: B7 11        	lda	[<L218+p_1],Y
  7562 00:1A2D: 85 03        	sta	<R0+2
  7563 00:1A2F: A0 13 00     	ldy	#$13
  7564 00:1A32: B7 01        	lda	[<R0],Y
  7565 00:1A34: 48           	pha
  7566 00:1A35: A0 11 00     	ldy	#$11
  7567 00:1A38: B7 01        	lda	[<R0],Y
  7568 00:1A3A: 48           	pha
  7569 00:1A3B: F4 xx xx     	pea	#^L216+459
  7570 00:1A3E: F4 xx xx     	pea	#<L216+459
  7571 00:1A41: 22 xx xx xx  	jsl	~~k_debug_message
  7572                        ;				}
  7573                        	.line	1060
  7574                        L10155:
  7575                        ;			}
  7576                        	.line	1061
  7577                        ;			else
  7578 00:1A45: 82 34 00     	brl	L10159
  7579                        L10153:
  7580                        ;			{
  Mon Sep 27 2021  9:39                                                Page 141


  7581                        	.line	1063
  7582                        ;				if(pMsg && pMsg->pheap)
  7583                        	.line	1064
  7584                        ;					k_put_string(0,5
                    1,((PDISKINFO)pMsg->pheap)->stgName,15,0);
  7585 00:1A48: A5 34        	lda	<L217+pMsg_0
  7586 00:1A4A: 05 36        	ora	<L217+pMsg_0+2
  7587 00:1A4C: D0 03        	bne	L259
  7588 00:1A4E: 82 2B 00     	brl	L10160
  7589                        L259:
  7590 00:1A51: A0 0E 00     	ldy	#$e
  7591 00:1A54: B7 34        	lda	[<L217+pMsg_0],Y
  7592 00:1A56: A0 10 00     	ldy	#$10
  7593 00:1A59: 17 34        	ora	[<L217+pMsg_0],Y
  7594 00:1A5B: D0 03        	bne	L260
  7595 00:1A5D: 82 1C 00     	brl	L10160
  7596                        L260:
  7597                        	.line	1065
  7598 00:1A60: F4 00 00     	pea	#<$0
  7599 00:1A63: F4 0F 00     	pea	#<$f
  7600 00:1A66: A0 10 00     	ldy	#$10
  7601 00:1A69: B7 34        	lda	[<L217+pMsg_0],Y
  7602 00:1A6B: 48           	pha
  7603 00:1A6C: A0 0E 00     	ldy	#$e
  7604 00:1A6F: B7 34        	lda	[<L217+pMsg_0],Y
  7605 00:1A71: 48           	pha
  7606 00:1A72: F4 33 00     	pea	#<$33
  7607 00:1A75: F4 00 00     	pea	#<$0
  7608 00:1A78: 22 xx xx xx  	jsl	~~k_put_string
  7609                        ;			}
  7610                        L10160:
  7611                        	.line	1066
  7612                        L10159:
  7613                        ;
  7614                        ;			break;
  7615                        	.line	1068
  7616 00:1A7C: 82 5D 07     	brl	L10116
  7617                        ;		case FX_DISK_REMOVE:
  7618                        	.line	1069
  7619                        L10161:
  7620                        ;
  7621                        ;			k_debug_string("DefConsoleProc::
                    DISK-REMOVE\r\n");
  7622                        	.line	1071
  7623 00:1A7F: F4 xx xx     	pea	#^L216+493
  7624 00:1A82: F4 xx xx     	pea	#<L216+493
  7625 00:1A85: 22 xx xx xx  	jsl	~~k_debug_string
  7626                        ;
  7627                        ;			if(p->consoleCtl->desktopMode )
  7628                        	.line	1073
  7629                        ;			{
  7630 00:1A89: A0 54 00     	ldy	#$54
  7631 00:1A8C: B7 11        	lda	[<L218+p_1],Y
  7632 00:1A8E: 85 01        	sta	<R0
  7633 00:1A90: A0 56 00     	ldy	#$56
  7634 00:1A93: B7 11        	lda	[<L218+p_1],Y
  7635 00:1A95: 85 03        	sta	<R0+2
  7636 00:1A97: A0 31 00     	ldy	#$31
  Mon Sep 27 2021  9:39                                                Page 142


  7637 00:1A9A: B7 01        	lda	[<R0],Y
  7638 00:1A9C: 29 FF 00     	and	#$ff
  7639 00:1A9F: D0 03        	bne	L261
  7640 00:1AA1: 82 72 01     	brl	L10162
  7641                        L261:
  7642                        	.line	1074
  7643                        ;				if(p->desktopCtl->curren
                    tDiskName)
  7644                        	.line	1075
  7645                        ;				{
  7646 00:1AA4: A0 58 00     	ldy	#$58
  7647 00:1AA7: B7 11        	lda	[<L218+p_1],Y
  7648 00:1AA9: 85 01        	sta	<R0
  7649 00:1AAB: A0 5A 00     	ldy	#$5a
  7650 00:1AAE: B7 11        	lda	[<L218+p_1],Y
  7651 00:1AB0: 85 03        	sta	<R0+2
  7652 00:1AB2: A0 11 00     	ldy	#$11
  7653 00:1AB5: B7 01        	lda	[<R0],Y
  7654 00:1AB7: A0 13 00     	ldy	#$13
  7655 00:1ABA: 17 01        	ora	[<R0],Y
  7656 00:1ABC: D0 03        	bne	L262
  7657 00:1ABE: 82 52 01     	brl	L10163
  7658                        L262:
  7659                        	.line	1076
  7660                        ;					k_debug_message(
                    "DefConsoleProc::DISK-REMOVE:DISK:",p->desktopCtl->currentDi
                    skName);
  7661                        	.line	1077
  7662 00:1AC1: A0 58 00     	ldy	#$58
  7663 00:1AC4: B7 11        	lda	[<L218+p_1],Y
  7664 00:1AC6: 85 01        	sta	<R0
  7665 00:1AC8: A0 5A 00     	ldy	#$5a
  7666 00:1ACB: B7 11        	lda	[<L218+p_1],Y
  7667 00:1ACD: 85 03        	sta	<R0+2
  7668 00:1ACF: A0 13 00     	ldy	#$13
  7669 00:1AD2: B7 01        	lda	[<R0],Y
  7670 00:1AD4: 48           	pha
  7671 00:1AD5: A0 11 00     	ldy	#$11
  7672 00:1AD8: B7 01        	lda	[<R0],Y
  7673 00:1ADA: 48           	pha
  7674 00:1ADB: F4 xx xx     	pea	#^L216+523
  7675 00:1ADE: F4 xx xx     	pea	#<L216+523
  7676 00:1AE1: 22 xx xx xx  	jsl	~~k_debug_message
  7677                        ;					k_debug_integer(
                    "DefConsoleProc::DISK-REMOVE:backgroundColor:",p->desktopCtl
                    ->backgroundColor);
  7678                        	.line	1078
  7679 00:1AE5: A0 58 00     	ldy	#$58
  7680 00:1AE8: B7 11        	lda	[<L218+p_1],Y
  7681 00:1AEA: 85 01        	sta	<R0
  7682 00:1AEC: A0 5A 00     	ldy	#$5a
  7683 00:1AEF: B7 11        	lda	[<L218+p_1],Y
  7684 00:1AF1: 85 03        	sta	<R0+2
  7685 00:1AF3: A0 05 00     	ldy	#$5
  7686 00:1AF6: B7 01        	lda	[<R0],Y
  7687 00:1AF8: 48           	pha
  7688 00:1AF9: F4 xx xx     	pea	#^L216+557
  7689 00:1AFC: F4 xx xx     	pea	#<L216+557
  Mon Sep 27 2021  9:39                                                Page 143


  7690 00:1AFF: 22 xx xx xx  	jsl	~~k_debug_integer
  7691                        ;
  7692                        ;					temp1 = strlen(p
                    ->desktopCtl->currentDiskName);
  7693                        	.line	1080
  7694 00:1B03: A0 58 00     	ldy	#$58
  7695 00:1B06: B7 11        	lda	[<L218+p_1],Y
  7696 00:1B08: 85 01        	sta	<R0
  7697 00:1B0A: A0 5A 00     	ldy	#$5a
  7698 00:1B0D: B7 11        	lda	[<L218+p_1],Y
  7699 00:1B0F: 85 03        	sta	<R0+2
  7700 00:1B11: A0 13 00     	ldy	#$13
  7701 00:1B14: B7 01        	lda	[<R0],Y
  7702 00:1B16: 48           	pha
  7703 00:1B17: A0 11 00     	ldy	#$11
  7704 00:1B1A: B7 01        	lda	[<R0],Y
  7705 00:1B1C: 48           	pha
  7706 00:1B1D: 22 xx xx xx  	jsl	~~strlen
  7707 00:1B21: 85 1E        	sta	<L218+temp1_1
  7708                        ;					temp2 = (temp1*4
                    );
  7709                        	.line	1081
  7710 00:1B23: A5 1E        	lda	<L218+temp1_1
  7711 00:1B25: 0A           	asl	A
  7712 00:1B26: 0A           	asl	A
  7713 00:1B27: 85 20        	sta	<L218+temp2_1
  7714                        ;
  7715                        ;					k_put_winicon_po
                    int(ICON_DISK,640 - (40 + temp2/2),20,p->desktopCtl->backgro
                    undColor,PAINTMODE_BACKGROUND);
  7716                        	.line	1083
  7717 00:1B29: F4 F0 00     	pea	#<$f0
  7718 00:1B2C: A0 58 00     	ldy	#$58
  7719 00:1B2F: B7 11        	lda	[<L218+p_1],Y
  7720 00:1B31: 85 01        	sta	<R0
  7721 00:1B33: A0 5A 00     	ldy	#$5a
  7722 00:1B36: B7 11        	lda	[<L218+p_1],Y
  7723 00:1B38: 85 03        	sta	<R0+2
  7724 00:1B3A: A0 05 00     	ldy	#$5
  7725 00:1B3D: B7 01        	lda	[<R0],Y
  7726 00:1B3F: 48           	pha
  7727 00:1B40: F4 14 00     	pea	#<$14
  7728 00:1B43: A5 20        	lda	<L218+temp2_1
  7729 00:1B45: A2 02 00     	ldx	#<$2
  7730                        	xref	~~~div
  7731 00:1B48: 22 xx xx xx  	jsl	~~~div
  7732 00:1B4C: 85 01        	sta	<R0
  7733 00:1B4E: 18           	clc
  7734 00:1B4F: A9 28 00     	lda	#$28
  7735 00:1B52: 65 01        	adc	<R0
  7736 00:1B54: 85 05        	sta	<R1
  7737 00:1B56: 38           	sec
  7738 00:1B57: A9 80 02     	lda	#$280
  7739 00:1B5A: E5 05        	sbc	<R1
  7740 00:1B5C: 48           	pha
  7741 00:1B5D: F4 03 00     	pea	#<$3
  7742 00:1B60: 22 xx xx xx  	jsl	~~k_put_winicon_point
  7743                        ;					k_draw_text_poin
  Mon Sep 27 2021  9:39                                                Page 144


                    t(p->desktopCtl->currentDiskName,640 - (35 + temp2/2) - (tem
                    p2),40,p->desktopCtl->backgroundColor);
  7744                        	.line	1084
  7745 00:1B64: A0 58 00     	ldy	#$58
  7746 00:1B67: B7 11        	lda	[<L218+p_1],Y
  7747 00:1B69: 85 01        	sta	<R0
  7748 00:1B6B: A0 5A 00     	ldy	#$5a
  7749 00:1B6E: B7 11        	lda	[<L218+p_1],Y
  7750 00:1B70: 85 03        	sta	<R0+2
  7751 00:1B72: A0 05 00     	ldy	#$5
  7752 00:1B75: B7 01        	lda	[<R0],Y
  7753 00:1B77: 48           	pha
  7754 00:1B78: F4 28 00     	pea	#<$28
  7755 00:1B7B: A5 20        	lda	<L218+temp2_1
  7756 00:1B7D: A2 02 00     	ldx	#<$2
  7757                        	xref	~~~div
  7758 00:1B80: 22 xx xx xx  	jsl	~~~div
  7759 00:1B84: 85 05        	sta	<R1
  7760 00:1B86: 18           	clc
  7761 00:1B87: A9 23 00     	lda	#$23
  7762 00:1B8A: 65 05        	adc	<R1
  7763 00:1B8C: 85 09        	sta	<R2
  7764 00:1B8E: 38           	sec
  7765 00:1B8F: A9 80 02     	lda	#$280
  7766 00:1B92: E5 09        	sbc	<R2
  7767 00:1B94: 85 05        	sta	<R1
  7768 00:1B96: 38           	sec
  7769 00:1B97: A5 05        	lda	<R1
  7770 00:1B99: E5 20        	sbc	<L218+temp2_1
  7771 00:1B9B: 48           	pha
  7772 00:1B9C: A0 58 00     	ldy	#$58
  7773 00:1B9F: B7 11        	lda	[<L218+p_1],Y
  7774 00:1BA1: 85 05        	sta	<R1
  7775 00:1BA3: A0 5A 00     	ldy	#$5a
  7776 00:1BA6: B7 11        	lda	[<L218+p_1],Y
  7777 00:1BA8: 85 07        	sta	<R1+2
  7778 00:1BAA: A0 13 00     	ldy	#$13
  7779 00:1BAD: B7 05        	lda	[<R1],Y
  7780 00:1BAF: 48           	pha
  7781 00:1BB0: A0 11 00     	ldy	#$11
  7782 00:1BB3: B7 05        	lda	[<R1],Y
  7783 00:1BB5: 48           	pha
  7784 00:1BB6: 22 xx xx xx  	jsl	~~k_draw_text_point
  7785                        ;
  7786                        ;					if(p->desktopCtl
                    ->currentDiskName!=NULL)
  7787                        	.line	1086
  7788                        ;						k_mem_de
                    allocate_heap(p->desktopCtl->currentDiskName);
  7789 00:1BBA: A0 58 00     	ldy	#$58
  7790 00:1BBD: B7 11        	lda	[<L218+p_1],Y
  7791 00:1BBF: 85 01        	sta	<R0
  7792 00:1BC1: A0 5A 00     	ldy	#$5a
  7793 00:1BC4: B7 11        	lda	[<L218+p_1],Y
  7794 00:1BC6: 85 03        	sta	<R0+2
  7795 00:1BC8: A0 11 00     	ldy	#$11
  7796 00:1BCB: B7 01        	lda	[<R0],Y
  7797 00:1BCD: A0 13 00     	ldy	#$13
  Mon Sep 27 2021  9:39                                                Page 145


  7798 00:1BD0: 17 01        	ora	[<R0],Y
  7799 00:1BD2: D0 03        	bne	L263
  7800 00:1BD4: 82 1E 00     	brl	L10164
  7801                        L263:
  7802                        	.line	1087
  7803 00:1BD7: A0 58 00     	ldy	#$58
  7804 00:1BDA: B7 11        	lda	[<L218+p_1],Y
  7805 00:1BDC: 85 01        	sta	<R0
  7806 00:1BDE: A0 5A 00     	ldy	#$5a
  7807 00:1BE1: B7 11        	lda	[<L218+p_1],Y
  7808 00:1BE3: 85 03        	sta	<R0+2
  7809 00:1BE5: A0 13 00     	ldy	#$13
  7810 00:1BE8: B7 01        	lda	[<R0],Y
  7811 00:1BEA: 48           	pha
  7812 00:1BEB: A0 11 00     	ldy	#$11
  7813 00:1BEE: B7 01        	lda	[<R0],Y
  7814 00:1BF0: 48           	pha
  7815 00:1BF1: 22 xx xx xx  	jsl	~~k_mem_deallocate_heap
  7816                        ;
  7817                        ;					p->desktopCtl->c
                    urrentDiskName = NULL;
  7818                        L10164:
  7819                        	.line	1089
  7820 00:1BF5: A0 58 00     	ldy	#$58
  7821 00:1BF8: B7 11        	lda	[<L218+p_1],Y
  7822 00:1BFA: 85 01        	sta	<R0
  7823 00:1BFC: A0 5A 00     	ldy	#$5a
  7824 00:1BFF: B7 11        	lda	[<L218+p_1],Y
  7825 00:1C01: 85 03        	sta	<R0+2
  7826 00:1C03: A9 00 00     	lda	#$0
  7827 00:1C06: A0 11 00     	ldy	#$11
  7828 00:1C09: 97 01        	sta	[<R0],Y
  7829 00:1C0B: A9 00 00     	lda	#$0
  7830 00:1C0E: A0 13 00     	ldy	#$13
  7831 00:1C11: 97 01        	sta	[<R0],Y
  7832                        ;				}
  7833                        	.line	1090
  7834                        ;			}
  7835                        L10163:
  7836                        	.line	1091
  7837                        ;			else
  7838 00:1C13: 82 16 00     	brl	L10165
  7839                        L10162:
  7840                        ;				k_put_string(0,51,"No Di
                    sk Detected                               ",15,0);
  7841                        	.line	1093
  7842 00:1C16: F4 00 00     	pea	#<$0
  7843 00:1C19: F4 0F 00     	pea	#<$f
  7844 00:1C1C: F4 xx xx     	pea	#^L216+602
  7845 00:1C1F: F4 xx xx     	pea	#<L216+602
  7846 00:1C22: F4 33 00     	pea	#<$33
  7847 00:1C25: F4 00 00     	pea	#<$0
  7848 00:1C28: 22 xx xx xx  	jsl	~~k_put_string
  7849                        L10165:
  7850                        ;
  7851                        ;			break;
  7852                        	.line	1095
  7853 00:1C2C: 82 AD 05     	brl	L10116
  Mon Sep 27 2021  9:39                                                Page 146


  7854                        ;		case FX_APP_MESSAGE:
  7855                        	.line	1096
  7856                        L10166:
  7857                        ;			k_debug_string("DefConsoleProc::
                    FX_APP_MESSAGE\r\n");
  7858                        	.line	1097
  7859 00:1C2F: F4 xx xx     	pea	#^L216+650
  7860 00:1C32: F4 xx xx     	pea	#<L216+650
  7861 00:1C35: 22 xx xx xx  	jsl	~~k_debug_string
  7862                        ;			if(pMsg->pheap)
  7863                        	.line	1098
  7864                        ;			{
  7865 00:1C39: A0 0E 00     	ldy	#$e
  7866 00:1C3C: B7 34        	lda	[<L217+pMsg_0],Y
  7867 00:1C3E: A0 10 00     	ldy	#$10
  7868 00:1C41: 17 34        	ora	[<L217+pMsg_0],Y
  7869 00:1C43: D0 03        	bne	L264
  7870 00:1C45: 82 7F 00     	brl	L10167
  7871                        L264:
  7872                        	.line	1099
  7873                        ;				if(((PCOMMANDARGS)pMsg->
                    pheap)->proc)
  7874                        	.line	1100
  7875                        ;				{
  7876 00:1C48: A0 0E 00     	ldy	#$e
  7877 00:1C4B: B7 34        	lda	[<L217+pMsg_0],Y
  7878 00:1C4D: 85 01        	sta	<R0
  7879 00:1C4F: A0 10 00     	ldy	#$10
  7880 00:1C52: B7 34        	lda	[<L217+pMsg_0],Y
  7881 00:1C54: 85 03        	sta	<R0+2
  7882 00:1C56: A7 01        	lda	[<R0]
  7883 00:1C58: A0 02 00     	ldy	#$2
  7884 00:1C5B: 17 01        	ora	[<R0],Y
  7885 00:1C5D: D0 03        	bne	L265
  7886 00:1C5F: 82 3B 00     	brl	L10168
  7887                        L265:
  7888                        	.line	1101
  7889                        ;					((PCOMMANDARGS)p
                    Msg->pheap)->proc(p,((PCOMMANDARGS)pMsg->pheap)->tokens);
  7890                        	.line	1102
  7891 00:1C62: A0 0E 00     	ldy	#$e
  7892 00:1C65: B7 34        	lda	[<L217+pMsg_0],Y
  7893 00:1C67: 85 01        	sta	<R0
  7894 00:1C69: A0 10 00     	ldy	#$10
  7895 00:1C6C: B7 34        	lda	[<L217+pMsg_0],Y
  7896 00:1C6E: 85 03        	sta	<R0+2
  7897 00:1C70: A0 06 00     	ldy	#$6
  7898 00:1C73: B7 01        	lda	[<R0],Y
  7899 00:1C75: 48           	pha
  7900 00:1C76: A0 04 00     	ldy	#$4
  7901 00:1C79: B7 01        	lda	[<R0],Y
  7902 00:1C7B: 48           	pha
  7903 00:1C7C: D4 13        	pei	<L218+p_1+2
  7904 00:1C7E: D4 11        	pei	<L218+p_1
  7905 00:1C80: A0 0E 00     	ldy	#$e
  7906 00:1C83: B7 34        	lda	[<L217+pMsg_0],Y
  7907 00:1C85: 85 01        	sta	<R0
  7908 00:1C87: A0 10 00     	ldy	#$10
  Mon Sep 27 2021  9:39                                                Page 147


  7909 00:1C8A: B7 34        	lda	[<L217+pMsg_0],Y
  7910 00:1C8C: 85 03        	sta	<R0+2
  7911 00:1C8E: A0 02 00     	ldy	#$2
  7912 00:1C91: B7 01        	lda	[<R0],Y
  7913 00:1C93: AA           	tax
  7914 00:1C94: A7 01        	lda	[<R0]
  7915                        	xref	~~~lcal
  7916 00:1C96: 22 xx xx xx  	jsl	~~~lcal
  7917                        ;					//((FXCommandHan
                    dler)pMsg->pheap)(p);
  7918                        ;				}
  7919                        	.line	1104
  7920                        ;				else
  7921 00:1C9A: 82 0A 00     	brl	L10169
  7922                        L10168:
  7923                        ;				{
  7924                        	.line	1106
  7925                        ;					k_debug_string("
                    DefConsoleProc::FX_APP_MESSAGE BAD PROC\r\n");
  7926                        	.line	1107
  7927 00:1C9D: F4 xx xx     	pea	#^L216+683
  7928 00:1CA0: F4 xx xx     	pea	#<L216+683
  7929 00:1CA3: 22 xx xx xx  	jsl	~~k_debug_string
  7930                        ;				}
  7931                        	.line	1108
  7932                        L10169:
  7933                        ;
  7934                        ;				k_mem_deallocate_heap(pM
                    sg->pheap);
  7935                        	.line	1110
  7936 00:1CA7: A0 10 00     	ldy	#$10
  7937 00:1CAA: B7 34        	lda	[<L217+pMsg_0],Y
  7938 00:1CAC: 48           	pha
  7939 00:1CAD: A0 0E 00     	ldy	#$e
  7940 00:1CB0: B7 34        	lda	[<L217+pMsg_0],Y
  7941 00:1CB2: 48           	pha
  7942 00:1CB3: 22 xx xx xx  	jsl	~~k_mem_deallocate_heap
  7943                        ;				pMsg->pheap = NULL;
  7944                        	.line	1111
  7945 00:1CB7: A9 00 00     	lda	#$0
  7946 00:1CBA: A0 0E 00     	ldy	#$e
  7947 00:1CBD: 97 34        	sta	[<L217+pMsg_0],Y
  7948 00:1CBF: A9 00 00     	lda	#$0
  7949 00:1CC2: A0 10 00     	ldy	#$10
  7950 00:1CC5: 97 34        	sta	[<L217+pMsg_0],Y
  7951                        ;			}
  7952                        	.line	1112
  7953                        ;			k_debug_string("DefConsoleProc::
                    FX_APP_MESSAGE exit\r\n");
  7954                        L10167:
  7955                        	.line	1113
  7956 00:1CC7: F4 xx xx     	pea	#^L216+725
  7957 00:1CCA: F4 xx xx     	pea	#<L216+725
  7958 00:1CCD: 22 xx xx xx  	jsl	~~k_debug_string
  7959                        ;			break;
  7960                        	.line	1114
  7961 00:1CD1: 82 08 05     	brl	L10116
  7962                        ;		case FX_MOUSE_MOVE:
  Mon Sep 27 2021  9:39                                                Page 148


  7963                        	.line	1115
  7964                        L10170:
  7965                        ;			//if(p->consoleCtl->desktopMode 
                    )
  7966                        ;			//	OnMouse(p,pMsg->data[0],
                    MAKEWORD(pMsg->data[1],pMsg->data[2]),MAKEWORD(pMsg->data[3]
                    ,pMsg->data[4]));
  7967                        ;
  7968                        ;
  7969                        ;			break;
  7970                        	.line	1120
  7971 00:1CD4: 82 05 05     	brl	L10116
  7972                        ;
  7973                        ;		case FX_RBUTTON_DOWN:
  7974                        	.line	1122
  7975                        L10171:
  7976                        ;			k_debug_string("DefConsoleProc::
                    FX_RBUTTON_DOWN\r\n");
  7977                        	.line	1123
  7978 00:1CD7: F4 xx xx     	pea	#^L216+763
  7979 00:1CDA: F4 xx xx     	pea	#<L216+763
  7980 00:1CDD: 22 xx xx xx  	jsl	~~k_debug_string
  7981                        ;			//k_exec_throw_exception(0xFF000
                    000,1,"Test Exception Mode Messages",-1);
  7982                        ;			break;
  7983                        	.line	1125
  7984 00:1CE1: 82 F8 04     	brl	L10116
  7985                        ;
  7986                        ;		case FX_LBUTTON_DOWN:
  7987                        	.line	1127
  7988                        L10172:
  7989                        ;			k_debug_string("DefConsoleProc::
                    FX_LBUTTON_DOWN\r\n");
  7990                        	.line	1128
  7991 00:1CE4: F4 xx xx     	pea	#^L216+797
  7992 00:1CE7: F4 xx xx     	pea	#<L216+797
  7993 00:1CEA: 22 xx xx xx  	jsl	~~k_debug_string
  7994                        ;
  7995                        ;
  7996                        ;			break;
  7997                        	.line	1131
  7998 00:1CEE: 82 EB 04     	brl	L10116
  7999                        ;		case FX_LBUTTON_UP:
  8000                        	.line	1132
  8001                        L10173:
  8002                        ;			k_debug_string("DefConsoleProc::
                    FX_LBUTTON_UP\r\n");
  8003                        	.line	1133
  8004 00:1CF1: F4 xx xx     	pea	#^L216+831
  8005 00:1CF4: F4 xx xx     	pea	#<L216+831
  8006 00:1CF7: 22 xx xx xx  	jsl	~~k_debug_string
  8007                        ;			break;
  8008                        	.line	1134
  8009 00:1CFB: 82 DE 04     	brl	L10116
  8010                        ;		case FX_LBUTTON_DRAG:
  8011                        	.line	1135
  8012                        L10174:
  8013                        ;			k_debug_string("DefConsoleProc::
  Mon Sep 27 2021  9:39                                                Page 149


                    FX_LBUTTON_DRAG\r\n");
  8014                        	.line	1136
  8015 00:1CFE: F4 xx xx     	pea	#^L216+863
  8016 00:1D01: F4 xx xx     	pea	#<L216+863
  8017 00:1D04: 22 xx xx xx  	jsl	~~k_debug_string
  8018                        ;			break;
  8019                        	.line	1137
  8020 00:1D08: 82 D1 04     	brl	L10116
  8021                        ;		case FX_LBUTTON_DBLCLICK:
  8022                        	.line	1138
  8023                        L10175:
  8024                        ;			k_debug_string("DefConsoleProc::
                    FX_LBUTTON_DBLCLICK\r\n");
  8025                        	.line	1139
  8026 00:1D0B: F4 xx xx     	pea	#^L216+897
  8027 00:1D0E: F4 xx xx     	pea	#<L216+897
  8028 00:1D11: 22 xx xx xx  	jsl	~~k_debug_string
  8029                        ;			break;
  8030                        	.line	1140
  8031 00:1D15: 82 C4 04     	brl	L10116
  8032                        ;
  8033                        ;		case FX_WINDOW_TOFRONT:
  8034                        	.line	1142
  8035                        L10176:
  8036                        ;			k_debug_string("DefConsoleProc::
                    FX_WINDOW_TOFRONT\r\n");
  8037                        	.line	1143
  8038 00:1D18: F4 xx xx     	pea	#^L216+935
  8039 00:1D1B: F4 xx xx     	pea	#<L216+935
  8040 00:1D1E: 22 xx xx xx  	jsl	~~k_debug_string
  8041                        ;
  8042                        ;			k_vdraw_ui_window(NULL,FXWS_OVER
                    LAPPED,25,25,200,300,"Clicked FRONT",15,3);
  8043                        	.line	1145
  8044 00:1D22: F4 03 00     	pea	#<$3
  8045 00:1D25: F4 0F 00     	pea	#<$f
  8046 00:1D28: F4 xx xx     	pea	#^L216+971
  8047 00:1D2B: F4 xx xx     	pea	#<L216+971
  8048 00:1D2E: F4 2C 01     	pea	#<$12c
  8049 00:1D31: F4 C8 00     	pea	#<$c8
  8050 00:1D34: F4 19 00     	pea	#<$19
  8051 00:1D37: F4 19 00     	pea	#<$19
  8052 00:1D3A: F4 00 00     	pea	#^$0
  8053 00:1D3D: F4 00 00     	pea	#<$0
  8054 00:1D40: F4 00 00     	pea	#^$0
  8055 00:1D43: F4 00 00     	pea	#<$0
  8056 00:1D46: 22 xx xx xx  	jsl	~~k_vdraw_ui_window
  8057                        ;
  8058                        ;			break;
  8059                        	.line	1147
  8060 00:1D4A: 82 8F 04     	brl	L10116
  8061                        ;		case FX_WINDOW_TOBACK:
  8062                        	.line	1148
  8063                        L10177:
  8064                        ;			k_debug_string("DefConsoleProc::
                    FX_WINDOW_TOBACK\r\n");
  8065                        	.line	1149
  8066 00:1D4D: F4 xx xx     	pea	#^L216+985
  Mon Sep 27 2021  9:39                                                Page 150


  8067 00:1D50: F4 xx xx     	pea	#<L216+985
  8068 00:1D53: 22 xx xx xx  	jsl	~~k_debug_string
  8069                        ;
  8070                        ;			k_vdraw_ui_window(NULL,FXWS_OVER
                    LAPPED,250,250,150,200,"Clicked BACK",15,3);
  8071                        	.line	1151
  8072 00:1D57: F4 03 00     	pea	#<$3
  8073 00:1D5A: F4 0F 00     	pea	#<$f
  8074 00:1D5D: F4 xx xx     	pea	#^L216+1020
  8075 00:1D60: F4 xx xx     	pea	#<L216+1020
  8076 00:1D63: F4 C8 00     	pea	#<$c8
  8077 00:1D66: F4 96 00     	pea	#<$96
  8078 00:1D69: F4 FA 00     	pea	#<$fa
  8079 00:1D6C: F4 FA 00     	pea	#<$fa
  8080 00:1D6F: F4 00 00     	pea	#^$0
  8081 00:1D72: F4 00 00     	pea	#<$0
  8082 00:1D75: F4 00 00     	pea	#^$0
  8083 00:1D78: F4 00 00     	pea	#<$0
  8084 00:1D7B: 22 xx xx xx  	jsl	~~k_vdraw_ui_window
  8085                        ;
  8086                        ;			break;
  8087                        	.line	1153
  8088 00:1D7F: 82 5A 04     	brl	L10116
  8089                        ;		case FX_COM1_DATA:
  8090                        	.line	1154
  8091                        L10178:
  8092                        ;			//if(pMsg->data[0]>64)
  8093                        ;			//	k_debug_char("DefConsole
                    Proc::FX_COM1_DATA:",(CHAR)pMsg->data[0]);
  8094                        ;			break;
  8095                        	.line	1157
  8096 00:1D82: 82 57 04     	brl	L10116
  8097                        ;		case FX_COM2_DATA:
  8098                        	.line	1158
  8099                        L10179:
  8100                        ;			//k_debug_string("DefConsoleProc
                    ::FX_COM2_DATA\r\n");
  8101                        ;			break;
  8102                        	.line	1160
  8103 00:1D85: 82 54 04     	brl	L10116
  8104                        ;		case FX_PROCESS:
  8105                        	.line	1161
  8106                        L10180:
  8107                        ;			//k_debug_string("DefConsoleProc
                    ::FX_PROCESS\r\n");
  8108                        ;
  8109                        ;			pctx = (PCONSOLECTX)p->ctx;
  8110                        	.line	1164
  8111 00:1D88: A0 0A 00     	ldy	#$a
  8112 00:1D8B: B7 11        	lda	[<L218+p_1],Y
  8113 00:1D8D: 85 15        	sta	<L218+pctx_1
  8114 00:1D8F: A0 0C 00     	ldy	#$c
  8115 00:1D92: B7 11        	lda	[<L218+p_1],Y
  8116 00:1D94: 85 17        	sta	<L218+pctx_1+2
  8117                        ;
  8118                        ;
  8119                        ;			//k_updatespinner(3,40,&consoles
                    pinctx);
  Mon Sep 27 2021  9:39                                                Page 151


  8120                        ;			/*
  8121                        ;			for(i=0;i<100;i++)
  8122                        ;			{
  8123                        ;				asm NOP;
  8124                        ;			}
  8125                        ;			*/
  8126                        ;
  8127                        ;			if(((PFXCOMBUFFER)(pctx->userDat
                    a))->cbBuffer == -1)
  8128                        	.line	1175
  8129                        ;			{
  8130 00:1D96: A0 83 00     	ldy	#$83
  8131 00:1D99: B7 15        	lda	[<L218+pctx_1],Y
  8132 00:1D9B: 85 01        	sta	<R0
  8133 00:1D9D: A0 85 00     	ldy	#$85
  8134 00:1DA0: B7 15        	lda	[<L218+pctx_1],Y
  8135 00:1DA2: 85 03        	sta	<R0+2
  8136 00:1DA4: A0 02 00     	ldy	#$2
  8137 00:1DA7: B7 01        	lda	[<R0],Y
  8138 00:1DA9: C9 FF FF     	cmp	#<$ffffffff
  8139 00:1DAC: F0 03        	beq	L266
  8140 00:1DAE: 82 F2 00     	brl	L10181
  8141                        L266:
  8142                        	.line	1176
  8143                        ;				ptr = strtok(((PFXCOMBUF
                    FER)(pctx->userData))->buffer, "\n");
  8144                        	.line	1177
  8145 00:1DB1: F4 xx xx     	pea	#^L216+1033
  8146 00:1DB4: F4 xx xx     	pea	#<L216+1033
  8147 00:1DB7: 18           	clc
  8148 00:1DB8: A9 04 00     	lda	#$4
  8149 00:1DBB: A0 83 00     	ldy	#$83
  8150 00:1DBE: 77 15        	adc	[<L218+pctx_1],Y
  8151 00:1DC0: 85 01        	sta	<R0
  8152 00:1DC2: A9 00 00     	lda	#$0
  8153 00:1DC5: A0 85 00     	ldy	#$85
  8154 00:1DC8: 77 15        	adc	[<L218+pctx_1],Y
  8155 00:1DCA: 85 03        	sta	<R0+2
  8156 00:1DCC: D4 03        	pei	<R0+2
  8157 00:1DCE: D4 01        	pei	<R0
  8158 00:1DD0: 22 xx xx xx  	jsl	~~strtok
  8159 00:1DD4: 85 0D        	sta	<L218+ptr_1
  8160 00:1DD6: 86 0F        	stx	<L218+ptr_1+2
  8161                        ;
  8162                        ;				while( ptr != NULL )
  8163                        	.line	1179
  8164                        L10182:
  8165 00:1DD8: A5 0D        	lda	<L218+ptr_1
  8166 00:1DDA: 05 0F        	ora	<L218+ptr_1+2
  8167 00:1DDC: D0 03        	bne	L267
  8168 00:1DDE: 82 89 00     	brl	L10183
  8169                        L267:
  8170                        ;				{
  8171                        	.line	1180
  8172                        ;					if(*ptr!='%')
  8173                        	.line	1181
  8174                        ;					{
  8175 00:1DE1: E2 20        	sep	#$20
  Mon Sep 27 2021  9:39                                                Page 152


  8176                        	longa	off
  8177 00:1DE3: A7 0D        	lda	[<L218+ptr_1]
  8178 00:1DE5: C9 25        	cmp	#<$25
  8179 00:1DE7: C2 20        	rep	#$20
  8180                        	longa	on
  8181 00:1DE9: D0 03        	bne	L268
  8182 00:1DEB: 82 65 00     	brl	L10184
  8183                        L268:
  8184                        	.line	1182
  8185                        ;						k_put_st
                    ring(p->consoleCtl->curX,p->consoleCtl->curY,ptr,15,0);
  8186                        	.line	1183
  8187 00:1DEE: F4 00 00     	pea	#<$0
  8188 00:1DF1: F4 0F 00     	pea	#<$f
  8189 00:1DF4: D4 0F        	pei	<L218+ptr_1+2
  8190 00:1DF6: D4 0D        	pei	<L218+ptr_1
  8191 00:1DF8: A0 54 00     	ldy	#$54
  8192 00:1DFB: B7 11        	lda	[<L218+p_1],Y
  8193 00:1DFD: 85 01        	sta	<R0
  8194 00:1DFF: A0 56 00     	ldy	#$56
  8195 00:1E02: B7 11        	lda	[<L218+p_1],Y
  8196 00:1E04: 85 03        	sta	<R0+2
  8197 00:1E06: A0 06 00     	ldy	#$6
  8198 00:1E09: B7 01        	lda	[<R0],Y
  8199 00:1E0B: 48           	pha
  8200 00:1E0C: A0 54 00     	ldy	#$54
  8201 00:1E0F: B7 11        	lda	[<L218+p_1],Y
  8202 00:1E11: 85 01        	sta	<R0
  8203 00:1E13: A0 56 00     	ldy	#$56
  8204 00:1E16: B7 11        	lda	[<L218+p_1],Y
  8205 00:1E18: 85 03        	sta	<R0+2
  8206 00:1E1A: A0 04 00     	ldy	#$4
  8207 00:1E1D: B7 01        	lda	[<R0],Y
  8208 00:1E1F: 48           	pha
  8209 00:1E20: 22 xx xx xx  	jsl	~~k_put_string
  8210                        ;						p->conso
                    leCtl->curX = 0;
  8211                        	.line	1184
  8212 00:1E24: A0 54 00     	ldy	#$54
  8213 00:1E27: B7 11        	lda	[<L218+p_1],Y
  8214 00:1E29: 85 01        	sta	<R0
  8215 00:1E2B: A0 56 00     	ldy	#$56
  8216 00:1E2E: B7 11        	lda	[<L218+p_1],Y
  8217 00:1E30: 85 03        	sta	<R0+2
  8218 00:1E32: A9 00 00     	lda	#$0
  8219 00:1E35: A0 04 00     	ldy	#$4
  8220 00:1E38: 97 01        	sta	[<R0],Y
  8221                        ;						p->conso
                    leCtl->curY++;
  8222                        	.line	1185
  8223 00:1E3A: A0 54 00     	ldy	#$54
  8224 00:1E3D: B7 11        	lda	[<L218+p_1],Y
  8225 00:1E3F: 85 01        	sta	<R0
  8226 00:1E41: A0 56 00     	ldy	#$56
  8227 00:1E44: B7 11        	lda	[<L218+p_1],Y
  8228 00:1E46: 85 03        	sta	<R0+2
  8229 00:1E48: A0 06 00     	ldy	#$6
  8230 00:1E4B: B7 01        	lda	[<R0],Y
  Mon Sep 27 2021  9:39                                                Page 153


  8231 00:1E4D: 1A           	ina
  8232 00:1E4E: A0 06 00     	ldy	#$6
  8233 00:1E51: 97 01        	sta	[<R0],Y
  8234                        ;					}
  8235                        	.line	1186
  8236                        ;					ptr = strtok(NUL
                    L, "\n");
  8237                        L10184:
  8238                        	.line	1187
  8239 00:1E53: F4 xx xx     	pea	#^L216+1035
  8240 00:1E56: F4 xx xx     	pea	#<L216+1035
  8241 00:1E59: F4 00 00     	pea	#^$0
  8242 00:1E5C: F4 00 00     	pea	#<$0
  8243 00:1E5F: 22 xx xx xx  	jsl	~~strtok
  8244 00:1E63: 85 0D        	sta	<L218+ptr_1
  8245 00:1E65: 86 0F        	stx	<L218+ptr_1+2
  8246                        ;				}
  8247                        	.line	1188
  8248 00:1E67: 82 6E FF     	brl	L10182
  8249                        L10183:
  8250                        ;
  8251                        ;				((PFXCOMBUFFER)(pctx->us
                    erData))->cbBuffer = 0;
  8252                        	.line	1190
  8253 00:1E6A: A0 83 00     	ldy	#$83
  8254 00:1E6D: B7 15        	lda	[<L218+pctx_1],Y
  8255 00:1E6F: 85 01        	sta	<R0
  8256 00:1E71: A0 85 00     	ldy	#$85
  8257 00:1E74: B7 15        	lda	[<L218+pctx_1],Y
  8258 00:1E76: 85 03        	sta	<R0+2
  8259 00:1E78: A9 00 00     	lda	#$0
  8260 00:1E7B: A0 02 00     	ldy	#$2
  8261 00:1E7E: 97 01        	sta	[<R0],Y
  8262                        ;				memset(((PFXCOMBUFFER)(p
                    ctx->userData))->buffer,0,256);
  8263                        	.line	1191
  8264 00:1E80: F4 00 01     	pea	#<$100
  8265 00:1E83: F4 00 00     	pea	#<$0
  8266 00:1E86: 18           	clc
  8267 00:1E87: A9 04 00     	lda	#$4
  8268 00:1E8A: A0 83 00     	ldy	#$83
  8269 00:1E8D: 77 15        	adc	[<L218+pctx_1],Y
  8270 00:1E8F: 85 01        	sta	<R0
  8271 00:1E91: A9 00 00     	lda	#$0
  8272 00:1E94: A0 85 00     	ldy	#$85
  8273 00:1E97: 77 15        	adc	[<L218+pctx_1],Y
  8274 00:1E99: 85 03        	sta	<R0+2
  8275 00:1E9B: D4 03        	pei	<R0+2
  8276 00:1E9D: D4 01        	pei	<R0
  8277 00:1E9F: 22 xx xx xx  	jsl	~~memset
  8278                        ;			}
  8279                        	.line	1192
  8280                        ;
  8281                        ;			//k_debug_integer("DefConsolePro
                    c::FX_PROCESS:COM1 DATA:",serial);
  8282                        ;			while(UART1_BASE[UART_LSR] & 0x0
                    1)
  8283                        L10181:
  Mon Sep 27 2021  9:39                                                Page 154


  8284                        	.line	1195
  8285                        L10185:
  8286 00:1EA3: E2 20        	sep	#$20
  8287                        	longa	off
  8288 00:1EA5: AF FD 18 AF  	lda	>11475197	; volatile
  8289 00:1EA9: 29 01        	and	#<$1
  8290 00:1EAB: C2 20        	rep	#$20
  8291                        	longa	on
  8292 00:1EAD: D0 03        	bne	L269
  8293 00:1EAF: 82 B9 00     	brl	L10186
  8294                        L269:
  8295                        ;			{
  8296                        	.line	1196
  8297                        ;				serial = UART1_BASE[0];
  8298                        	.line	1197
  8299 00:1EB2: E2 20        	sep	#$20
  8300                        	longa	off
  8301 00:1EB4: AF F8 18 AF  	lda	>11475192	; volatile
  8302 00:1EB8: 85 24        	sta	<L218+serial_1
  8303 00:1EBA: C2 20        	rep	#$20
  8304                        	longa	on
  8305                        ;
  8306                        ;				//k_debug_long("DefConso
                    leProc::ProcessId:",p->procId);
  8307                        ;				//k_debug_pointer("DefCo
                    nsoleProc::p->ctx:",p->ctx);
  8308                        ;				//k_debug_pointer("DefCo
                    nsoleProc::pctx->userData:",pctx->userData);
  8309                        ;				//k_debug_hex("DefConsol
                    eProc::FX_PROCESS:COM1 DATA:",serial);
  8310                        ;
  8311                        ;				temp3 = ((PFXCOMBUFFER)(
                    pctx->userData))->cbBuffer;
  8312                        	.line	1204
  8313 00:1EBC: A0 83 00     	ldy	#$83
  8314 00:1EBF: B7 15        	lda	[<L218+pctx_1],Y
  8315 00:1EC1: 85 01        	sta	<R0
  8316 00:1EC3: A0 85 00     	ldy	#$85
  8317 00:1EC6: B7 15        	lda	[<L218+pctx_1],Y
  8318 00:1EC8: 85 03        	sta	<R0+2
  8319 00:1ECA: A0 02 00     	ldy	#$2
  8320 00:1ECD: B7 01        	lda	[<R0],Y
  8321 00:1ECF: 85 22        	sta	<L218+temp3_1
  8322                        ;
  8323                        ;				//k_debug_integer("DefCo
                    nsoleProc::FX_PROCESS:COM1-COUNT:",temp3);
  8324                        ;
  8325                        ;				((PFXCOMBUFFER)(pctx->us
                    erData))->buffer[temp3] = (UCHAR)serial;
  8326                        	.line	1208
  8327 00:1ED1: A0 83 00     	ldy	#$83
  8328 00:1ED4: B7 15        	lda	[<L218+pctx_1],Y
  8329 00:1ED6: 85 01        	sta	<R0
  8330 00:1ED8: A0 85 00     	ldy	#$85
  8331 00:1EDB: B7 15        	lda	[<L218+pctx_1],Y
  8332 00:1EDD: 85 03        	sta	<R0+2
  8333 00:1EDF: 18           	clc
  8334 00:1EE0: A9 04 00     	lda	#$4
  Mon Sep 27 2021  9:39                                                Page 155


  8335 00:1EE3: 65 22        	adc	<L218+temp3_1
  8336 00:1EE5: 85 05        	sta	<R1
  8337 00:1EE7: E2 20        	sep	#$20
  8338                        	longa	off
  8339 00:1EE9: A5 24        	lda	<L218+serial_1
  8340 00:1EEB: A4 05        	ldy	<R1
  8341 00:1EED: 97 01        	sta	[<R0],Y
  8342 00:1EEF: C2 20        	rep	#$20
  8343                        	longa	on
  8344                        ;				((PFXCOMBUFFER)(pctx->us
                    erData))->cbBuffer++;
  8345                        	.line	1209
  8346 00:1EF1: A0 83 00     	ldy	#$83
  8347 00:1EF4: B7 15        	lda	[<L218+pctx_1],Y
  8348 00:1EF6: 85 01        	sta	<R0
  8349 00:1EF8: A0 85 00     	ldy	#$85
  8350 00:1EFB: B7 15        	lda	[<L218+pctx_1],Y
  8351 00:1EFD: 85 03        	sta	<R0+2
  8352 00:1EFF: A0 02 00     	ldy	#$2
  8353 00:1F02: B7 01        	lda	[<R0],Y
  8354 00:1F04: 1A           	ina
  8355 00:1F05: A0 02 00     	ldy	#$2
  8356 00:1F08: 97 01        	sta	[<R0],Y
  8357                        ;
  8358                        ;				//if(serial == 13)
  8359                        ;				if(((PFXCOMBUFFER)(pctx-
                    >userData))->cbBuffer > 255 || serial == '\n')
  8360                        	.line	1212
  8361                        ;				{
  8362 00:1F0A: A0 83 00     	ldy	#$83
  8363 00:1F0D: B7 15        	lda	[<L218+pctx_1],Y
  8364 00:1F0F: 85 01        	sta	<R0
  8365 00:1F11: A0 85 00     	ldy	#$85
  8366 00:1F14: B7 15        	lda	[<L218+pctx_1],Y
  8367 00:1F16: 85 03        	sta	<R0+2
  8368 00:1F18: A9 FF 00     	lda	#$ff
  8369 00:1F1B: A0 02 00     	ldy	#$2
  8370 00:1F1E: D7 01        	cmp	[<R0],Y
  8371 00:1F20: B0 03        	bcs	L271
  8372 00:1F22: 82 0D 00     	brl	L270
  8373                        L271:
  8374 00:1F25: E2 20        	sep	#$20
  8375                        	longa	off
  8376 00:1F27: A5 24        	lda	<L218+serial_1
  8377 00:1F29: C9 0A        	cmp	#<$a
  8378 00:1F2B: C2 20        	rep	#$20
  8379                        	longa	on
  8380 00:1F2D: F0 03        	beq	L272
  8381 00:1F2F: 82 36 00     	brl	L10187
  8382                        L272:
  8383                        L270:
  8384                        	.line	1213
  8385                        ;					//k_debug_string
                    s("DefConsoleProc::FX_PROCESS:COM1-BUFFER:",((PFXCOMBUFFER)(
                    pctx->userData))->buffer);
  8386                        ;					k_debug_string((
                    (PFXCOMBUFFER)(pctx->userData))->buffer);
  8387                        	.line	1215
  Mon Sep 27 2021  9:39                                                Page 156


  8388 00:1F32: 18           	clc
  8389 00:1F33: A9 04 00     	lda	#$4
  8390 00:1F36: A0 83 00     	ldy	#$83
  8391 00:1F39: 77 15        	adc	[<L218+pctx_1],Y
  8392 00:1F3B: 85 01        	sta	<R0
  8393 00:1F3D: A9 00 00     	lda	#$0
  8394 00:1F40: A0 85 00     	ldy	#$85
  8395 00:1F43: 77 15        	adc	[<L218+pctx_1],Y
  8396 00:1F45: 85 03        	sta	<R0+2
  8397 00:1F47: D4 03        	pei	<R0+2
  8398 00:1F49: D4 01        	pei	<R0
  8399 00:1F4B: 22 xx xx xx  	jsl	~~k_debug_string
  8400                        ;					//k_debug_hex("D
                    efConsoleProc::FX_PROCESS:COM1 DATA:",serial);
  8401                        ;					//k_debug_intege
                    r("DefConsoleProc::FX_PROCESS:COM1-COUNT:",temp3);
  8402                        ;					((PFXCOMBUFFER)(
                    pctx->userData))->cbBuffer = -1;
  8403                        	.line	1218
  8404 00:1F4F: A0 83 00     	ldy	#$83
  8405 00:1F52: B7 15        	lda	[<L218+pctx_1],Y
  8406 00:1F54: 85 01        	sta	<R0
  8407 00:1F56: A0 85 00     	ldy	#$85
  8408 00:1F59: B7 15        	lda	[<L218+pctx_1],Y
  8409 00:1F5B: 85 03        	sta	<R0+2
  8410 00:1F5D: A9 FF FF     	lda	#$ffff
  8411 00:1F60: A0 02 00     	ldy	#$2
  8412 00:1F63: 97 01        	sta	[<R0],Y
  8413                        ;					//memset(((PFXCO
                    MBUFFER)(pctx->userData))->buffer,0,32);
  8414                        ;					break;
  8415                        	.line	1220
  8416 00:1F65: 82 03 00     	brl	L10186
  8417                        ;				}
  8418                        	.line	1221
  8419                        ;			}
  8420                        L10187:
  8421                        	.line	1222
  8422 00:1F68: 82 38 FF     	brl	L10185
  8423                        L10186:
  8424                        ;
  8425                        ;			//k_debug_integer("DefConsolePro
                    c::FX_PROCESS:lineBufferIndex:",pctx->lineBufferIndex);
  8426                        ;			break;
  8427                        	.line	1225
  8428 00:1F6B: 82 6E 02     	brl	L10116
  8429                        ;		case FX_CONTROL_COMMAND:
  8430                        	.line	1226
  8431                        L10188:
  8432                        ;			k_debug_string("DefConsoleProc::
                    FX_CONTROL_COMMAND\r\n");
  8433                        	.line	1227
  8434 00:1F6E: F4 xx xx     	pea	#^L216+1037
  8435 00:1F71: F4 xx xx     	pea	#<L216+1037
  8436 00:1F74: 22 xx xx xx  	jsl	~~k_debug_string
  8437                        ;			if( MSGCMDID(pMsg) == CTL_CMD_CA
                    PTION )
  8438                        	.line	1228
  Mon Sep 27 2021  9:39                                                Page 157


  8439                        ;			{
  8440 00:1F78: A0 16 00     	ldy	#$16
  8441 00:1F7B: B7 34        	lda	[<L217+pMsg_0],Y
  8442 00:1F7D: C9 01 00     	cmp	#<$1
  8443 00:1F80: F0 03        	beq	L273
  8444 00:1F82: 82 50 01     	brl	L10189
  8445                        L273:
  8446                        	.line	1229
  8447                        ;				captionText = (LPCHAR)MS
                    GCMDPARM1(pMsg);
  8448                        	.line	1230
  8449 00:1F85: A0 1A 00     	ldy	#$1a
  8450 00:1F88: B7 34        	lda	[<L217+pMsg_0],Y
  8451 00:1F8A: 85 29        	sta	<L218+captionText_1
  8452 00:1F8C: A0 1C 00     	ldy	#$1c
  8453 00:1F8F: B7 34        	lda	[<L217+pMsg_0],Y
  8454 00:1F91: 85 2B        	sta	<L218+captionText_1+2
  8455                        ;				if(captionText)
  8456                        	.line	1231
  8457                        ;				{
  8458 00:1F93: A5 29        	lda	<L218+captionText_1
  8459 00:1F95: 05 2B        	ora	<L218+captionText_1+2
  8460 00:1F97: D0 03        	bne	L274
  8461 00:1F99: 82 39 01     	brl	L10190
  8462                        L274:
  8463                        	.line	1232
  8464                        ;					k_debug_strings(
                    "DefConsoleProc::CTL_CMD_CAPTION:",captionText);
  8465                        	.line	1233
  8466 00:1F9C: D4 2B        	pei	<L218+captionText_1+2
  8467 00:1F9E: D4 29        	pei	<L218+captionText_1
  8468 00:1FA0: F4 xx xx     	pea	#^L216+1074
  8469 00:1FA3: F4 xx xx     	pea	#<L216+1074
  8470 00:1FA6: 22 xx xx xx  	jsl	~~k_debug_strings
  8471                        ;
  8472                        ;					p->consoleCtl->c
                    urX = 0;
  8473                        	.line	1235
  8474 00:1FAA: A0 54 00     	ldy	#$54
  8475 00:1FAD: B7 11        	lda	[<L218+p_1],Y
  8476 00:1FAF: 85 01        	sta	<R0
  8477 00:1FB1: A0 56 00     	ldy	#$56
  8478 00:1FB4: B7 11        	lda	[<L218+p_1],Y
  8479 00:1FB6: 85 03        	sta	<R0+2
  8480 00:1FB8: A9 00 00     	lda	#$0
  8481 00:1FBB: A0 04 00     	ldy	#$4
  8482 00:1FBE: 97 01        	sta	[<R0],Y
  8483                        ;					//p->consoleCtl-
                    >curY++;
  8484                        ;
  8485                        ;					k_put_string(p->
                    consoleCtl->curX,p->consoleCtl->curY,captionText,15,0);
  8486                        	.line	1238
  8487 00:1FC0: F4 00 00     	pea	#<$0
  8488 00:1FC3: F4 0F 00     	pea	#<$f
  8489 00:1FC6: D4 2B        	pei	<L218+captionText_1+2
  8490 00:1FC8: D4 29        	pei	<L218+captionText_1
  8491 00:1FCA: A0 54 00     	ldy	#$54
  Mon Sep 27 2021  9:39                                                Page 158


  8492 00:1FCD: B7 11        	lda	[<L218+p_1],Y
  8493 00:1FCF: 85 01        	sta	<R0
  8494 00:1FD1: A0 56 00     	ldy	#$56
  8495 00:1FD4: B7 11        	lda	[<L218+p_1],Y
  8496 00:1FD6: 85 03        	sta	<R0+2
  8497 00:1FD8: A0 06 00     	ldy	#$6
  8498 00:1FDB: B7 01        	lda	[<R0],Y
  8499 00:1FDD: 48           	pha
  8500 00:1FDE: A0 54 00     	ldy	#$54
  8501 00:1FE1: B7 11        	lda	[<L218+p_1],Y
  8502 00:1FE3: 85 01        	sta	<R0
  8503 00:1FE5: A0 56 00     	ldy	#$56
  8504 00:1FE8: B7 11        	lda	[<L218+p_1],Y
  8505 00:1FEA: 85 03        	sta	<R0+2
  8506 00:1FEC: A0 04 00     	ldy	#$4
  8507 00:1FEF: B7 01        	lda	[<R0],Y
  8508 00:1FF1: 48           	pha
  8509 00:1FF2: 22 xx xx xx  	jsl	~~k_put_string
  8510                        ;
  8511                        ;					i=p->consoleCtl-
                    >curX;
  8512                        	.line	1240
  8513 00:1FF6: A0 54 00     	ldy	#$54
  8514 00:1FF9: B7 11        	lda	[<L218+p_1],Y
  8515 00:1FFB: 85 01        	sta	<R0
  8516 00:1FFD: A0 56 00     	ldy	#$56
  8517 00:2000: B7 11        	lda	[<L218+p_1],Y
  8518 00:2002: 85 03        	sta	<R0+2
  8519 00:2004: A0 04 00     	ldy	#$4
  8520 00:2007: B7 01        	lda	[<R0],Y
  8521 00:2009: 85 1A        	sta	<L218+i_1
  8522                        ;					ptr = captionTex
                    t;
  8523                        	.line	1241
  8524 00:200B: A5 29        	lda	<L218+captionText_1
  8525 00:200D: 85 0D        	sta	<L218+ptr_1
  8526 00:200F: A5 2B        	lda	<L218+captionText_1+2
  8527 00:2011: 85 0F        	sta	<L218+ptr_1+2
  8528                        ;					while(*ptr)
  8529                        	.line	1242
  8530                        L10191:
  8531 00:2013: A7 0D        	lda	[<L218+ptr_1]
  8532 00:2015: 29 FF 00     	and	#$ff
  8533 00:2018: D0 03        	bne	L275
  8534 00:201A: 82 3D 00     	brl	L10192
  8535                        L275:
  8536                        ;					{
  8537                        	.line	1243
  8538                        ;						consoleB
                    uffer[p->consoleCtl->curY][i] = *ptr;
  8539                        	.line	1244
  8540 00:201D: A5 1A        	lda	<L218+i_1
  8541 00:201F: 0A           	asl	A
  8542 00:2020: 85 01        	sta	<R0
  8543 00:2022: A0 54 00     	ldy	#$54
  8544 00:2025: B7 11        	lda	[<L218+p_1],Y
  8545 00:2027: 85 05        	sta	<R1
  8546 00:2029: A0 56 00     	ldy	#$56
  Mon Sep 27 2021  9:39                                                Page 159


  8547 00:202C: B7 11        	lda	[<L218+p_1],Y
  8548 00:202E: 85 07        	sta	<R1+2
  8549 00:2030: A0 06 00     	ldy	#$6
  8550 00:2033: B7 05        	lda	[<R1],Y
  8551 00:2035: A2 90 00     	ldx	#<$90
  8552                        	xref	~~~mul
  8553 00:2038: 22 xx xx xx  	jsl	~~~mul
  8554 00:203C: 85 05        	sta	<R1
  8555 00:203E: 18           	clc
  8556 00:203F: A5 05        	lda	<R1
  8557 00:2041: 65 01        	adc	<R0
  8558 00:2043: 85 09        	sta	<R2
  8559 00:2045: A7 0D        	lda	[<L218+ptr_1]
  8560 00:2047: 29 FF 00     	and	#$ff
  8561 00:204A: A6 09        	ldx	<R2
  8562 00:204C: 9D xx xx     	sta	|~~consoleBuffer,X
  8563                        ;						i++;
  8564                        	.line	1245
  8565 00:204F: E6 1A        	inc	<L218+i_1
  8566                        ;						ptr++;
  8567                        	.line	1246
  8568 00:2051: E6 0D        	inc	<L218+ptr_1
  8569 00:2053: D0 02        	bne	L276
  8570 00:2055: E6 0F        	inc	<L218+ptr_1+2
  8571                        L276:
  8572                        ;					}
  8573                        	.line	1247
  8574 00:2057: 82 B9 FF     	brl	L10191
  8575                        L10192:
  8576                        ;
  8577                        ;					p->consoleCtl->c
                    urX = 0;
  8578                        	.line	1249
  8579 00:205A: A0 54 00     	ldy	#$54
  8580 00:205D: B7 11        	lda	[<L218+p_1],Y
  8581 00:205F: 85 01        	sta	<R0
  8582 00:2061: A0 56 00     	ldy	#$56
  8583 00:2064: B7 11        	lda	[<L218+p_1],Y
  8584 00:2066: 85 03        	sta	<R0+2
  8585 00:2068: A9 00 00     	lda	#$0
  8586 00:206B: A0 04 00     	ldy	#$4
  8587 00:206E: 97 01        	sta	[<R0],Y
  8588                        ;					p->consoleCtl->c
                    urY++;
  8589                        	.line	1250
  8590 00:2070: A0 54 00     	ldy	#$54
  8591 00:2073: B7 11        	lda	[<L218+p_1],Y
  8592 00:2075: 85 01        	sta	<R0
  8593 00:2077: A0 56 00     	ldy	#$56
  8594 00:207A: B7 11        	lda	[<L218+p_1],Y
  8595 00:207C: 85 03        	sta	<R0+2
  8596 00:207E: A0 06 00     	ldy	#$6
  8597 00:2081: B7 01        	lda	[<R0],Y
  8598 00:2083: 1A           	ina
  8599 00:2084: A0 06 00     	ldy	#$6
  8600 00:2087: 97 01        	sta	[<R0],Y
  8601                        ;
  8602                        ;					k_debug_integer(
  Mon Sep 27 2021  9:39                                                Page 160


                    "DefConsoleProc::curY:",p->consoleCtl->curY);
  8603                        	.line	1252
  8604 00:2089: A0 54 00     	ldy	#$54
  8605 00:208C: B7 11        	lda	[<L218+p_1],Y
  8606 00:208E: 85 01        	sta	<R0
  8607 00:2090: A0 56 00     	ldy	#$56
  8608 00:2093: B7 11        	lda	[<L218+p_1],Y
  8609 00:2095: 85 03        	sta	<R0+2
  8610 00:2097: A0 06 00     	ldy	#$6
  8611 00:209A: B7 01        	lda	[<R0],Y
  8612 00:209C: 48           	pha
  8613 00:209D: F4 xx xx     	pea	#^L216+1107
  8614 00:20A0: F4 xx xx     	pea	#<L216+1107
  8615 00:20A3: 22 xx xx xx  	jsl	~~k_debug_integer
  8616                        ;
  8617                        ;					if(p->consoleCtl
                    ->curY > 50)
  8618                        	.line	1254
  8619                        ;					{
  8620 00:20A7: A0 54 00     	ldy	#$54
  8621 00:20AA: B7 11        	lda	[<L218+p_1],Y
  8622 00:20AC: 85 01        	sta	<R0
  8623 00:20AE: A0 56 00     	ldy	#$56
  8624 00:20B1: B7 11        	lda	[<L218+p_1],Y
  8625 00:20B3: 85 03        	sta	<R0+2
  8626 00:20B5: 38           	sec
  8627 00:20B6: A9 32 00     	lda	#$32
  8628 00:20B9: A0 06 00     	ldy	#$6
  8629 00:20BC: F7 01        	sbc	[<R0],Y
  8630 00:20BE: 70 03        	bvs	L277
  8631 00:20C0: 49 00 80     	eor	#$8000
  8632                        L277:
  8633 00:20C3: 10 03        	bpl	L278
  8634 00:20C5: 82 08 00     	brl	L10193
  8635                        L278:
  8636                        	.line	1255
  8637                        ;						k_scroll
                    _screen(p);
  8638                        	.line	1256
  8639 00:20C8: D4 13        	pei	<L218+p_1+2
  8640 00:20CA: D4 11        	pei	<L218+p_1
  8641 00:20CC: 22 xx xx xx  	jsl	~~k_scroll_screen
  8642                        ;					}
  8643                        	.line	1257
  8644                        ;
  8645                        ;					pctx->lineBuffer
                    Index = 0;
  8646                        L10193:
  8647                        	.line	1259
  8648 00:20D0: A9 00 00     	lda	#$0
  8649 00:20D3: 87 15        	sta	[<L218+pctx_1]
  8650                        ;				}
  8651                        	.line	1260
  8652                        ;			}
  8653                        L10190:
  8654                        	.line	1261
  8655                        ;			break;
  8656                        L10189:
  Mon Sep 27 2021  9:39                                                Page 161


  8657                        	.line	1262
  8658 00:20D5: 82 04 01     	brl	L10116
  8659                        ;		case FX_SCROLLBAR_COMMAND:
  8660                        	.line	1263
  8661                        L10194:
  8662                        ;			 if( MSGCMDID(pMsg) == CTL_VERT_
                    SCROLL )
  8663                        	.line	1264
  8664                        ;			{
  8665 00:20D8: A0 16 00     	ldy	#$16
  8666 00:20DB: B7 34        	lda	[<L217+pMsg_0],Y
  8667 00:20DD: C9 01 00     	cmp	#<$1
  8668 00:20E0: F0 03        	beq	L279
  8669 00:20E2: 82 2E 00     	brl	L10195
  8670                        L279:
  8671                        	.line	1265
  8672                        ;				captionText = (LPCHAR)MS
                    GCMDPARM1(pMsg);
  8673                        	.line	1266
  8674 00:20E5: A0 1A 00     	ldy	#$1a
  8675 00:20E8: B7 34        	lda	[<L217+pMsg_0],Y
  8676 00:20EA: 85 29        	sta	<L218+captionText_1
  8677 00:20EC: A0 1C 00     	ldy	#$1c
  8678 00:20EF: B7 34        	lda	[<L217+pMsg_0],Y
  8679 00:20F1: 85 2B        	sta	<L218+captionText_1+2
  8680                        ;				if(captionText)
  8681                        	.line	1267
  8682                        ;				{
  8683 00:20F3: A5 29        	lda	<L218+captionText_1
  8684 00:20F5: 05 2B        	ora	<L218+captionText_1+2
  8685 00:20F7: D0 03        	bne	L280
  8686 00:20F9: 82 17 00     	brl	L10196
  8687                        L280:
  8688                        	.line	1268
  8689                        ;					k_debug_string("
                    DefConsoleProc::CTL_VERT_SCROLL\r\n");
  8690                        	.line	1269
  8691 00:20FC: F4 xx xx     	pea	#^L216+1129
  8692 00:20FF: F4 xx xx     	pea	#<L216+1129
  8693 00:2102: 22 xx xx xx  	jsl	~~k_debug_string
  8694                        ;
  8695                        ;					/*
  8696                        ;					for(i=0;i<55;i++
                    )
  8697                        ;					{
  8698                        ;						for(j=0;
                    j<72;j++)
  8699                        ;						{
  8700                        ;							
                    consoleBuffer[i][j] = consoleBuffer[i+1][j];
  8701                        ;						}
  8702                        ;					}
  8703                        ;
  8704                        ;					for(i=0;i<56;i++
                    )
  8705                        ;					{
  8706                        ;						for(j=0;
                    j<72;j++)
  Mon Sep 27 2021  9:39                                                Page 162


  8707                        ;						{
  8708                        ;							
                    k_put_char(j,i,consoleBuffer[i][j],15,0);
  8709                        ;						}
  8710                        ;					}
  8711                        ;
  8712                        ;					p->consoleCtl->c
                    urX = 0;
  8713                        ;					p->consoleCtl->c
                    urY--;
  8714                        ;					*/
  8715                        ;					k_scroll_screen(
                    p);
  8716                        	.line	1291
  8717 00:2106: D4 13        	pei	<L218+p_1+2
  8718 00:2108: D4 11        	pei	<L218+p_1
  8719 00:210A: 22 xx xx xx  	jsl	~~k_scroll_screen
  8720                        ;
  8721                        ;					pctx->lineBuffer
                    Index = 0;
  8722                        	.line	1293
  8723 00:210E: A9 00 00     	lda	#$0
  8724 00:2111: 87 15        	sta	[<L218+pctx_1]
  8725                        ;				}
  8726                        	.line	1294
  8727                        ;			}
  8728                        L10196:
  8729                        	.line	1295
  8730                        ;
  8731                        ;			break;
  8732                        L10195:
  8733                        	.line	1297
  8734 00:2113: 82 C6 00     	brl	L10116
  8735                        ;
  8736                        ;		default:
  8737                        	.line	1299
  8738                        L10197:
  8739                        ;			//k_updatespinner(2,40,&consoles
                    pinctx);
  8740                        ;
  8741                        ;			cursorFlashInterval++;
  8742                        	.line	1302
  8743 00:2116: EE xx xx     	inc	|~~cursorFlashInterval
  8744                        ;
  8745                        ;			if(cursorFlashInterval > 10)
  8746                        	.line	1304
  8747                        ;			{
  8748 00:2119: A9 0A 00     	lda	#$a
  8749 00:211C: CD xx xx     	cmp	|~~cursorFlashInterval
  8750 00:211F: 90 03        	bcc	L281
  8751 00:2121: 82 27 00     	brl	L10198
  8752                        L281:
  8753                        	.line	1305
  8754                        ;				if(cursorCurrentColor ==
                     0)
  8755                        	.line	1306
  8756                        ;					cursorCurrentCol
                    or = p->consoleCtl->fgColor;
  Mon Sep 27 2021  9:39                                                Page 163


  8757 00:2124: AD xx xx     	lda	|~~cursorCurrentColor
  8758 00:2127: F0 03        	beq	L282
  8759 00:2129: 82 19 00     	brl	L10199
  8760                        L282:
  8761                        	.line	1307
  8762 00:212C: A0 54 00     	ldy	#$54
  8763 00:212F: B7 11        	lda	[<L218+p_1],Y
  8764 00:2131: 85 01        	sta	<R0
  8765 00:2133: A0 56 00     	ldy	#$56
  8766 00:2136: B7 11        	lda	[<L218+p_1],Y
  8767 00:2138: 85 03        	sta	<R0+2
  8768 00:213A: A0 08 00     	ldy	#$8
  8769 00:213D: B7 01        	lda	[<R0],Y
  8770 00:213F: 8D xx xx     	sta	|~~cursorCurrentColor
  8771                        ;				else
  8772 00:2142: 82 03 00     	brl	L10200
  8773                        L10199:
  8774                        ;					cursorCurrentCol
                    or = 0;
  8775                        	.line	1309
  8776 00:2145: 9C xx xx     	stz	|~~cursorCurrentColor
  8777                        L10200:
  8778                        ;
  8779                        ;				cursorFlashInterval = 0;
  8780                        	.line	1311
  8781 00:2148: 9C xx xx     	stz	|~~cursorFlashInterval
  8782                        ;			}
  8783                        	.line	1312
  8784                        ;
  8785                        ;			k_put_char(p->consoleCtl->curX,
  8786                        L10198:
  8787                        	.line	1314
  8788                        ;					   p->consoleCtl
                    ->curY,
  8789                        ;					   95,
  8790                        ;					   cursorCurrent
                    Color,0);
  8791 00:214B: F4 00 00     	pea	#<$0
  8792 00:214E: AD xx xx     	lda	|~~cursorCurrentColor
  8793 00:2151: 48           	pha
  8794 00:2152: F4 5F 00     	pea	#<$5f
  8795 00:2155: A0 54 00     	ldy	#$54
  8796 00:2158: B7 11        	lda	[<L218+p_1],Y
  8797 00:215A: 85 01        	sta	<R0
  8798 00:215C: A0 56 00     	ldy	#$56
  8799 00:215F: B7 11        	lda	[<L218+p_1],Y
  8800 00:2161: 85 03        	sta	<R0+2
  8801 00:2163: A0 06 00     	ldy	#$6
  8802 00:2166: B7 01        	lda	[<R0],Y
  8803 00:2168: 48           	pha
  8804 00:2169: A0 54 00     	ldy	#$54
  8805 00:216C: B7 11        	lda	[<L218+p_1],Y
  8806 00:216E: 85 01        	sta	<R0
  8807 00:2170: A0 56 00     	ldy	#$56
  8808 00:2173: B7 11        	lda	[<L218+p_1],Y
  8809 00:2175: 85 03        	sta	<R0+2
  8810 00:2177: A0 04 00     	ldy	#$4
  8811 00:217A: B7 01        	lda	[<R0],Y
  Mon Sep 27 2021  9:39                                                Page 164


  8812 00:217C: 48           	pha
  8813 00:217D: 22 xx xx xx  	jsl	~~k_put_char
  8814                        ;
  8815                        ;
  8816                        ;			break;
  8817                        	.line	1320
  8818 00:2181: 82 58 00     	brl	L10116
  8819                        ;		}
  8820                        	.line	1321
  8821                        L10115:
  8822                        	xref	~~~swt
  8823 00:2184: 22 xx xx xx  	jsl	~~~swt
  8824 00:2188: 14 00        	dw	20
  8825 00:218A: 03 0F        	dw	3843
  8826 00:218C: xx xx        	dw	L10170-1
  8827 00:218E: 04 0F        	dw	3844
  8828 00:2190: xx xx        	dw	L10172-1
  8829 00:2192: 05 0F        	dw	3845
  8830 00:2194: xx xx        	dw	L10174-1
  8831 00:2196: 06 0F        	dw	3846
  8832 00:2198: xx xx        	dw	L10173-1
  8833 00:219A: 07 0F        	dw	3847
  8834 00:219C: xx xx        	dw	L10175-1
  8835 00:219E: 08 0F        	dw	3848
  8836 00:21A0: xx xx        	dw	L10171-1
  8837 00:21A2: 10 0F        	dw	3856
  8838 00:21A4: xx xx        	dw	L10133-1
  8839 00:21A6: 12 0F        	dw	3858
  8840 00:21A8: xx xx        	dw	L10130-1
  8841 00:21AA: 20 0F        	dw	3872
  8842 00:21AC: xx xx        	dw	L10150-1
  8843 00:21AE: 22 0F        	dw	3874
  8844 00:21B0: xx xx        	dw	L10161-1
  8845 00:21B2: 30 0F        	dw	3888
  8846 00:21B4: xx xx        	dw	L10176-1
  8847 00:21B6: 31 0F        	dw	3889
  8848 00:21B8: xx xx        	dw	L10177-1
  8849 00:21BA: 00 FA        	dw	64000
  8850 00:21BC: xx xx        	dw	L10188-1
  8851 00:21BE: 02 FA        	dw	64002
  8852 00:21C0: xx xx        	dw	L10194-1
  8853 00:21C2: 00 FC        	dw	64512
  8854 00:21C4: xx xx        	dw	L10178-1
  8855 00:21C6: 01 FC        	dw	64513
  8856 00:21C8: xx xx        	dw	L10179-1
  8857 00:21CA: 00 FF        	dw	65280
  8858 00:21CC: xx xx        	dw	L10180-1
  8859 00:21CE: 01 FF        	dw	65281
  8860 00:21D0: xx xx        	dw	L10117-1
  8861 00:21D2: 02 FF        	dw	65282
  8862 00:21D4: xx xx        	dw	L10129-1
  8863 00:21D6: F0 FF        	dw	65520
  8864 00:21D8: xx xx        	dw	L10166-1
  8865 00:21DA: xx xx        	dw	L10197-1
  8866                        L10116:
  8867                        ;	}
  8868                        	.line	1322
  8869                        ;	//k_debug_string("DefConsoleProc exit\r\n");
  Mon Sep 27 2021  9:39                                                Page 165


  8870                        ;}
  8871                        L10113:
  8872                        	.line	1324
  8873                        L283:
  8874 00:21DC: A5 32        	lda	<L217+2
  8875 00:21DE: 85 36        	sta	<L217+2+4
  8876 00:21E0: A5 31        	lda	<L217+1
  8877 00:21E2: 85 35        	sta	<L217+1+4
  8878 00:21E4: 2B           	pld
  8879 00:21E5: 3B           	tsc
  8880 00:21E6: 18           	clc
  8881 00:21E7: 69 34 00     	adc	#L217+4
  8882 00:21EA: 1B           	tcs
  8883 00:21EB: 6B           	rtl
  8884                        	.endblock	1324
  8885             00000030   L217	equ	48
  8886             0000000D   L218	equ	13
  8887                        	ends
  8888                        	efunc
  8889                        	.endfunc	1324,13,48
  8890                        	.line	1324
  8891                        	data
  8892                        L216:
  8893 00:02F8: 44 65 66 43  	db	$44,$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,
                    $50,$72,$6F,$63,$3A
       00:02FC: 6F 6E 73 6F 
       00:0300: 6C 65 50 72 
       00:0304: 6F 63 3A 
  8894 00:0307: 3A 50 72 6F  	db	$3A,$50,$72,$6F,$63,$65,$73,$73,$49,$64,
                    $3A,$00,$6D,$61,$78
       00:030B: 63 65 73 73 
       00:030F: 49 64 3A 00 
       00:0313: 6D 61 78 
  8895 00:0316: 43 6F 6C 73  	db	$43,$6F,$6C,$73,$3A,$00,$6D,$61,$78,$52,
                    $6F,$77,$73,$3A,$00
       00:031A: 3A 00 6D 61 
       00:031E: 78 52 6F 77 
       00:0322: 73 3A 00 
  8896 00:0325: 44 65 66 43  	db	$44,$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,
                    $50,$72,$6F,$63,$3A
       00:0329: 6F 6E 73 6F 
       00:032D: 6C 65 50 72 
       00:0331: 6F 63 3A 
  8897 00:0334: 3A 70 63 74  	db	$3A,$70,$63,$74,$78,$3A,$00,$44,$65,$66,
                    $43,$6F,$6E,$73,$6F
       00:0338: 78 3A 00 44 
       00:033C: 65 66 43 6F 
       00:0340: 6E 73 6F 
  8898 00:0343: 6C 65 50 72  	db	$6C,$65,$50,$72,$6F,$63,$3A,$3A,$70,$63,
                    $74,$78,$2D,$3E,$75
       00:0347: 6F 63 3A 3A 
       00:034B: 70 63 74 78 
       00:034F: 2D 3E 75 
  8899 00:0352: 73 65 72 44  	db	$73,$65,$72,$44,$61,$74,$61,$3A,$00,$44,
                    $65,$66,$43,$6F,$6E
       00:0356: 61 74 61 3A 
       00:035A: 00 44 65 66 
       00:035E: 43 6F 6E 
  Mon Sep 27 2021  9:39                                                Page 166


  8900 00:0361: 73 6F 6C 65  	db	$73,$6F,$6C,$65,$50,$72,$6F,$63,$3A,$3A,
                    $50,$72,$6F,$63,$65
       00:0365: 50 72 6F 63 
       00:0369: 3A 3A 50 72 
       00:036D: 6F 63 65 
  8901 00:0370: 73 73 49 64  	db	$73,$73,$49,$64,$3A,$00,$44,$65,$66,$43,
                    $6F,$6E,$73,$6F,$6C
       00:0374: 3A 00 44 65 
       00:0378: 66 43 6F 6E 
       00:037C: 73 6F 6C 
  8902 00:037F: 65 50 72 6F  	db	$65,$50,$72,$6F,$63,$3A,$3A,$46,$58,$5F,
                    $50,$52,$4F,$43,$45
       00:0383: 63 3A 3A 46 
       00:0387: 58 5F 50 52 
       00:038B: 4F 43 45 
  8903 00:038E: 53 53 3A 43  	db	$53,$53,$3A,$43,$4F,$4D,$31,$2D,$43,$4F,
                    $55,$4E,$54,$3A,$00
       00:0392: 4F 4D 31 2D 
       00:0396: 43 4F 55 4E 
       00:039A: 54 3A 00 
  8904 00:039D: 44 65 66 43  	db	$44,$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,
                    $50,$72,$6F,$63,$3A
       00:03A1: 6F 6E 73 6F 
       00:03A5: 6C 65 50 72 
       00:03A9: 6F 63 3A 
  8905 00:03AC: 3A 49 6E 69  	db	$3A,$49,$6E,$69,$74,$69,$61,$6C,$2D,$6C,
                    $69,$6E,$65,$42,$75
       00:03B0: 74 69 61 6C 
       00:03B4: 2D 6C 69 6E 
       00:03B8: 65 42 75 
  8906 00:03BB: 66 66 65 72  	db	$66,$66,$65,$72,$49,$6E,$64,$65,$78,$3A,
                    $00,$44,$65,$66,$43
       00:03BF: 49 6E 64 65 
       00:03C3: 78 3A 00 44 
       00:03C7: 65 66 43 
  8907 00:03CA: 6F 6E 73 6F  	db	$6F,$6E,$73,$6F,$6C,$65,$50,$72,$6F,$63,
                    $3A,$3A,$46,$58,$5F
       00:03CE: 6C 65 50 72 
       00:03D2: 6F 63 3A 3A 
       00:03D6: 46 58 5F 
  8908 00:03D9: 49 4E 49 54  	db	$49,$4E,$49,$54,$5F,$4D,$45,$53,$53,$41,
                    $47,$45,$0D,$0A,$00
       00:03DD: 5F 4D 45 53 
       00:03E1: 53 41 47 45 
       00:03E5: 0D 0A 00 
  8909 00:03E8: 44 65 66 43  	db	$44,$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,
                    $50,$72,$6F,$63,$3A
       00:03EC: 6F 6E 73 6F 
       00:03F0: 6C 65 50 72 
       00:03F4: 6F 63 3A 
  8910 00:03F7: 3A 46 58 5F  	db	$3A,$46,$58,$5F,$4B,$45,$59,$5F,$44,$4F,
                    $57,$4E,$20,$53,$43
       00:03FB: 4B 45 59 5F 
       00:03FF: 44 4F 57 4E 
       00:0403: 20 53 43 
  8911 00:0406: 41 4E 43 4F  	db	$41,$4E,$43,$4F,$44,$45,$3A,$00,$44,$65,
                    $66,$43,$6F,$6E,$73
       00:040A: 44 45 3A 00 
  Mon Sep 27 2021  9:39                                                Page 167


       00:040E: 44 65 66 43 
       00:0412: 6F 6E 73 
  8912 00:0415: 6F 6C 65 50  	db	$6F,$6C,$65,$50,$72,$6F,$63,$3A,$3A,$46,
                    $58,$5F,$4B,$45,$59
       00:0419: 72 6F 63 3A 
       00:041D: 3A 46 58 5F 
       00:0421: 4B 45 59 
  8913 00:0424: 5F 44 4F 57  	db	$5F,$44,$4F,$57,$4E,$20,$43,$48,$41,$52,
                    $3A,$00,$44,$65,$66
       00:0428: 4E 20 43 48 
       00:042C: 41 52 3A 00 
       00:0430: 44 65 66 
  8914 00:0433: 43 6F 6E 73  	db	$43,$6F,$6E,$73,$6F,$6C,$65,$50,$72,$6F,
                    $63,$3A,$3A,$6C,$69
       00:0437: 6F 6C 65 50 
       00:043B: 72 6F 63 3A 
       00:043F: 3A 6C 69 
  8915 00:0442: 6E 65 42 75  	db	$6E,$65,$42,$75,$66,$66,$65,$72,$49,$6E,
                    $64,$65,$78,$41,$3A
       00:0446: 66 66 65 72 
       00:044A: 49 6E 64 65 
       00:044E: 78 41 3A 
  8916 00:0451: 00 6C 69 6E  	db	$00,$6C,$69,$6E,$65,$42,$75,$66,$66,$65,
                    $72,$49,$6E,$64,$65
       00:0455: 65 42 75 66 
       00:0459: 66 65 72 49 
       00:045D: 6E 64 65 
  8917 00:0460: 78 20 74 6F  	db	$78,$20,$74,$6F,$6F,$20,$6C,$61,$72,$67,
                    $65,$00,$44,$65,$66
       00:0464: 6F 20 6C 61 
       00:0468: 72 67 65 00 
       00:046C: 44 65 66 
  8918 00:046F: 43 6F 6E 73  	db	$43,$6F,$6E,$73,$6F,$6C,$65,$50,$72,$6F,
                    $63,$3A,$3A,$44,$49
       00:0473: 6F 6C 65 50 
       00:0477: 72 6F 63 3A 
       00:047B: 3A 44 49 
  8919 00:047E: 53 4B 2D 49  	db	$53,$4B,$2D,$49,$4E,$53,$45,$52,$54,$3A,
                    $00,$4E,$55,$4C,$4C
       00:0482: 4E 53 45 52 
       00:0486: 54 3A 00 4E 
       00:048A: 55 4C 4C 
  8920 00:048D: 00 0D 0A 00  	db	$00,$0D,$0A,$00,$44,$65,$66,$43,$6F,$6E,
                    $73,$6F,$6C,$65,$50
       00:0491: 44 65 66 43 
       00:0495: 6F 6E 73 6F 
       00:0499: 6C 65 50 
  8921 00:049C: 72 6F 63 3A  	db	$72,$6F,$63,$3A,$3A,$44,$49,$53,$4B,$2D,
                    $49,$4E,$53,$45,$52
       00:04A0: 3A 44 49 53 
       00:04A4: 4B 2D 49 4E 
       00:04A8: 53 45 52 
  8922 00:04AB: 54 3A 4E 4F  	db	$54,$3A,$4E,$4F,$2D,$43,$48,$41,$4E,$47,
                    $45,$0D,$0A,$00,$64
       00:04AF: 2D 43 48 41 
       00:04B3: 4E 47 45 0D 
       00:04B7: 0A 00 64 
  8923 00:04BA: 69 73 6B 00  	db	$69,$73,$6B,$00,$69,$63,$6F,$6E,$00,$44,
  Mon Sep 27 2021  9:39                                                Page 168


                    $65,$66,$43,$6F,$6E
       00:04BE: 69 63 6F 6E 
       00:04C2: 00 44 65 66 
       00:04C6: 43 6F 6E 
  8924 00:04C9: 73 6F 6C 65  	db	$73,$6F,$6C,$65,$50,$72,$6F,$63,$3A,$3A,
                    $44,$49,$53,$4B,$2D
       00:04CD: 50 72 6F 63 
       00:04D1: 3A 3A 44 49 
       00:04D5: 53 4B 2D 
  8925 00:04D8: 49 4E 53 45  	db	$49,$4E,$53,$45,$52,$54,$3A,$44,$49,$53,
                    $4B,$3A,$00,$44,$65
       00:04DC: 52 54 3A 44 
       00:04E0: 49 53 4B 3A 
       00:04E4: 00 44 65 
  8926 00:04E7: 66 43 6F 6E  	db	$66,$43,$6F,$6E,$73,$6F,$6C,$65,$50,$72,
                    $6F,$63,$3A,$3A,$44
       00:04EB: 73 6F 6C 65 
       00:04EF: 50 72 6F 63 
       00:04F3: 3A 3A 44 
  8927 00:04F6: 49 53 4B 2D  	db	$49,$53,$4B,$2D,$52,$45,$4D,$4F,$56,$45,
                    $0D,$0A,$00,$44,$65
       00:04FA: 52 45 4D 4F 
       00:04FE: 56 45 0D 0A 
       00:0502: 00 44 65 
  8928 00:0505: 66 43 6F 6E  	db	$66,$43,$6F,$6E,$73,$6F,$6C,$65,$50,$72,
                    $6F,$63,$3A,$3A,$44
       00:0509: 73 6F 6C 65 
       00:050D: 50 72 6F 63 
       00:0511: 3A 3A 44 
  8929 00:0514: 49 53 4B 2D  	db	$49,$53,$4B,$2D,$52,$45,$4D,$4F,$56,$45,
                    $3A,$44,$49,$53,$4B
       00:0518: 52 45 4D 4F 
       00:051C: 56 45 3A 44 
       00:0520: 49 53 4B 
  8930 00:0523: 3A 00 44 65  	db	$3A,$00,$44,$65,$66,$43,$6F,$6E,$73,$6F,
                    $6C,$65,$50,$72,$6F
       00:0527: 66 43 6F 6E 
       00:052B: 73 6F 6C 65 
       00:052F: 50 72 6F 
  8931 00:0532: 63 3A 3A 44  	db	$63,$3A,$3A,$44,$49,$53,$4B,$2D,$52,$45,
                    $4D,$4F,$56,$45,$3A
       00:0536: 49 53 4B 2D 
       00:053A: 52 45 4D 4F 
       00:053E: 56 45 3A 
  8932 00:0541: 62 61 63 6B  	db	$62,$61,$63,$6B,$67,$72,$6F,$75,$6E,$64,
                    $43,$6F,$6C,$6F,$72
       00:0545: 67 72 6F 75 
       00:0549: 6E 64 43 6F 
       00:054D: 6C 6F 72 
  8933 00:0550: 3A 00 4E 6F  	db	$3A,$00,$4E,$6F,$20,$44,$69,$73,$6B,$20,
                    $44,$65,$74,$65,$63
       00:0554: 20 44 69 73 
       00:0558: 6B 20 44 65 
       00:055C: 74 65 63 
  8934 00:055F: 74 65 64 20  	db	$74,$65,$64,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:0563: 20 20 20 20 
       00:0567: 20 20 20 20 
  Mon Sep 27 2021  9:39                                                Page 169


       00:056B: 20 20 20 
  8935 00:056E: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:0572: 20 20 20 20 
       00:0576: 20 20 20 20 
       00:057A: 20 20 20 
  8936 00:057D: 20 20 20 20  	db	$20,$20,$20,$20,$00,$44,$65,$66,$43,$6F,
                    $6E,$73,$6F,$6C,$65
       00:0581: 00 44 65 66 
       00:0585: 43 6F 6E 73 
       00:0589: 6F 6C 65 
  8937 00:058C: 50 72 6F 63  	db	$50,$72,$6F,$63,$3A,$3A,$46,$58,$5F,$41,
                    $50,$50,$5F,$4D,$45
       00:0590: 3A 3A 46 58 
       00:0594: 5F 41 50 50 
       00:0598: 5F 4D 45 
  8938 00:059B: 53 53 41 47  	db	$53,$53,$41,$47,$45,$0D,$0A,$00,$44,$65,
                    $66,$43,$6F,$6E,$73
       00:059F: 45 0D 0A 00 
       00:05A3: 44 65 66 43 
       00:05A7: 6F 6E 73 
  8939 00:05AA: 6F 6C 65 50  	db	$6F,$6C,$65,$50,$72,$6F,$63,$3A,$3A,$46,
                    $58,$5F,$41,$50,$50
       00:05AE: 72 6F 63 3A 
       00:05B2: 3A 46 58 5F 
       00:05B6: 41 50 50 
  8940 00:05B9: 5F 4D 45 53  	db	$5F,$4D,$45,$53,$53,$41,$47,$45,$20,$42,
                    $41,$44,$20,$50,$52
       00:05BD: 53 41 47 45 
       00:05C1: 20 42 41 44 
       00:05C5: 20 50 52 
  8941 00:05C8: 4F 43 0D 0A  	db	$4F,$43,$0D,$0A,$00,$44,$65,$66,$43,$6F,
                    $6E,$73,$6F,$6C,$65
       00:05CC: 00 44 65 66 
       00:05D0: 43 6F 6E 73 
       00:05D4: 6F 6C 65 
  8942 00:05D7: 50 72 6F 63  	db	$50,$72,$6F,$63,$3A,$3A,$46,$58,$5F,$41,
                    $50,$50,$5F,$4D,$45
       00:05DB: 3A 3A 46 58 
       00:05DF: 5F 41 50 50 
       00:05E3: 5F 4D 45 
  8943 00:05E6: 53 53 41 47  	db	$53,$53,$41,$47,$45,$20,$65,$78,$69,$74,
                    $0D,$0A,$00,$44,$65
       00:05EA: 45 20 65 78 
       00:05EE: 69 74 0D 0A 
       00:05F2: 00 44 65 
  8944 00:05F5: 66 43 6F 6E  	db	$66,$43,$6F,$6E,$73,$6F,$6C,$65,$50,$72,
                    $6F,$63,$3A,$3A,$46
       00:05F9: 73 6F 6C 65 
       00:05FD: 50 72 6F 63 
       00:0601: 3A 3A 46 
  8945 00:0604: 58 5F 52 42  	db	$58,$5F,$52,$42,$55,$54,$54,$4F,$4E,$5F,
                    $44,$4F,$57,$4E,$0D
       00:0608: 55 54 54 4F 
       00:060C: 4E 5F 44 4F 
       00:0610: 57 4E 0D 
  8946 00:0613: 0A 00 44 65  	db	$0A,$00,$44,$65,$66,$43,$6F,$6E,$73,$6F,
                    $6C,$65,$50,$72,$6F
  Mon Sep 27 2021  9:39                                                Page 170


       00:0617: 66 43 6F 6E 
       00:061B: 73 6F 6C 65 
       00:061F: 50 72 6F 
  8947 00:0622: 63 3A 3A 46  	db	$63,$3A,$3A,$46,$58,$5F,$4C,$42,$55,$54,
                    $54,$4F,$4E,$5F,$44
       00:0626: 58 5F 4C 42 
       00:062A: 55 54 54 4F 
       00:062E: 4E 5F 44 
  8948 00:0631: 4F 57 4E 0D  	db	$4F,$57,$4E,$0D,$0A,$00,$44,$65,$66,$43,
                    $6F,$6E,$73,$6F,$6C
       00:0635: 0A 00 44 65 
       00:0639: 66 43 6F 6E 
       00:063D: 73 6F 6C 
  8949 00:0640: 65 50 72 6F  	db	$65,$50,$72,$6F,$63,$3A,$3A,$46,$58,$5F,
                    $4C,$42,$55,$54,$54
       00:0644: 63 3A 3A 46 
       00:0648: 58 5F 4C 42 
       00:064C: 55 54 54 
  8950 00:064F: 4F 4E 5F 55  	db	$4F,$4E,$5F,$55,$50,$0D,$0A,$00,$44,$65,
                    $66,$43,$6F,$6E,$73
       00:0653: 50 0D 0A 00 
       00:0657: 44 65 66 43 
       00:065B: 6F 6E 73 
  8951 00:065E: 6F 6C 65 50  	db	$6F,$6C,$65,$50,$72,$6F,$63,$3A,$3A,$46,
                    $58,$5F,$4C,$42,$55
       00:0662: 72 6F 63 3A 
       00:0666: 3A 46 58 5F 
       00:066A: 4C 42 55 
  8952 00:066D: 54 54 4F 4E  	db	$54,$54,$4F,$4E,$5F,$44,$52,$41,$47,$0D,
                    $0A,$00,$44,$65,$66
       00:0671: 5F 44 52 41 
       00:0675: 47 0D 0A 00 
       00:0679: 44 65 66 
  8953 00:067C: 43 6F 6E 73  	db	$43,$6F,$6E,$73,$6F,$6C,$65,$50,$72,$6F,
                    $63,$3A,$3A,$46,$58
       00:0680: 6F 6C 65 50 
       00:0684: 72 6F 63 3A 
       00:0688: 3A 46 58 
  8954 00:068B: 5F 4C 42 55  	db	$5F,$4C,$42,$55,$54,$54,$4F,$4E,$5F,$44,
                    $42,$4C,$43,$4C,$49
       00:068F: 54 54 4F 4E 
       00:0693: 5F 44 42 4C 
       00:0697: 43 4C 49 
  8955 00:069A: 43 4B 0D 0A  	db	$43,$4B,$0D,$0A,$00,$44,$65,$66,$43,$6F,
                    $6E,$73,$6F,$6C,$65
       00:069E: 00 44 65 66 
       00:06A2: 43 6F 6E 73 
       00:06A6: 6F 6C 65 
  8956 00:06A9: 50 72 6F 63  	db	$50,$72,$6F,$63,$3A,$3A,$46,$58,$5F,$57,
                    $49,$4E,$44,$4F,$57
       00:06AD: 3A 3A 46 58 
       00:06B1: 5F 57 49 4E 
       00:06B5: 44 4F 57 
  8957 00:06B8: 5F 54 4F 46  	db	$5F,$54,$4F,$46,$52,$4F,$4E,$54,$0D,$0A,
                    $00,$43,$6C,$69,$63
       00:06BC: 52 4F 4E 54 
       00:06C0: 0D 0A 00 43 
       00:06C4: 6C 69 63 
  Mon Sep 27 2021  9:39                                                Page 171


  8958 00:06C7: 6B 65 64 20  	db	$6B,$65,$64,$20,$46,$52,$4F,$4E,$54,$00,
                    $44,$65,$66,$43,$6F
       00:06CB: 46 52 4F 4E 
       00:06CF: 54 00 44 65 
       00:06D3: 66 43 6F 
  8959 00:06D6: 6E 73 6F 6C  	db	$6E,$73,$6F,$6C,$65,$50,$72,$6F,$63,$3A,
                    $3A,$46,$58,$5F,$57
       00:06DA: 65 50 72 6F 
       00:06DE: 63 3A 3A 46 
       00:06E2: 58 5F 57 
  8960 00:06E5: 49 4E 44 4F  	db	$49,$4E,$44,$4F,$57,$5F,$54,$4F,$42,$41,
                    $43,$4B,$0D,$0A,$00
       00:06E9: 57 5F 54 4F 
       00:06ED: 42 41 43 4B 
       00:06F1: 0D 0A 00 
  8961 00:06F4: 43 6C 69 63  	db	$43,$6C,$69,$63,$6B,$65,$64,$20,$42,$41,
                    $43,$4B,$00,$0A,$00
       00:06F8: 6B 65 64 20 
       00:06FC: 42 41 43 4B 
       00:0700: 00 0A 00 
  8962 00:0703: 0A 00 44 65  	db	$0A,$00,$44,$65,$66,$43,$6F,$6E,$73,$6F,
                    $6C,$65,$50,$72,$6F
       00:0707: 66 43 6F 6E 
       00:070B: 73 6F 6C 65 
       00:070F: 50 72 6F 
  8963 00:0712: 63 3A 3A 46  	db	$63,$3A,$3A,$46,$58,$5F,$43,$4F,$4E,$54,
                    $52,$4F,$4C,$5F,$43
       00:0716: 58 5F 43 4F 
       00:071A: 4E 54 52 4F 
       00:071E: 4C 5F 43 
  8964 00:0721: 4F 4D 4D 41  	db	$4F,$4D,$4D,$41,$4E,$44,$0D,$0A,$00,$44,
                    $65,$66,$43,$6F,$6E
       00:0725: 4E 44 0D 0A 
       00:0729: 00 44 65 66 
       00:072D: 43 6F 6E 
  8965 00:0730: 73 6F 6C 65  	db	$73,$6F,$6C,$65,$50,$72,$6F,$63,$3A,$3A,
                    $43,$54,$4C,$5F,$43
       00:0734: 50 72 6F 63 
       00:0738: 3A 3A 43 54 
       00:073C: 4C 5F 43 
  8966 00:073F: 4D 44 5F 43  	db	$4D,$44,$5F,$43,$41,$50,$54,$49,$4F,$4E,
                    $3A,$00,$44,$65,$66
       00:0743: 41 50 54 49 
       00:0747: 4F 4E 3A 00 
       00:074B: 44 65 66 
  8967 00:074E: 43 6F 6E 73  	db	$43,$6F,$6E,$73,$6F,$6C,$65,$50,$72,$6F,
                    $63,$3A,$3A,$63,$75
       00:0752: 6F 6C 65 50 
       00:0756: 72 6F 63 3A 
       00:075A: 3A 63 75 
  8968 00:075D: 72 59 3A 00  	db	$72,$59,$3A,$00,$44,$65,$66,$43,$6F,$6E,
                    $73,$6F,$6C,$65,$50
       00:0761: 44 65 66 43 
       00:0765: 6F 6E 73 6F 
       00:0769: 6C 65 50 
  8969 00:076C: 72 6F 63 3A  	db	$72,$6F,$63,$3A,$3A,$43,$54,$4C,$5F,$56,
                    $45,$52,$54,$5F,$53
       00:0770: 3A 43 54 4C 
  Mon Sep 27 2021  9:39                                                Page 172


       00:0774: 5F 56 45 52 
       00:0778: 54 5F 53 
  8970 00:077B: 43 52 4F 4C  	db	$43,$52,$4F,$4C,$4C,$0D,$0A,$00
       00:077F: 4C 0D 0A 00 
  8971 00:0783:              	ends
  8972                        ;
  8973                        ;void ObjectClicked(PWINDOW console)
  8974                        ;{
  8975                        	.line	1326
  8976                        	.line	1327
  8977                        	code
  8978                        	xdef	~~ObjectClicked
  8979                        	func
  8980                        	.function	1327
  8981                        ~~ObjectClicked:
  8982                        	longa	on
  8983                        	longi	on
  8984 00:21EC: 3B           	tsc
  8985 00:21ED: 38           	sec
  8986 00:21EE: E9 10 00     	sbc	#L285
  8987 00:21F1: 1B           	tcs
  8988 00:21F2: 0B           	phd
  8989 00:21F3: 5B           	tcd
  8990             00000004   console_0	set	4
  8991                        	.block	1327
  8992                        ;	int temp1 = 0;
  8993                        ;	int temp2 = 0;
  8994                        ;	PFXPROCESS p = k_exec_get_current_process();
  8995                        ;
  8996                        ;	k_debug_string("ObjectClicked!!\r\n");
  8997             00000000   temp1_1	set	0
  8998             00000002   temp2_1	set	2
  8999             00000004   p_1	set	4
  9000                        	.sym	temp1,0,5,1,16
  9001                        	.sym	temp2,2,5,1,16
  9002                        	.sym	p,4,138,1,32,20
  9003                        	.sym	console,4,138,6,32,33
  9004 00:21F4: 64 09        	stz	<L286+temp1_1
  9005 00:21F6: 64 0B        	stz	<L286+temp2_1
  9006 00:21F8: 22 xx xx xx  	jsl	~~k_exec_get_current_process
  9007 00:21FC: 85 0D        	sta	<L286+p_1
  9008 00:21FE: 86 0F        	stx	<L286+p_1+2
  9009                        	.line	1332
  9010 00:2200: F4 xx xx     	pea	#^L284
  9011 00:2203: F4 xx xx     	pea	#<L284
  9012 00:2206: 22 xx xx xx  	jsl	~~k_debug_string
  9013                        ;	if(p->desktopCtl->currentDiskName)
  9014                        	.line	1333
  9015                        ;	{
  9016 00:220A: A0 58 00     	ldy	#$58
  9017 00:220D: B7 0D        	lda	[<L286+p_1],Y
  9018 00:220F: 85 01        	sta	<R0
  9019 00:2211: A0 5A 00     	ldy	#$5a
  9020 00:2214: B7 0D        	lda	[<L286+p_1],Y
  9021 00:2216: 85 03        	sta	<R0+2
  9022 00:2218: A0 11 00     	ldy	#$11
  9023 00:221B: B7 01        	lda	[<R0],Y
  9024 00:221D: A0 13 00     	ldy	#$13
  Mon Sep 27 2021  9:39                                                Page 173


  9025 00:2220: 17 01        	ora	[<R0],Y
  9026 00:2222: D0 03        	bne	L288
  9027 00:2224: 82 9F 00     	brl	L10201
  9028                        L288:
  9029                        	.line	1334
  9030                        ;		temp1 = strlen(p->desktopCtl->currentDis
                    kName);
  9031                        	.line	1335
  9032 00:2227: A0 58 00     	ldy	#$58
  9033 00:222A: B7 0D        	lda	[<L286+p_1],Y
  9034 00:222C: 85 01        	sta	<R0
  9035 00:222E: A0 5A 00     	ldy	#$5a
  9036 00:2231: B7 0D        	lda	[<L286+p_1],Y
  9037 00:2233: 85 03        	sta	<R0+2
  9038 00:2235: A0 13 00     	ldy	#$13
  9039 00:2238: B7 01        	lda	[<R0],Y
  9040 00:223A: 48           	pha
  9041 00:223B: A0 11 00     	ldy	#$11
  9042 00:223E: B7 01        	lda	[<R0],Y
  9043 00:2240: 48           	pha
  9044 00:2241: 22 xx xx xx  	jsl	~~strlen
  9045 00:2245: 85 09        	sta	<L286+temp1_1
  9046                        ;		temp2 = (temp1*4);
  9047                        	.line	1336
  9048 00:2247: A5 09        	lda	<L286+temp1_1
  9049 00:2249: 0A           	asl	A
  9050 00:224A: 0A           	asl	A
  9051 00:224B: 85 0B        	sta	<L286+temp2_1
  9052                        ;		k_put_winicon_point(ICON_DISK,640 - (40 
                    + temp2/2),20,6,PAINTMODE_HIGHLIGHT);
  9053                        	.line	1337
  9054 00:224D: F4 F1 00     	pea	#<$f1
  9055 00:2250: F4 06 00     	pea	#<$6
  9056 00:2253: F4 14 00     	pea	#<$14
  9057 00:2256: A5 0B        	lda	<L286+temp2_1
  9058 00:2258: A2 02 00     	ldx	#<$2
  9059                        	xref	~~~div
  9060 00:225B: 22 xx xx xx  	jsl	~~~div
  9061 00:225F: 85 01        	sta	<R0
  9062 00:2261: 18           	clc
  9063 00:2262: A9 28 00     	lda	#$28
  9064 00:2265: 65 01        	adc	<R0
  9065 00:2267: 85 05        	sta	<R1
  9066 00:2269: 38           	sec
  9067 00:226A: A9 80 02     	lda	#$280
  9068 00:226D: E5 05        	sbc	<R1
  9069 00:226F: 48           	pha
  9070 00:2270: F4 03 00     	pea	#<$3
  9071 00:2273: 22 xx xx xx  	jsl	~~k_put_winicon_point
  9072                        ;		k_draw_text_point(k_to_uppercase(p->desk
                    topCtl->currentDiskName),640 - (35 + temp2/2) - (temp2),40,0
                    );
  9073                        	.line	1338
  9074 00:2277: F4 00 00     	pea	#<$0
  9075 00:227A: F4 28 00     	pea	#<$28
  9076 00:227D: A5 0B        	lda	<L286+temp2_1
  9077 00:227F: A2 02 00     	ldx	#<$2
  9078                        	xref	~~~div
  Mon Sep 27 2021  9:39                                                Page 174


  9079 00:2282: 22 xx xx xx  	jsl	~~~div
  9080 00:2286: 85 01        	sta	<R0
  9081 00:2288: 18           	clc
  9082 00:2289: A9 23 00     	lda	#$23
  9083 00:228C: 65 01        	adc	<R0
  9084 00:228E: 85 05        	sta	<R1
  9085 00:2290: 38           	sec
  9086 00:2291: A9 80 02     	lda	#$280
  9087 00:2294: E5 05        	sbc	<R1
  9088 00:2296: 85 01        	sta	<R0
  9089 00:2298: 38           	sec
  9090 00:2299: A5 01        	lda	<R0
  9091 00:229B: E5 0B        	sbc	<L286+temp2_1
  9092 00:229D: 48           	pha
  9093 00:229E: A0 58 00     	ldy	#$58
  9094 00:22A1: B7 0D        	lda	[<L286+p_1],Y
  9095 00:22A3: 85 01        	sta	<R0
  9096 00:22A5: A0 5A 00     	ldy	#$5a
  9097 00:22A8: B7 0D        	lda	[<L286+p_1],Y
  9098 00:22AA: 85 03        	sta	<R0+2
  9099 00:22AC: A0 13 00     	ldy	#$13
  9100 00:22AF: B7 01        	lda	[<R0],Y
  9101 00:22B1: 48           	pha
  9102 00:22B2: A0 11 00     	ldy	#$11
  9103 00:22B5: B7 01        	lda	[<R0],Y
  9104 00:22B7: 48           	pha
  9105 00:22B8: 22 xx xx xx  	jsl	~~k_to_uppercase
  9106 00:22BC: 85 01        	sta	<R0
  9107 00:22BE: 86 03        	stx	<R0+2
  9108 00:22C0: DA           	phx
  9109 00:22C1: 48           	pha
  9110 00:22C2: 22 xx xx xx  	jsl	~~k_draw_text_point
  9111                        ;	}
  9112                        	.line	1339
  9113                        ;}
  9114                        L10201:
  9115                        	.line	1340
  9116                        L289:
  9117 00:22C6: A5 12        	lda	<L285+2
  9118 00:22C8: 85 16        	sta	<L285+2+4
  9119 00:22CA: A5 11        	lda	<L285+1
  9120 00:22CC: 85 15        	sta	<L285+1+4
  9121 00:22CE: 2B           	pld
  9122 00:22CF: 3B           	tsc
  9123 00:22D0: 18           	clc
  9124 00:22D1: 69 14 00     	adc	#L285+4
  9125 00:22D4: 1B           	tcs
  9126 00:22D5: 6B           	rtl
  9127                        	.endblock	1340
  9128             00000010   L285	equ	16
  9129             00000009   L286	equ	9
  9130                        	ends
  9131                        	efunc
  9132                        	.endfunc	1340,9,16
  9133                        	.line	1340
  9134                        	data
  9135                        L284:
  9136 00:0783: 4F 62 6A 65  	db	$4F,$62,$6A,$65,$63,$74,$43,$6C,$69,$63,
  Mon Sep 27 2021  9:39                                                Page 175


                    $6B,$65,$64,$21,$21
       00:0787: 63 74 43 6C 
       00:078B: 69 63 6B 65 
       00:078F: 64 21 21 
  9137 00:0792: 0D 0A 00     	db	$0D,$0A,$00
  9138 00:0795:              	ends
  9139                        ;
  9140                        ;
  9141                        ;
  9142                        ;void DefConsoleProc2(PFXOSMESSAGE pMsg)
  9143                        ;{
  9144                        	.line	1344
  9145                        	.line	1345
  9146                        	code
  9147                        	xdef	~~DefConsoleProc2
  9148                        	func
  9149                        	.function	1345
  9150                        ~~DefConsoleProc2:
  9151                        	longa	on
  9152                        	longi	on
  9153 00:22D6: 3B           	tsc
  9154 00:22D7: 38           	sec
  9155 00:22D8: E9 0E 00     	sbc	#L291
  9156 00:22DB: 1B           	tcs
  9157 00:22DC: 0B           	phd
  9158 00:22DD: 5B           	tcd
  9159             00000004   pMsg_0	set	4
  9160                        	.block	1345
  9161                        ;
  9162                        ;	PSPINNERCTX pconsolespinctx = NULL;
  9163                        ;	PFXPROCESS p = NULL;
  9164                        ;	int i = 0;
  9165                        ;
  9166                        ;	//k_debug_string("DefConsoleProc enter\r\n");
  9167                        ;	if(pMsg!=NULL)
  9168             00000000   pconsolespinctx_1	set	0
  9169             00000004   p_1	set	4
  9170             00000008   i_1	set	8
  9171                        	.sym	pconsolespinctx,0,138,1,32,86
  9172                        	.sym	p,4,138,1,32,20
  9173                        	.sym	i,8,5,1,16
  9174                        	.sym	pMsg,4,138,6,32,16
  9175 00:22DE: 64 05        	stz	<L292+pconsolespinctx_1
  9176 00:22E0: 64 07        	stz	<L292+pconsolespinctx_1+2
  9177 00:22E2: 64 09        	stz	<L292+p_1
  9178 00:22E4: 64 0B        	stz	<L292+p_1+2
  9179 00:22E6: 64 0D        	stz	<L292+i_1
  9180                        	.line	1352
  9181                        ;	{
  9182 00:22E8: A5 12        	lda	<L291+pMsg_0
  9183 00:22EA: 05 14        	ora	<L291+pMsg_0+2
  9184 00:22EC: D0 03        	bne	L294
  9185 00:22EE: 82 82 01     	brl	L10202
  9186                        L294:
  9187                        	.line	1353
  9188                        ;		p = k_exec_get_current_process();
  9189                        	.line	1354
  9190 00:22F1: 22 xx xx xx  	jsl	~~k_exec_get_current_process
  Mon Sep 27 2021  9:39                                                Page 176


  9191 00:22F5: 85 09        	sta	<L292+p_1
  9192 00:22F7: 86 0B        	stx	<L292+p_1+2
  9193                        ;
  9194                        ;		switch(pMsg->type)
  9195                        	.line	1356
  9196 00:22F9: A0 08 00     	ldy	#$8
  9197 00:22FC: B7 12        	lda	[<L291+pMsg_0],Y
  9198 00:22FE: 82 5A 01     	brl	L10203
  9199                        ;		{
  9200                        	.line	1357
  9201                        ;		case FX_INIT_MESSAGE:
  9202                        	.line	1358
  9203                        L10205:
  9204                        ;
  9205                        ;
  9206                        ;			pconsolespinctx = (PSPINNERCTX)k
                    _mem_allocate_heap(sizeof(SPINNERCTX));
  9207                        	.line	1361
  9208 00:2301: F4 00 00     	pea	#^$6
  9209 00:2304: F4 06 00     	pea	#<$6
  9210 00:2307: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  9211 00:230B: 85 05        	sta	<L292+pconsolespinctx_1
  9212 00:230D: 86 07        	stx	<L292+pconsolespinctx_1+2
  9213                        ;			pconsolespinctx->spinner = conso
                    lespinner;
  9214                        	.line	1362
  9215 00:230F: A9 xx xx     	lda	#<~~consolespinner
  9216 00:2312: 85 01        	sta	<R0
  9217                        	xref	_BEG_DATA
  9218 00:2314: A9 xx xx     	lda	#_BEG_DATA>>16
  9219 00:2317: 85 03        	sta	<R0+2
  9220 00:2319: A5 01        	lda	<R0
  9221 00:231B: A0 02 00     	ldy	#$2
  9222 00:231E: 97 05        	sta	[<L292+pconsolespinctx_1],Y
  9223 00:2320: A5 03        	lda	<R0+2
  9224 00:2322: A0 04 00     	ldy	#$4
  9225 00:2325: 97 05        	sta	[<L292+pconsolespinctx_1],Y
  9226                        ;			p->tls[0] = (LPVOID)pconsolespin
                    ctx;
  9227                        	.line	1363
  9228 00:2327: A5 05        	lda	<L292+pconsolespinctx_1
  9229 00:2329: A0 13 00     	ldy	#$13
  9230 00:232C: 97 09        	sta	[<L292+p_1],Y
  9231 00:232E: A5 07        	lda	<L292+pconsolespinctx_1+2
  9232 00:2330: A0 15 00     	ldy	#$15
  9233 00:2333: 97 09        	sta	[<L292+p_1],Y
  9234                        ;			p->tls[1] = (PRECT)k_mem_allocat
                    e_heap(sizeof(RECT));
  9235                        	.line	1364
  9236 00:2335: F4 00 00     	pea	#^$e
  9237 00:2338: F4 0E 00     	pea	#<$e
  9238 00:233B: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  9239 00:233F: 85 01        	sta	<R0
  9240 00:2341: 86 03        	stx	<R0+2
  9241 00:2343: A5 01        	lda	<R0
  9242 00:2345: A0 17 00     	ldy	#$17
  9243 00:2348: 97 09        	sta	[<L292+p_1],Y
  9244 00:234A: A5 03        	lda	<R0+2
  Mon Sep 27 2021  9:39                                                Page 177


  9245 00:234C: A0 19 00     	ldy	#$19
  9246 00:234F: 97 09        	sta	[<L292+p_1],Y
  9247                        ;
  9248                        ;
  9249                        ;			i = (int)((long)(p->startupArgs)
                    );
  9250                        	.line	1367
  9251 00:2351: A0 60 00     	ldy	#$60
  9252 00:2354: B7 09        	lda	[<L292+p_1],Y
  9253 00:2356: 85 0D        	sta	<L292+i_1
  9254                        ;			k_debug_integer("DefConsoleProc2
                    ::FX_PROCESS:",i);
  9255                        	.line	1368
  9256 00:2358: D4 0D        	pei	<L292+i_1
  9257 00:235A: F4 xx xx     	pea	#^L290
  9258 00:235D: F4 xx xx     	pea	#<L290
  9259 00:2360: 22 xx xx xx  	jsl	~~k_debug_integer
  9260                        ;
  9261                        ;
  9262                        ;			if(p!=NULL)
  9263                        	.line	1371
  9264                        ;				k_debug_long("DefConsole
                    Proc2::ProcessId:",p->procId);
  9265 00:2364: A5 09        	lda	<L292+p_1
  9266 00:2366: 05 0B        	ora	<L292+p_1+2
  9267 00:2368: D0 03        	bne	L295
  9268 00:236A: 82 19 00     	brl	L10206
  9269                        L295:
  9270                        	.line	1372
  9271 00:236D: A0 04 00     	ldy	#$4
  9272 00:2370: B7 09        	lda	[<L292+p_1],Y
  9273 00:2372: 48           	pha
  9274 00:2373: A0 02 00     	ldy	#$2
  9275 00:2376: B7 09        	lda	[<L292+p_1],Y
  9276 00:2378: 48           	pha
  9277 00:2379: F4 xx xx     	pea	#^L290+29
  9278 00:237C: F4 xx xx     	pea	#<L290+29
  9279 00:237F: 22 xx xx xx  	jsl	~~k_debug_long
  9280                        ;			else
  9281 00:2383: 82 0A 00     	brl	L10207
  9282                        L10206:
  9283                        ;				k_debug_string("DefConso
                    leProc2::FX_INIT_MESSAGE\r\n");
  9284                        	.line	1374
  9285 00:2386: F4 xx xx     	pea	#^L290+57
  9286 00:2389: F4 xx xx     	pea	#<L290+57
  9287 00:238C: 22 xx xx xx  	jsl	~~k_debug_string
  9288                        L10207:
  9289                        ;
  9290                        ;
  9291                        ;
  9292                        ;			k_init_spinner(pconsolespinctx);
  9293                        	.line	1378
  9294 00:2390: D4 07        	pei	<L292+pconsolespinctx_1+2
  9295 00:2392: D4 05        	pei	<L292+pconsolespinctx_1
  9296 00:2394: 22 xx xx xx  	jsl	~~k_init_spinner
  9297                        ;
  9298                        ;
  Mon Sep 27 2021  9:39                                                Page 178


  9299                        ;
  9300                        ;
  9301                        ;			//k_sd_test();
  9302                        ;			break;
  9303                        	.line	1384
  9304 00:2398: 82 D8 00     	brl	L10204
  9305                        ;		case FX_UNINIT_MESSAGE:
  9306                        	.line	1385
  9307                        L10208:
  9308                        ;			k_debug_string("DefConsoleProc2:
                    :FX_UNINIT_MESSAGE\r\n");
  9309                        	.line	1386
  9310 00:239B: F4 xx xx     	pea	#^L290+92
  9311 00:239E: F4 xx xx     	pea	#<L290+92
  9312 00:23A1: 22 xx xx xx  	jsl	~~k_debug_string
  9313                        ;			if(p->tls[1])
  9314                        	.line	1387
  9315                        ;				k_mem_deallocate_heap(p-
                    >tls[1]);
  9316 00:23A5: A0 17 00     	ldy	#$17
  9317 00:23A8: B7 09        	lda	[<L292+p_1],Y
  9318 00:23AA: A0 19 00     	ldy	#$19
  9319 00:23AD: 17 09        	ora	[<L292+p_1],Y
  9320 00:23AF: D0 03        	bne	L296
  9321 00:23B1: 82 10 00     	brl	L10209
  9322                        L296:
  9323                        	.line	1388
  9324 00:23B4: A0 19 00     	ldy	#$19
  9325 00:23B7: B7 09        	lda	[<L292+p_1],Y
  9326 00:23B9: 48           	pha
  9327 00:23BA: A0 17 00     	ldy	#$17
  9328 00:23BD: B7 09        	lda	[<L292+p_1],Y
  9329 00:23BF: 48           	pha
  9330 00:23C0: 22 xx xx xx  	jsl	~~k_mem_deallocate_heap
  9331                        ;			break;
  9332                        L10209:
  9333                        	.line	1389
  9334 00:23C4: 82 AC 00     	brl	L10204
  9335                        ;		case FX_KEY_DOWN:
  9336                        	.line	1390
  9337                        L10210:
  9338                        ;			if(p!=NULL && p->foregroundActiv
                    e)
  9339                        	.line	1391
  9340                        ;			{
  9341 00:23C7: A5 09        	lda	<L292+p_1
  9342 00:23C9: 05 0B        	ora	<L292+p_1+2
  9343 00:23CB: D0 03        	bne	L297
  9344 00:23CD: 82 23 00     	brl	L10211
  9345                        L297:
  9346 00:23D0: A0 12 00     	ldy	#$12
  9347 00:23D3: B7 09        	lda	[<L292+p_1],Y
  9348 00:23D5: 29 FF 00     	and	#$ff
  9349 00:23D8: D0 03        	bne	L298
  9350 00:23DA: 82 16 00     	brl	L10211
  9351                        L298:
  9352                        	.line	1392
  9353                        ;				//if(p!=NULL)
  Mon Sep 27 2021  9:39                                                Page 179


  9354                        ;				//	k_debug_integer(
                    "DefConso-leProc::ProcessId:",p->procId);
  9355                        ;				k_put_char(3 ,46,pMsg->d
                    ata[2],15,0);
  9356                        	.line	1395
  9357 00:23DD: F4 00 00     	pea	#<$0
  9358 00:23E0: F4 0F 00     	pea	#<$f
  9359 00:23E3: A0 18 00     	ldy	#$18
  9360 00:23E6: B7 12        	lda	[<L291+pMsg_0],Y
  9361 00:23E8: 48           	pha
  9362 00:23E9: F4 2E 00     	pea	#<$2e
  9363 00:23EC: F4 03 00     	pea	#<$3
  9364 00:23EF: 22 xx xx xx  	jsl	~~k_put_char
  9365                        ;			}
  9366                        	.line	1396
  9367                        ;			break;
  9368                        L10211:
  9369                        	.line	1397
  9370 00:23F3: 82 7D 00     	brl	L10204
  9371                        ;		case FX_PROCESS:
  9372                        	.line	1398
  9373                        L10212:
  9374                        ;
  9375                        ;			pconsolespinctx = (PSPINNERCTX)p
                    ->tls[0];
  9376                        	.line	1400
  9377 00:23F6: A0 13 00     	ldy	#$13
  9378 00:23F9: B7 09        	lda	[<L292+p_1],Y
  9379 00:23FB: 85 05        	sta	<L292+pconsolespinctx_1
  9380 00:23FD: A0 15 00     	ldy	#$15
  9381 00:2400: B7 09        	lda	[<L292+p_1],Y
  9382 00:2402: 85 07        	sta	<L292+pconsolespinctx_1+2
  9383                        ;
  9384                        ;			//k_debug_string("DefConsoleProc
                    ::FX_PROCESS\r\n");
  9385                        ;			i = (int)((long)(p->startupArgs)
                    );
  9386                        	.line	1403
  9387 00:2404: A0 60 00     	ldy	#$60
  9388 00:2407: B7 09        	lda	[<L292+p_1],Y
  9389 00:2409: 85 0D        	sta	<L292+i_1
  9390                        ;			k_updatespinner(3 + i,39,pconsol
                    espinctx);
  9391                        	.line	1404
  9392 00:240B: D4 07        	pei	<L292+pconsolespinctx_1+2
  9393 00:240D: D4 05        	pei	<L292+pconsolespinctx_1
  9394 00:240F: F4 27 00     	pea	#<$27
  9395 00:2412: 18           	clc
  9396 00:2413: A9 03 00     	lda	#$3
  9397 00:2416: 65 0D        	adc	<L292+i_1
  9398 00:2418: 48           	pha
  9399 00:2419: 22 xx xx xx  	jsl	~~k_updatespinner
  9400                        ;			//k_debug_integer("DefConsolePro
                    c2::FX_PROCESS:",i);
  9401                        ;
  9402                        ;			if(p->tls[1])
  9403                        	.line	1407
  9404                        ;			{
  Mon Sep 27 2021  9:39                                                Page 180


  9405 00:241D: A0 17 00     	ldy	#$17
  9406 00:2420: B7 09        	lda	[<L292+p_1],Y
  9407 00:2422: A0 19 00     	ldy	#$19
  9408 00:2425: 17 09        	ora	[<L292+p_1],Y
  9409 00:2427: D0 03        	bne	L299
  9410 00:2429: 82 29 00     	brl	L10213
  9411                        L299:
  9412                        	.line	1408
  9413                        ;				((PRECT)(p->tls[1]))->x 
                    = 0;
  9414                        	.line	1409
  9415 00:242C: A0 17 00     	ldy	#$17
  9416 00:242F: B7 09        	lda	[<L292+p_1],Y
  9417 00:2431: 85 01        	sta	<R0
  9418 00:2433: A0 19 00     	ldy	#$19
  9419 00:2436: B7 09        	lda	[<L292+p_1],Y
  9420 00:2438: 85 03        	sta	<R0+2
  9421 00:243A: A9 00 00     	lda	#$0
  9422 00:243D: 87 01        	sta	[<R0]
  9423                        ;				((PRECT)(p->tls[1]))->y 
                    = 0;
  9424                        	.line	1410
  9425 00:243F: A0 17 00     	ldy	#$17
  9426 00:2442: B7 09        	lda	[<L292+p_1],Y
  9427 00:2444: 85 01        	sta	<R0
  9428 00:2446: A0 19 00     	ldy	#$19
  9429 00:2449: B7 09        	lda	[<L292+p_1],Y
  9430 00:244B: 85 03        	sta	<R0+2
  9431 00:244D: A9 00 00     	lda	#$0
  9432 00:2450: A0 02 00     	ldy	#$2
  9433 00:2453: 97 01        	sta	[<R0],Y
  9434                        ;			}
  9435                        	.line	1411
  9436                        ;			/*
  9437                        ;			for(i=0;i<1000;i++)
  9438                        ;			{
  9439                        ;				asm NOP;
  9440                        ;			}
  9441                        ;			*/
  9442                        ;			//k_debug_integer("DefConsolePro
                    c2::FX_PROCESS:",i++);
  9443                        ;			break;
  9444                        L10213:
  9445                        	.line	1419
  9446 00:2455: 82 1B 00     	brl	L10204
  9447                        ;		default:
  9448                        	.line	1420
  9449                        L10214:
  9450                        ;			//k_updatespinner(3,40,&consoles
                    pinctx);
  9451                        ;			break;
  9452                        	.line	1422
  9453 00:2458: 82 18 00     	brl	L10204
  9454                        ;		}
  9455                        	.line	1423
  9456                        L10203:
  9457                        	xref	~~~swt
  9458 00:245B: 22 xx xx xx  	jsl	~~~swt
  Mon Sep 27 2021  9:39                                                Page 181


  9459 00:245F: 04 00        	dw	4
  9460 00:2461: 10 0F        	dw	3856
  9461 00:2463: xx xx        	dw	L10210-1
  9462 00:2465: 00 FF        	dw	65280
  9463 00:2467: xx xx        	dw	L10212-1
  9464 00:2469: 01 FF        	dw	65281
  9465 00:246B: xx xx        	dw	L10205-1
  9466 00:246D: 02 FF        	dw	65282
  9467 00:246F: xx xx        	dw	L10208-1
  9468 00:2471: xx xx        	dw	L10214-1
  9469                        L10204:
  9470                        ;	}
  9471                        	.line	1424
  9472                        ;	//k_debug_string("DefConsoleProc exit\r\n");
  9473                        ;}
  9474                        L10202:
  9475                        	.line	1426
  9476                        L300:
  9477 00:2473: A5 10        	lda	<L291+2
  9478 00:2475: 85 14        	sta	<L291+2+4
  9479 00:2477: A5 0F        	lda	<L291+1
  9480 00:2479: 85 13        	sta	<L291+1+4
  9481 00:247B: 2B           	pld
  9482 00:247C: 3B           	tsc
  9483 00:247D: 18           	clc
  9484 00:247E: 69 12 00     	adc	#L291+4
  9485 00:2481: 1B           	tcs
  9486 00:2482: 6B           	rtl
  9487                        	.endblock	1426
  9488             0000000E   L291	equ	14
  9489             00000005   L292	equ	5
  9490                        	ends
  9491                        	efunc
  9492                        	.endfunc	1426,5,14
  9493                        	.line	1426
  9494                        	data
  9495                        L290:
  9496 00:0795: 44 65 66 43  	db	$44,$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,
                    $50,$72,$6F,$63,$32
       00:0799: 6F 6E 73 6F 
       00:079D: 6C 65 50 72 
       00:07A1: 6F 63 32 
  9497 00:07A4: 3A 3A 46 58  	db	$3A,$3A,$46,$58,$5F,$50,$52,$4F,$43,$45,
                    $53,$53,$3A,$00,$44
       00:07A8: 5F 50 52 4F 
       00:07AC: 43 45 53 53 
       00:07B0: 3A 00 44 
  9498 00:07B3: 65 66 43 6F  	db	$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,$50,
                    $72,$6F,$63,$32,$3A
       00:07B7: 6E 73 6F 6C 
       00:07BB: 65 50 72 6F 
       00:07BF: 63 32 3A 
  9499 00:07C2: 3A 50 72 6F  	db	$3A,$50,$72,$6F,$63,$65,$73,$73,$49,$64,
                    $3A,$00,$44,$65,$66
       00:07C6: 63 65 73 73 
       00:07CA: 49 64 3A 00 
       00:07CE: 44 65 66 
  9500 00:07D1: 43 6F 6E 73  	db	$43,$6F,$6E,$73,$6F,$6C,$65,$50,$72,$6F,
  Mon Sep 27 2021  9:39                                                Page 182


                    $63,$32,$3A,$3A,$46
       00:07D5: 6F 6C 65 50 
       00:07D9: 72 6F 63 32 
       00:07DD: 3A 3A 46 
  9501 00:07E0: 58 5F 49 4E  	db	$58,$5F,$49,$4E,$49,$54,$5F,$4D,$45,$53,
                    $53,$41,$47,$45,$0D
       00:07E4: 49 54 5F 4D 
       00:07E8: 45 53 53 41 
       00:07EC: 47 45 0D 
  9502 00:07EF: 0A 00 44 65  	db	$0A,$00,$44,$65,$66,$43,$6F,$6E,$73,$6F,
                    $6C,$65,$50,$72,$6F
       00:07F3: 66 43 6F 6E 
       00:07F7: 73 6F 6C 65 
       00:07FB: 50 72 6F 
  9503 00:07FE: 63 32 3A 3A  	db	$63,$32,$3A,$3A,$46,$58,$5F,$55,$4E,$49,
                    $4E,$49,$54,$5F,$4D
       00:0802: 46 58 5F 55 
       00:0806: 4E 49 4E 49 
       00:080A: 54 5F 4D 
  9504 00:080D: 45 53 53 41  	db	$45,$53,$53,$41,$47,$45,$0D,$0A,$00
       00:0811: 47 45 0D 0A 
       00:0815: 00 
  9505 00:0816:              	ends
  9506                        ;
  9507                        ;void DefConsoleProc3(PFXOSMESSAGE pMsg)
  9508                        ;{
  9509                        	.line	1428
  9510                        	.line	1429
  9511                        	code
  9512                        	xdef	~~DefConsoleProc3
  9513                        	func
  9514                        	.function	1429
  9515                        ~~DefConsoleProc3:
  9516                        	longa	on
  9517                        	longi	on
  9518 00:2483: 3B           	tsc
  9519 00:2484: 38           	sec
  9520 00:2485: E9 0E 00     	sbc	#L302
  9521 00:2488: 1B           	tcs
  9522 00:2489: 0B           	phd
  9523 00:248A: 5B           	tcd
  9524             00000004   pMsg_0	set	4
  9525                        	.block	1429
  9526                        ;	PSPINNERCTX pconsolespinctx = NULL;
  9527                        ;	PFXPROCESS p = NULL;
  9528                        ;	int i = 0;
  9529                        ;
  9530                        ;	//k_debug_string("DefConsoleProc enter\r\n");
  9531                        ;	if(pMsg!=NULL)
  9532             00000000   pconsolespinctx_1	set	0
  9533             00000004   p_1	set	4
  9534             00000008   i_1	set	8
  9535                        	.sym	pconsolespinctx,0,138,1,32,86
  9536                        	.sym	p,4,138,1,32,20
  9537                        	.sym	i,8,5,1,16
  9538                        	.sym	pMsg,4,138,6,32,16
  9539 00:248B: 64 05        	stz	<L303+pconsolespinctx_1
  9540 00:248D: 64 07        	stz	<L303+pconsolespinctx_1+2
  Mon Sep 27 2021  9:39                                                Page 183


  9541 00:248F: 64 09        	stz	<L303+p_1
  9542 00:2491: 64 0B        	stz	<L303+p_1+2
  9543 00:2493: 64 0D        	stz	<L303+i_1
  9544                        	.line	1435
  9545                        ;	{
  9546 00:2495: A5 12        	lda	<L302+pMsg_0
  9547 00:2497: 05 14        	ora	<L302+pMsg_0+2
  9548 00:2499: D0 03        	bne	L305
  9549 00:249B: 82 01 01     	brl	L10215
  9550                        L305:
  9551                        	.line	1436
  9552                        ;		p = k_exec_get_current_process();
  9553                        	.line	1437
  9554 00:249E: 22 xx xx xx  	jsl	~~k_exec_get_current_process
  9555 00:24A2: 85 09        	sta	<L303+p_1
  9556 00:24A4: 86 0B        	stx	<L303+p_1+2
  9557                        ;
  9558                        ;		switch(pMsg->type)
  9559                        	.line	1439
  9560 00:24A6: A0 08 00     	ldy	#$8
  9561 00:24A9: B7 12        	lda	[<L302+pMsg_0],Y
  9562 00:24AB: 82 DD 00     	brl	L10216
  9563                        ;		{
  9564                        	.line	1440
  9565                        ;		case FX_INIT_MESSAGE:
  9566                        	.line	1441
  9567                        L10218:
  9568                        ;
  9569                        ;			pconsolespinctx = (PSPINNERCTX)k
                    _mem_allocate_heap(sizeof(SPINNERCTX));
  9570                        	.line	1443
  9571 00:24AE: F4 00 00     	pea	#^$6
  9572 00:24B1: F4 06 00     	pea	#<$6
  9573 00:24B4: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  9574 00:24B8: 85 05        	sta	<L303+pconsolespinctx_1
  9575 00:24BA: 86 07        	stx	<L303+pconsolespinctx_1+2
  9576                        ;			pconsolespinctx->spinner = conso
                    lespinner;
  9577                        	.line	1444
  9578 00:24BC: A9 xx xx     	lda	#<~~consolespinner
  9579 00:24BF: 85 01        	sta	<R0
  9580                        	xref	_BEG_DATA
  9581 00:24C1: A9 xx xx     	lda	#_BEG_DATA>>16
  9582 00:24C4: 85 03        	sta	<R0+2
  9583 00:24C6: A5 01        	lda	<R0
  9584 00:24C8: A0 02 00     	ldy	#$2
  9585 00:24CB: 97 05        	sta	[<L303+pconsolespinctx_1],Y
  9586 00:24CD: A5 03        	lda	<R0+2
  9587 00:24CF: A0 04 00     	ldy	#$4
  9588 00:24D2: 97 05        	sta	[<L303+pconsolespinctx_1],Y
  9589                        ;			p->tls[0] = (LPVOID)pconsolespin
                    ctx;
  9590                        	.line	1445
  9591 00:24D4: A5 05        	lda	<L303+pconsolespinctx_1
  9592 00:24D6: A0 13 00     	ldy	#$13
  9593 00:24D9: 97 09        	sta	[<L303+p_1],Y
  9594 00:24DB: A5 07        	lda	<L303+pconsolespinctx_1+2
  9595 00:24DD: A0 15 00     	ldy	#$15
  Mon Sep 27 2021  9:39                                                Page 184


  9596 00:24E0: 97 09        	sta	[<L303+p_1],Y
  9597                        ;
  9598                        ;			i = (int)(long)((PFXPROCESSMESSA
                    GE)pMsg)->processInfo->startupArgs;
  9599                        	.line	1447
  9600 00:24E2: A0 0A 00     	ldy	#$a
  9601 00:24E5: B7 12        	lda	[<L302+pMsg_0],Y
  9602 00:24E7: 85 01        	sta	<R0
  9603 00:24E9: A0 0C 00     	ldy	#$c
  9604 00:24EC: B7 12        	lda	[<L302+pMsg_0],Y
  9605 00:24EE: 85 03        	sta	<R0+2
  9606 00:24F0: A0 60 00     	ldy	#$60
  9607 00:24F3: B7 01        	lda	[<R0],Y
  9608 00:24F5: 85 0D        	sta	<L303+i_1
  9609                        ;			k_debug_integer("DefConsoleProc3
                    ::FX_PROCESS:",i);
  9610                        	.line	1448
  9611 00:24F7: D4 0D        	pei	<L303+i_1
  9612 00:24F9: F4 xx xx     	pea	#^L301
  9613 00:24FC: F4 xx xx     	pea	#<L301
  9614 00:24FF: 22 xx xx xx  	jsl	~~k_debug_integer
  9615                        ;
  9616                        ;			if(p!=NULL)
  9617                        	.line	1450
  9618                        ;				k_debug_long("DefConsole
                    Proc3::ProcessId:",p->procId);
  9619 00:2503: A5 09        	lda	<L303+p_1
  9620 00:2505: 05 0B        	ora	<L303+p_1+2
  9621 00:2507: D0 03        	bne	L306
  9622 00:2509: 82 19 00     	brl	L10219
  9623                        L306:
  9624                        	.line	1451
  9625 00:250C: A0 04 00     	ldy	#$4
  9626 00:250F: B7 09        	lda	[<L303+p_1],Y
  9627 00:2511: 48           	pha
  9628 00:2512: A0 02 00     	ldy	#$2
  9629 00:2515: B7 09        	lda	[<L303+p_1],Y
  9630 00:2517: 48           	pha
  9631 00:2518: F4 xx xx     	pea	#^L301+29
  9632 00:251B: F4 xx xx     	pea	#<L301+29
  9633 00:251E: 22 xx xx xx  	jsl	~~k_debug_long
  9634                        ;			else
  9635 00:2522: 82 0A 00     	brl	L10220
  9636                        L10219:
  9637                        ;				k_debug_string("DefConso
                    leProc3::FX_INIT_MESSAGE\r\n");
  9638                        	.line	1453
  9639 00:2525: F4 xx xx     	pea	#^L301+57
  9640 00:2528: F4 xx xx     	pea	#<L301+57
  9641 00:252B: 22 xx xx xx  	jsl	~~k_debug_string
  9642                        L10220:
  9643                        ;			k_init_spinner(pconsolespinctx);
  9644                        	.line	1454
  9645 00:252F: D4 07        	pei	<L303+pconsolespinctx_1+2
  9646 00:2531: D4 05        	pei	<L303+pconsolespinctx_1
  9647 00:2533: 22 xx xx xx  	jsl	~~k_init_spinner
  9648                        ;
  9649                        ;			//k_sd_test();
  Mon Sep 27 2021  9:39                                                Page 185


  9650                        ;			break;
  9651                        	.line	1457
  9652 00:2537: 82 65 00     	brl	L10217
  9653                        ;		case FX_KEY_DOWN:
  9654                        	.line	1458
  9655                        L10221:
  9656                        ;			if(p!=NULL && p->foregroundActiv
                    e)
  9657                        	.line	1459
  9658                        ;			{
  9659 00:253A: A5 09        	lda	<L303+p_1
  9660 00:253C: 05 0B        	ora	<L303+p_1+2
  9661 00:253E: D0 03        	bne	L307
  9662 00:2540: 82 23 00     	brl	L10222
  9663                        L307:
  9664 00:2543: A0 12 00     	ldy	#$12
  9665 00:2546: B7 09        	lda	[<L303+p_1],Y
  9666 00:2548: 29 FF 00     	and	#$ff
  9667 00:254B: D0 03        	bne	L308
  9668 00:254D: 82 16 00     	brl	L10222
  9669                        L308:
  9670                        	.line	1460
  9671                        ;				//if(p!=NULL)
  9672                        ;				//	k_debug_integer(
                    "DefConso-leProc::ProcessId:",p->procId);
  9673                        ;
  9674                        ;				k_put_char(1,46,pMsg->da
                    ta[2],15,0);
  9675                        	.line	1464
  9676 00:2550: F4 00 00     	pea	#<$0
  9677 00:2553: F4 0F 00     	pea	#<$f
  9678 00:2556: A0 18 00     	ldy	#$18
  9679 00:2559: B7 12        	lda	[<L302+pMsg_0],Y
  9680 00:255B: 48           	pha
  9681 00:255C: F4 2E 00     	pea	#<$2e
  9682 00:255F: F4 01 00     	pea	#<$1
  9683 00:2562: 22 xx xx xx  	jsl	~~k_put_char
  9684                        ;			}
  9685                        	.line	1465
  9686                        ;			break;
  9687                        L10222:
  9688                        	.line	1466
  9689 00:2566: 82 36 00     	brl	L10217
  9690                        ;		case FX_PROCESS:
  9691                        	.line	1467
  9692                        L10223:
  9693                        ;			pconsolespinctx = (PSPINNERCTX)p
                    ->tls[0];
  9694                        	.line	1468
  9695 00:2569: A0 13 00     	ldy	#$13
  9696 00:256C: B7 09        	lda	[<L303+p_1],Y
  9697 00:256E: 85 05        	sta	<L303+pconsolespinctx_1
  9698 00:2570: A0 15 00     	ldy	#$15
  9699 00:2573: B7 09        	lda	[<L303+p_1],Y
  9700 00:2575: 85 07        	sta	<L303+pconsolespinctx_1+2
  9701                        ;			//k_debug_string("DefConsoleProc
                    ::FX_PROCESS\r\n");
  9702                        ;			k_updatespinner(3,41,pconsolespi
  Mon Sep 27 2021  9:39                                                Page 186


                    nctx);
  9703                        	.line	1470
  9704 00:2577: D4 07        	pei	<L303+pconsolespinctx_1+2
  9705 00:2579: D4 05        	pei	<L303+pconsolespinctx_1
  9706 00:257B: F4 29 00     	pea	#<$29
  9707 00:257E: F4 03 00     	pea	#<$3
  9708 00:2581: 22 xx xx xx  	jsl	~~k_updatespinner
  9709                        ;			//k_debug_integer("DefConsolePro
                    c3::FX_PROCESS:",i++);
  9710                        ;			break;
  9711                        	.line	1472
  9712 00:2585: 82 17 00     	brl	L10217
  9713                        ;		default:
  9714                        	.line	1473
  9715                        L10224:
  9716                        ;			//k_updatespinner(3,40,&consoles
                    pinctx);
  9717                        ;			break;
  9718                        	.line	1475
  9719 00:2588: 82 14 00     	brl	L10217
  9720                        ;		}
  9721                        	.line	1476
  9722                        L10216:
  9723                        	xref	~~~swt
  9724 00:258B: 22 xx xx xx  	jsl	~~~swt
  9725 00:258F: 03 00        	dw	3
  9726 00:2591: 10 0F        	dw	3856
  9727 00:2593: xx xx        	dw	L10221-1
  9728 00:2595: 00 FF        	dw	65280
  9729 00:2597: xx xx        	dw	L10223-1
  9730 00:2599: 01 FF        	dw	65281
  9731 00:259B: xx xx        	dw	L10218-1
  9732 00:259D: xx xx        	dw	L10224-1
  9733                        L10217:
  9734                        ;	}
  9735                        	.line	1477
  9736                        ;	//k_debug_string("DefConsoleProc exit\r\n");
  9737                        ;}
  9738                        L10215:
  9739                        	.line	1479
  9740                        L309:
  9741 00:259F: A5 10        	lda	<L302+2
  9742 00:25A1: 85 14        	sta	<L302+2+4
  9743 00:25A3: A5 0F        	lda	<L302+1
  9744 00:25A5: 85 13        	sta	<L302+1+4
  9745 00:25A7: 2B           	pld
  9746 00:25A8: 3B           	tsc
  9747 00:25A9: 18           	clc
  9748 00:25AA: 69 12 00     	adc	#L302+4
  9749 00:25AD: 1B           	tcs
  9750 00:25AE: 6B           	rtl
  9751                        	.endblock	1479
  9752             0000000E   L302	equ	14
  9753             00000005   L303	equ	5
  9754                        	ends
  9755                        	efunc
  9756                        	.endfunc	1479,5,14
  9757                        	.line	1479
  Mon Sep 27 2021  9:39                                                Page 187


  9758                        	data
  9759                        L301:
  9760 00:0816: 44 65 66 43  	db	$44,$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,
                    $50,$72,$6F,$63,$33
       00:081A: 6F 6E 73 6F 
       00:081E: 6C 65 50 72 
       00:0822: 6F 63 33 
  9761 00:0825: 3A 3A 46 58  	db	$3A,$3A,$46,$58,$5F,$50,$52,$4F,$43,$45,
                    $53,$53,$3A,$00,$44
       00:0829: 5F 50 52 4F 
       00:082D: 43 45 53 53 
       00:0831: 3A 00 44 
  9762 00:0834: 65 66 43 6F  	db	$65,$66,$43,$6F,$6E,$73,$6F,$6C,$65,$50,
                    $72,$6F,$63,$33,$3A
       00:0838: 6E 73 6F 6C 
       00:083C: 65 50 72 6F 
       00:0840: 63 33 3A 
  9763 00:0843: 3A 50 72 6F  	db	$3A,$50,$72,$6F,$63,$65,$73,$73,$49,$64,
                    $3A,$00,$44,$65,$66
       00:0847: 63 65 73 73 
       00:084B: 49 64 3A 00 
       00:084F: 44 65 66 
  9764 00:0852: 43 6F 6E 73  	db	$43,$6F,$6E,$73,$6F,$6C,$65,$50,$72,$6F,
                    $63,$33,$3A,$3A,$46
       00:0856: 6F 6C 65 50 
       00:085A: 72 6F 63 33 
       00:085E: 3A 3A 46 
  9765 00:0861: 58 5F 49 4E  	db	$58,$5F,$49,$4E,$49,$54,$5F,$4D,$45,$53,
                    $53,$41,$47,$45,$0D
       00:0865: 49 54 5F 4D 
       00:0869: 45 53 53 41 
       00:086D: 47 45 0D 
  9766 00:0870: 0A 00        	db	$0A,$00
  9767 00:0872:              	ends
  9768                        ;
  9769                        ;
  9770                        ;VOID k_console_process_command(LPCHAR commandLine
                    ,PFXPROCESS process)
  9771                        ;{
  9772                        	.line	1482
  9773                        	.line	1483
  9774                        	code
  9775                        	xdef	~~k_console_process_command
  9776                        	func
  9777                        	.function	1483
  9778                        ~~k_console_process_command:
  9779                        	longa	on
  9780                        	longi	on
  9781 00:25AF: 3B           	tsc
  9782 00:25B0: 38           	sec
  9783 00:25B1: E9 24 00     	sbc	#L311
  9784 00:25B4: 1B           	tcs
  9785 00:25B5: 0B           	phd
  9786 00:25B6: 5B           	tcd
  9787             00000004   commandLine_0	set	4
  9788             00000008   process_0	set	8
  9789                        	.block	1483
  9790                        ;	int index = 0;
  Mon Sep 27 2021  9:39                                                Page 188


  9791                        ;	int pos = 0;
  9792                        ;	LPCHAR cptr  = console_commands[0];
  9793                        ;	LPCHAR match = NULL;
  9794                        ;
  9795                        ;	PCOMMANDARGS args = NULL;
  9796                        ;
  9797                        ;	PFXNODE tokens = NULL;
  9798                        ;	PFXNODE t = NULL;
  9799                        ;
  9800                        ;	FXCommandHandler handler = NULL;
  9801                        ;
  9802                        ;	k_debug_string("k_console_process_command::enter
                    :");
  9803             00000000   index_1	set	0
  9804             00000002   pos_1	set	2
  9805             00000004   cptr_1	set	4
  9806             00000008   match_1	set	8
  9807             0000000C   args_1	set	12
  9808             00000010   tokens_1	set	16
  9809             00000014   t_1	set	20
  9810             00000018   handler_1	set	24
  9811                        	.sym	index,0,5,1,16
  9812                        	.sym	pos,2,5,1,16
  9813                        	.sym	cptr,4,142,1,32
  9814                        	.sym	match,8,142,1,32
  9815                        	.sym	args,12,138,1,32,89
  9816                        	.sym	tokens,16,138,1,32,5
  9817                        	.sym	t,20,138,1,32,5
  9818                        	.sym	handler,24,656,1,32
  9819                        	.sym	commandLine,4,142,6,32
  9820                        	.sym	process,8,138,6,32,20
  9821 00:25B7: 64 09        	stz	<L312+index_1
  9822 00:25B9: 64 0B        	stz	<L312+pos_1
  9823 00:25BB: AD xx xx     	lda	|~~console_commands
  9824 00:25BE: 85 0D        	sta	<L312+cptr_1
  9825 00:25C0: AD xx xx     	lda	|~~console_commands+2
  9826 00:25C3: 85 0F        	sta	<L312+cptr_1+2
  9827 00:25C5: 64 11        	stz	<L312+match_1
  9828 00:25C7: 64 13        	stz	<L312+match_1+2
  9829 00:25C9: 64 15        	stz	<L312+args_1
  9830 00:25CB: 64 17        	stz	<L312+args_1+2
  9831 00:25CD: 64 19        	stz	<L312+tokens_1
  9832 00:25CF: 64 1B        	stz	<L312+tokens_1+2
  9833 00:25D1: 64 1D        	stz	<L312+t_1
  9834 00:25D3: 64 1F        	stz	<L312+t_1+2
  9835 00:25D5: 64 21        	stz	<L312+handler_1
  9836 00:25D7: 64 23        	stz	<L312+handler_1+2
  9837                        	.line	1496
  9838 00:25D9: F4 xx xx     	pea	#^L310
  9839 00:25DC: F4 xx xx     	pea	#<L310
  9840 00:25DF: 22 xx xx xx  	jsl	~~k_debug_string
  9841                        ;	k_debug_string(commandLine);
  9842                        	.line	1497
  9843 00:25E3: D4 2A        	pei	<L311+commandLine_0+2
  9844 00:25E5: D4 28        	pei	<L311+commandLine_0
  9845 00:25E7: 22 xx xx xx  	jsl	~~k_debug_string
  9846                        ;	k_debug_string("\r\n");
  9847                        	.line	1498
  Mon Sep 27 2021  9:39                                                Page 189


  9848 00:25EB: F4 xx xx     	pea	#^L310+34
  9849 00:25EE: F4 xx xx     	pea	#<L310+34
  9850 00:25F1: 22 xx xx xx  	jsl	~~k_debug_string
  9851                        ;
  9852                        ;
  9853                        ;	while(cptr)
  9854                        	.line	1501
  9855                        L10225:
  9856 00:25F5: A5 0D        	lda	<L312+cptr_1
  9857 00:25F7: 05 0F        	ora	<L312+cptr_1+2
  9858 00:25F9: D0 03        	bne	L314
  9859 00:25FB: 82 FB 00     	brl	L10226
  9860                        L314:
  9861                        ;	{
  9862                        	.line	1502
  9863                        ;		//k_debug_string(cptr);
  9864                        ;		//k_debug_string("\r\n");
  9865                        ;		match = strstr(commandLine,cptr);
  9866                        	.line	1505
  9867 00:25FE: D4 0F        	pei	<L312+cptr_1+2
  9868 00:2600: D4 0D        	pei	<L312+cptr_1
  9869 00:2602: D4 2A        	pei	<L311+commandLine_0+2
  9870 00:2604: D4 28        	pei	<L311+commandLine_0
  9871 00:2606: 22 xx xx xx  	jsl	~~strstr
  9872 00:260A: 85 11        	sta	<L312+match_1
  9873 00:260C: 86 13        	stx	<L312+match_1+2
  9874                        ;		if(match == commandLine)
  9875                        	.line	1506
  9876                        ;		{
  9877 00:260E: A5 11        	lda	<L312+match_1
  9878 00:2610: C5 28        	cmp	<L311+commandLine_0
  9879 00:2612: D0 04        	bne	L315
  9880 00:2614: A5 13        	lda	<L312+match_1+2
  9881 00:2616: C5 2A        	cmp	<L311+commandLine_0+2
  9882                        L315:
  9883 00:2618: F0 03        	beq	L316
  9884 00:261A: 82 BE 00     	brl	L10227
  9885                        L316:
  9886                        	.line	1507
  9887                        ;			k_put_string(0,49,"             
                                                                               "
                    ,15,0);
  9888                        	.line	1508
  9889 00:261D: F4 00 00     	pea	#<$0
  9890 00:2620: F4 0F 00     	pea	#<$f
  9891 00:2623: F4 xx xx     	pea	#^L310+37
  9892 00:2626: F4 xx xx     	pea	#<L310+37
  9893 00:2629: F4 31 00     	pea	#<$31
  9894 00:262C: F4 00 00     	pea	#<$0
  9895 00:262F: 22 xx xx xx  	jsl	~~k_put_string
  9896                        ;			k_put_string(0,50,"             
                                                                               "
                    ,15,0);
  9897                        	.line	1509
  9898 00:2633: F4 00 00     	pea	#<$0
  9899 00:2636: F4 0F 00     	pea	#<$f
  9900 00:2639: F4 xx xx     	pea	#^L310+110
  9901 00:263C: F4 xx xx     	pea	#<L310+110
  Mon Sep 27 2021  9:39                                                Page 190


  9902 00:263F: F4 32 00     	pea	#<$32
  9903 00:2642: F4 00 00     	pea	#<$0
  9904 00:2645: 22 xx xx xx  	jsl	~~k_put_string
  9905                        ;
  9906                        ;			tokens = tokenize(commandLine);
  9907                        	.line	1511
  9908 00:2649: D4 2A        	pei	<L311+commandLine_0+2
  9909 00:264B: D4 28        	pei	<L311+commandLine_0
  9910 00:264D: 22 xx xx xx  	jsl	~~tokenize
  9911 00:2651: 85 19        	sta	<L312+tokens_1
  9912 00:2653: 86 1B        	stx	<L312+tokens_1+2
  9913                        ;			if(tokens)
  9914                        	.line	1512
  9915                        ;			{
  9916 00:2655: A5 19        	lda	<L312+tokens_1
  9917 00:2657: 05 1B        	ora	<L312+tokens_1+2
  9918 00:2659: D0 03        	bne	L317
  9919 00:265B: 82 08 00     	brl	L10228
  9920                        L317:
  9921                        	.line	1513
  9922                        ;				t = tokens;
  9923                        	.line	1514
  9924 00:265E: A5 19        	lda	<L312+tokens_1
  9925 00:2660: 85 1D        	sta	<L312+t_1
  9926 00:2662: A5 1B        	lda	<L312+tokens_1+2
  9927 00:2664: 85 1F        	sta	<L312+t_1+2
  9928                        ;				/*
  9929                        ;				while(t)
  9930                        ;				{
  9931                        ;					if(t)
  9932                        ;					{
  9933                        ;						k_debug_
                    string("TOKEN:");
  9934                        ;						if( ((PT
                    OKEN)t->data)->text)
  9935                        ;						{
  9936                        ;							
                    k_debug_string(((PTOKEN)t->data)->text );
  9937                        ;						}
  9938                        ;						else
  9939                        ;							
                    k_debug_string("NO NAME");
  9940                        ;
  9941                        ;						k_debug_
                    string("(");
  9942                        ;						k_debug_
                    string( token_to_string ( ((PTOKEN)t->data)->type  ));
  9943                        ;						k_debug_
                    string(")");
  9944                        ;						k_debug_
                    string("\r\n");
  9945                        ;						t = t->n
                    ext;
  9946                        ;					}
  9947                        ;				}
  9948                        ;				*/
  9949                        ;			}
  9950                        	.line	1536
  Mon Sep 27 2021  9:39                                                Page 191


  9951                        ;
  9952                        ;			//pos = k_put_string(pos,49,"FOU
                    ND COMMAND:",15,0);
  9953                        ;			//k_put_string(pos,49,cptr,15,0)
                    ;
  9954                        ;
  9955                        ;			k_debug_strings("k_console_proce
                    ss_command::found:",cptr);
  9956                        L10228:
  9957                        	.line	1541
  9958 00:2666: D4 0F        	pei	<L312+cptr_1+2
  9959 00:2668: D4 0D        	pei	<L312+cptr_1
  9960 00:266A: F4 xx xx     	pea	#^L310+183
  9961 00:266D: F4 xx xx     	pea	#<L310+183
  9962 00:2670: 22 xx xx xx  	jsl	~~k_debug_strings
  9963                        ;
  9964                        ;			// execute command handler
  9965                        ;			if(console_command_proc[index]!=
                    NULL)
  9966                        	.line	1544
  9967                        ;			{
  9968 00:2674: A5 09        	lda	<L312+index_1
  9969 00:2676: 0A           	asl	A
  9970 00:2677: 0A           	asl	A
  9971 00:2678: 85 01        	sta	<R0
  9972 00:267A: 18           	clc
  9973 00:267B: A9 xx xx     	lda	#<~~console_command_proc
  9974 00:267E: 65 01        	adc	<R0
  9975 00:2680: 85 05        	sta	<R1
  9976 00:2682: B2 05        	lda	(<R1)
  9977 00:2684: A0 02 00     	ldy	#$2
  9978 00:2687: 11 05        	ora	(<R1),Y
  9979 00:2689: D0 03        	bne	L318
  9980 00:268B: 82 4A 00     	brl	L10229
  9981                        L318:
  9982                        	.line	1545
  9983                        ;				//console_command_proc[i
                    ndex](process);
  9984                        ;
  9985                        ;				//handler = console_comm
                    and_proc[index];
  9986                        ;
  9987                        ;				args = k_mem_allocate_he
                    ap(sizeof(COMMANDARGS));
  9988                        	.line	1550
  9989 00:268E: F4 00 00     	pea	#^$8
  9990 00:2691: F4 08 00     	pea	#<$8
  9991 00:2694: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
  9992 00:2698: 85 15        	sta	<L312+args_1
  9993 00:269A: 86 17        	stx	<L312+args_1+2
  9994                        ;				args->proc = console_com
                    mand_proc[index];
  9995                        	.line	1551
  9996 00:269C: A5 09        	lda	<L312+index_1
  9997 00:269E: 0A           	asl	A
  9998 00:269F: 0A           	asl	A
  9999 00:26A0: 85 01        	sta	<R0
 10000 00:26A2: 18           	clc
  Mon Sep 27 2021  9:39                                                Page 192


 10001 00:26A3: A9 xx xx     	lda	#<~~console_command_proc
 10002 00:26A6: 65 01        	adc	<R0
 10003 00:26A8: 85 05        	sta	<R1
 10004 00:26AA: B2 05        	lda	(<R1)
 10005 00:26AC: 87 15        	sta	[<L312+args_1]
 10006 00:26AE: A0 02 00     	ldy	#$2
 10007 00:26B1: B1 05        	lda	(<R1),Y
 10008 00:26B3: A0 02 00     	ldy	#$2
 10009 00:26B6: 97 15        	sta	[<L312+args_1],Y
 10010                        ;				args->tokens = tokens;
 10011                        	.line	1552
 10012 00:26B8: A5 19        	lda	<L312+tokens_1
 10013 00:26BA: A0 04 00     	ldy	#$4
 10014 00:26BD: 97 15        	sta	[<L312+args_1],Y
 10015 00:26BF: A5 1B        	lda	<L312+tokens_1+2
 10016 00:26C1: A0 06 00     	ldy	#$6
 10017 00:26C4: 97 15        	sta	[<L312+args_1],Y
 10018                        ;
 10019                        ;				//k_debug_integer("k_con
                    sole_process_command::presend:",index);
 10020                        ;				//k_send_message(process
                    ,FX_APP_MESSAGE,handler,-1);
 10021                        ;				k_send_message(process,F
                    X_APP_MESSAGE,args,-1);
 10022                        	.line	1556
 10023 00:26C6: F4 FF FF     	pea	#<$ffffffff
 10024 00:26C9: D4 17        	pei	<L312+args_1+2
 10025 00:26CB: D4 15        	pei	<L312+args_1
 10026 00:26CD: F4 F0 FF     	pea	#<$fff0
 10027 00:26D0: D4 2E        	pei	<L311+process_0+2
 10028 00:26D2: D4 2C        	pei	<L311+process_0
 10029 00:26D4: 22 xx xx xx  	jsl	~~k_send_message
 10030                        ;				//k_debug_pointer("k_con
                    sole_process_command::postsend:",handler);
 10031                        ;
 10032                        ;			}
 10033                        	.line	1559
 10034                        ;			break;
 10035                        L10229:
 10036                        	.line	1560
 10037 00:26D8: 82 1E 00     	brl	L10226
 10038                        ;		}
 10039                        	.line	1561
 10040                        ;		cptr = console_commands[++index];
 10041                        L10227:
 10042                        	.line	1562
 10043 00:26DB: E6 09        	inc	<L312+index_1
 10044 00:26DD: A5 09        	lda	<L312+index_1
 10045 00:26DF: 0A           	asl	A
 10046 00:26E0: 0A           	asl	A
 10047 00:26E1: 85 01        	sta	<R0
 10048 00:26E3: 18           	clc
 10049 00:26E4: A9 xx xx     	lda	#<~~console_commands
 10050 00:26E7: 65 01        	adc	<R0
 10051 00:26E9: 85 05        	sta	<R1
 10052 00:26EB: B2 05        	lda	(<R1)
 10053 00:26ED: 85 0D        	sta	<L312+cptr_1
 10054 00:26EF: A0 02 00     	ldy	#$2
  Mon Sep 27 2021  9:39                                                Page 193


 10055 00:26F2: B1 05        	lda	(<R1),Y
 10056 00:26F4: 85 0F        	sta	<L312+cptr_1+2
 10057                        ;	}
 10058                        	.line	1563
 10059 00:26F6: 82 FC FE     	brl	L10225
 10060                        L10226:
 10061                        ;
 10062                        ;
 10063                        ;	//if(commandLine!=NULL)
 10064                        ;	//	k_put_string(0,50,commandLine,15,0);
 10065                        ;
 10066                        ;	k_debug_string("k_console_process_command::exit\
                    r\n");
 10067                        	.line	1569
 10068 00:26F9: F4 xx xx     	pea	#^L310+217
 10069 00:26FC: F4 xx xx     	pea	#<L310+217
 10070 00:26FF: 22 xx xx xx  	jsl	~~k_debug_string
 10071                        ;
 10072                        ;	return;
 10073                        	.line	1571
 10074                        L319:
 10075 00:2703: A5 26        	lda	<L311+2
 10076 00:2705: 85 2E        	sta	<L311+2+8
 10077 00:2707: A5 25        	lda	<L311+1
 10078 00:2709: 85 2D        	sta	<L311+1+8
 10079 00:270B: 2B           	pld
 10080 00:270C: 3B           	tsc
 10081 00:270D: 18           	clc
 10082 00:270E: 69 2C 00     	adc	#L311+8
 10083 00:2711: 1B           	tcs
 10084 00:2712: 6B           	rtl
 10085                        ;}
 10086                        	.line	1572
 10087                        	.endblock	1572
 10088             00000024   L311	equ	36
 10089             00000009   L312	equ	9
 10090                        	ends
 10091                        	efunc
 10092                        	.endfunc	1572,9,36
 10093                        	.line	1572
 10094                        	data
 10095                        L310:
 10096 00:0872: 6B 5F 63 6F  	db	$6B,$5F,$63,$6F,$6E,$73,$6F,$6C,$65,$5F,
                    $70,$72,$6F,$63,$65
       00:0876: 6E 73 6F 6C 
       00:087A: 65 5F 70 72 
       00:087E: 6F 63 65 
 10097 00:0881: 73 73 5F 63  	db	$73,$73,$5F,$63,$6F,$6D,$6D,$61,$6E,$64,
                    $3A,$3A,$65,$6E,$74
       00:0885: 6F 6D 6D 61 
       00:0889: 6E 64 3A 3A 
       00:088D: 65 6E 74 
 10098 00:0890: 65 72 3A 00  	db	$65,$72,$3A,$00,$0D,$0A,$00,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:0894: 0D 0A 00 20 
       00:0898: 20 20 20 20 
       00:089C: 20 20 20 
 10099 00:089F: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
  Mon Sep 27 2021  9:39                                                Page 194


                    $20,$20,$20,$20,$20
       00:08A3: 20 20 20 20 
       00:08A7: 20 20 20 20 
       00:08AB: 20 20 20 
 10100 00:08AE: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:08B2: 20 20 20 20 
       00:08B6: 20 20 20 20 
       00:08BA: 20 20 20 
 10101 00:08BD: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:08C1: 20 20 20 20 
       00:08C5: 20 20 20 20 
       00:08C9: 20 20 20 
 10102 00:08CC: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:08D0: 20 20 20 20 
       00:08D4: 20 20 20 20 
       00:08D8: 20 20 20 
 10103 00:08DB: 20 20 20 20  	db	$20,$20,$20,$20,$00,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:08DF: 00 20 20 20 
       00:08E3: 20 20 20 20 
       00:08E7: 20 20 20 
 10104 00:08EA: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:08EE: 20 20 20 20 
       00:08F2: 20 20 20 20 
       00:08F6: 20 20 20 
 10105 00:08F9: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:08FD: 20 20 20 20 
       00:0901: 20 20 20 20 
       00:0905: 20 20 20 
 10106 00:0908: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:090C: 20 20 20 20 
       00:0910: 20 20 20 20 
       00:0914: 20 20 20 
 10107 00:0917: 20 20 20 20  	db	$20,$20,$20,$20,$20,$20,$20,$20,$20,$20,
                    $20,$20,$20,$20,$20
       00:091B: 20 20 20 20 
       00:091F: 20 20 20 20 
       00:0923: 20 20 20 
 10108 00:0926: 20 20 00 6B  	db	$20,$20,$00,$6B,$5F,$63,$6F,$6E,$73,$6F,
                    $6C,$65,$5F,$70,$72
       00:092A: 5F 63 6F 6E 
       00:092E: 73 6F 6C 65 
       00:0932: 5F 70 72 
 10109 00:0935: 6F 63 65 73  	db	$6F,$63,$65,$73,$73,$5F,$63,$6F,$6D,$6D,
                    $61,$6E,$64,$3A,$3A
       00:0939: 73 5F 63 6F 
       00:093D: 6D 6D 61 6E 
       00:0941: 64 3A 3A 
 10110 00:0944: 66 6F 75 6E  	db	$66,$6F,$75,$6E,$64,$3A,$00,$6B,$5F,$63,
                    $6F,$6E,$73,$6F,$6C
       00:0948: 64 3A 00 6B 
       00:094C: 5F 63 6F 6E 
  Mon Sep 27 2021  9:39                                                Page 195


       00:0950: 73 6F 6C 
 10111 00:0953: 65 5F 70 72  	db	$65,$5F,$70,$72,$6F,$63,$65,$73,$73,$5F,
                    $63,$6F,$6D,$6D,$61
       00:0957: 6F 63 65 73 
       00:095B: 73 5F 63 6F 
       00:095F: 6D 6D 61 
 10112 00:0962: 6E 64 3A 3A  	db	$6E,$64,$3A,$3A,$65,$78,$69,$74,$0D,$0A,
                    $00
       00:0966: 65 78 69 74 
       00:096A: 0D 0A 00 
 10113 00:096D:              	ends
 10114                        ;/*
 10115                        ;VOID foreach_file_entry(LPVOID ctx,LPVOID data)
 10116                        ;{
 10117                        ;	CHAR buffer[16];
 10118                        ;	int pos = 0;
 10119                        ;	PFXPROCESS process = (PFXPROCESS)ctx;
 10120                        ;
 10121                        ;	pos = k_put_string(0,process->consoleCtl->curY,(
                    (PFILEINFO)data)->pFilename,15,0);
 10122                        ;	pos = k_put_string(20,process->consoleCtl->curY,
                    k_replace_padding( k_longtodec(  ((PFILEINFO)data)->lSize,bu
                    ffer ),' '),15,0);
 10123                        ;	pos++;
 10124                        ;	if(((PFILEINFO)data)->type == ATTR_DIRECTORY)
 10125                        ;		pos = k_put_string(pos,process->consoleC
                    tl->curY,"directory",15,0);
 10126                        ;	else
 10127                        ;		pos = k_put_string(pos,process->consoleC
                    tl->curY,"bytes",15,0);
 10128                        ;
 10129                        ;	process->consoleCtl->curY++;
 10130                        ;}
 10131                        ;*/
 10132                        ;
 10133                        ;LPCHAR token_to_string(TOKENTYPE tt)
 10134                        ;{
 10135                        	.line	1592
 10136                        	.line	1593
 10137                        	code
 10138                        	xdef	~~token_to_string
 10139                        	func
 10140                        	.function	1593
 10141                        ~~token_to_string:
 10142                        	longa	on
 10143                        	longi	on
 10144 00:2713: 3B           	tsc
 10145 00:2714: 38           	sec
 10146 00:2715: E9 08 00     	sbc	#L321
 10147 00:2718: 1B           	tcs
 10148 00:2719: 0B           	phd
 10149 00:271A: 5B           	tcd
 10150             00000004   tt_0	set	4
 10151                        	.block	1593
 10152                        ;	return tokentypeNames[tt];
 10153                        	.sym	tt,4,5,6,16
 10154                        	.line	1594
 10155 00:271B: A5 0C        	lda	<L321+tt_0
  Mon Sep 27 2021  9:39                                                Page 196


 10156 00:271D: 0A           	asl	A
 10157 00:271E: 0A           	asl	A
 10158 00:271F: 85 01        	sta	<R0
 10159 00:2721: 18           	clc
 10160 00:2722: A9 xx xx     	lda	#<~~tokentypeNames
 10161 00:2725: 65 01        	adc	<R0
 10162 00:2727: 85 05        	sta	<R1
 10163 00:2729: A0 02 00     	ldy	#$2
 10164 00:272C: B1 05        	lda	(<R1),Y
 10165 00:272E: AA           	tax
 10166 00:272F: B2 05        	lda	(<R1)
 10167                        L324:
 10168 00:2731: A8           	tay
 10169 00:2732: A5 0A        	lda	<L321+2
 10170 00:2734: 85 0C        	sta	<L321+2+2
 10171 00:2736: A5 09        	lda	<L321+1
 10172 00:2738: 85 0B        	sta	<L321+1+2
 10173 00:273A: 2B           	pld
 10174 00:273B: 3B           	tsc
 10175 00:273C: 18           	clc
 10176 00:273D: 69 0A 00     	adc	#L321+2
 10177 00:2740: 1B           	tcs
 10178 00:2741: 98           	tya
 10179 00:2742: 6B           	rtl
 10180                        ;}
 10181                        	.line	1595
 10182                        	.endblock	1595
 10183             00000008   L321	equ	8
 10184             00000009   L322	equ	9
 10185                        	ends
 10186                        	efunc
 10187                        	.endfunc	1595,9,8
 10188                        	.line	1595
 10189                        ;
 10190                        ;PTOKEN newToken(PFXSTRING name,TOKENTYPE type)
 10191                        ;{
 10192                        	.line	1597
 10193                        	.line	1598
 10194                        	code
 10195                        	xdef	~~newToken
 10196                        	func
 10197                        	.function	1598
 10198                        ~~newToken:
 10199                        	longa	on
 10200                        	longi	on
 10201 00:2743: 3B           	tsc
 10202 00:2744: 38           	sec
 10203 00:2745: E9 08 00     	sbc	#L325
 10204 00:2748: 1B           	tcs
 10205 00:2749: 0B           	phd
 10206 00:274A: 5B           	tcd
 10207             00000004   name_0	set	4
 10208             00000008   type_0	set	8
 10209                        	.block	1598
 10210                        ;	PTOKEN t = (PTOKEN)k_mem_allocate_heap(sizeof(TO
                    KEN));
 10211                        ;	if(t)
 10212             00000000   t_1	set	0
  Mon Sep 27 2021  9:39                                                Page 197


 10213                        	.sym	t,0,138,1,32,88
 10214                        	.sym	name,4,138,6,32,52
 10215                        	.sym	type,8,5,6,16
 10216 00:274B: F4 00 00     	pea	#^$8
 10217 00:274E: F4 08 00     	pea	#<$8
 10218 00:2751: 22 xx xx xx  	jsl	~~k_mem_allocate_heap
 10219 00:2755: 85 05        	sta	<L326+t_1
 10220 00:2757: 86 07        	stx	<L326+t_1+2
 10221                        	.line	1600
 10222                        ;	{
 10223 00:2759: A5 05        	lda	<L326+t_1
 10224 00:275B: 05 07        	ora	<L326+t_1+2
 10225 00:275D: D0 03        	bne	L328
 10226 00:275F: 82 26 00     	brl	L10230
 10227                        L328:
 10228                        	.line	1601
 10229                        ;		t->type = type;
 10230                        	.line	1602
 10231 00:2762: A5 10        	lda	<L325+type_0
 10232 00:2764: 87 05        	sta	[<L326+t_1]
 10233                        ;		t->depth = 0;
 10234                        	.line	1603
 10235 00:2766: A9 00 00     	lda	#$0
 10236 00:2769: A0 02 00     	ldy	#$2
 10237 00:276C: 97 05        	sta	[<L326+t_1],Y
 10238                        ;		t->text = k_fxstring_copy_string(name);
 10239                        	.line	1604
 10240 00:276E: D4 0E        	pei	<L325+name_0+2
 10241 00:2770: D4 0C        	pei	<L325+name_0
 10242 00:2772: 22 xx xx xx  	jsl	~~k_fxstring_copy_string
 10243 00:2776: 85 01        	sta	<R0
 10244 00:2778: 86 03        	stx	<R0+2
 10245 00:277A: A5 01        	lda	<R0
 10246 00:277C: A0 04 00     	ldy	#$4
 10247 00:277F: 97 05        	sta	[<L326+t_1],Y
 10248 00:2781: A5 03        	lda	<R0+2
 10249 00:2783: A0 06 00     	ldy	#$6
 10250 00:2786: 97 05        	sta	[<L326+t_1],Y
 10251                        ;	}
 10252                        	.line	1605
 10253                        ;	return t;
 10254                        L10230:
 10255                        	.line	1606
 10256 00:2788: A6 07        	ldx	<L326+t_1+2
 10257 00:278A: A5 05        	lda	<L326+t_1
 10258                        L329:
 10259 00:278C: A8           	tay
 10260 00:278D: A5 0A        	lda	<L325+2
 10261 00:278F: 85 10        	sta	<L325+2+6
 10262 00:2791: A5 09        	lda	<L325+1
 10263 00:2793: 85 0F        	sta	<L325+1+6
 10264 00:2795: 2B           	pld
 10265 00:2796: 3B           	tsc
 10266 00:2797: 18           	clc
 10267 00:2798: 69 0E 00     	adc	#L325+6
 10268 00:279B: 1B           	tcs
 10269 00:279C: 98           	tya
 10270 00:279D: 6B           	rtl
  Mon Sep 27 2021  9:39                                                Page 198


 10271                        ;}
 10272                        	.line	1607
 10273                        	.endblock	1607
 10274             00000008   L325	equ	8
 10275             00000005   L326	equ	5
 10276                        	ends
 10277                        	efunc
 10278                        	.endfunc	1607,5,8
 10279                        	.line	1607
 10280                        ;/*
 10281                        ;void sig_walk(LPVOID signature,LPVOID pdata)
 10282                        ;{
 10283                        ;	PTOKEN t = ((PTOKEN)pdata);
 10284                        ;
 10285                        ;	((LPCHAR)signature)[0]++;
 10286                        ;	((LPCHAR)signature)[((LPCHAR)signature)[0]] = (t
                    ->type + 65);
 10287                        ;
 10288                        ;	//k_debug_integer("sig count:",((LPCHAR)signatur
                    e)[0]);
 10289                        ;	k_debug_integer("sig id:",((LPCHAR)signature)[0]
                    );
 10290                        ;	//k_debug_integer("sig type:",((LPCHAR)signature
                    )[((LPCHAR)signature)[0]]);
 10291                        ;	k_debug_char("sig type:",((LPCHAR)signature)[((L
                    PCHAR)signature)[0]] );
 10292                        ;}
 10293                        ;
 10294                        ;VOID getTokenSig(PFXNODE tokens,LPVOID signature)
 10295                        ;{
 10296                        ;	memset(signature,0xFF,8);
 10297                        ;	((LPCHAR)signature)[0] = 0;
 10298                        ;
 10299                        ;	k_nodelist_foreach_data(tokens->next,signature,s
                    ig_walk);
 10300                        ;
 10301                        ;	((LPCHAR)signature)[((LPCHAR)signature)[0] + 1] 
                    = 0;
 10302                        ;	((LPCHAR)signature)[0] ='#';
 10303                        ;
 10304                        ;	k_debug_strings("string-sig:",((LPCHAR)signature
                    ));
 10305                        ;}
 10306                        ;*/
 10307                        ;void sig_walk(LPVOID signature,LPVOID pdata)
 10308                        ;{
 10309                        	.line	1635
 10310                        	.line	1636
 10311                        	code
 10312                        	xdef	~~sig_walk
 10313                        	func
 10314                        	.function	1636
 10315                        ~~sig_walk:
 10316                        	longa	on
 10317                        	longi	on
 10318 00:279E: 3B           	tsc
 10319 00:279F: 38           	sec
 10320 00:27A0: E9 0A 00     	sbc	#L330
  Mon Sep 27 2021  9:39                                                Page 199


 10321 00:27A3: 1B           	tcs
 10322 00:27A4: 0B           	phd
 10323 00:27A5: 5B           	tcd
 10324             00000004   signature_0	set	4
 10325             00000008   pdata_0	set	8
 10326                        	.block	1636
 10327                        ;	CHAR end[2];
 10328                        ;	PTOKEN t = ((PTOKEN)pdata);
 10329                        ;
 10330                        ;	if(t)
 10331             00000000   end_1	set	0
 10332             00000002   t_1	set	2
 10333                        	.sym	end,0,110,1,0,2
 10334                        	.sym	t,2,138,1,32,88
 10335                        	.sym	signature,4,129,6,32
 10336                        	.sym	pdata,8,129,6,32
 10337 00:27A6: A5 12        	lda	<L330+pdata_0
 10338 00:27A8: 85 07        	sta	<L331+t_1
 10339 00:27AA: A5 14        	lda	<L330+pdata_0+2
 10340 00:27AC: 85 09        	sta	<L331+t_1+2
 10341                        	.line	1640
 10342                        ;	{
 10343 00:27AE: A5 07        	lda	<L331+t_1
 10344 00:27B0: 05 09        	ora	<L331+t_1+2
 10345 00:27B2: D0 03        	bne	L333
 10346 00:27B4: 82 50 00     	brl	L10231
 10347                        L333:
 10348                        	.line	1641
 10349                        ;		if(t->type == 0xFF)
 10350                        	.line	1642
 10351                        ;			end[0] = '#';
 10352 00:27B7: A7 07        	lda	[<L331+t_1]
 10353 00:27B9: C9 FF 00     	cmp	#<$ff
 10354 00:27BC: F0 03        	beq	L334
 10355 00:27BE: 82 0B 00     	brl	L10232
 10356                        L334:
 10357                        	.line	1643
 10358 00:27C1: E2 20        	sep	#$20
 10359                        	longa	off
 10360 00:27C3: A9 23        	lda	#$23
 10361 00:27C5: 85 05        	sta	<L331+end_1
 10362 00:27C7: C2 20        	rep	#$20
 10363                        	longa	on
 10364                        ;		else
 10365 00:27C9: 82 10 00     	brl	L10233
 10366                        L10232:
 10367                        ;			end[0] = (t->type + 65);
 10368                        	.line	1645
 10369 00:27CC: 18           	clc
 10370 00:27CD: A9 41 00     	lda	#$41
 10371 00:27D0: 67 07        	adc	[<L331+t_1]
 10372 00:27D2: 85 01        	sta	<R0
 10373 00:27D4: E2 20        	sep	#$20
 10374                        	longa	off
 10375 00:27D6: A5 01        	lda	<R0
 10376 00:27D8: 85 05        	sta	<L331+end_1
 10377 00:27DA: C2 20        	rep	#$20
 10378                        	longa	on
  Mon Sep 27 2021  9:39                                                Page 200


 10379                        L10233:
 10380                        ;		end[1] = 0;
 10381                        	.line	1646
 10382 00:27DC: E2 20        	sep	#$20
 10383                        	longa	off
 10384 00:27DE: 64 06        	stz	<L331+end_1+1
 10385 00:27E0: C2 20        	rep	#$20
 10386                        	longa	on
 10387                        ;
 10388                        ;		strcat((LPCHAR)signature,end);
 10389                        	.line	1648
 10390 00:27E2: F4 00 00     	pea	#0
 10391 00:27E5: 18           	clc
 10392 00:27E6: 7B           	tdc
 10393 00:27E7: 69 05 00     	adc	#<L331+end_1
 10394 00:27EA: 48           	pha
 10395 00:27EB: D4 10        	pei	<L330+signature_0+2
 10396 00:27ED: D4 0E        	pei	<L330+signature_0
 10397 00:27EF: 22 xx xx xx  	jsl	~~strcat
 10398                        ;
 10399                        ;		//k_debug_integer("sig count:",((LPCHAR)
                    signature)[0]);
 10400                        ;		//k_debug_integer("sig id:",((LPCHAR)sig
                    nature)[0]);
 10401                        ;		//k_debug_integer("sig type:",((LPCHAR)s
                    ignature)[((LPCHAR)signature)[0]]);
 10402                        ;		k_debug_char("sig type:",(t->type + 65))
                    ;
 10403                        	.line	1653
 10404 00:27F3: 18           	clc
 10405 00:27F4: A9 41 00     	lda	#$41
 10406 00:27F7: 67 07        	adc	[<L331+t_1]
 10407 00:27F9: 48           	pha
 10408 00:27FA: F4 xx xx     	pea	#^L320
 10409 00:27FD: F4 xx xx     	pea	#<L320
 10410 00:2800: 22 xx xx xx  	jsl	~~k_debug_char
 10411                        ;	}
 10412                        	.line	1654
 10413                        ;	else
 10414 00:2804: 82 18 00     	brl	L10234
 10415                        L10231:
 10416                        ;	{
 10417                        	.line	1656
 10418                        ;		strcat((LPCHAR)signature,"#");
 10419                        	.line	1657
 10420 00:2807: F4 xx xx     	pea	#^L320+10
 10421 00:280A: F4 xx xx     	pea	#<L320+10
 10422 00:280D: D4 10        	pei	<L330+signature_0+2
 10423 00:280F: D4 0E        	pei	<L330+signature_0
 10424 00:2811: 22 xx xx xx  	jsl	~~strcat
 10425                        ;		k_debug_string("sig_walk:NO DATA");
 10426                        	.line	1658
 10427 00:2815: F4 xx xx     	pea	#^L320+12
 10428 00:2818: F4 xx xx     	pea	#<L320+12
 10429 00:281B: 22 xx xx xx  	jsl	~~k_debug_string
 10430                        ;	}
 10431                        	.line	1659
 10432                        L10234:
  Mon Sep 27 2021  9:39                                                Page 201


 10433                        ;}
 10434                        	.line	1660
 10435                        L335:
 10436 00:281F: A5 0C        	lda	<L330+2
 10437 00:2821: 85 14        	sta	<L330+2+8
 10438 00:2823: A5 0B        	lda	<L330+1
 10439 00:2825: 85 13        	sta	<L330+1+8
 10440 00:2827: 2B           	pld
 10441 00:2828: 3B           	tsc
 10442 00:2829: 18           	clc
 10443 00:282A: 69 12 00     	adc	#L330+8
 10444 00:282D: 1B           	tcs
 10445 00:282E: 6B           	rtl
 10446                        	.endblock	1660
 10447             0000000A   L330	equ	10
 10448             00000005   L331	equ	5
 10449                        	ends
 10450                        	efunc
 10451                        	.endfunc	1660,5,10
 10452                        	.line	1660
 10453                        	data
 10454                        L320:
 10455 00:096D: 73 69 67 20  	db	$73,$69,$67,$20,$74,$79,$70,$65,$3A,$00,
                    $23,$00,$73,$69,$67
       00:0971: 74 79 70 65 
       00:0975: 3A 00 23 00 
       00:0979: 73 69 67 
 10456 00:097C: 5F 77 61 6C  	db	$5F,$77,$61,$6C,$6B,$3A,$4E,$4F,$20,$44,
                    $41,$54,$41,$00
       00:0980: 6B 3A 4E 4F 
       00:0984: 20 44 41 54 
       00:0988: 41 00 
 10457 00:098A:              	ends
 10458                        ;
 10459                        ;VOID getTokenSig(PFXNODE tokens,LPVOID signature)
 10460                        ;{
 10461                        	.line	1662
 10462                        	.line	1663
 10463                        	code
 10464                        	xdef	~~getTokenSig
 10465                        	func
 10466                        	.function	1663
 10467                        ~~getTokenSig:
 10468                        	longa	on
 10469                        	longi	on
 10470 00:282F: 3B           	tsc
 10471 00:2830: 38           	sec
 10472 00:2831: E9 00 00     	sbc	#L337
 10473 00:2834: 1B           	tcs
 10474 00:2835: 0B           	phd
 10475 00:2836: 5B           	tcd
 10476             00000004   tokens_0	set	4
 10477             00000008   signature_0	set	8
 10478                        	.block	1663
 10479                        ;	memset(signature,0,8);
 10480                        	.sym	tokens,4,138,6,32,5
 10481                        	.sym	signature,8,129,6,32
 10482                        	.line	1664
  Mon Sep 27 2021  9:39                                                Page 202


 10483 00:2837: F4 08 00     	pea	#<$8
 10484 00:283A: F4 00 00     	pea	#<$0
 10485 00:283D: D4 0A        	pei	<L337+signature_0+2
 10486 00:283F: D4 08        	pei	<L337+signature_0
 10487 00:2841: 22 xx xx xx  	jsl	~~memset
 10488                        ;	//((LPCHAR)signature)[0] = 0;
 10489                        ;
 10490                        ;	k_nodelist_foreach_data(tokens,signature,sig_wal
                    k);
 10491                        	.line	1667
 10492 00:2845: F4 xx xx     	pea	#^~~sig_walk
 10493 00:2848: F4 xx xx     	pea	#<~~sig_walk
 10494 00:284B: D4 0A        	pei	<L337+signature_0+2
 10495 00:284D: D4 08        	pei	<L337+signature_0
 10496 00:284F: D4 06        	pei	<L337+tokens_0+2
 10497 00:2851: D4 04        	pei	<L337+tokens_0
 10498 00:2853: 22 xx xx xx  	jsl	~~k_nodelist_foreach_data
 10499                        ;
 10500                        ;	//((LPCHAR)signature)[((LPCHAR)signature)[0] + 1
                    ] = 0;
 10501                        ;	//((LPCHAR)signature)[0] ='#';
 10502                        ;
 10503                        ;	k_debug_strings("string-sig:",((LPCHAR)signature
                    ));
 10504                        	.line	1672
 10505 00:2857: D4 0A        	pei	<L337+signature_0+2
 10506 00:2859: D4 08        	pei	<L337+signature_0
 10507 00:285B: F4 xx xx     	pea	#^L336
 10508 00:285E: F4 xx xx     	pea	#<L336
 10509 00:2861: 22 xx xx xx  	jsl	~~k_debug_strings
 10510                        ;}
 10511                        	.line	1673
 10512                        L340:
 10513 00:2865: A5 02        	lda	<L337+2
 10514 00:2867: 85 0A        	sta	<L337+2+8
 10515 00:2869: A5 01        	lda	<L337+1
 10516 00:286B: 85 09        	sta	<L337+1+8
 10517 00:286D: 2B           	pld
 10518 00:286E: 3B           	tsc
 10519 00:286F: 18           	clc
 10520 00:2870: 69 08 00     	adc	#L337+8
 10521 00:2873: 1B           	tcs
 10522 00:2874: 6B           	rtl
 10523                        	.endblock	1673
 10524             00000000   L337	equ	0
 10525             00000001   L338	equ	1
 10526                        	ends
 10527                        	efunc
 10528                        	.endfunc	1673,1,0
 10529                        	.line	1673
 10530                        	data
 10531                        L336:
 10532 00:098A: 73 74 72 69  	db	$73,$74,$72,$69,$6E,$67,$2D,$73,$69,$67,
                    $3A,$00
       00:098E: 6E 67 2D 73 
       00:0992: 69 67 3A 00 
 10533 00:0996:              	ends
 10534                        ;
  Mon Sep 27 2021  9:39                                                Page 203


 10535                        ;
 10536                        ;
 10537                        ;PFXNODE tokenize(LPCHAR source)
 10538                        ;{
 10539                        	.line	1677
 10540                        	.line	1678
 10541                        	code
 10542                        	xdef	~~tokenize
 10543                        	func
 10544                        	.function	1678
 10545                        ~~tokenize:
 10546                        	longa	on
 10547                        	longi	on
 10548 00:2875: 3B           	tsc
 10549 00:2876: 38           	sec
 10550 00:2877: E9 51 00     	sbc	#L342
 10551 00:287A: 1B           	tcs
 10552 00:287B: 0B           	phd
 10553 00:287C: 5B           	tcd
 10554             00000004   source_0	set	4
 10555                        	.block	1678
 10556                        ;
 10557                        ;	INT 	  i = 0;
 10558                        ;	CHAR 	  c = 0;
 10559                        ;	CHAR      toString[2];
 10560                        ;	INT 	  nestedIf = 0;
 10561                        ;	UINT sourceLength = 0;
 10562                        ;	LPCHAR	  charTokens = "\n=+-/<*>(),";
 10563                        ;	//PFXSTRING charTokens = NULL;
 10564                        ;	PFXSTRING token    = NULL;
 10565                        ;	PFXNODE   tokens   = NULL;
 10566                        ;	PTOKEN    tok	   = NULL;
 10567                        ;	TOKENIZESTATE state = STATE_DEFAULT;
 10568                        ;	TOKENTYPE tokenTypes[] = {
 10569                        	data
 10570                        L345:
 10571                        ;							
                    	TTYPE_LINE, TTYPE_EQUALS, TTYPE_OPERATOR,
 10572 00:0996: 04 00 05 00  	dw	$4,$5,$6
       00:099A: 06 00 
 10573                        ;							
                    	TTYPE_OPERATOR, TTYPE_OPERATOR,TTYPE_OPERATOR,
 10574 00:099C: 06 00 06 00  	dw	$6,$6,$6
       00:09A0: 06 00 
 10575                        ;							
                    	TTYPE_OPERATOR, TTYPE_OPERATOR,
 10576 00:09A2: 06 00 06 00  	dw	$6,$6
 10577                        ;							
                    	TTYPE_LEFT_PAREN, TTYPE_RIGHT_PAREN, TTYPE_COMMA
 10578 00:09A6: 07 00 08 00  	dw	$7,$8
 10579                        ;							
                      };
 10580 00:09AA: 0A 00        	dw	$A
 10581 00:09AC:              	ends
 10582                        ;
 10583                        ;
 10584                        ;	source = k_fxstring_add(k_fxstring_new(source,st
                    rlen(source) + 2)," ");
  Mon Sep 27 2021  9:39                                                Page 204


 10585             00000000   i_1	set	0
 10586             00000002   c_1	set	2
 10587             00000003   toString_1	set	3
 10588             00000005   nestedIf_1	set	5
 10589             00000007   sourceLength_1	set	7
 10590             00000009   charTokens_1	set	9
 10591             0000000D   token_1	set	13
 10592             00000011   tokens_1	set	17
 10593             00000015   tok_1	set	21
 10594             00000019   state_1	set	25
 10595             0000001B   tokenTypes_1	set	27
 10596                        	.sym	i,0,5,1,16
 10597                        	.sym	c,2,14,1,8
 10598                        	.sym	toString,3,110,1,0,2
 10599                        	.sym	nestedIf,5,5,1,16
 10600                        	.sym	sourceLength,7,16,1,16
 10601                        	.sym	charTokens,9,142,1,32
 10602                        	.sym	token,13,138,1,32,52
 10603                        	.sym	tokens,17,138,1,32,5
 10604                        	.sym	tok,21,138,1,32,88
 10605                        	.sym	state,25,5,1,16
 10606                        	.sym	tokenTypes,27,101,1,0,11
 10607                        	.sym	source,4,142,6,32
 10608 00:287D: 64 21        	stz	<L343+i_1
 10609 00:287F: E2 20        	sep	#$20
 10610                        	longa	off
 10611 00:2881: 64 23        	stz	<L343+c_1
 10612 00:2883: C2 20        	rep	#$20
 10613                        	longa	on
 10614 00:2885: 64 26        	stz	<L343+nestedIf_1
 10615 00:2887: 64 28        	stz	<L343+sourceLength_1
 10616 00:2889: A9 xx xx     	lda	#<L341
 10617 00:288C: 85 2A        	sta	<L343+charTokens_1
 10618 00:288E: A9 xx xx     	lda	#^L341
 10619 00:2891: 85 2C        	sta	<L343+charTokens_1+2
 10620 00:2893: 64 2E        	stz	<L343+token_1
 10621 00:2895: 64 30        	stz	<L343+token_1+2
 10622 00:2897: 64 32        	stz	<L343+tokens_1
 10623 00:2899: 64 34        	stz	<L343+tokens_1+2
 10624 00:289B: 64 36        	stz	<L343+tok_1
 10625 00:289D: 64 38        	stz	<L343+tok_1+2
 10626 00:289F: 64 3A        	stz	<L343+state_1
 10627 00:28A1: F4 xx xx     	pea	#^L345
 10628 00:28A4: F4 xx xx     	pea	#<L345
 10629 00:28A7: 18           	clc
 10630 00:28A8: 7B           	tdc
 10631 00:28A9: 69 3C 00     	adc	#<L343+tokenTypes_1
 10632 00:28AC: 85 01        	sta	<R0
 10633 00:28AE: A9 00 00     	lda	#$0
 10634 00:28B1: 85 03        	sta	<R0+2
 10635 00:28B3: D4 03        	pei	<R0+2
 10636 00:28B5: D4 01        	pei	<R0
 10637 00:28B7: A9 16 00     	lda	#$16
 10638                        	xref	~~~fmov
 10639 00:28BA: 22 xx xx xx  	jsl	~~~fmov
 10640                        	.line	1699
 10641 00:28BE: F4 xx xx     	pea	#^L341+12
 10642 00:28C1: F4 xx xx     	pea	#<L341+12
  Mon Sep 27 2021  9:39                                                Page 205


 10643 00:28C4: D4 57        	pei	<L342+source_0+2
 10644 00:28C6: D4 55        	pei	<L342+source_0
 10645 00:28C8: 22 xx xx xx  	jsl	~~strlen
 10646 00:28CC: 85 01        	sta	<R0
 10647 00:28CE: 18           	clc
 10648 00:28CF: A9 02 00     	lda	#$2
 10649 00:28D2: 65 01        	adc	<R0
 10650 00:28D4: 48           	pha
 10651 00:28D5: D4 57        	pei	<L342+source_0+2
 10652 00:28D7: D4 55        	pei	<L342+source_0
 10653 00:28D9: 22 xx xx xx  	jsl	~~k_fxstring_new
 10654 00:28DD: 85 01        	sta	<R0
 10655 00:28DF: 86 03        	stx	<R0+2
 10656 00:28E1: DA           	phx
 10657 00:28E2: 48           	pha
 10658 00:28E3: 22 xx xx xx  	jsl	~~k_fxstring_add
 10659 00:28E7: 85 55        	sta	<L342+source_0
 10660 00:28E9: 86 57        	stx	<L342+source_0+2
 10661                        ;
 10662                        ;
 10663                        ;	k_debug_message("SOURCE LINE:",source);
 10664                        	.line	1702
 10665 00:28EB: D4 57        	pei	<L342+source_0+2
 10666 00:28ED: D4 55        	pei	<L342+source_0
 10667 00:28EF: F4 xx xx     	pea	#^L341+14
 10668 00:28F2: F4 xx xx     	pea	#<L341+14
 10669 00:28F5: 22 xx xx xx  	jsl	~~k_debug_message
 10670                        ;
 10671                        ;	sourceLength = strlen(source);
 10672                        	.line	1704
 10673 00:28F9: D4 57        	pei	<L342+source_0+2
 10674 00:28FB: D4 55        	pei	<L342+source_0
 10675 00:28FD: 22 xx xx xx  	jsl	~~strlen
 10676 00:2901: 85 28        	sta	<L343+sourceLength_1
 10677                        ;
 10678                        ;	k_debug_integer("SOURCE sourceLength:",sourceLen
                    gth);
 10679                        	.line	1706
 10680 00:2903: D4 28        	pei	<L343+sourceLength_1
 10681 00:2905: F4 xx xx     	pea	#^L341+27
 10682 00:2908: F4 xx xx     	pea	#<L341+27
 10683 00:290B: 22 xx xx xx  	jsl	~~k_debug_integer
 10684                        ;
 10685                        ;	//tokens = k_nodelist_init(26,"signature", newTo
                    ken( k_fxstring_new("#",2),0xFF));
 10686                        ;	tokens = k_nodelist_init(26,"signature", NULL);
 10687                        	.line	1709
 10688 00:290F: F4 00 00     	pea	#^$0
 10689 00:2912: F4 00 00     	pea	#<$0
 10690 00:2915: F4 xx xx     	pea	#^L341+48
 10691 00:2918: F4 xx xx     	pea	#<L341+48
 10692 00:291B: F4 1A 00     	pea	#<$1a
 10693 00:291E: 22 xx xx xx  	jsl	~~k_nodelist_init
 10694 00:2922: 85 32        	sta	<L343+tokens_1
 10695 00:2924: 86 34        	stx	<L343+tokens_1+2
 10696                        ;
 10697                        ;	token = k_fxstring_init(256);
 10698                        	.line	1711
  Mon Sep 27 2021  9:39                                                Page 206


 10699 00:2926: F4 00 01     	pea	#<$100
 10700 00:2929: 22 xx xx xx  	jsl	~~k_fxstring_init
 10701 00:292D: 85 2E        	sta	<L343+token_1
 10702 00:292F: 86 30        	stx	<L343+token_1+2
 10703                        ;	//charTokens = k_fxstring_new("\n=+-/<*>(),",16)
                    ;
 10704                        ;	// Scan through the code one character at a time
                    , building up the list
 10705                        ;	// of tokens.
 10706                        ;	for (i = 0; i < sourceLength; i++)
 10707                        	.line	1715
 10708 00:2931: 64 21        	stz	<L343+i_1
 10709 00:2933: 82 C0 03     	brl	L10238
 10710                        L10237:
 10711                        ;	{
 10712                        	.line	1716
 10713                        ;		c = source[i];
 10714                        	.line	1717
 10715 00:2936: E2 20        	sep	#$20
 10716                        	longa	off
 10717 00:2938: A4 21        	ldy	<L343+i_1
 10718 00:293A: B7 55        	lda	[<L342+source_0],Y
 10719 00:293C: 85 23        	sta	<L343+c_1
 10720 00:293E: C2 20        	rep	#$20
 10721                        	longa	on
 10722                        ;
 10723                        ;		//k_debug_char("SOURCE CHAR:",c);
 10724                        ;		//k_debug_hex("SOURCE HEX:",c);
 10725                        ;
 10726                        ;		switch (state)
 10727                        	.line	1722
 10728 00:2940: A5 3A        	lda	<L343+state_1
 10729 00:2942: 82 9B 03     	brl	L10239
 10730                        ;		{
 10731                        	.line	1723
 10732                        ;		case STATE_DEFAULT:
 10733                        	.line	1724
 10734                        L10241:
 10735                        ;			if (k_string_indexOf(charTokens,
                    c) != -1)
 10736                        	.line	1725
 10737                        ;			{
 10738 00:2945: D4 23        	pei	<L343+c_1
 10739 00:2947: D4 2C        	pei	<L343+charTokens_1+2
 10740 00:2949: D4 2A        	pei	<L343+charTokens_1
 10741 00:294B: 22 xx xx xx  	jsl	~~k_string_indexOf
 10742 00:294F: 85 01        	sta	<R0
 10743 00:2951: A5 01        	lda	<R0
 10744 00:2953: C9 FF FF     	cmp	#<$ffffffff
 10745 00:2956: D0 03        	bne	L346
 10746 00:2958: 82 D9 00     	brl	L10242
 10747                        L346:
 10748                        	.line	1726
 10749                        ;				//k_debug_integer("TOKEN
                     TYPE:",tokenTypes[k_string_indexOf(charTokens,c)]);
 10750                        ;
 10751                        ;				k_nodelist_add(tokens,k_
                    nodelist_create(tokenTypes[k_string_indexOf(charTokens,c)],"
  Mon Sep 27 2021  9:39                                                Page 207


                    token",
 10752                        	.line	1729
 10753                        ;						        
                                            newToken( k_fxstring_new(k_string_to
                    String(c,toString),2) ,
 10754                        ;						        
                                            		  tokenTypes[k_string_in
                    dexOf(charTokens,c)]),NULL,NULL)
 10755                        ;						        
                                            );
 10756 00:295B: F4 00 00     	pea	#^$0
 10757 00:295E: F4 00 00     	pea	#<$0
 10758 00:2961: F4 00 00     	pea	#^$0
 10759 00:2964: F4 00 00     	pea	#<$0
 10760 00:2967: D4 23        	pei	<L343+c_1
 10761 00:2969: D4 2C        	pei	<L343+charTokens_1+2
 10762 00:296B: D4 2A        	pei	<L343+charTokens_1
 10763 00:296D: 22 xx xx xx  	jsl	~~k_string_indexOf
 10764 00:2971: 85 05        	sta	<R1
 10765 00:2973: A0 00 00     	ldy	#$0
 10766 00:2976: A5 05        	lda	<R1
 10767 00:2978: 10 01        	bpl	L347
 10768 00:297A: 88           	dey
 10769                        L347:
 10770 00:297B: 85 05        	sta	<R1
 10771 00:297D: 84 07        	sty	<R1+2
 10772 00:297F: D4 07        	pei	<R1+2
 10773 00:2981: D4 05        	pei	<R1
 10774 00:2983: A9 01 00     	lda	#$1
 10775                        	xref	~~~lasl
 10776 00:2986: 22 xx xx xx  	jsl	~~~lasl
 10777 00:298A: 85 01        	sta	<R0
 10778 00:298C: 86 03        	stx	<R0+2
 10779 00:298E: 18           	clc
 10780 00:298F: 7B           	tdc
 10781 00:2990: 69 3C 00     	adc	#<L343+tokenTypes_1
 10782 00:2993: 85 09        	sta	<R2
 10783 00:2995: A9 00 00     	lda	#$0
 10784 00:2998: 85 0B        	sta	<R2+2
 10785 00:299A: 18           	clc
 10786 00:299B: A5 09        	lda	<R2
 10787 00:299D: 65 01        	adc	<R0
 10788 00:299F: 85 0D        	sta	<R3
 10789 00:29A1: A5 0B        	lda	<R2+2
 10790 00:29A3: 65 03        	adc	<R0+2
 10791 00:29A5: 85 0F        	sta	<R3+2
 10792 00:29A7: A7 0D        	lda	[<R3]
 10793 00:29A9: 48           	pha
 10794 00:29AA: F4 02 00     	pea	#<$2
 10795 00:29AD: F4 00 00     	pea	#0
 10796 00:29B0: 18           	clc
 10797 00:29B1: 7B           	tdc
 10798 00:29B2: 69 24 00     	adc	#<L343+toString_1
 10799 00:29B5: 48           	pha
 10800 00:29B6: D4 23        	pei	<L343+c_1
 10801 00:29B8: 22 xx xx xx  	jsl	~~k_string_toString
 10802 00:29BC: 85 01        	sta	<R0
 10803 00:29BE: 86 03        	stx	<R0+2
  Mon Sep 27 2021  9:39                                                Page 208


 10804 00:29C0: DA           	phx
 10805 00:29C1: 48           	pha
 10806 00:29C2: 22 xx xx xx  	jsl	~~k_fxstring_new
 10807 00:29C6: 85 09        	sta	<R2
 10808 00:29C8: 86 0B        	stx	<R2+2
 10809 00:29CA: DA           	phx
 10810 00:29CB: 48           	pha
 10811 00:29CC: 22 xx xx xx  	jsl	~~newToken
 10812 00:29D0: 85 0D        	sta	<R3
 10813 00:29D2: 86 0F        	stx	<R3+2
 10814 00:29D4: DA           	phx
 10815 00:29D5: 48           	pha
 10816 00:29D6: F4 xx xx     	pea	#^L341+58
 10817 00:29D9: F4 xx xx     	pea	#<L341+58
 10818 00:29DC: D4 23        	pei	<L343+c_1
 10819 00:29DE: D4 2C        	pei	<L343+charTokens_1+2
 10820 00:29E0: D4 2A        	pei	<L343+charTokens_1
 10821 00:29E2: 22 xx xx xx  	jsl	~~k_string_indexOf
 10822 00:29E6: 85 15        	sta	<21
 10823 00:29E8: A0 00 00     	ldy	#$0
 10824 00:29EB: A5 15        	lda	<21
 10825 00:29ED: 10 01        	bpl	L348
 10826 00:29EF: 88           	dey
 10827                        L348:
 10828 00:29F0: 85 15        	sta	<21
 10829 00:29F2: 84 17        	sty	<21+2
 10830 00:29F4: D4 17        	pei	<21+2
 10831 00:29F6: D4 15        	pei	<21
 10832 00:29F8: A9 01 00     	lda	#$1
 10833                        	xref	~~~lasl
 10834 00:29FB: 22 xx xx xx  	jsl	~~~lasl
 10835 00:29FF: 85 11        	sta	<17
 10836 00:2A01: 86 13        	stx	<17+2
 10837 00:2A03: 18           	clc
 10838 00:2A04: 7B           	tdc
 10839 00:2A05: 69 3C 00     	adc	#<L343+tokenTypes_1
 10840 00:2A08: 85 19        	sta	<25
 10841 00:2A0A: A9 00 00     	lda	#$0
 10842 00:2A0D: 85 1B        	sta	<25+2
 10843 00:2A0F: 18           	clc
 10844 00:2A10: A5 19        	lda	<25
 10845 00:2A12: 65 11        	adc	<17
 10846 00:2A14: 85 1D        	sta	<29
 10847 00:2A16: A5 1B        	lda	<25+2
 10848 00:2A18: 65 13        	adc	<17+2
 10849 00:2A1A: 85 1F        	sta	<29+2
 10850 00:2A1C: A7 1D        	lda	[<29]
 10851 00:2A1E: 48           	pha
 10852 00:2A1F: 22 xx xx xx  	jsl	~~k_nodelist_create
 10853 00:2A23: 85 11        	sta	<17
 10854 00:2A25: 86 13        	stx	<17+2
 10855 00:2A27: DA           	phx
 10856 00:2A28: 48           	pha
 10857 00:2A29: D4 34        	pei	<L343+tokens_1+2
 10858 00:2A2B: D4 32        	pei	<L343+tokens_1
 10859 00:2A2D: 22 xx xx xx  	jsl	~~k_nodelist_add
 10860                        ;				//tokens.add(new Token(C
                    haracter.toString(c), tokenTypes[charTokens.indexOf(c)]));
  Mon Sep 27 2021  9:39                                                Page 209


 10861                        ;			}
 10862                        	.line	1734
 10863                        ;			else if (isalpha(c))
 10864 00:2A31: 82 79 00     	brl	L10243
 10865                        L10242:
 10866                        	.line	1735
 10867                        ;			{
 10868 00:2A34: A5 23        	lda	<L343+c_1
 10869 00:2A36: 29 FF 00     	and	#$ff
 10870 00:2A39: 85 01        	sta	<R0
 10871 00:2A3B: E2 20        	sep	#$20
 10872                        	longa	off
 10873 00:2A3D: A6 01        	ldx	<R0
 10874 00:2A3F: BD xx xx     	lda	|~~_ctype+1,X
 10875 00:2A42: 29 03        	and	#<$3
 10876 00:2A44: C2 20        	rep	#$20
 10877                        	longa	on
 10878 00:2A46: D0 03        	bne	L349
 10879 00:2A48: 82 12 00     	brl	L10244
 10880                        L349:
 10881                        	.line	1736
 10882                        ;				k_fxstring_addchar(token
                    ,c);
 10883                        	.line	1737
 10884 00:2A4B: D4 23        	pei	<L343+c_1
 10885 00:2A4D: D4 30        	pei	<L343+token_1+2
 10886 00:2A4F: D4 2E        	pei	<L343+token_1
 10887 00:2A51: 22 xx xx xx  	jsl	~~k_fxstring_addchar
 10888                        ;				state = STATE_WORD;
 10889                        	.line	1738
 10890 00:2A55: A9 01 00     	lda	#$1
 10891 00:2A58: 85 3A        	sta	<L343+state_1
 10892                        ;			}
 10893                        	.line	1739
 10894                        ;			else if (isdigit(c))
 10895 00:2A5A: 82 50 00     	brl	L10245
 10896                        L10244:
 10897                        	.line	1740
 10898                        ;			{
 10899 00:2A5D: A5 23        	lda	<L343+c_1
 10900 00:2A5F: 29 FF 00     	and	#$ff
 10901 00:2A62: 85 01        	sta	<R0
 10902 00:2A64: E2 20        	sep	#$20
 10903                        	longa	off
 10904 00:2A66: A6 01        	ldx	<R0
 10905 00:2A68: BD xx xx     	lda	|~~_ctype+1,X
 10906 00:2A6B: 29 04        	and	#<$4
 10907 00:2A6D: C2 20        	rep	#$20
 10908                        	longa	on
 10909 00:2A6F: D0 03        	bne	L350
 10910 00:2A71: 82 12 00     	brl	L10246
 10911                        L350:
 10912                        	.line	1741
 10913                        ;				k_fxstring_addchar(token
                    ,c);
 10914                        	.line	1742
 10915 00:2A74: D4 23        	pei	<L343+c_1
 10916 00:2A76: D4 30        	pei	<L343+token_1+2
  Mon Sep 27 2021  9:39                                                Page 210


 10917 00:2A78: D4 2E        	pei	<L343+token_1
 10918 00:2A7A: 22 xx xx xx  	jsl	~~k_fxstring_addchar
 10919                        ;				state = STATE_NUMBER;
 10920                        	.line	1743
 10921 00:2A7E: A9 02 00     	lda	#$2
 10922 00:2A81: 85 3A        	sta	<L343+state_1
 10923                        ;			}
 10924                        	.line	1744
 10925                        ;			else if (c == '"')
 10926 00:2A83: 82 27 00     	brl	L10247
 10927                        L10246:
 10928                        	.line	1745
 10929                        ;			{
 10930 00:2A86: E2 20        	sep	#$20
 10931                        	longa	off
 10932 00:2A88: A5 23        	lda	<L343+c_1
 10933 00:2A8A: C9 22        	cmp	#<$22
 10934 00:2A8C: C2 20        	rep	#$20
 10935                        	longa	on
 10936 00:2A8E: F0 03        	beq	L351
 10937 00:2A90: 82 08 00     	brl	L10248
 10938                        L351:
 10939                        	.line	1746
 10940                        ;				state = STATE_STRING;
 10941                        	.line	1747
 10942 00:2A93: A9 03 00     	lda	#$3
 10943 00:2A96: 85 3A        	sta	<L343+state_1
 10944                        ;			}
 10945                        	.line	1748
 10946                        ;			else if (c == '\'')
 10947 00:2A98: 82 12 00     	brl	L10249
 10948                        L10248:
 10949                        	.line	1749
 10950                        ;			{
 10951 00:2A9B: E2 20        	sep	#$20
 10952                        	longa	off
 10953 00:2A9D: A5 23        	lda	<L343+c_1
 10954 00:2A9F: C9 27        	cmp	#<$27
 10955 00:2AA1: C2 20        	rep	#$20
 10956                        	longa	on
 10957 00:2AA3: F0 03        	beq	L352
 10958 00:2AA5: 82 05 00     	brl	L10250
 10959                        L352:
 10960                        	.line	1750
 10961                        ;				state = STATE_COMMENT;
 10962                        	.line	1751
 10963 00:2AA8: A9 04 00     	lda	#$4
 10964 00:2AAB: 85 3A        	sta	<L343+state_1
 10965                        ;			}
 10966                        	.line	1752
 10967                        ;
 10968                        ;			break;
 10969                        L10250:
 10970                        L10249:
 10971                        L10247:
 10972                        L10245:
 10973                        L10243:
 10974                        	.line	1754
  Mon Sep 27 2021  9:39                                                Page 211


 10975 00:2AAD: 82 44 02     	brl	L10240
 10976                        ;
 10977                        ;		case STATE_WORD:
 10978                        	.line	1756
 10979                        L10251:
 10980                        ;			if (isalpha(c) || isdigit(c))
 10981                        	.line	1757
 10982                        ;			{
 10983 00:2AB0: A5 23        	lda	<L343+c_1
 10984 00:2AB2: 29 FF 00     	and	#$ff
 10985 00:2AB5: 85 01        	sta	<R0
 10986 00:2AB7: E2 20        	sep	#$20
 10987                        	longa	off
 10988 00:2AB9: A6 01        	ldx	<R0
 10989 00:2ABB: BD xx xx     	lda	|~~_ctype+1,X
 10990 00:2ABE: 29 03        	and	#<$3
 10991 00:2AC0: C2 20        	rep	#$20
 10992                        	longa	on
 10993 00:2AC2: F0 03        	beq	L354
 10994 00:2AC4: 82 17 00     	brl	L353
 10995                        L354:
 10996 00:2AC7: A5 23        	lda	<L343+c_1
 10997 00:2AC9: 29 FF 00     	and	#$ff
 10998 00:2ACC: 85 05        	sta	<R1
 10999 00:2ACE: E2 20        	sep	#$20
 11000                        	longa	off
 11001 00:2AD0: A6 05        	ldx	<R1
 11002 00:2AD2: BD xx xx     	lda	|~~_ctype+1,X
 11003 00:2AD5: 29 04        	and	#<$4
 11004 00:2AD7: C2 20        	rep	#$20
 11005                        	longa	on
 11006 00:2AD9: D0 03        	bne	L355
 11007 00:2ADB: 82 0D 00     	brl	L10252
 11008                        L355:
 11009                        L353:
 11010                        	.line	1758
 11011                        ;				k_fxstring_addchar(token
                    ,c);
 11012                        	.line	1759
 11013 00:2ADE: D4 23        	pei	<L343+c_1
 11014 00:2AE0: D4 30        	pei	<L343+token_1+2
 11015 00:2AE2: D4 2E        	pei	<L343+token_1
 11016 00:2AE4: 22 xx xx xx  	jsl	~~k_fxstring_addchar
 11017                        ;			}
 11018                        	.line	1760
 11019                        ;			else if (c == '.')
 11020 00:2AE8: 82 EF 00     	brl	L10253
 11021                        L10252:
 11022                        	.line	1761
 11023                        ;			{
 11024 00:2AEB: E2 20        	sep	#$20
 11025                        	longa	off
 11026 00:2AED: A5 23        	lda	<L343+c_1
 11027 00:2AEF: C9 2E        	cmp	#<$2e
 11028 00:2AF1: C2 20        	rep	#$20
 11029                        	longa	on
 11030 00:2AF3: F0 03        	beq	L356
 11031 00:2AF5: 82 0D 00     	brl	L10254
  Mon Sep 27 2021  9:39                                                Page 212


 11032                        L356:
 11033                        	.line	1762
 11034                        ;				k_fxstring_addchar(token
                    ,c);
 11035                        	.line	1763
 11036 00:2AF8: D4 23        	pei	<L343+c_1
 11037 00:2AFA: D4 30        	pei	<L343+token_1+2
 11038 00:2AFC: D4 2E        	pei	<L343+token_1
 11039 00:2AFE: 22 xx xx xx  	jsl	~~k_fxstring_addchar
 11040                        ;			}
 11041                        	.line	1764
 11042                        ;			else if (c == '_')
 11043 00:2B02: 82 D5 00     	brl	L10255
 11044                        L10254:
 11045                        	.line	1765
 11046                        ;			{
 11047 00:2B05: E2 20        	sep	#$20
 11048                        	longa	off
 11049 00:2B07: A5 23        	lda	<L343+c_1
 11050 00:2B09: C9 5F        	cmp	#<$5f
 11051 00:2B0B: C2 20        	rep	#$20
 11052                        	longa	on
 11053 00:2B0D: F0 03        	beq	L357
 11054 00:2B0F: 82 0D 00     	brl	L10256
 11055                        L357:
 11056                        	.line	1766
 11057                        ;				k_fxstring_addchar(token
                    ,c);
 11058                        	.line	1767
 11059 00:2B12: D4 23        	pei	<L343+c_1
 11060 00:2B14: D4 30        	pei	<L343+token_1+2
 11061 00:2B16: D4 2E        	pei	<L343+token_1
 11062 00:2B18: 22 xx xx xx  	jsl	~~k_fxstring_addchar
 11063                        ;			}
 11064                        	.line	1768
 11065                        ;			else if (c == '[')
 11066 00:2B1C: 82 BB 00     	brl	L10257
 11067                        L10256:
 11068                        	.line	1769
 11069                        ;			{
 11070 00:2B1F: E2 20        	sep	#$20
 11071                        	longa	off
 11072 00:2B21: A5 23        	lda	<L343+c_1
 11073 00:2B23: C9 5B        	cmp	#<$5b
 11074 00:2B25: C2 20        	rep	#$20
 11075                        	longa	on
 11076 00:2B27: F0 03        	beq	L358
 11077 00:2B29: 82 0D 00     	brl	L10258
 11078                        L358:
 11079                        	.line	1770
 11080                        ;				k_fxstring_addchar(token
                    ,c);
 11081                        	.line	1771
 11082 00:2B2C: D4 23        	pei	<L343+c_1
 11083 00:2B2E: D4 30        	pei	<L343+token_1+2
 11084 00:2B30: D4 2E        	pei	<L343+token_1
 11085 00:2B32: 22 xx xx xx  	jsl	~~k_fxstring_addchar
 11086                        ;			}
  Mon Sep 27 2021  9:39                                                Page 213


 11087                        	.line	1772
 11088                        ;			else if (c == ']')
 11089 00:2B36: 82 A1 00     	brl	L10259
 11090                        L10258:
 11091                        	.line	1773
 11092                        ;			{
 11093 00:2B39: E2 20        	sep	#$20
 11094                        	longa	off
 11095 00:2B3B: A5 23        	lda	<L343+c_1
 11096 00:2B3D: C9 5D        	cmp	#<$5d
 11097 00:2B3F: C2 20        	rep	#$20
 11098                        	longa	on
 11099 00:2B41: F0 03        	beq	L359
 11100 00:2B43: 82 0D 00     	brl	L10260
 11101                        L359:
 11102                        	.line	1774
 11103                        ;				k_fxstring_addchar(token
                    ,c);
 11104                        	.line	1775
 11105 00:2B46: D4 23        	pei	<L343+c_1
 11106 00:2B48: D4 30        	pei	<L343+token_1+2
 11107 00:2B4A: D4 2E        	pei	<L343+token_1
 11108 00:2B4C: 22 xx xx xx  	jsl	~~k_fxstring_addchar
 11109                        ;			}
 11110                        	.line	1776
 11111                        ;			/*
 11112                        ;			else if (c == ':')
 11113                        ;			{
 11114                        ;				k_nodelist_add(tokens,k_
                    nodelist_create(TTYPE_LABEL,"token",newToken(token, TTYPE_LA
                    BEL),NULL,NULL));
 11115                        ;
 11116                        ;				k_fxstring_reinit(token)
                    ;
 11117                        ;				state = STATE_DEFAULT;
 11118                        ;			}
 11119                        ;			*/
 11120                        ;			else
 11121 00:2B50: 82 87 00     	brl	L10261
 11122                        L10260:
 11123                        ;			{
 11124                        	.line	1787
 11125                        ;				tok = newToken(token, TT
                    YPE_WORD);
 11126                        	.line	1788
 11127 00:2B53: F4 00 00     	pea	#<$0
 11128 00:2B56: D4 30        	pei	<L343+token_1+2
 11129 00:2B58: D4 2E        	pei	<L343+token_1
 11130 00:2B5A: 22 xx xx xx  	jsl	~~newToken
 11131 00:2B5E: 85 36        	sta	<L343+tok_1
 11132 00:2B60: 86 38        	stx	<L343+tok_1+2
 11133                        ;
 11134                        ;				if (k_fxstring_equals(to
                    ken,"if"))
 11135                        	.line	1790
 11136                        ;				{
 11137 00:2B62: F4 xx xx     	pea	#^L341+64
 11138 00:2B65: F4 xx xx     	pea	#<L341+64
  Mon Sep 27 2021  9:39                                                Page 214


 11139 00:2B68: D4 30        	pei	<L343+token_1+2
 11140 00:2B6A: D4 2E        	pei	<L343+token_1
 11141 00:2B6C: 22 xx xx xx  	jsl	~~k_fxstring_equals
 11142 00:2B70: 29 FF 00     	and	#$ff
 11143 00:2B73: D0 03        	bne	L360
 11144 00:2B75: 82 0C 00     	brl	L10262
 11145                        L360:
 11146                        	.line	1791
 11147                        ;					tok->depth = nes
                    tedIf;
 11148                        	.line	1792
 11149 00:2B78: A5 26        	lda	<L343+nestedIf_1
 11150 00:2B7A: A0 02 00     	ldy	#$2
 11151 00:2B7D: 97 36        	sta	[<L343+tok_1],Y
 11152                        ;					nestedIf++;
 11153                        	.line	1793
 11154 00:2B7F: E6 26        	inc	<L343+nestedIf_1
 11155                        ;				}
 11156                        	.line	1794
 11157                        ;				else if (k_fxstring_equa
                    ls(token,"endif"))
 11158 00:2B81: 82 1F 00     	brl	L10263
 11159                        L10262:
 11160                        	.line	1795
 11161                        ;				{
 11162 00:2B84: F4 xx xx     	pea	#^L341+67
 11163 00:2B87: F4 xx xx     	pea	#<L341+67
 11164 00:2B8A: D4 30        	pei	<L343+token_1+2
 11165 00:2B8C: D4 2E        	pei	<L343+token_1
 11166 00:2B8E: 22 xx xx xx  	jsl	~~k_fxstring_equals
 11167 00:2B92: 29 FF 00     	and	#$ff
 11168 00:2B95: D0 03        	bne	L361
 11169 00:2B97: 82 09 00     	brl	L10264
 11170                        L361:
 11171                        	.line	1796
 11172                        ;					nestedIf--;
 11173                        	.line	1797
 11174 00:2B9A: C6 26        	dec	<L343+nestedIf_1
 11175                        ;					tok->depth = nes
                    tedIf;
 11176                        	.line	1798
 11177 00:2B9C: A5 26        	lda	<L343+nestedIf_1
 11178 00:2B9E: A0 02 00     	ldy	#$2
 11179 00:2BA1: 97 36        	sta	[<L343+tok_1],Y
 11180                        ;				}
 11181                        	.line	1799
 11182                        ;
 11183                        ;				k_nodelist_add(tokens,k_
                    nodelist_create(tok->type,"token",tok,NULL,NULL));
 11184                        L10264:
 11185                        L10263:
 11186                        	.line	1801
 11187 00:2BA3: F4 00 00     	pea	#^$0
 11188 00:2BA6: F4 00 00     	pea	#<$0
 11189 00:2BA9: F4 00 00     	pea	#^$0
 11190 00:2BAC: F4 00 00     	pea	#<$0
 11191 00:2BAF: D4 38        	pei	<L343+tok_1+2
 11192 00:2BB1: D4 36        	pei	<L343+tok_1
  Mon Sep 27 2021  9:39                                                Page 215


 11193 00:2BB3: F4 xx xx     	pea	#^L341+73
 11194 00:2BB6: F4 xx xx     	pea	#<L341+73
 11195 00:2BB9: A7 36        	lda	[<L343+tok_1]
 11196 00:2BBB: 48           	pha
 11197 00:2BBC: 22 xx xx xx  	jsl	~~k_nodelist_create
 11198 00:2BC0: 85 01        	sta	<R0
 11199 00:2BC2: 86 03        	stx	<R0+2
 11200 00:2BC4: DA           	phx
 11201 00:2BC5: 48           	pha
 11202 00:2BC6: D4 34        	pei	<L343+tokens_1+2
 11203 00:2BC8: D4 32        	pei	<L343+tokens_1
 11204 00:2BCA: 22 xx xx xx  	jsl	~~k_nodelist_add
 11205                        ;				k_fxstring_reinit(token)
                    ;
 11206                        	.line	1802
 11207 00:2BCE: D4 30        	pei	<L343+token_1+2
 11208 00:2BD0: D4 2E        	pei	<L343+token_1
 11209 00:2BD2: 22 xx xx xx  	jsl	~~k_fxstring_reinit
 11210                        ;				state = STATE_DEFAULT;
 11211                        	.line	1803
 11212 00:2BD6: 64 3A        	stz	<L343+state_1
 11213                        ;				i--; // Reprocess this c
                    haracter in the default state.
 11214                        	.line	1804
 11215 00:2BD8: C6 21        	dec	<L343+i_1
 11216                        ;			}
 11217                        	.line	1805
 11218                        L10261:
 11219                        L10259:
 11220                        L10257:
 11221                        L10255:
 11222                        L10253:
 11223                        ;			break;
 11224                        	.line	1806
 11225 00:2BDA: 82 17 01     	brl	L10240
 11226                        ;
 11227                        ;		case STATE_NUMBER:
 11228                        	.line	1808
 11229                        L10265:
 11230                        ;			// HACK: Negative numbers and fl
                    oating points aren't supported.
 11231                        ;			// To get a negative number, jus
                    t do 0 - <your number>.
 11232                        ;			// To get a floating point, divi
                    de.
 11233                        ;			if (isdigit(c))
 11234                        	.line	1812
 11235                        ;			{
 11236 00:2BDD: A5 23        	lda	<L343+c_1
 11237 00:2BDF: 29 FF 00     	and	#$ff
 11238 00:2BE2: 85 01        	sta	<R0
 11239 00:2BE4: E2 20        	sep	#$20
 11240                        	longa	off
 11241 00:2BE6: A6 01        	ldx	<R0
 11242 00:2BE8: BD xx xx     	lda	|~~_ctype+1,X
 11243 00:2BEB: 29 04        	and	#<$4
 11244 00:2BED: C2 20        	rep	#$20
 11245                        	longa	on
  Mon Sep 27 2021  9:39                                                Page 216


 11246 00:2BEF: D0 03        	bne	L362
 11247 00:2BF1: 82 0D 00     	brl	L10266
 11248                        L362:
 11249                        	.line	1813
 11250                        ;				k_fxstring_addchar(token
                    ,c);
 11251                        	.line	1814
 11252 00:2BF4: D4 23        	pei	<L343+c_1
 11253 00:2BF6: D4 30        	pei	<L343+token_1+2
 11254 00:2BF8: D4 2E        	pei	<L343+token_1
 11255 00:2BFA: 22 xx xx xx  	jsl	~~k_fxstring_addchar
 11256                        ;			}
 11257                        	.line	1815
 11258                        ;			else if (c == '.')
 11259 00:2BFE: 82 5E 00     	brl	L10267
 11260                        L10266:
 11261                        	.line	1816
 11262                        ;			{
 11263 00:2C01: E2 20        	sep	#$20
 11264                        	longa	off
 11265 00:2C03: A5 23        	lda	<L343+c_1
 11266 00:2C05: C9 2E        	cmp	#<$2e
 11267 00:2C07: C2 20        	rep	#$20
 11268                        	longa	on
 11269 00:2C09: F0 03        	beq	L363
 11270 00:2C0B: 82 0D 00     	brl	L10268
 11271                        L363:
 11272                        	.line	1817
 11273                        ;				k_fxstring_addchar(token
                    ,c);
 11274                        	.line	1818
 11275 00:2C0E: D4 23        	pei	<L343+c_1
 11276 00:2C10: D4 30        	pei	<L343+token_1+2
 11277 00:2C12: D4 2E        	pei	<L343+token_1
 11278 00:2C14: 22 xx xx xx  	jsl	~~k_fxstring_addchar
 11279                        ;			}
 11280                        	.line	1819
 11281                        ;			else
 11282 00:2C18: 82 44 00     	brl	L10269
 11283                        L10268:
 11284                        ;			{
 11285                        	.line	1821
 11286                        ;				k_nodelist_add(tokens,k_
                    nodelist_create(TTYPE_NUMBER,"token",newToken(token, TTYPE_N
                    UMBER),NULL,NULL));
 11287                        	.line	1822
 11288 00:2C1B: F4 00 00     	pea	#^$0
 11289 00:2C1E: F4 00 00     	pea	#<$0
 11290 00:2C21: F4 00 00     	pea	#^$0
 11291 00:2C24: F4 00 00     	pea	#<$0
 11292 00:2C27: F4 01 00     	pea	#<$1
 11293 00:2C2A: D4 30        	pei	<L343+token_1+2
 11294 00:2C2C: D4 2E        	pei	<L343+token_1
 11295 00:2C2E: 22 xx xx xx  	jsl	~~newToken
 11296 00:2C32: 85 01        	sta	<R0
 11297 00:2C34: 86 03        	stx	<R0+2
 11298 00:2C36: DA           	phx
 11299 00:2C37: 48           	pha
  Mon Sep 27 2021  9:39                                                Page 217


 11300 00:2C38: F4 xx xx     	pea	#^L341+79
 11301 00:2C3B: F4 xx xx     	pea	#<L341+79
 11302 00:2C3E: F4 01 00     	pea	#<$1
 11303 00:2C41: 22 xx xx xx  	jsl	~~k_nodelist_create
 11304 00:2C45: 85 05        	sta	<R1
 11305 00:2C47: 86 07        	stx	<R1+2
 11306 00:2C49: DA           	phx
 11307 00:2C4A: 48           	pha
 11308 00:2C4B: D4 34        	pei	<L343+tokens_1+2
 11309 00:2C4D: D4 32        	pei	<L343+tokens_1
 11310 00:2C4F: 22 xx xx xx  	jsl	~~k_nodelist_add
 11311                        ;				k_fxstring_reinit(token)
                    ;
 11312                        	.line	1823
 11313 00:2C53: D4 30        	pei	<L343+token_1+2
 11314 00:2C55: D4 2E        	pei	<L343+token_1
 11315 00:2C57: 22 xx xx xx  	jsl	~~k_fxstring_reinit
 11316                        ;				state = STATE_DEFAULT;
 11317                        	.line	1824
 11318 00:2C5B: 64 3A        	stz	<L343+state_1
 11319                        ;				i--; // Reprocess this c
                    haracter in the default state.
 11320                        	.line	1825
 11321 00:2C5D: C6 21        	dec	<L343+i_1
 11322                        ;			}
 11323                        	.line	1826
 11324                        L10269:
 11325                        L10267:
 11326                        ;			break;
 11327                        	.line	1827
 11328 00:2C5F: 82 92 00     	brl	L10240
 11329                        ;
 11330                        ;		case STATE_STRING:
 11331                        	.line	1829
 11332                        L10270:
 11333                        ;			if (c == '"' || c == '\n')
 11334                        	.line	1830
 11335                        ;			{
 11336 00:2C62: E2 20        	sep	#$20
 11337                        	longa	off
 11338 00:2C64: A5 23        	lda	<L343+c_1
 11339 00:2C66: C9 22        	cmp	#<$22
 11340 00:2C68: C2 20        	rep	#$20
 11341                        	longa	on
 11342 00:2C6A: D0 03        	bne	L365
 11343 00:2C6C: 82 0D 00     	brl	L364
 11344                        L365:
 11345 00:2C6F: E2 20        	sep	#$20
 11346                        	longa	off
 11347 00:2C71: A5 23        	lda	<L343+c_1
 11348 00:2C73: C9 0A        	cmp	#<$a
 11349 00:2C75: C2 20        	rep	#$20
 11350                        	longa	on
 11351 00:2C77: F0 03        	beq	L366
 11352 00:2C79: 82 45 00     	brl	L10271
 11353                        L366:
 11354                        L364:
 11355                        	.line	1831
  Mon Sep 27 2021  9:39                                                Page 218


 11356                        ;				k_nodelist_add(tokens,k_
                    nodelist_create(TTYPE_STRING,"token",newToken(token, TTYPE_S
                    TRING),NULL,NULL));
 11357                        	.line	1832
 11358 00:2C7C: F4 00 00     	pea	#^$0
 11359 00:2C7F: F4 00 00     	pea	#<$0
 11360 00:2C82: F4 00 00     	pea	#^$0
 11361 00:2C85: F4 00 00     	pea	#<$0
 11362 00:2C88: F4 02 00     	pea	#<$2
 11363 00:2C8B: D4 30        	pei	<L343+token_1+2
 11364 00:2C8D: D4 2E        	pei	<L343+token_1
 11365 00:2C8F: 22 xx xx xx  	jsl	~~newToken
 11366 00:2C93: 85 01        	sta	<R0
 11367 00:2C95: 86 03        	stx	<R0+2
 11368 00:2C97: DA           	phx
 11369 00:2C98: 48           	pha
 11370 00:2C99: F4 xx xx     	pea	#^L341+85
 11371 00:2C9C: F4 xx xx     	pea	#<L341+85
 11372 00:2C9F: F4 02 00     	pea	#<$2
 11373 00:2CA2: 22 xx xx xx  	jsl	~~k_nodelist_create
 11374 00:2CA6: 85 05        	sta	<R1
 11375 00:2CA8: 86 07        	stx	<R1+2
 11376 00:2CAA: DA           	phx
 11377 00:2CAB: 48           	pha
 11378 00:2CAC: D4 34        	pei	<L343+tokens_1+2
 11379 00:2CAE: D4 32        	pei	<L343+tokens_1
 11380 00:2CB0: 22 xx xx xx  	jsl	~~k_nodelist_add
 11381                        ;
 11382                        ;				k_fxstring_reinit(token)
                    ;
 11383                        	.line	1834
 11384 00:2CB4: D4 30        	pei	<L343+token_1+2
 11385 00:2CB6: D4 2E        	pei	<L343+token_1
 11386 00:2CB8: 22 xx xx xx  	jsl	~~k_fxstring_reinit
 11387                        ;				state = STATE_DEFAULT;
 11388                        	.line	1835
 11389 00:2CBC: 64 3A        	stz	<L343+state_1
 11390                        ;			}
 11391                        	.line	1836
 11392                        ;			else
 11393 00:2CBE: 82 0A 00     	brl	L10272
 11394                        L10271:
 11395                        ;			{
 11396                        	.line	1838
 11397                        ;				k_fxstring_addchar(token
                    ,c);
 11398                        	.line	1839
 11399 00:2CC1: D4 23        	pei	<L343+c_1
 11400 00:2CC3: D4 30        	pei	<L343+token_1+2
 11401 00:2CC5: D4 2E        	pei	<L343+token_1
 11402 00:2CC7: 22 xx xx xx  	jsl	~~k_fxstring_addchar
 11403                        ;			}
 11404                        	.line	1840
 11405                        L10272:
 11406                        ;			break;
 11407                        	.line	1841
 11408 00:2CCB: 82 26 00     	brl	L10240
 11409                        ;
  Mon Sep 27 2021  9:39                                                Page 219


 11410                        ;		case STATE_COMMENT:
 11411                        	.line	1843
 11412                        L10273:
 11413                        ;			if (c == '\n')
 11414                        	.line	1844
 11415                        ;			{
 11416 00:2CCE: E2 20        	sep	#$20
 11417                        	longa	off
 11418 00:2CD0: A5 23        	lda	<L343+c_1
 11419 00:2CD2: C9 0A        	cmp	#<$a
 11420 00:2CD4: C2 20        	rep	#$20
 11421                        	longa	on
 11422 00:2CD6: F0 03        	beq	L367
 11423 00:2CD8: 82 02 00     	brl	L10274
 11424                        L367:
 11425                        	.line	1845
 11426                        ;				state = STATE_DEFAULT;
 11427                        	.line	1846
 11428 00:2CDB: 64 3A        	stz	<L343+state_1
 11429                        ;			}
 11430                        	.line	1847
 11431                        ;			break;
 11432                        L10274:
 11433                        	.line	1848
 11434 00:2CDD: 82 14 00     	brl	L10240
 11435                        ;		}
 11436                        	.line	1849
 11437                        L10239:
 11438                        	xref	~~~fsw
 11439 00:2CE0: 22 xx xx xx  	jsl	~~~fsw
 11440 00:2CE4: 00 00        	dw	0
 11441 00:2CE6: 05 00        	dw	5
 11442 00:2CE8: xx xx        	dw	L10240-1
 11443 00:2CEA: xx xx        	dw	L10241-1
 11444 00:2CEC: xx xx        	dw	L10251-1
 11445 00:2CEE: xx xx        	dw	L10265-1
 11446 00:2CF0: xx xx        	dw	L10270-1
 11447 00:2CF2: xx xx        	dw	L10273-1
 11448                        L10240:
 11449                        ;	}
 11450                        	.line	1850
 11451                        L10235:
 11452 00:2CF4: E6 21        	inc	<L343+i_1
 11453                        L10238:
 11454 00:2CF6: A5 21        	lda	<L343+i_1
 11455 00:2CF8: C5 28        	cmp	<L343+sourceLength_1
 11456 00:2CFA: B0 03        	bcs	L368
 11457 00:2CFC: 82 37 FC     	brl	L10237
 11458                        L368:
 11459                        L10236:
 11460                        ;
 11461                        ;	return tokens;
 11462                        	.line	1852
 11463 00:2CFF: A6 34        	ldx	<L343+tokens_1+2
 11464 00:2D01: A5 32        	lda	<L343+tokens_1
 11465                        L369:
 11466 00:2D03: A8           	tay
 11467 00:2D04: A5 53        	lda	<L342+2
  Mon Sep 27 2021  9:39                                                Page 220


 11468 00:2D06: 85 57        	sta	<L342+2+4
 11469 00:2D08: A5 52        	lda	<L342+1
 11470 00:2D0A: 85 56        	sta	<L342+1+4
 11471 00:2D0C: 2B           	pld
 11472 00:2D0D: 3B           	tsc
 11473 00:2D0E: 18           	clc
 11474 00:2D0F: 69 55 00     	adc	#L342+4
 11475 00:2D12: 1B           	tcs
 11476 00:2D13: 98           	tya
 11477 00:2D14: 6B           	rtl
 11478                        ;
 11479                        ;	//return NULL;
 11480                        ;}
 11481                        	.line	1855
 11482                        	.endblock	1855
 11483             00000051   L342	equ	81
 11484             00000021   L343	equ	33
 11485                        	ends
 11486                        	efunc
 11487                        	.endfunc	1855,33,81
 11488                        	.line	1855
 11489                        	data
 11490                        L341:
 11491 00:09AC: 0A 3D 2B 2D  	db	$0A,$3D,$2B,$2D,$2F,$3C,$2A,$3E,$28,$29,
                    $2C,$00,$20,$00,$53
       00:09B0: 2F 3C 2A 3E 
       00:09B4: 28 29 2C 00 
       00:09B8: 20 00 53 
 11492 00:09BB: 4F 55 52 43  	db	$4F,$55,$52,$43,$45,$20,$4C,$49,$4E,$45,
                    $3A,$00,$53,$4F,$55
       00:09BF: 45 20 4C 49 
       00:09C3: 4E 45 3A 00 
       00:09C7: 53 4F 55 
 11493 00:09CA: 52 43 45 20  	db	$52,$43,$45,$20,$73,$6F,$75,$72,$63,$65,
                    $4C,$65,$6E,$67,$74
       00:09CE: 73 6F 75 72 
       00:09D2: 63 65 4C 65 
       00:09D6: 6E 67 74 
 11494 00:09D9: 68 3A 00 73  	db	$68,$3A,$00,$73,$69,$67,$6E,$61,$74,$75,
                    $72,$65,$00,$74,$6F
       00:09DD: 69 67 6E 61 
       00:09E1: 74 75 72 65 
       00:09E5: 00 74 6F 
 11495 00:09E8: 6B 65 6E 00  	db	$6B,$65,$6E,$00,$69,$66,$00,$65,$6E,$64,
                    $69,$66,$00,$74,$6F
       00:09EC: 69 66 00 65 
       00:09F0: 6E 64 69 66 
       00:09F4: 00 74 6F 
 11496 00:09F7: 6B 65 6E 00  	db	$6B,$65,$6E,$00,$74,$6F,$6B,$65,$6E,$00,
                    $74,$6F,$6B,$65,$6E
       00:09FB: 74 6F 6B 65 
       00:09FF: 6E 00 74 6F 
       00:0A03: 6B 65 6E 
 11497 00:0A06: 00           	db	$00
 11498 00:0A07:              	ends
 11499                        ;
 11500                        ;
 11501                        	.line	1856
  Mon Sep 27 2021  9:39                                                Page 221


 11502                        	.file	"G:\devprojects\c256Foenix\fxos\FXOSWork
                    space\FXOS-Beta\src\fxconsole.c",1677
 11503                        	xref	~~cmd_LINEUP
 11504                        	xref	~~cmd_RESUME
 11505                        	xref	~~cmd_PAUSE
 11506                        	xref	~~cmd_TIME
 11507                        	xref	~~cmd_EXIT
 11508                        	xref	~~cmd_START
 11509                        	xref	~~cmd_Window
 11510                        	xref	~~cmd_SEND
 11511                        	xref	~~cmd_DISPLAY
 11512                        	xref	~~cmd_CHRDIR
 11513                        	xref	~~cmd_TASKS
 11514                        	xref	~~cmd_BACK
 11515                        	xref	~~cmd_FRONT
 11516                        	xref	~~cmd_NEWDIR
 11517                        	xref	~~cmd_INIT
 11518                        	xref	~~cmd_BCOLOR
 11519                        	xref	~~cmd_FCOLOR
 11520                        	xref	~~cmd_VOL
 11521                        	xref	~~cmd_DIR
 11522                        	xref	~~cmd_TESTSD
 11523                        	xref	~~cmd_WORKBENCH
 11524                        	xref	~~cmd_CLEAR
 11525                        	xref	~~k_send_process_command_message
 11526                        	xref	~~k_send_message
 11527                        	xref	~~k_create_ui_window_class
 11528                        	xref	~~k_vdraw_ui_window
 11529                        	xref	~~k_put_winicon_point
 11530                        	xref	~~k_draw_text_point
 11531                        	xref	~~k_put_font
 11532                        	xref	~~setColors
 11533                        	xref	~~k_mem_deallocate_heap
 11534                        	xref	~~k_mem_allocate_heap
 11535                        	xref	~~k_exec_get_current_process
 11536                        	xref	~~k_exec_throw_exception
 11537                        	xref	~~k_debug_strings
 11538                        	xref	~~k_debug_message
 11539                        	xref	~~k_debug_hex
 11540                        	xref	~~k_debug_long
 11541                        	xref	~~k_debug_integer
 11542                        	xref	~~k_debug_pointer
 11543                        	xref	~~k_debug_char
 11544                        	xref	~~k_debug_string
 11545                        	xref	~~k_getZeroPage
 11546                        	xref	~~k_nodelist_foreach_data
 11547                        	xref	~~k_nodelist_add
 11548                        	xref	~~k_nodelist_create
 11549                        	xref	~~k_nodelist_init
 11550                        	xref	~~k_to_uppercase
 11551                        	xref	~~k_string_copy_string
 11552                        	xref	~~k_string_toString
 11553                        	xref	~~k_string_indexOf
 11554                        	xref	~~k_fxstring_equals
 11555                        	xref	~~k_fxstring_copy_string
 11556                        	xref	~~k_fxstring_add
 11557                        	xref	~~k_fxstring_addchar
 11558                        	xref	~~k_fxstring_reinit
  Mon Sep 27 2021  9:39                                                Page 222


 11559                        	xref	~~k_fxstring_new
 11560                        	xref	~~k_fxstring_init
 11561                        	xref	~~strtok
 11562                        	xref	~~strstr
 11563                        	xref	~~strlen
 11564                        	xref	~~strcpy
 11565                        	xref	~~strcmp
 11566                        	xref	~~strchr
 11567                        	xref	~~strcat
 11568                        	xref	~~memset
 11569                        	udata
 11570                        ~~consoleBuffer
 11571 00:0000:              	ds	8064
 11572 00:1F80:              	ends
 11573                        	udata
 11574                        ~~consolespinctx
 11575 00:1F80:              	ds	6
 11576 00:1F86:              	ends
 11577                        	udata
 11578                        ~~_k_window_list
 11579 00:1F86:              	ds	4880
 11580 00:3296:              	ends
 11581                        	xref	~~EGAFONT
 11582                        	xref	~~_ctype
 11583                        	.sym	~~consoleWindowProc,~~consoleWindowProc,
                    78,2,0
 11584                        	.sym	~~k_set_background,~~k_set_background,65
                    ,2,0
 11585                        	.sym	~~k_scroll_screen,~~k_scroll_screen,65,2
                    ,0
 11586                        	.sym	~~consoleBuffer,~~consoleBuffer,869,3,0,
                    56,72
 11587                        	.sym	~~tokentypeNames,~~tokentypeNames,1134,3
                    ,32,29
 11588                        	.sym	~~cursorCurrentColor,~~cursorCurrentColo
                    r,16,3,16
 11589                        	.sym	~~cursorFlashInterval,~~cursorFlashInter
                    val,16,3,16
 11590                        	.sym	~~consolespinctx,~~consolespinctx,10,3,4
                    8,86
 11591                        	.sym	~~consolespinner,~~consolespinner,110,3,
                    0,4
 11592                        	.sym	~~console_command_proc,~~console_command
                    _proc,5232,3,32,23
 11593                        	.sym	~~console_commands,~~console_commands,11
                    34,3,32,23
 11594                        	.sym	~~_k_window_list,~~_k_window_list,106,3,
                    0,33,10
 11595                        	.sym	~~_k_window_index,~~_k_window_index,5,3,
                    16
 11596                        	.sym	FILE,0,138,14,32,130
 11597                        	.sym	FILE_POINTER,0,10,14,112,130
 11598                        	.sym	PDOSHANDLE,0,138,14,32,129
 11599                        	.sym	DOSHANDLE,0,10,14,80,129
 11600                        	.sym	PFXDOSDEVICE,0,138,14,32,127
 11601                        	.sym	FXDOSDEVICE,0,10,14,5744,127
 11602                        	.sym	DOSINITDEVICE,0,641,14,32
 11603                        	.sym	DOSSECTORWRITER,0,654,14,32
  Mon Sep 27 2021  9:39                                                Page 223


 11604                        	.sym	DOSSECTORREADER,0,654,14,32
 11605                        	.sym	PIDENTIFY_DEVICE_DATA,0,138,14,32,126
 11606                        	.sym	IDENTIFY_DEVICE_DATA,0,10,14,4096,126
 11607                        	.sym	PIDSECTOR,0,138,14,32,103
 11608                        	.sym	IDSECTOR,0,10,14,2048,103
 11609                        	.sym	PLFN,0,138,14,32,102
 11610                        	.sym	LFN,0,10,14,256,102
 11611                        	.sym	PFAT16ENTRYLONG,0,138,14,32,101
 11612                        	.sym	FAT16ENTRYLONG,0,10,14,288,101
 11613                        	.sym	PFAT16ENTRY,0,138,14,32,100
 11614                        	.sym	FAT16ENTRY,0,10,14,256,100
 11615                        	.sym	Fat16BootSector,0,10,14,4096,99
 11616                        	.sym	PPARTITIONTABLE,0,138,14,32,98
 11617                        	.sym	PARTITIONTABLE,0,10,14,128,98
 11618                        	.sym	PFATBOOTSECTOR,0,138,14,32,97
 11619                        	.sym	FATBOOTSECTOR,0,10,14,928,97
 11620                        	.sym	fat_BS_t,0,10,14,688,96
 11621                        	.sym	fat_extBS_16_t,0,10,14,192,95
 11622                        	.sym	PFAT32EXT,0,138,14,32,94
 11623                        	.sym	fat_extBS_32_t,0,10,14,416,94
 11624                        	.sym	P_FX_FAT_DIR_INFO,0,138,14,32,93
 11625                        	.sym	FX_FAT_DIR_INFO,0,10,14,256,93
 11626                        	.sym	PFILEINFO,0,138,14,32,92
 11627                        	.sym	FILEINFO,0,10,14,136,92
 11628                        	.sym	PDISKINFO,0,138,14,32,91
 11629                        	.sym	DISKINFO,0,10,14,416,91
 11630                        	.sym	PDIRENTRY,0,138,14,32,90
 11631                        	.sym	DIRENTRY,0,10,14,256,90
 11632                        	.sym	DRESULT,0,5,14,16
 11633                        	.sym	DSTATUS,0,14,14,8
 11634                        	.sym	~~cmd_LINEUP,~~cmd_LINEUP,80,18,0
 11635                        	.sym	~~cmd_RESUME,~~cmd_RESUME,80,18,0
 11636                        	.sym	~~cmd_PAUSE,~~cmd_PAUSE,80,18,0
 11637                        	.sym	~~cmd_TIME,~~cmd_TIME,80,18,0
 11638                        	.sym	~~cmd_EXIT,~~cmd_EXIT,80,18,0
 11639                        	.sym	~~cmd_START,~~cmd_START,80,18,0
 11640                        	.sym	~~cmd_Window,~~cmd_Window,80,18,0
 11641                        	.sym	~~cmd_SEND,~~cmd_SEND,80,18,0
 11642                        	.sym	~~cmd_DISPLAY,~~cmd_DISPLAY,80,18,0
 11643                        	.sym	~~cmd_CHRDIR,~~cmd_CHRDIR,80,18,0
 11644                        	.sym	~~cmd_TASKS,~~cmd_TASKS,80,18,0
 11645                        	.sym	~~cmd_BACK,~~cmd_BACK,80,18,0
 11646                        	.sym	~~cmd_FRONT,~~cmd_FRONT,80,18,0
 11647                        	.sym	~~cmd_NEWDIR,~~cmd_NEWDIR,80,18,0
 11648                        	.sym	~~cmd_INIT,~~cmd_INIT,80,18,0
 11649                        	.sym	~~cmd_BCOLOR,~~cmd_BCOLOR,80,18,0
 11650                        	.sym	~~cmd_FCOLOR,~~cmd_FCOLOR,80,18,0
 11651                        	.sym	~~cmd_VOL,~~cmd_VOL,80,18,0
 11652                        	.sym	~~cmd_DIR,~~cmd_DIR,80,18,0
 11653                        	.sym	~~cmd_TESTSD,~~cmd_TESTSD,80,18,0
 11654                        	.sym	~~cmd_WORKBENCH,~~cmd_WORKBENCH,80,18,0
 11655                        	.sym	~~cmd_CLEAR,~~cmd_CLEAR,80,18,0
 11656                        	.sym	~~getTokenSig,~~getTokenSig,65,2,0
 11657                        	.sym	~~sig_walk,~~sig_walk,65,2,0
 11658                        	.sym	~~newToken,~~newToken,1098,2,32,88
 11659                        	.sym	~~token_to_string,~~token_to_string,1102
                    ,2,32
 11660                        	.sym	~~tokenize,~~tokenize,1098,2,32,5
  Mon Sep 27 2021  9:39                                                Page 224


 11661                        	.sym	~~DefConsoleProc3,~~DefConsoleProc3,65,2
                    ,0
 11662                        	.sym	~~DefConsoleProc2,~~DefConsoleProc2,65,2
                    ,0
 11663                        	.sym	~~ObjectClicked,~~ObjectClicked,65,2,0
 11664                        	.sym	~~DefConsoleProc,~~DefConsoleProc,65,2,0
 11665                        	.sym	~~k_console_process_command,~~k_console_
                    process_command,65,2,0
 11666                        	.sym	~~k_create_text_window,~~k_create_text_w
                    indow,65,2,0
 11667                        	.sym	~~k_col_console,~~k_col_console,69,2,0
 11668                        	.sym	~~k_row_console,~~k_row_console,69,2,0
 11669                        	.sym	~~k_pos_console,~~k_pos_console,65,2,0
 11670                        	.sym	~~k_clear_console,~~k_clear_console,65,2
                    ,0
 11671                        	.sym	~~k_write_console,~~k_write_console,69,2
                    ,0
 11672                        	.sym	~~k_window_draw,~~k_window_draw,65,2,0
 11673                        	.sym	~~k_text_mode_dialog,~~k_text_mode_dialo
                    g,65,2,0
 11674                        	.sym	~~k_put_color,~~k_put_color,69,2,0
 11675                        	.sym	~~k_put_string_buffer,~~k_put_string_buf
                    fer,69,2,0
 11676                        	.sym	~~k_put_string,~~k_put_string,69,2,0
 11677                        	.sym	~~k_put_char,~~k_put_char,65,2,0
 11678                        	.sym	~~k_clear_screen,~~k_clear_screen,65,2,0
 11679                        	.sym	~~k_set_cursor_position,~~k_set_cursor_p
                    osition,65,2,0
 11680                        	.sym	~~k_enable_text_cursor,~~k_enable_text_c
                    ursor,65,2,0
 11681                        	.sym	~~k_set_text_font_page,~~k_set_text_font
                    _page,65,2,0
 11682                        	.sym	~~k_set_border,~~k_set_border,65,2,0
 11683                        	.sym	~~k_set_border_color,~~k_set_border_colo
                    r,65,2,0
 11684                        	.sym	~~k_disable_border,~~k_disable_border,65
                    ,2,0
 11685                        	.sym	~~k_enable_border,~~k_enable_border,65,2
                    ,0
 11686                        	.sym	~~k_get_lines_max,~~k_get_lines_max,69,2
                    ,0
 11687                        	.sym	~~k_get_lines_visible,~~k_get_lines_visi
                    ble,69,2,0
 11688                        	.sym	~~k_get_cols_per_line,~~k_get_cols_per_l
                    ine,69,2,0
 11689                        	.sym	~~k_get_cols_visible,~~k_get_cols_visibl
                    e,69,2,0
 11690                        	.sym	~~k_initialize_text_fonts,~~k_initialize
                    _text_fonts,69,2,0
 11691                        	.sym	~~k_initialize_text,~~k_initialize_text,
                    65,2,0
 11692                        	.sym	~~k_updatespinner,~~k_updatespinner,65,2
                    ,0
 11693                        	.sym	~~k_init_spinner,~~k_init_spinner,65,2,0
 11694                        	.sym	PCOMMANDARGS,0,138,14,32,89
 11695                        	.sym	COMMANDARGS,0,10,14,64,89
 11696                        	.sym	PTOKENIZESTATE,0,133,14,32
 11697                        	.sym	TOKENIZESTATE,0,5,14,16
  Mon Sep 27 2021  9:39                                                Page 225


 11698                        	.sym	PTOKEN,0,138,14,32,88
 11699                        	.sym	TOKEN,0,10,14,64,88
 11700                        	.sym	PTOKENTYPE,0,133,14,32
 11701                        	.sym	TOKENTYPE,0,5,14,16
 11702                        	.sym	FXCommandHandler,0,656,14,32
 11703                        	.sym	PCONSOLECTX,0,138,14,32,87
 11704                        	.sym	CONSOLECTX,0,10,14,1144,87
 11705                        	.sym	PSPINNERCTX,0,138,14,32,86
 11706                        	.sym	SPINNERCTX,0,10,14,48,86
 11707                        	.sym	HCLIP,0,138,14,32,85
 11708                        	.sym	PCLIPBOARD_DATA,0,138,14,32,85
 11709                        	.sym	CLIPBOARD_DATA,0,10,14,168,85
 11710                        	.sym	~~k_send_process_command_message,~~k_sen
                    d_process_command_message,78,18,0
 11711                        	.sym	~~k_send_message,~~k_send_message,78,18,
                    0
 11712                        	.sym	PEVENTMANAGER,0,138,14,32,84
 11713                        	.sym	EVENTMANAGER,0,10,14,192,84
 11714                        	.sym	EV_RUN,0,656,14,32
 11715                        	.sym	EV_QUERY_METRIC,0,656,14,32
 11716                        	.sym	EV_CONFIGURE,0,656,14,32
 11717                        	.sym	EV_UNINIT,0,641,14,32
 11718                        	.sym	EV_INIT,0,8833,14,32
 11719                        	.sym	PMOUSE_MSG_STATE,0,138,14,32,83
 11720                        	.sym	MOUSE_MSG_STATE,0,10,14,184,83
 11721                        	.sym	PFXEVENTPROCESS,0,138,14,32,82
 11722                        	.sym	FXEVENTPROCESS,0,10,14,64,82
 11723                        	.sym	FXASYNCPROCESS,0,641,14,32
 11724                        	.sym	PMARSHALDATA,0,139,14,32,81
 11725                        	.sym	MARSHALDATA,0,11,14,32,81
 11726                        	.sym	FXIDLEPROCESS,0,641,14,32
 11727                        	.sym	FXEventProc,0,641,14,32
 11728                        	.sym	PMOUSEMSGDATA,0,138,14,32,80
 11729                        	.sym	MOUSEMSGDATA,0,10,14,64,80
 11730                        	.sym	MSGIRQ,0,5,14,16
 11731                        	.sym	MAINLOOPARGS,0,10,14,16,79
 11732                        	.sym	PEACHCHILD_MSG,0,138,14,32,78
 11733                        	.sym	EACHCHILD_MSG,0,10,14,64,78
 11734                        	.sym	PMSGBOX_DATA,0,138,14,32,77
 11735                        	.sym	MSGBOX_DATA,0,10,14,96,77
 11736                        	.sym	PDESKTOP_DATA,0,138,14,32,76
 11737                        	.sym	DESKTOP_DATA,0,10,14,64,76
 11738                        	.sym	PWINDOWMANAGER,0,138,14,32,75
 11739                        	.sym	WINDOWMANAGER,0,10,14,160,75
 11740                        	.sym	WM_DOPROCS,0,641,14,32
 11741                        	.sym	WM_QUERY_METRIC,0,656,14,32
 11742                        	.sym	WM_CONFIGURE,0,656,14,32
 11743                        	.sym	WM_HANDLE_EVENT,0,8833,14,32
 11744                        	.sym	WM_EVENTS,0,641,14,32
 11745                        	.sym	~~k_create_ui_window_class,~~k_create_ui
                    _window_class,1098,18,32,33
 11746                        	.sym	~~k_vdraw_ui_window,~~k_vdraw_ui_window,
                    65,18,0
 11747                        	.sym	~~k_put_winicon_point,~~k_put_winicon_po
                    int,69,18,0
 11748                        	.sym	~~k_window_draw_background,~~k_window_dr
                    aw_background,65,2,0
 11749                        	.sym	~~k_draw_text_point,~~k_draw_text_point,
  Mon Sep 27 2021  9:39                                                Page 226


                    69,18,0
 11750                        	.sym	~~k_put_font,~~k_put_font,65,18,0
 11751                        	.sym	~~setColors,~~setColors,65,18,0
 11752                        	.sym	~~k_enable_text_mode,~~k_enable_text_mod
                    e,65,2,0
 11753                        	.sym	PCUR_PALETTE_MAP,0,138,14,32,74
 11754                        	.sym	CUR_PALETTE_MAP,0,10,14,400,74
 11755                        	.sym	PCLICKDETECTED,0,138,14,32,73
 11756                        	.sym	CLICKDETECTED,0,10,14,64,73
 11757                        	.sym	OBJECTCLICKED,0,641,14,32
 11758                        	.sym	~~EGAFONT,~~EGAFONT,110,18,0,0
 11759                        	.sym	PALLOCATIONHEADER,0,138,14,32,72
 11760                        	.sym	ALLOCATIONHEADER,0,10,14,80,72
 11761                        	.sym	PIPCPORT,0,138,14,32,71
 11762                        	.sym	IPCPORT,0,10,14,144,71
 11763                        	.sym	~~k_mem_deallocate_heap,~~k_mem_dealloca
                    te_heap,65,18,0
 11764                        	.sym	~~k_mem_allocate_heap,~~k_mem_allocate_h
                    eap,1089,18,32
 11765                        	.sym	MemoryCallback,0,641,14,32
 11766                        	.sym	PFXMEMORYMAP,0,138,14,32,70
 11767                        	.sym	FXMEMORYMAP,0,10,14,2072,70
 11768                        	.sym	UMM_HEAP_INFO,0,10,14,256,69
 11769                        	.sym	~~k_exec_get_current_process,~~k_exec_ge
                    t_current_process,1098,18,32,20
 11770                        	.sym	PEXECUTIVE,0,138,14,32,68
 11771                        	.sym	EXECUTIVE,0,10,14,128,68
 11772                        	.sym	EX_QUERY_METRIC,0,656,14,32
 11773                        	.sym	EX_CONFIGURE,0,656,14,32
 11774                        	.sym	EX_UNINIT,0,641,14,32
 11775                        	.sym	EX_INIT,0,8833,14,32
 11776                        	.sym	FRESULT,0,5,14,16
 11777                        	.sym	MKFS_PARM,0,10,14,80,67
 11778                        	.sym	FILINFO,0,10,14,2224,66
 11779                        	.sym	DIR,0,10,14,416,65
 11780                        	.sym	FIL,0,10,14,4400,64
 11781                        	.sym	FFOBJID,0,10,14,128,63
 11782                        	.sym	FATFS,0,10,14,4504,62
 11783                        	.sym	LBA_t,0,18,14,32
 11784                        	.sym	FSIZE_t,0,18,14,32
 11785                        	.sym	TCHAR,0,14,14,8
 11786                        	.sym	~~k_exec_throw_exception,~~k_exec_throw_
                    exception,65,18,0
 11787                        	.sym	PIRQCHAIN,0,138,14,32,61
 11788                        	.sym	IRQCHAIN,0,10,14,128,61
 11789                        	.sym	DEVICEDRIVER_COMMAND,0,654,14,32
 11790                        	.sym	DEVICEDRIVER_UNLOAD,0,654,14,32
 11791                        	.sym	DEVICEDRIVER_WRITE,0,654,14,32
 11792                        	.sym	DEVICEDRIVER_READ,0,654,14,32
 11793                        	.sym	DEVICEDRIVER_LOAD,0,654,14,32
 11794                        	.sym	DEVICEDRIVER_IRQ,0,641,14,32
 11795                        	.sym	PFX_BLOCK_DEVICE_DRIVER,0,138,14,32,60
 11796                        	.sym	FX_BLOCK_DEVICE_DRIVER,0,10,14,808,60
 11797                        	.sym	GETDRIVERDEF,0,8842,14,32,59
 11798                        	.sym	PFX_DEVICE_DRIVER,0,138,14,32,59
 11799                        	.sym	FX_DEVICE_DRIVER,0,10,14,776,59
 11800                        	.sym	~~k_debug_strings,~~k_debug_strings,65,1
                    8,0
  Mon Sep 27 2021  9:39                                                Page 227


 11801                        	.sym	~~k_debug_message,~~k_debug_message,65,1
                    8,0
 11802                        	.sym	~~k_debug_hex,~~k_debug_hex,65,18,0
 11803                        	.sym	~~k_debug_long,~~k_debug_long,65,18,0
 11804                        	.sym	~~k_debug_integer,~~k_debug_integer,65,1
                    8,0
 11805                        	.sym	~~k_debug_pointer,~~k_debug_pointer,65,1
                    8,0
 11806                        	.sym	~~k_debug_char,~~k_debug_char,65,18,0
 11807                        	.sym	~~k_debug_string,~~k_debug_string,65,18,
                    0
 11808                        	.sym	PSEGMENTHEADER,0,138,14,32,58
 11809                        	.sym	SEGMENTHEADER,0,10,14,160,58
 11810                        	.sym	~~k_getZeroPage,~~k_getZeroPage,1098,18,
                    32,55
 11811                        	.sym	PDEBUGBYTEBITS,0,138,14,32,57
 11812                        	.sym	DEBUGBYTEBITS,0,10,14,8,57
 11813                        	.sym	PFXENVIRONMENT,0,138,14,32,56
 11814                        	.sym	FXENVIRONMENT,0,10,14,96,56
 11815                        	.sym	PFXZEROPAGE,0,138,14,32,55
 11816                        	.sym	FXZEROPAGE,0,10,14,720,55
 11817                        	.sym	IRQBUFFER,0,10,14,32,54
 11818                        	.sym	KERNELTRAPCALL,0,641,14,32
 11819                        	.sym	PFXKERNEL_API_CALLTABLE,0,138,14,32,53
 11820                        	.sym	FXKERNEL_API_CALLTABLE,0,10,14,8192,53
 11821                        	.sym	~~k_nodelist_foreach_data,~~k_nodelist_f
                    oreach_data,65,18,0
 11822                        	.sym	FOREACHNODEUNTIL,0,654,14,32
 11823                        	.sym	FOREACHNODE,0,641,14,32
 11824                        	.sym	~~k_nodelist_add,~~k_nodelist_add,65,18,
                    0
 11825                        	.sym	~~k_nodelist_create,~~k_nodelist_create,
                    1098,18,32,5
 11826                        	.sym	~~k_nodelist_init,~~k_nodelist_init,1098
                    ,18,32,5
 11827                        	.sym	~~_ctype,~~_ctype,110,18,0,0
 11828                        	.sym	~~k_to_uppercase,~~k_to_uppercase,1102,1
                    8,32
 11829                        	.sym	~~k_string_copy_string,~~k_string_copy_s
                    tring,1102,18,32
 11830                        	.sym	~~k_string_toString,~~k_string_toString,
                    1102,18,32
 11831                        	.sym	~~k_string_indexOf,~~k_string_indexOf,69
                    ,18,0
 11832                        	.sym	~~k_fxstring_equals,~~k_fxstring_equals,
                    78,18,0
 11833                        	.sym	~~k_fxstring_copy_string,~~k_fxstring_co
                    py_string,1102,18,32
 11834                        	.sym	~~k_fxstring_add,~~k_fxstring_add,1102,1
                    8,32
 11835                        	.sym	~~k_fxstring_addchar,~~k_fxstring_addcha
                    r,1102,18,32
 11836                        	.sym	~~k_fxstring_reinit,~~k_fxstring_reinit,
                    1098,18,32,52
 11837                        	.sym	~~k_fxstring_new,~~k_fxstring_new,1098,1
                    8,32,52
 11838                        	.sym	~~k_fxstring_init,~~k_fxstring_init,1098
                    ,18,32,52
  Mon Sep 27 2021  9:39                                                Page 228


 11839                        	.sym	PFXSTRING,0,138,14,32,52
 11840                        	.sym	FXSTRING,0,10,14,64,52
 11841                        	.sym	PFXRFHEADER_STRING_ENTRY,0,138,14,32,51
 11842                        	.sym	FXRFHEADER_STRING_ENTRY,0,10,14,40,51
 11843                        	.sym	PFXRFHEADER_STRING,0,138,14,32,50
 11844                        	.sym	FXRFHEADER_STRING,0,10,14,32,50
 11845                        	.sym	PFXRFHEADER_FONT,0,138,14,32,49
 11846                        	.sym	FXRFHEADER_FONT,0,10,14,144,49
 11847                        	.sym	PFXRFHEADER,0,138,14,32,48
 11848                        	.sym	FXRFHEADER,0,10,14,72,48
 11849                        	.sym	PFXCOMBUFFER,0,138,14,32,47
 11850                        	.sym	FXCOMBUFFER,0,10,14,2080,47
 11851                        	.sym	PSUBMENULIST,0,138,14,32,46
 11852                        	.sym	SUBMENULIST,0,10,14,40,46
 11853                        	.sym	HSUBMENU,0,7,14,32
 11854                        	.sym	PSUBMENU,0,138,14,32,45
 11855                        	.sym	SUBMENU,0,10,14,64,45
 11856                        	.sym	MenuAction,0,641,14,32
 11857                        	.sym	PMENUANCHOR,0,138,14,32,44
 11858                        	.sym	MENUANCHOR,0,10,14,272,44
 11859                        	.sym	PMSGBOX,0,138,14,32,43
 11860                        	.sym	MSGBOX,0,10,14,144,43
 11861                        	.sym	PTEXTBOX,0,138,14,32,42
 11862                        	.sym	TEXTBOX,0,10,14,144,42
 11863                        	.sym	PLISTBOX,0,138,14,32,41
 11864                        	.sym	LISTBOX,0,10,14,240,41
 11865                        	.sym	PSCROLLBAR,0,138,14,32,40
 11866                        	.sym	SCROLLBAR,0,10,14,240,40
 11867                        	.sym	PBUTTON,0,138,14,32,39
 11868                        	.sym	BUTTON,0,10,14,96,39
 11869                        	.sym	PMENUDROPDOWNDATA,0,138,14,32,38
 11870                        	.sym	MENUDROPDOWNDATA,0,10,14,5152,38
 11871                        	.sym	PMENUTAG,0,138,14,32,37
 11872                        	.sym	MENUTAG,0,10,14,160,37
 11873                        	.sym	PMENU,0,138,14,32,36
 11874                        	.sym	MENU,0,10,14,280,36
 11875                        	.sym	HMENURESOURCE,0,129,14,32
 11876                        	.sym	FONTMETRIC,0,10,14,32,35
 11877                        	.sym	TITLE,0,142,14,32
 11878                        	.sym	PHANDLE,0,1153,14,32
 11879                        	.sym	HANDLE,0,129,14,32
 11880                        	.sym	PWINDOWEX,0,138,14,32,34
 11881                        	.sym	WINDOWEX,0,10,14,3880,34
 11882                        	.sym	PWINDOW,0,138,14,32,33
 11883                        	.sym	WINDOW,0,10,14,3904,33
 11884                        	.sym	PDRAGDATA,0,138,14,32,32
 11885                        	.sym	DRAGDATA,0,10,14,216,32
 11886                        	.sym	PNCCLICKABLE,0,138,14,32,31
 11887                        	.sym	NCCLICKABLE,0,10,14,136,31
 11888                        	.sym	HCLICKABLE,0,7,14,32
 11889                        	.sym	PCLICKABLE,0,138,14,32,30
 11890                        	.sym	CLICKABLE,0,10,14,152,30
 11891                        	.sym	PWNDCLASS,0,138,14,32,29
 11892                        	.sym	WNDCLASS,0,10,14,272,29
 11893                        	.sym	HBRUSH,0,129,14,32
 11894                        	.sym	HCURSOR,0,129,14,32
 11895                        	.sym	HICON,0,129,14,32
 11896                        	.sym	HINSTANCE,0,129,14,32
  Mon Sep 27 2021  9:39                                                Page 229


 11897                        	.sym	FXWndProc,0,654,14,32
 11898                        	.sym	PDRECT,0,138,14,32,28
 11899                        	.sym	DRECT,0,10,14,112,28
 11900                        	.sym	PRECTP,0,138,14,32,27
 11901                        	.sym	RECTP,0,10,14,96,27
 11902                        	.sym	PRECT,0,138,14,32,26
 11903                        	.sym	RECT,0,10,14,112,26
 11904                        	.sym	PPOINT,0,138,14,32,25
 11905                        	.sym	POINT,0,10,14,32,25
 11906                        	.sym	PFXPROPERTY,0,138,14,32,23
 11907                        	.sym	FXPROPERTY,0,10,14,384,23
 11908                        	.sym	PKEYSTATE,0,138,14,32,22
 11909                        	.sym	KEYSTATE,0,10,14,112,22
 11910                        	.sym	SCANCODE,0,14,14,8
 11911                        	.sym	KEYCODE,0,16,14,16
 11912                        	.sym	PFXPROCESSMESSAGE,0,138,14,32,21
 11913                        	.sym	FXPROCESSMESSAGE,0,10,14,112,21
 11914                        	.sym	PFXPROCESS,0,138,14,32,20
 11915                        	.sym	FXPROCESS,0,10,14,800,20
 11916                        	.sym	PDESKTOP_CONTROL,0,138,14,32,19
 11917                        	.sym	DESKTOP_CONTROL,0,10,14,392,19
 11918                        	.sym	PCONSOLE_CONTROL,0,138,14,32,18
 11919                        	.sym	CONSOLE_CONTROL,0,10,14,448,18
 11920                        	.sym	FXProcessProc,0,641,14,32
 11921                        	.sym	PFXCMDMESSAGE,0,138,14,32,17
 11922                        	.sym	FXCMDMESSAGE,0,10,14,312,17
 11923                        	.sym	PFXOSMESSAGE,0,138,14,32,16
 11924                        	.sym	FXOSMESSAGE,0,10,14,312,16
 11925                        	.sym	PINT_REGS,0,138,14,32,15
 11926                        	.sym	INT_REGS,0,10,14,104,15
 11927                        	.sym	TASK_STACK,0,10,14,32,14
 11928                        	.sym	TASK,0,10,14,48,13
 11929                        	.sym	PIRQDATA,0,138,14,32,12
 11930                        	.sym	IRQDATA,0,10,14,48,12
 11931                        	.sym	HMENU,0,129,14,32
 11932                        	.sym	HWND,0,129,14,32
 11933                        	.sym	MSGDATA,0,14,14,8
 11934                        	.sym	MSGDEST,0,18,14,32
 11935                        	.sym	MSGSRC,0,18,14,32
 11936                        	.sym	MSGTYPE,0,16,14,16
 11937                        	.sym	PROCESS_RESOURCE_LIST,0,138,14,32,6
 11938                        	.sym	PROCESS_TLS_LIST,0,138,14,32,6
 11939                        	.sym	SEMAPHORE_LIST,0,138,14,32,6
 11940                        	.sym	FILE_BLOCK_LIST,0,138,14,32,6
 11941                        	.sym	FILE_PATH_LIST,0,138,14,32,6
 11942                        	.sym	PROCEDURE_LIST,0,138,14,32,6
 11943                        	.sym	FILE_HANDLE,0,138,14,32,11
 11944                        	.sym	FILE_BLOCK,0,10,14,552,11
 11945                        	.sym	SEMAPHORE,0,10,14,16,10
 11946                        	.sym	PPROCESS_SIGNAL,0,138,14,32,9
 11947                        	.sym	PROCESS_SIGNAL,0,10,14,16,9
 11948                        	.sym	KRESULT,0,18,14,32
 11949                        	.sym	PKERNEL_ERROR,0,138,14,32,8
 11950                        	.sym	KERNEL_ERROR,0,10,14,32,8
 11951                        	.sym	PROCESS_STATUS,0,16,14,16
 11952                        	.sym	FILE_PATH_NAME,0,142,14,32
 11953                        	.sym	PROCESS_RESOURCE,0,129,14,32
 11954                        	.sym	PROCESS_TLS,0,129,14,32
  Mon Sep 27 2021  9:39                                                Page 230


 11955                        	.sym	PROCESS_CTX,0,129,14,32
 11956                        	.sym	USERID,0,16,14,16
 11957                        	.sym	PROCESS_ID,0,18,14,32
 11958                        	.sym	PROCESS_BANK,0,14,14,8
 11959                        	.sym	PFXQUEUE,0,138,14,32,7
 11960                        	.sym	FXQUEUE,0,10,14,80,7
 11961                        	.sym	PFXNODELIST,0,138,14,32,6
 11962                        	.sym	FXNODELIST,0,10,14,96,6
 11963                        	.sym	NodeListDeallocator,0,641,14,32
 11964                        	.sym	PFXNODE,0,138,14,32,5
 11965                        	.sym	FXNODE,0,10,14,384,5
 11966                        	.sym	PBYTEBITS,0,138,14,32,4
 11967                        	.sym	BYTEBITS,0,10,14,8,4
 11968                        	.sym	HRESULT,0,18,14,32
 11969                        	.sym	LPWCHAR,0,144,14,32
 11970                        	.sym	WCHAR,0,16,14,16
 11971                        	.sym	HSTRINGTABLE,0,129,14,32
 11972                        	.sym	HCOLOR,0,129,14,32
 11973                        	.sym	HFONT,0,129,14,32
 11974                        	.sym	HDC,0,129,14,32
 11975                        	.sym	HPOINTER,0,129,14,32
 11976                        	.sym	uint32_t,0,18,14,32
 11977                        	.sym	uint8_t,0,14,14,8
 11978                        	.sym	LPBOOL,0,142,14,32
 11979                        	.sym	BOOL,0,14,14,8
 11980                        	.sym	DWORD,0,18,14,32
 11981                        	.sym	ULONG,0,18,14,32
 11982                        	.sym	LPLONG,0,135,14,32
 11983                        	.sym	LONG,0,7,14,32
 11984                        	.sym	PUINT,0,144,14,32
 11985                        	.sym	USHORT,0,16,14,16
 11986                        	.sym	UINT,0,16,14,16
 11987                        	.sym	INT,0,5,14,16
 11988                        	.sym	WORD,0,5,14,16
 11989                        	.sym	PBYTE,0,142,14,32
 11990                        	.sym	BYTE,0,14,14,8
 11991                        	.sym	IOPORT,0,142,14,32
 11992                        	.sym	PUCHAR,0,142,14,32
 11993                        	.sym	UCHAR,0,14,14,8
 11994                        	.sym	LPWCSTR,0,142,14,32
 11995                        	.sym	LPCSTR,0,142,14,32
 11996                        	.sym	LPSTR,0,142,14,32
 11997                        	.sym	LPCHAR,0,142,14,32
 11998                        	.sym	CHAR,0,14,14,8
 11999                        	.sym	PUINT_32,0,146,14,32
 12000                        	.sym	UINT_32,0,18,14,32
 12001                        	.sym	PUINT_16,0,144,14,32
 12002                        	.sym	UINT_16,0,16,14,16
 12003                        	.sym	PUINT_8,0,142,14,32
 12004                        	.sym	UINT_8,0,14,14,8
 12005                        	.sym	LPVOID,0,129,14,32
 12006                        	.sym	VOID,0,1,14,32
 12007                        	.sym	ldiv_t,0,10,14,64,2
 12008                        	.sym	div_t,0,10,14,32,1
 12009                        	.sym	wctype_t,0,16,14,16
 12010                        	.sym	wint_t,0,16,14,16
 12011                        	.sym	wchar_t,0,14,14,8
 12012                        	.sym	ptrdiff_t,0,7,14,32
  Mon Sep 27 2021  9:39                                                Page 231


 12013                        	.sym	~~strtok,~~strtok,1102,18,32
 12014                        	.sym	~~strstr,~~strstr,1102,18,32
 12015                        	.sym	~~strlen,~~strlen,80,18,0
 12016                        	.sym	~~strcpy,~~strcpy,1102,18,32
 12017                        	.sym	~~strcmp,~~strcmp,69,18,0
 12018                        	.sym	~~strchr,~~strchr,1102,18,32
 12019                        	.sym	~~strcat,~~strcat,1102,18,32
 12020                        	.sym	~~memset,~~memset,1089,18,32
 12021                        	.sym	Boolean_T,0,5,14,16
 12022                        	.sym	size_t,0,16,14,16
 12023                        	end


      Lines assembled: 12023
      Errors: 0
